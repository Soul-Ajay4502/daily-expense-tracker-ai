/*! For license information please see main.657ccad0.js.LICENSE.txt */
(()=>{var e={446:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",i="second",o="minute",a="hour",s="day",l="week",u="month",c="quarter",h="year",d="date",p="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},y=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},v={s:y,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+y(r,2,"0")+":"+y(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,u),o=n-i<0,a=t.clone().add(r+(o?-1:1),u);return+(-(r+(n-i)/(o?i-a:a-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:u,y:h,w:l,d:s,D:d,h:a,m:o,s:i,ms:r,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},b="en",x={};x[b]=g;var w="$isDayjsObject",k=function(e){return e instanceof T||!(!e||!e[w])},S=function e(t,n,r){var i;if(!t)return b;if("string"==typeof t){var o=t.toLowerCase();x[o]&&(i=o),n&&(x[o]=n,i=o);var a=t.split("-");if(!i&&a.length>1)return e(a[0])}else{var s=t.name;x[s]=t,i=s}return!r&&i&&(b=i),i||!r&&b},E=function(e,t){if(k(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new T(n)},I=v;I.l=S,I.i=k,I.w=function(e,t){return E(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var T=function(){function g(e){this.$L=S(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[w]=!0}var y=g.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(I.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(f);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(t)}(e),this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return I},y.isValid=function(){return!(this.$d.toString()===p)},y.isSame=function(e,t){var n=E(e);return this.startOf(t)<=n&&n<=this.endOf(t)},y.isAfter=function(e,t){return E(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<E(e)},y.$g=function(e,t,n){return I.u(e)?this[t]:this.set(n,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,t){var n=this,r=!!I.u(t)||t,c=I.p(e),p=function(e,t){var i=I.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?i:i.endOf(s)},f=function(e,t){return I.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},m=this.$W,g=this.$M,y=this.$D,v="set"+(this.$u?"UTC":"");switch(c){case h:return r?p(1,0):p(31,11);case u:return r?p(1,g):p(0,g+1);case l:var b=this.$locale().weekStart||0,x=(m<b?m+7:m)-b;return p(r?y-x:y+(6-x),g);case s:case d:return f(v+"Hours",0);case a:return f(v+"Minutes",1);case o:return f(v+"Seconds",2);case i:return f(v+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,t){var n,l=I.p(e),c="set"+(this.$u?"UTC":""),p=(n={},n[s]=c+"Date",n[d]=c+"Date",n[u]=c+"Month",n[h]=c+"FullYear",n[a]=c+"Hours",n[o]=c+"Minutes",n[i]=c+"Seconds",n[r]=c+"Milliseconds",n)[l],f=l===s?this.$D+(t-this.$W):t;if(l===u||l===h){var m=this.clone().set(d,1);m.$d[p](f),m.init(),this.$d=m.set(d,Math.min(this.$D,m.daysInMonth())).$d}else p&&this.$d[p](f);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[I.p(e)]()},y.add=function(r,c){var d,p=this;r=Number(r);var f=I.p(c),m=function(e){var t=E(p);return I.w(t.date(t.date()+Math.round(e*r)),p)};if(f===u)return this.set(u,this.$M+r);if(f===h)return this.set(h,this.$y+r);if(f===s)return m(1);if(f===l)return m(7);var g=(d={},d[o]=t,d[a]=n,d[i]=e,d)[f]||1,y=this.$d.getTime()+r*g;return I.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||p;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=I.z(this),o=this.$H,a=this.$m,s=this.$M,l=n.weekdays,u=n.months,c=n.meridiem,h=function(e,n,i,o){return e&&(e[n]||e(t,r))||i[n].slice(0,o)},d=function(e){return I.s(o%12||12,e,"0")},f=c||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(m,(function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return I.s(t.$y,4,"0");case"M":return s+1;case"MM":return I.s(s+1,2,"0");case"MMM":return h(n.monthsShort,s,u,3);case"MMMM":return h(u,s);case"D":return t.$D;case"DD":return I.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return h(n.weekdaysMin,t.$W,l,2);case"ddd":return h(n.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(o);case"HH":return I.s(o,2,"0");case"h":return d(1);case"hh":return d(2);case"a":return f(o,a,!0);case"A":return f(o,a,!1);case"m":return String(a);case"mm":return I.s(a,2,"0");case"s":return String(t.$s);case"ss":return I.s(t.$s,2,"0");case"SSS":return I.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(r,d,p){var f,m=this,g=I.p(d),y=E(r),v=(y.utcOffset()-this.utcOffset())*t,b=this-y,x=function(){return I.m(m,y)};switch(g){case h:f=x()/12;break;case u:f=x();break;case c:f=x()/3;break;case l:f=(b-v)/6048e5;break;case s:f=(b-v)/864e5;break;case a:f=b/n;break;case o:f=b/t;break;case i:f=b/e;break;default:f=b}return p?f:I.a(f)},y.daysInMonth=function(){return this.endOf(u).$D},y.$locale=function(){return x[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=S(e,t,!0);return r&&(n.$L=r),n},y.clone=function(){return I.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},g}(),C=T.prototype;return E.prototype=C,[["$ms",r],["$s",i],["$m",o],["$H",a],["$W",s],["$M",u],["$y",h],["$D",d]].forEach((function(e){C[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),E.extend=function(e,t){return e.$i||(e(t,T,E),e.$i=!0),E},E.locale=S,E.isDayjs=k,E.unix=function(e){return E(1e3*e)},E.en=x[b],E.Ls=x,E.p={},E}()},8210:function(e,t,n){var r;!function(){"use strict";var i,o=1e9,a={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},s=!0,l="[DecimalError] ",u=l+"Invalid argument: ",c=l+"Exponent out of range: ",h=Math.floor,d=Math.pow,p=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,f=1e7,m=9007199254740991,g=h(1286742750677284.5),y={};function v(e,t){var n,r,i,o,a,l,u,c,h=e.constructor,d=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),s?A(t,d):t;if(u=e.d,c=t.d,a=e.e,i=t.e,u=u.slice(),o=a-i){for(o<0?(r=u,o=-o,l=c.length):(r=c,i=a,l=u.length),o>(l=(a=Math.ceil(d/7))>l?a+1:l+1)&&(o=l,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for((l=u.length)-(o=c.length)<0&&(o=l,r=c,c=u,u=r),n=0;o;)n=(u[--o]=u[o]+c[o]+n)/f|0,u[o]%=f;for(n&&(u.unshift(n),++i),l=u.length;0==u[--l];)u.pop();return t.d=u,t.e=i,s?A(t,d):t}function b(e,t,n){if(e!==~~e||e<t||e>n)throw Error(u+e)}function x(e){var t,n,r,i=e.length-1,o="",a=e[0];if(i>0){for(o+=a,t=1;t<i;t++)(n=7-(r=e[t]+"").length)&&(o+=I(n)),o+=r;(n=7-(r=(a=e[t])+"").length)&&(o+=I(n))}else if(0===a)return"0";for(;a%10===0;)a/=10;return o+a}y.absoluteValue=y.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},y.comparedTo=y.cmp=function(e){var t,n,r,i,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(t=0,n=(r=o.d.length)<(i=e.d.length)?r:i;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1},y.decimalPlaces=y.dp=function(){var e=this,t=e.d.length-1,n=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)n--;return n<0?0:n},y.dividedBy=y.div=function(e){return w(this,new this.constructor(e))},y.dividedToIntegerBy=y.idiv=function(e){var t=this.constructor;return A(w(this,new t(e),0,1),t.precision)},y.equals=y.eq=function(e){return!this.cmp(e)},y.exponent=function(){return S(this)},y.greaterThan=y.gt=function(e){return this.cmp(e)>0},y.greaterThanOrEqualTo=y.gte=function(e){return this.cmp(e)>=0},y.isInteger=y.isint=function(){return this.e>this.d.length-2},y.isNegative=y.isneg=function(){return this.s<0},y.isPositive=y.ispos=function(){return this.s>0},y.isZero=function(){return 0===this.s},y.lessThan=y.lt=function(e){return this.cmp(e)<0},y.lessThanOrEqualTo=y.lte=function(e){return this.cmp(e)<1},y.logarithm=y.log=function(e){var t,n=this,r=n.constructor,o=r.precision,a=o+5;if(void 0===e)e=new r(10);else if((e=new r(e)).s<1||e.eq(i))throw Error(l+"NaN");if(n.s<1)throw Error(l+(n.s?"NaN":"-Infinity"));return n.eq(i)?new r(0):(s=!1,t=w(T(n,a),T(e,a),a),s=!0,A(t,o))},y.minus=y.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?_(t,e):v(t,(e.s=-e.s,e))},y.modulo=y.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(!(e=new r(e)).s)throw Error(l+"NaN");return n.s?(s=!1,t=w(n,e,0,1).times(e),s=!0,n.minus(t)):A(new r(n),i)},y.naturalExponential=y.exp=function(){return k(this)},y.naturalLogarithm=y.ln=function(){return T(this)},y.negated=y.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},y.plus=y.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?v(t,e):_(t,(e.s=-e.s,e))},y.precision=y.sd=function(e){var t,n,r,i=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(u+e);if(t=S(i)+1,n=7*(r=i.d.length-1)+1,r=i.d[r]){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},y.squareRoot=y.sqrt=function(){var e,t,n,r,i,o,a,u=this,c=u.constructor;if(u.s<1){if(!u.s)return new c(0);throw Error(l+"NaN")}for(e=S(u),s=!1,0==(i=Math.sqrt(+u))||i==1/0?(((t=x(u.d)).length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=h((e+1)/2)-(e<0||e%2),r=new c(t=i==1/0?"5e"+e:(t=i.toExponential()).slice(0,t.indexOf("e")+1)+e)):r=new c(i.toString()),i=a=(n=c.precision)+3;;)if(r=(o=r).plus(w(u,o,a+2)).times(.5),x(o.d).slice(0,a)===(t=x(r.d)).slice(0,a)){if(t=t.slice(a-3,a+1),i==a&&"4999"==t){if(A(o,n+1,0),o.times(o).eq(u)){r=o;break}}else if("9999"!=t)break;a+=4}return s=!0,A(r,n)},y.times=y.mul=function(e){var t,n,r,i,o,a,l,u,c,h=this,d=h.constructor,p=h.d,m=(e=new d(e)).d;if(!h.s||!e.s)return new d(0);for(e.s*=h.s,n=h.e+e.e,(u=p.length)<(c=m.length)&&(o=p,p=m,m=o,a=u,u=c,c=a),o=[],r=a=u+c;r--;)o.push(0);for(r=c;--r>=0;){for(t=0,i=u+r;i>r;)l=o[i]+m[r]*p[i-r-1]+t,o[i--]=l%f|0,t=l/f|0;o[i]=(o[i]+t)%f|0}for(;!o[--a];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,s?A(e,d.precision):e},y.toDecimalPlaces=y.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(b(e,0,o),void 0===t?t=r.rounding:b(t,0,8),A(n,e+S(n)+1,t))},y.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=N(r,!0):(b(e,0,o),void 0===t?t=i.rounding:b(t,0,8),n=N(r=A(new i(r),e+1,t),!0,e+1)),n},y.toFixed=function(e,t){var n,r,i=this,a=i.constructor;return void 0===e?N(i):(b(e,0,o),void 0===t?t=a.rounding:b(t,0,8),n=N((r=A(new a(i),e+S(i)+1,t)).abs(),!1,e+S(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)},y.toInteger=y.toint=function(){var e=this,t=e.constructor;return A(new t(e),S(e)+1,t.rounding)},y.toNumber=function(){return+this},y.toPower=y.pow=function(e){var t,n,r,o,a,u,c=this,d=c.constructor,p=+(e=new d(e));if(!e.s)return new d(i);if(!(c=new d(c)).s){if(e.s<1)throw Error(l+"Infinity");return c}if(c.eq(i))return c;if(r=d.precision,e.eq(i))return A(c,r);if(u=(t=e.e)>=(n=e.d.length-1),a=c.s,u){if((n=p<0?-p:p)<=m){for(o=new d(i),t=Math.ceil(r/7+4),s=!1;n%2&&O((o=o.times(c)).d,t),0!==(n=h(n/2));)O((c=c.times(c)).d,t);return s=!0,e.s<0?new d(i).div(o):A(o,r)}}else if(a<0)throw Error(l+"NaN");return a=a<0&&1&e.d[Math.max(t,n)]?-1:1,c.s=1,s=!1,o=e.times(T(c,r+12)),s=!0,(o=k(o)).s=a,o},y.toPrecision=function(e,t){var n,r,i=this,a=i.constructor;return void 0===e?r=N(i,(n=S(i))<=a.toExpNeg||n>=a.toExpPos):(b(e,1,o),void 0===t?t=a.rounding:b(t,0,8),r=N(i=A(new a(i),e,t),e<=(n=S(i))||n<=a.toExpNeg,e)),r},y.toSignificantDigits=y.tosd=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(b(e,1,o),void 0===t?t=n.rounding:b(t,0,8)),A(new n(this),e,t)},y.toString=y.valueOf=y.val=y.toJSON=function(){var e=this,t=S(e),n=e.constructor;return N(e,t<=n.toExpNeg||t>=n.toExpPos)};var w=function(){function e(e,t){var n,r=0,i=e.length;for(e=e.slice();i--;)n=e[i]*t+r,e[i]=n%f|0,r=n/f|0;return r&&e.unshift(r),e}function t(e,t,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function n(e,t,n){for(var r=0;n--;)e[n]-=r,r=e[n]<t[n]?1:0,e[n]=r*f+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,o,a){var s,u,c,h,d,p,m,g,y,v,b,x,w,k,E,I,T,C,_=r.constructor,N=r.s==i.s?1:-1,O=r.d,R=i.d;if(!r.s)return new _(r);if(!i.s)throw Error(l+"Division by zero");for(u=r.e-i.e,T=R.length,E=O.length,g=(m=new _(N)).d=[],c=0;R[c]==(O[c]||0);)++c;if(R[c]>(O[c]||0)&&--u,(x=null==o?o=_.precision:a?o+(S(r)-S(i))+1:o)<0)return new _(0);if(x=x/7+2|0,c=0,1==T)for(h=0,R=R[0],x++;(c<E||h)&&x--;c++)w=h*f+(O[c]||0),g[c]=w/R|0,h=w%R|0;else{for((h=f/(R[0]+1)|0)>1&&(R=e(R,h),O=e(O,h),T=R.length,E=O.length),k=T,v=(y=O.slice(0,T)).length;v<T;)y[v++]=0;(C=R.slice()).unshift(0),I=R[0],R[1]>=f/2&&++I;do{h=0,(s=t(R,y,T,v))<0?(b=y[0],T!=v&&(b=b*f+(y[1]||0)),(h=b/I|0)>1?(h>=f&&(h=f-1),1==(s=t(d=e(R,h),y,p=d.length,v=y.length))&&(h--,n(d,T<p?C:R,p))):(0==h&&(s=h=1),d=R.slice()),(p=d.length)<v&&d.unshift(0),n(y,d,v),-1==s&&(s=t(R,y,T,v=y.length))<1&&(h++,n(y,T<v?C:R,v)),v=y.length):0===s&&(h++,y=[0]),g[c++]=h,s&&y[0]?y[v++]=O[k]||0:(y=[O[k]],v=1)}while((k++<E||void 0!==y[0])&&x--)}return g[0]||g.shift(),m.e=u,A(m,a?o+S(m)+1:o)}}();function k(e,t){var n,r,o,a,l,u=0,h=0,p=e.constructor,f=p.precision;if(S(e)>16)throw Error(c+S(e));if(!e.s)return new p(i);for(null==t?(s=!1,l=f):l=t,a=new p(.03125);e.abs().gte(.1);)e=e.times(a),h+=5;for(l+=Math.log(d(2,h))/Math.LN10*2+5|0,n=r=o=new p(i),p.precision=l;;){if(r=A(r.times(e),l),n=n.times(++u),x((a=o.plus(w(r,n,l))).d).slice(0,l)===x(o.d).slice(0,l)){for(;h--;)o=A(o.times(o),l);return p.precision=f,null==t?(s=!0,A(o,f)):o}o=a}}function S(e){for(var t=7*e.e,n=e.d[0];n>=10;n/=10)t++;return t}function E(e,t,n){if(t>e.LN10.sd())throw s=!0,n&&(e.precision=n),Error(l+"LN10 precision limit exceeded");return A(new e(e.LN10),t)}function I(e){for(var t="";e--;)t+="0";return t}function T(e,t){var n,r,o,a,u,c,h,d,p,f=1,m=e,g=m.d,y=m.constructor,v=y.precision;if(m.s<1)throw Error(l+(m.s?"NaN":"-Infinity"));if(m.eq(i))return new y(0);if(null==t?(s=!1,d=v):d=t,m.eq(10))return null==t&&(s=!0),E(y,d);if(d+=10,y.precision=d,r=(n=x(g)).charAt(0),a=S(m),!(Math.abs(a)<15e14))return h=E(y,d+2,v).times(a+""),m=T(new y(r+"."+n.slice(1)),d-10).plus(h),y.precision=v,null==t?(s=!0,A(m,v)):m;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=x((m=m.times(e)).d)).charAt(0),f++;for(a=S(m),r>1?(m=new y("0."+n),a++):m=new y(r+"."+n.slice(1)),c=u=m=w(m.minus(i),m.plus(i),d),p=A(m.times(m),d),o=3;;){if(u=A(u.times(p),d),x((h=c.plus(w(u,new y(o),d))).d).slice(0,d)===x(c.d).slice(0,d))return c=c.times(2),0!==a&&(c=c.plus(E(y,d+2,v).times(a+""))),c=w(c,new y(f),d),y.precision=v,null==t?(s=!0,A(c,v)):c;c=h,o+=2}}function C(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);)++r;for(i=t.length;48===t.charCodeAt(i-1);)--i;if(t=t.slice(r,i)){if(i-=r,n=n-r-1,e.e=h(n/7),e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),s&&(e.e>g||e.e<-g))throw Error(c+n)}else e.s=0,e.e=0,e.d=[0];return e}function A(e,t,n){var r,i,o,a,l,u,p,m,y=e.d;for(a=1,o=y[0];o>=10;o/=10)a++;if((r=t-a)<0)r+=7,i=t,p=y[m=0];else{if((m=Math.ceil((r+1)/7))>=(o=y.length))return e;for(p=o=y[m],a=1;o>=10;o/=10)a++;i=(r%=7)-7+a}if(void 0!==n&&(l=p/(o=d(10,a-i-1))%10|0,u=t<0||void 0!==y[m+1]||p%o,u=n<4?(l||u)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||u||6==n&&(r>0?i>0?p/d(10,a-i):0:y[m-1])%10&1||n==(e.s<0?8:7))),t<1||!y[0])return u?(o=S(e),y.length=1,t=t-o-1,y[0]=d(10,(7-t%7)%7),e.e=h(-t/7)||0):(y.length=1,y[0]=e.e=e.s=0),e;if(0==r?(y.length=m,o=1,m--):(y.length=m+1,o=d(10,7-r),y[m]=i>0?(p/d(10,a-i)%d(10,i)|0)*o:0),u)for(;;){if(0==m){(y[0]+=o)==f&&(y[0]=1,++e.e);break}if(y[m]+=o,y[m]!=f)break;y[m--]=0,o=1}for(r=y.length;0===y[--r];)y.pop();if(s&&(e.e>g||e.e<-g))throw Error(c+S(e));return e}function _(e,t){var n,r,i,o,a,l,u,c,h,d,p=e.constructor,m=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),s?A(t,m):t;if(u=e.d,d=t.d,r=t.e,c=e.e,u=u.slice(),a=c-r){for((h=a<0)?(n=u,a=-a,l=d.length):(n=d,r=c,l=u.length),a>(i=Math.max(Math.ceil(m/7),l)+2)&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for((h=(i=u.length)<(l=d.length))&&(l=i),i=0;i<l;i++)if(u[i]!=d[i]){h=u[i]<d[i];break}a=0}for(h&&(n=u,u=d,d=n,t.s=-t.s),l=u.length,i=d.length-l;i>0;--i)u[l++]=0;for(i=d.length;i>a;){if(u[--i]<d[i]){for(o=i;o&&0===u[--o];)u[o]=f-1;--u[o],u[i]+=f}u[i]-=d[i]}for(;0===u[--l];)u.pop();for(;0===u[0];u.shift())--r;return u[0]?(t.d=u,t.e=r,s?A(t,m):t):new p(0)}function N(e,t,n){var r,i=S(e),o=x(e.d),a=o.length;return t?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+I(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+I(-i-1)+o,n&&(r=n-a)>0&&(o+=I(r))):i>=a?(o+=I(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+I(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=I(r))),e.s<0?"-"+o:o}function O(e,t){if(e.length>t)return e.length=t,!0}function R(e){if(!e||"object"!==typeof e)throw Error(l+"Object expected");var t,n,r,i=["precision",1,o,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if(void 0!==(r=e[n=i[t]])){if(!(h(r)===r&&r>=i[t+1]&&r<=i[t+2]))throw Error(u+n+": "+r);this[n]=r}if(void 0!==(r=e[n="LN10"])){if(r!=Math.LN10)throw Error(u+n+": "+r);this[n]=new this(r)}return this}a=function e(t){var n,r,i;function o(e){var t=this;if(!(t instanceof o))return new o(e);if(t.constructor=o,e instanceof o)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"===typeof e){if(0*e!==0)throw Error(u+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):C(t,e.toString())}if("string"!==typeof e)throw Error(u+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!p.test(e))throw Error(u+e);C(t,e)}if(o.prototype=y,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=e,o.config=o.set=R,void 0===t&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return o.config(t),o}(a),a.default=a.Decimal=a,i=new a(1),void 0===(r=function(){return a}.call(t,n,t,e))||(e.exports=r)}()},7283:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var l,u,c=this._events[s],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,i),!0;case 5:return c.fn.call(c.context,t,r,i,o),!0;case 6:return c.fn.call(c.context,t,r,i,o,a),!0}for(u=1,l=new Array(h-1);u<h;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var d,p=c.length;for(u=0;u<p;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),h){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,i);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];c[u].fn.apply(c[u].context,l)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var l=0,u=[],c=s.length;l<c;l++)(s[l].fn!==t||i&&!s[l].once||r&&s[l].context!==r)&&u.push(s[l]);u.length?this._events[o]=1===u.length?u[0]:u:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},219:(e,t,n)=>{"use strict";var r=n(3763),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var u=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(f){var i=p(n);i&&i!==f&&e(t,i,r)}var a=c(n);h&&(a=a.concat(h(n)));for(var s=l(t),m=l(n),g=0;g<a.length;++g){var y=a[g];if(!o[y]&&(!r||!r[y])&&(!m||!m[y])&&(!s||!s[y])){var v=d(n,y);try{u(t,y,v)}catch(b){}}}}return t}},4983:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case h:case o:case s:case a:case p:return e;default:switch(e=e&&e.$$typeof){case u:case d:case g:case m:case l:return e;default:return t}}case i:return t}}}function k(e){return w(e)===h}t.AsyncMode=c,t.ConcurrentMode=h,t.ContextConsumer=u,t.ContextProvider=l,t.Element=r,t.ForwardRef=d,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=s,t.StrictMode=a,t.Suspense=p,t.isAsyncMode=function(e){return k(e)||w(e)===c},t.isConcurrentMode=k,t.isContextConsumer=function(e){return w(e)===u},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===d},t.isFragment=function(e){return w(e)===o},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===m},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===a},t.isSuspense=function(e){return w(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===h||e===s||e===a||e===p||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===u||e.$$typeof===d||e.$$typeof===v||e.$$typeof===b||e.$$typeof===x||e.$$typeof===y)},t.typeOf=w},3763:(e,t,n)=>{"use strict";e.exports=n(4983)},7685:(e,t,n)=>{var r=n(7937)(n(6552),"DataView");e.exports=r},8724:(e,t,n)=>{var r=n(7615),i=n(5051),o=n(2154),a=n(8734),s=n(2662);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},7160:(e,t,n)=>{var r=n(7563),i=n(9935),o=n(4190),a=n(1946),s=n(1714);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},5204:(e,t,n)=>{var r=n(7937)(n(6552),"Map");e.exports=r},4816:(e,t,n)=>{var r=n(7251),i=n(7159),o=n(438),a=n(9394),s=n(6874);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},5387:(e,t,n)=>{var r=n(7937)(n(6552),"Promise");e.exports=r},2070:(e,t,n)=>{var r=n(7937)(n(6552),"Set");e.exports=r},8902:(e,t,n)=>{var r=n(4816),i=n(6179),o=n(6704);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,e.exports=a},5538:(e,t,n)=>{var r=n(7160),i=n(4545),o=n(793),a=n(7760),s=n(3892),l=n(6788);function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=i,u.prototype.delete=o,u.prototype.get=a,u.prototype.has=s,u.prototype.set=l,e.exports=u},9812:(e,t,n)=>{var r=n(6552).Symbol;e.exports=r},2929:(e,t,n)=>{var r=n(6552).Uint8Array;e.exports=r},6600:(e,t,n)=>{var r=n(7937)(n(6552),"WeakMap");e.exports=r},1170:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},5295:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}},7529:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}},5866:(e,t,n)=>{var r=n(8468);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},1558:e=>{e.exports=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},3204:(e,t,n)=>{var r=n(3343),i=n(2777),o=n(4052),a=n(4543),s=n(9194),l=n(1268),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),c=!n&&i(e),h=!n&&!c&&a(e),d=!n&&!c&&!h&&l(e),p=n||c||h||d,f=p?r(e.length,String):[],m=f.length;for(var g in e)!t&&!u.call(e,g)||p&&("length"==g||h&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||f.push(g);return f}},149:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},8895:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},2587:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},5967:e=>{e.exports=function(e){return e.split("")}},1340:(e,t,n)=>{var r=n(3211);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},1775:(e,t,n)=>{var r=n(5654);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},5652:(e,t,n)=>{var r=n(4664),i=n(6516)(r);e.exports=i},4746:(e,t,n)=>{var r=n(5652);e.exports=function(e,t){var n=!0;return r(e,(function(e,r,i){return n=!!t(e,r,i)})),n}},9742:(e,t,n)=>{var r=n(9841);e.exports=function(e,t,n){for(var i=-1,o=e.length;++i<o;){var a=e[i],s=t(a);if(null!=s&&(void 0===l?s===s&&!r(s):n(s,l)))var l=s,u=a}return u}},5816:e=>{e.exports=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}},755:(e,t,n)=>{var r=n(8895),i=n(7116);e.exports=function e(t,n,o,a,s){var l=-1,u=t.length;for(o||(o=i),s||(s=[]);++l<u;){var c=t[l];n>0&&o(c)?n>1?e(c,n-1,o,a,s):r(s,c):a||(s[s.length]=c)}return s}},4258:(e,t,n)=>{var r=n(5906)();e.exports=r},4664:(e,t,n)=>{var r=n(4258),i=n(8673);e.exports=function(e,t){return e&&r(e,t,i)}},2969:(e,t,n)=>{var r=n(5324),i=n(914);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},4262:(e,t,n)=>{var r=n(8895),i=n(4052);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},6913:(e,t,n)=>{var r=n(9812),i=n(4552),o=n(6095),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},7498:e=>{e.exports=function(e,t){return e>t}},7894:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},8468:(e,t,n)=>{var r=n(5816),i=n(644),o=n(4020);e.exports=function(e,t,n){return t===t?o(e,t,n):r(e,i,n)}},5193:(e,t,n)=>{var r=n(6913),i=n(2761);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},6989:(e,t,n)=>{var r=n(6399),i=n(2761);e.exports=function e(t,n,o,a,s){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!==t&&n!==n:r(t,n,o,a,e,s))}},6399:(e,t,n)=>{var r=n(5538),i=n(3668),o=n(9987),a=n(5752),s=n(6924),l=n(4052),u=n(4543),c=n(1268),h="[object Arguments]",d="[object Array]",p="[object Object]",f=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,g,y){var v=l(e),b=l(t),x=v?d:s(e),w=b?d:s(t),k=(x=x==h?p:x)==p,S=(w=w==h?p:w)==p,E=x==w;if(E&&u(e)){if(!u(t))return!1;v=!0,k=!1}if(E&&!k)return y||(y=new r),v||c(e)?i(e,t,n,m,g,y):o(e,t,x,n,m,g,y);if(!(1&n)){var I=k&&f.call(e,"__wrapped__"),T=S&&f.call(t,"__wrapped__");if(I||T){var C=I?e.value():e,A=T?t.value():t;return y||(y=new r),g(C,A,n,m,y)}}return!!E&&(y||(y=new r),a(e,t,n,m,g,y))}},6532:(e,t,n)=>{var r=n(5538),i=n(6989);e.exports=function(e,t,n,o){var a=n.length,s=a,l=!o;if(null==e)return!s;for(e=Object(e);a--;){var u=n[a];if(l&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++a<s;){var c=(u=n[a])[0],h=e[c],d=u[1];if(l&&u[2]){if(void 0===h&&!(c in e))return!1}else{var p=new r;if(o)var f=o(h,d,c,e,t,p);if(!(void 0===f?i(d,h,3,o,p):f))return!1}}return!0}},644:e=>{e.exports=function(e){return e!==e}},6954:(e,t,n)=>{var r=n(1629),i=n(7857),o=n(6686),a=n(6996),s=/^\[object .+?Constructor\]$/,l=Function.prototype,u=Object.prototype,c=l.toString,h=u.hasOwnProperty,d=RegExp("^"+c.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?d:s).test(a(e))}},5428:(e,t,n)=>{var r=n(6913),i=n(6173),o=n(2761),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[r(e)]}},9096:(e,t,n)=>{var r=n(9256),i=n(5029),o=n(3279),a=n(4052),s=n(3932);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?i(e[0],e[1]):r(e):s(e)}},3713:(e,t,n)=>{var r=n(6140),i=n(1143),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},61:e=>{e.exports=function(e,t){return e<t}},8883:(e,t,n)=>{var r=n(5652),i=n(6571);e.exports=function(e,t){var n=-1,o=i(e)?Array(e.length):[];return r(e,(function(e,r,i){o[++n]=t(e,r,i)})),o}},9256:(e,t,n)=>{var r=n(6532),i=n(3781),o=n(1310);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},5029:(e,t,n)=>{var r=n(6989),i=n(3097),o=n(3366),a=n(2597),s=n(9417),l=n(1310),u=n(914);e.exports=function(e,t){return a(e)&&s(t)?l(u(e),t):function(n){var a=i(n,e);return void 0===a&&a===t?o(n,e):r(t,a,3)}}},2536:(e,t,n)=>{var r=n(149),i=n(2969),o=n(9096),a=n(8883),s=n(320),l=n(7574),u=n(5893),c=n(3279),h=n(4052);e.exports=function(e,t,n){t=t.length?r(t,(function(e){return h(e)?function(t){return i(t,1===e.length?e[0]:e)}:e})):[c];var d=-1;t=r(t,l(o));var p=a(e,(function(e,n,i){return{criteria:r(t,(function(t){return t(e)})),index:++d,value:e}}));return s(p,(function(e,t){return u(e,t,n)}))}},396:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},2866:(e,t,n)=>{var r=n(2969);e.exports=function(e){return function(t){return r(t,e)}}},9676:e=>{var t=Math.ceil,n=Math.max;e.exports=function(e,r,i,o){for(var a=-1,s=n(t((r-e)/(i||1)),0),l=Array(s);s--;)l[o?s:++a]=e,e+=i;return l}},5647:(e,t,n)=>{var r=n(3279),i=n(5636),o=n(6350);e.exports=function(e,t){return o(i(e,t,r),e+"")}},8325:(e,t,n)=>{var r=n(2541),i=n(5654),o=n(3279),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=a},3871:e=>{e.exports=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}},2165:(e,t,n)=>{var r=n(5652);e.exports=function(e,t){var n;return r(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}},320:e=>{e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},3343:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},8541:(e,t,n)=>{var r=n(9812),i=n(149),o=n(4052),a=n(9841),s=r?r.prototype:void 0,l=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(a(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},1141:(e,t,n)=>{var r=n(143),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},7574:e=>{e.exports=function(e){return function(t){return e(t)}}},4416:(e,t,n)=>{var r=n(8902),i=n(5866),o=n(1558),a=n(8114),s=n(8182),l=n(2074);e.exports=function(e,t,n){var u=-1,c=i,h=e.length,d=!0,p=[],f=p;if(n)d=!1,c=o;else if(h>=200){var m=t?null:s(e);if(m)return l(m);d=!1,c=a,f=new r}else f=t?[]:p;e:for(;++u<h;){var g=e[u],y=t?t(g):g;if(g=n||0!==g?g:0,d&&y===y){for(var v=f.length;v--;)if(f[v]===y)continue e;t&&f.push(y),p.push(g)}else c(f,y,n)||(f!==p&&f.push(y),p.push(g))}return p}},8114:e=>{e.exports=function(e,t){return e.has(t)}},5324:(e,t,n)=>{var r=n(4052),i=n(2597),o=n(4079),a=n(1069);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(a(e))}},8189:(e,t,n)=>{var r=n(3871);e.exports=function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:r(e,t,n)}},6599:(e,t,n)=>{var r=n(9841);e.exports=function(e,t){if(e!==t){var n=void 0!==e,i=null===e,o=e===e,a=r(e),s=void 0!==t,l=null===t,u=t===t,c=r(t);if(!l&&!c&&!a&&e>t||a&&s&&u&&!l&&!c||i&&s&&u||!n&&u||!o)return 1;if(!i&&!a&&!c&&e<t||c&&n&&o&&!i&&!a||l&&n&&o||!s&&o||!u)return-1}return 0}},5893:(e,t,n)=>{var r=n(6599);e.exports=function(e,t,n){for(var i=-1,o=e.criteria,a=t.criteria,s=o.length,l=n.length;++i<s;){var u=r(o[i],a[i]);if(u)return i>=l?u:u*("desc"==n[i]?-1:1)}return e.index-t.index}},3440:(e,t,n)=>{var r=n(6552)["__core-js_shared__"];e.exports=r},6516:(e,t,n)=>{var r=n(6571);e.exports=function(e,t){return function(n,i){if(null==n)return n;if(!r(n))return e(n,i);for(var o=n.length,a=t?o:-1,s=Object(n);(t?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},5906:e=>{e.exports=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}},7676:(e,t,n)=>{var r=n(8189),i=n(6311),o=n(9115),a=n(1069);e.exports=function(e){return function(t){t=a(t);var n=i(t)?o(t):void 0,s=n?n[0]:t.charAt(0),l=n?r(n,1).join(""):t.slice(1);return s[e]()+l}}},9995:(e,t,n)=>{var r=n(9096),i=n(6571),o=n(8673);e.exports=function(e){return function(t,n,a){var s=Object(t);if(!i(t)){var l=r(n,3);t=o(t),n=function(e){return l(s[e],e,s)}}var u=e(t,n,a);return u>-1?s[l?t[u]:u]:void 0}}},3331:(e,t,n)=>{var r=n(9676),i=n(929),o=n(7303);e.exports=function(e){return function(t,n,a){return a&&"number"!=typeof a&&i(t,n,a)&&(n=a=void 0),t=o(t),void 0===n?(n=t,t=0):n=o(n),a=void 0===a?t<n?1:-1:o(a),r(t,n,a,e)}}},8182:(e,t,n)=>{var r=n(2070),i=n(5713),o=n(2074),a=r&&1/o(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=a},5654:(e,t,n)=>{var r=n(7937),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=i},3668:(e,t,n)=>{var r=n(8902),i=n(2587),o=n(8114);e.exports=function(e,t,n,a,s,l){var u=1&n,c=e.length,h=t.length;if(c!=h&&!(u&&h>c))return!1;var d=l.get(e),p=l.get(t);if(d&&p)return d==t&&p==e;var f=-1,m=!0,g=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++f<c;){var y=e[f],v=t[f];if(a)var b=u?a(v,y,f,t,e,l):a(y,v,f,e,t,l);if(void 0!==b){if(b)continue;m=!1;break}if(g){if(!i(t,(function(e,t){if(!o(g,t)&&(y===e||s(y,e,n,a,l)))return g.push(t)}))){m=!1;break}}else if(y!==v&&!s(y,v,n,a,l)){m=!1;break}}return l.delete(e),l.delete(t),m}},9987:(e,t,n)=>{var r=n(9812),i=n(2929),o=n(3211),a=n(3668),s=n(4160),l=n(2074),u=r?r.prototype:void 0,c=u?u.valueOf:void 0;e.exports=function(e,t,n,r,u,h,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!h(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=s;case"[object Set]":var f=1&r;if(p||(p=l),e.size!=t.size&&!f)return!1;var m=d.get(e);if(m)return m==t;r|=2,d.set(e,t);var g=a(p(e),p(t),r,u,h,d);return d.delete(e),g;case"[object Symbol]":if(c)return c.call(e)==c.call(t)}return!1}},5752:(e,t,n)=>{var r=n(9395),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,a,s){var l=1&n,u=r(e),c=u.length;if(c!=r(t).length&&!l)return!1;for(var h=c;h--;){var d=u[h];if(!(l?d in t:i.call(t,d)))return!1}var p=s.get(e),f=s.get(t);if(p&&f)return p==t&&f==e;var m=!0;s.set(e,t),s.set(t,e);for(var g=l;++h<c;){var y=e[d=u[h]],v=t[d];if(o)var b=l?o(v,y,d,t,e,s):o(y,v,d,e,t,s);if(!(void 0===b?y===v||a(y,v,n,o,s):b)){m=!1;break}g||(g="constructor"==d)}if(m&&!g){var x=e.constructor,w=t.constructor;x==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(m=!1)}return s.delete(e),s.delete(t),m}},7105:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},9395:(e,t,n)=>{var r=n(4262),i=n(9621),o=n(8673);e.exports=function(e){return r(e,o,i)}},2622:(e,t,n)=>{var r=n(705);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},3781:(e,t,n)=>{var r=n(9417),i=n(8673);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var o=t[n],a=e[o];t[n]=[o,a,r(a)]}return t}},7937:(e,t,n)=>{var r=n(6954),i=n(4657);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},5990:(e,t,n)=>{var r=n(3028)(Object.getPrototypeOf,Object);e.exports=r},4552:(e,t,n)=>{var r=n(9812),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(l){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},9621:(e,t,n)=>{var r=n(7529),i=n(7828),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(t){return o.call(e,t)})))}:i;e.exports=s},6924:(e,t,n)=>{var r=n(7685),i=n(5204),o=n(5387),a=n(2070),s=n(6600),l=n(6913),u=n(6996),c="[object Map]",h="[object Promise]",d="[object Set]",p="[object WeakMap]",f="[object DataView]",m=u(r),g=u(i),y=u(o),v=u(a),b=u(s),x=l;(r&&x(new r(new ArrayBuffer(1)))!=f||i&&x(new i)!=c||o&&x(o.resolve())!=h||a&&x(new a)!=d||s&&x(new s)!=p)&&(x=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case m:return f;case g:return c;case y:return h;case v:return d;case b:return p}return t}),e.exports=x},4657:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},9057:(e,t,n)=>{var r=n(5324),i=n(2777),o=n(4052),a=n(9194),s=n(6173),l=n(914);e.exports=function(e,t,n){for(var u=-1,c=(t=r(t,e)).length,h=!1;++u<c;){var d=l(t[u]);if(!(h=null!=e&&n(e,d)))break;e=e[d]}return h||++u!=c?h:!!(c=null==e?0:e.length)&&s(c)&&a(d,c)&&(o(e)||i(e))}},6311:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},7615:(e,t,n)=>{var r=n(5575);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},5051:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},2154:(e,t,n)=>{var r=n(5575),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},8734:(e,t,n)=>{var r=n(5575),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},2662:(e,t,n)=>{var r=n(5575);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},7116:(e,t,n)=>{var r=n(9812),i=n(2777),o=n(4052),a=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||i(e)||!!(a&&e&&e[a])}},9194:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},929:(e,t,n)=>{var r=n(3211),i=n(6571),o=n(9194),a=n(6686);e.exports=function(e,t,n){if(!a(n))return!1;var s=typeof t;return!!("number"==s?i(n)&&o(t,n.length):"string"==s&&t in n)&&r(n[t],e)}},2597:(e,t,n)=>{var r=n(4052),i=n(9841),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||(a.test(e)||!o.test(e)||null!=t&&e in Object(t))}},705:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},7857:(e,t,n)=>{var r=n(3440),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},6140:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},9417:(e,t,n)=>{var r=n(6686);e.exports=function(e){return e===e&&!r(e)}},7563:e=>{e.exports=function(){this.__data__=[],this.size=0}},9935:(e,t,n)=>{var r=n(1340),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},4190:(e,t,n)=>{var r=n(1340);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},1946:(e,t,n)=>{var r=n(1340);e.exports=function(e){return r(this.__data__,e)>-1}},1714:(e,t,n)=>{var r=n(1340);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},7251:(e,t,n)=>{var r=n(8724),i=n(7160),o=n(5204);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},7159:(e,t,n)=>{var r=n(2622);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},438:(e,t,n)=>{var r=n(2622);e.exports=function(e){return r(this,e).get(e)}},9394:(e,t,n)=>{var r=n(2622);e.exports=function(e){return r(this,e).has(e)}},6874:(e,t,n)=>{var r=n(2622);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},4160:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},1310:e=>{e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},8259:(e,t,n)=>{var r=n(5797);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},5575:(e,t,n)=>{var r=n(7937)(Object,"create");e.exports=r},1143:(e,t,n)=>{var r=n(3028)(Object.keys,Object);e.exports=r},6832:(e,t,n)=>{e=n.nmd(e);var r=n(7105),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(t){}}();e.exports=s},6095:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},3028:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},5636:(e,t,n)=>{var r=n(1170),i=Math.max;e.exports=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var o=arguments,a=-1,s=i(o.length-t,0),l=Array(s);++a<s;)l[a]=o[t+a];a=-1;for(var u=Array(t+1);++a<t;)u[a]=o[a];return u[t]=n(l),r(e,this,u)}}},6552:(e,t,n)=>{var r=n(7105),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},6179:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},6704:e=>{e.exports=function(e){return this.__data__.has(e)}},2074:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},6350:(e,t,n)=>{var r=n(8325),i=n(6578)(r);e.exports=i},6578:e=>{var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var i=t(),o=16-(i-r);if(r=i,o>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},4545:(e,t,n)=>{var r=n(7160);e.exports=function(){this.__data__=new r,this.size=0}},793:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},7760:e=>{e.exports=function(e){return this.__data__.get(e)}},3892:e=>{e.exports=function(e){return this.__data__.has(e)}},6788:(e,t,n)=>{var r=n(7160),i=n(5204),o=n(4816);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(e,t),this.size=n.size,this}},4020:e=>{e.exports=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}},9115:(e,t,n)=>{var r=n(5967),i=n(6311),o=n(715);e.exports=function(e){return i(e)?o(e):r(e)}},4079:(e,t,n)=>{var r=n(8259),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)})),t}));e.exports=a},914:(e,t,n)=>{var r=n(9841);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},6996:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},143:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},715:e=>{var t="\\ud800-\\udfff",n="["+t+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="[^"+t+"]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+r+"|"+i+")"+"?",u="[\\ufe0e\\ufe0f]?",c=u+l+("(?:\\u200d(?:"+[o,a,s].join("|")+")"+u+l+")*"),h="(?:"+[o+r+"?",r,a,s,n].join("|")+")",d=RegExp(i+"(?="+i+")|"+h+c,"g");e.exports=function(e){return e.match(d)||[]}},2541:e=>{e.exports=function(e){return function(){return e}}},3950:(e,t,n)=>{var r=n(6686),i=n(4757),o=n(801),a=Math.max,s=Math.min;e.exports=function(e,t,n){var l,u,c,h,d,p,f=0,m=!1,g=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=l,r=u;return l=u=void 0,f=t,h=e.apply(r,n)}function b(e){var n=e-p;return void 0===p||n>=t||n<0||g&&e-f>=c}function x(){var e=i();if(b(e))return w(e);d=setTimeout(x,function(e){var n=t-(e-p);return g?s(n,c-(e-f)):n}(e))}function w(e){return d=void 0,y&&l?v(e):(l=u=void 0,h)}function k(){var e=i(),n=b(e);if(l=arguments,u=this,p=e,n){if(void 0===d)return function(e){return f=e,d=setTimeout(x,t),m?v(e):h}(p);if(g)return clearTimeout(d),d=setTimeout(x,t),v(p)}return void 0===d&&(d=setTimeout(x,t)),h}return t=o(t)||0,r(n)&&(m=!!n.leading,c=(g="maxWait"in n)?a(o(n.maxWait)||0,t):c,y="trailing"in n?!!n.trailing:y),k.cancel=function(){void 0!==d&&clearTimeout(d),f=0,l=p=u=d=void 0},k.flush=function(){return void 0===d?h:w(i())},k}},3211:e=>{e.exports=function(e,t){return e===t||e!==e&&t!==t}},7002:(e,t,n)=>{var r=n(5295),i=n(4746),o=n(9096),a=n(4052),s=n(929);e.exports=function(e,t,n){var l=a(e)?r:i;return n&&s(e,t,n)&&(t=void 0),l(e,o(t,3))}},8990:(e,t,n)=>{var r=n(9995)(n(2520));e.exports=r},2520:(e,t,n)=>{var r=n(5816),i=n(9096),o=n(9140),a=Math.max;e.exports=function(e,t,n){var s=null==e?0:e.length;if(!s)return-1;var l=null==n?0:o(n);return l<0&&(l=a(s+l,0)),r(e,i(t,3),l)}},3538:(e,t,n)=>{var r=n(755),i=n(3411);e.exports=function(e,t){return r(i(e,t),1)}},3097:(e,t,n)=>{var r=n(2969);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},3366:(e,t,n)=>{var r=n(7894),i=n(9057);e.exports=function(e,t){return null!=e&&i(e,t,r)}},3279:e=>{e.exports=function(e){return e}},2777:(e,t,n)=>{var r=n(5193),i=n(2761),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},4052:e=>{var t=Array.isArray;e.exports=t},6571:(e,t,n)=>{var r=n(1629),i=n(6173);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},6361:(e,t,n)=>{var r=n(6913),i=n(2761);e.exports=function(e){return!0===e||!1===e||i(e)&&"[object Boolean]"==r(e)}},4543:(e,t,n)=>{e=n.nmd(e);var r=n(6552),i=n(14),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;e.exports=l},9853:(e,t,n)=>{var r=n(6989);e.exports=function(e,t){return r(e,t)}},1629:(e,t,n)=>{var r=n(6913),i=n(6686);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},6173:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},5268:(e,t,n)=>{var r=n(9160);e.exports=function(e){return r(e)&&e!=+e}},9686:e=>{e.exports=function(e){return null==e}},9160:(e,t,n)=>{var r=n(6913),i=n(2761);e.exports=function(e){return"number"==typeof e||i(e)&&"[object Number]"==r(e)}},6686:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},2761:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},2322:(e,t,n)=>{var r=n(6913),i=n(5990),o=n(2761),a=Function.prototype,s=Object.prototype,l=a.toString,u=s.hasOwnProperty,c=l.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=r(e))return!1;var t=i(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==c}},620:(e,t,n)=>{var r=n(6913),i=n(4052),o=n(2761);e.exports=function(e){return"string"==typeof e||!i(e)&&o(e)&&"[object String]"==r(e)}},9841:(e,t,n)=>{var r=n(6913),i=n(2761);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},1268:(e,t,n)=>{var r=n(5428),i=n(7574),o=n(6832),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},8673:(e,t,n)=>{var r=n(3204),i=n(3713),o=n(6571);e.exports=function(e){return o(e)?r(e):i(e)}},4065:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},3411:(e,t,n)=>{var r=n(149),i=n(9096),o=n(8883),a=n(4052);e.exports=function(e,t){return(a(e)?r:o)(e,i(t,3))}},1733:(e,t,n)=>{var r=n(1775),i=n(4664),o=n(9096);e.exports=function(e,t){var n={};return t=o(t,3),i(e,(function(e,i,o){r(n,i,t(e,i,o))})),n}},539:(e,t,n)=>{var r=n(9742),i=n(7498),o=n(3279);e.exports=function(e){return e&&e.length?r(e,o,i):void 0}},2794:(e,t,n)=>{var r=n(9742),i=n(7498),o=n(9096);e.exports=function(e,t){return e&&e.length?r(e,o(t,2),i):void 0}},5797:(e,t,n)=>{var r=n(4816);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},6745:(e,t,n)=>{var r=n(9742),i=n(61),o=n(3279);e.exports=function(e){return e&&e.length?r(e,o,i):void 0}},9364:(e,t,n)=>{var r=n(9742),i=n(9096),o=n(61);e.exports=function(e,t){return e&&e.length?r(e,i(t,2),o):void 0}},5713:e=>{e.exports=function(){}},4757:(e,t,n)=>{var r=n(6552);e.exports=function(){return r.Date.now()}},3932:(e,t,n)=>{var r=n(396),i=n(2866),o=n(2597),a=n(914);e.exports=function(e){return o(e)?r(a(e)):i(e)}},6604:(e,t,n)=>{var r=n(3331)();e.exports=r},4597:(e,t,n)=>{var r=n(2587),i=n(9096),o=n(2165),a=n(4052),s=n(929);e.exports=function(e,t,n){var l=a(e)?r:o;return n&&s(e,t,n)&&(t=void 0),l(e,i(t,3))}},7424:(e,t,n)=>{var r=n(755),i=n(2536),o=n(5647),a=n(929),s=o((function(e,t){if(null==e)return[];var n=t.length;return n>1&&a(e,t[0],t[1])?t=[]:n>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),i(e,r(t,1),[])}));e.exports=s},7828:e=>{e.exports=function(){return[]}},14:e=>{e.exports=function(){return!1}},9889:(e,t,n)=>{var r=n(3950),i=n(6686);e.exports=function(e,t,n){var o=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(n)&&(o="leading"in n?!!n.leading:o,a="trailing"in n?!!n.trailing:a),r(e,t,{leading:o,maxWait:t,trailing:a})}},7303:(e,t,n)=>{var r=n(801),i=1/0;e.exports=function(e){return e?(e=r(e))===i||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}},9140:(e,t,n)=>{var r=n(7303);e.exports=function(e){var t=r(e),n=t%1;return t===t?n?t-n:t:0}},801:(e,t,n)=>{var r=n(1141),i=n(6686),o=n(9841),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=s.test(e);return n||l.test(e)?u(e.slice(2),n?2:8):a.test(e)?NaN:+e}},1069:(e,t,n)=>{var r=n(8541);e.exports=function(e){return null==e?"":r(e)}},977:(e,t,n)=>{var r=n(9096),i=n(4416);e.exports=function(e,t){return e&&e.length?i(e,r(t,2)):[]}},643:(e,t,n)=>{var r=n(7676)("toUpperCase");e.exports=r},7353:e=>{e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(I){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var i={},o={};function a(e,t){var n,r,a;return t?(a=0<=(e>>>=0)&&e<256)&&(r=o[e])?r:(n=l(e,(0|e)<0?-1:0,!0),a&&(o[e]=n),n):(a=-128<=(e|=0)&&e<128)&&(r=i[e])?r:(n=l(e,e<0?-1:0,!1),a&&(i[e]=n),n)}function s(e,t){if(isNaN(e))return t?y:g;if(t){if(e<0)return y;if(e>=p)return k}else{if(e<=-f)return S;if(e+1>=f)return w}return e<0?s(-e,t).neg():l(e%d|0,e/d|0,t)}function l(e,t,r){return new n(e,t,r)}n.fromInt=a,n.fromNumber=s,n.fromBits=l;var u=Math.pow;function c(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return c(e.substring(1),t,n).neg();for(var i=s(u(n,8)),o=g,a=0;a<e.length;a+=8){var l=Math.min(8,e.length-a),h=parseInt(e.substring(a,a+l),n);if(l<8){var d=s(u(n,l));o=o.mul(d).add(s(h))}else o=(o=o.mul(i)).add(s(h))}return o.unsigned=t,o}function h(e,t){return"number"===typeof e?s(e,t):"string"===typeof e?c(e,t):l(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=c,n.fromValue=h;var d=4294967296,p=d*d,f=p/2,m=a(1<<24),g=a(0);n.ZERO=g;var y=a(0,!0);n.UZERO=y;var v=a(1);n.ONE=v;var b=a(1,!0);n.UONE=b;var x=a(-1);n.NEG_ONE=x;var w=l(-1,2147483647,!1);n.MAX_VALUE=w;var k=l(-1,-1,!0);n.MAX_UNSIGNED_VALUE=k;var S=l(0,-2147483648,!1);n.MIN_VALUE=S;var E=n.prototype;E.toInt=function(){return this.unsigned?this.low>>>0:this.low},E.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},E.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=s(u(e,6),this.unsigned),o=this,a="";;){var l=o.div(i),c=(o.sub(l.mul(i)).toInt()>>>0).toString(e);if((o=l).isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}},E.getHighBits=function(){return this.high},E.getHighBitsUnsigned=function(){return this.high>>>0},E.getLowBits=function(){return this.low},E.getLowBitsUnsigned=function(){return this.low>>>0},E.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},E.isZero=function(){return 0===this.high&&0===this.low},E.eqz=E.isZero,E.isNegative=function(){return!this.unsigned&&this.high<0},E.isPositive=function(){return this.unsigned||this.high>=0},E.isOdd=function(){return 1===(1&this.low)},E.isEven=function(){return 0===(1&this.low)},E.equals=function(e){return r(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},E.eq=E.equals,E.notEquals=function(e){return!this.eq(e)},E.neq=E.notEquals,E.ne=E.notEquals,E.lessThan=function(e){return this.comp(e)<0},E.lt=E.lessThan,E.lessThanOrEqual=function(e){return this.comp(e)<=0},E.lte=E.lessThanOrEqual,E.le=E.lessThanOrEqual,E.greaterThan=function(e){return this.comp(e)>0},E.gt=E.greaterThan,E.greaterThanOrEqual=function(e){return this.comp(e)>=0},E.gte=E.greaterThanOrEqual,E.ge=E.greaterThanOrEqual,E.compare=function(e){if(r(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},E.comp=E.compare,E.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(v)},E.neg=E.negate,E.add=function(e){r(e)||(e=h(e));var t=this.high>>>16,n=65535&this.high,i=this.low>>>16,o=65535&this.low,a=e.high>>>16,s=65535&e.high,u=e.low>>>16,c=0,d=0,p=0,f=0;return p+=(f+=o+(65535&e.low))>>>16,d+=(p+=i+u)>>>16,c+=(d+=n+s)>>>16,c+=t+a,l((p&=65535)<<16|(f&=65535),(c&=65535)<<16|(d&=65535),this.unsigned)},E.subtract=function(e){return r(e)||(e=h(e)),this.add(e.neg())},E.sub=E.subtract,E.multiply=function(e){if(this.isZero())return g;if(r(e)||(e=h(e)),t)return l(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(S))return e.isOdd()?S:g;if(e.eq(S))return this.isOdd()?S:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,i=65535&this.high,o=this.low>>>16,a=65535&this.low,u=e.high>>>16,c=65535&e.high,d=e.low>>>16,p=65535&e.low,f=0,y=0,v=0,b=0;return v+=(b+=a*p)>>>16,y+=(v+=o*p)>>>16,v&=65535,y+=(v+=a*d)>>>16,f+=(y+=i*p)>>>16,y&=65535,f+=(y+=o*d)>>>16,y&=65535,f+=(y+=a*c)>>>16,f+=n*p+i*d+o*c+a*u,l((v&=65535)<<16|(b&=65535),(f&=65535)<<16|(y&=65535),this.unsigned)},E.mul=E.multiply,E.divide=function(e){if(r(e)||(e=h(e)),e.isZero())throw Error("division by zero");var n,i,o;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return b;o=y}else{if(this.eq(S))return e.eq(v)||e.eq(x)?S:e.eq(S)?v:(n=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?v:x:(i=this.sub(e.mul(n)),o=n.add(i.div(e)));if(e.eq(S))return this.unsigned?y:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=g}for(i=this;i.gte(e);){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(n)/Math.LN2),c=a<=48?1:u(2,a-48),d=s(n),p=d.mul(e);p.isNegative()||p.gt(i);)p=(d=s(n-=c,this.unsigned)).mul(e);d.isZero()&&(d=v),o=o.add(d),i=i.sub(p)}return o},E.div=E.divide,E.modulo=function(e){return r(e)||(e=h(e)),t?l((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},E.mod=E.modulo,E.rem=E.modulo,E.not=function(){return l(~this.low,~this.high,this.unsigned)},E.and=function(e){return r(e)||(e=h(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},E.or=function(e){return r(e)||(e=h(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},E.xor=function(e){return r(e)||(e=h(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},E.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},E.shl=E.shiftLeft,E.shiftRight=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},E.shr=E.shiftRight,E.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):l(32===e?t:t>>>e-32,0,this.unsigned)},E.shru=E.shiftRightUnsigned,E.shr_u=E.shiftRightUnsigned,E.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},E.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},E.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},E.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},E.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},1497:(e,t,n)=>{"use strict";var r=n(3218);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},5173:(e,t,n)=>{e.exports=n(1497)()},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4575:e=>{"use strict";function t(e){this._maxSize=e,this.clear()}t.prototype.clear=function(){this._size=0,this._values=Object.create(null)},t.prototype.get=function(e){return this._values[e]},t.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var n=/[^.^\]^[]+|(?=\[\]|\.\.)/g,r=/^\d+$/,i=/^\d/,o=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,a=/^\s*(['"]?)(.*?)(\1)\s*$/,s=new t(512),l=new t(512),u=new t(512);function c(e){return s.get(e)||s.set(e,h(e).map((function(e){return e.replace(a,"$2")})))}function h(e){return e.match(n)||[""]}function d(e){return"string"===typeof e&&e&&-1!==["'",'"'].indexOf(e.charAt(0))}function p(e){return!d(e)&&(function(e){return e.match(i)&&!e.match(r)}(e)||function(e){return o.test(e)}(e))}e.exports={Cache:t,split:h,normalizePath:c,setter:function(e){var t=c(e);return l.get(e)||l.set(e,(function(e,n){for(var r=0,i=t.length,o=e;r<i-1;){var a=t[r];if("__proto__"===a||"constructor"===a||"prototype"===a)return e;o=o[t[r++]]}o[t[r]]=n}))},getter:function(e,t){var n=c(e);return u.get(e)||u.set(e,(function(e){for(var r=0,i=n.length;r<i;){if(null==e&&t)return;e=e[n[r++]]}return e}))},join:function(e){return e.reduce((function(e,t){return e+(d(t)||r.test(t)?"["+t+"]":(e?".":"")+t)}),"")},forEach:function(e,t,n){!function(e,t,n){var r,i,o,a,s=e.length;for(i=0;i<s;i++)(r=e[i])&&(p(r)&&(r='"'+r+'"'),o=!(a=d(r))&&/^\d+$/.test(r),t.call(n,r,a,o,i,e))}(Array.isArray(e)?e:h(e),t,n)}}},2730:(e,t,n)=>{"use strict";var r=n(5043),i=n(8853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(f,e)||!h.call(p,e)&&(d.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),C=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var $=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function L(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function z(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?L(e):""}function B(e){switch(e.tag){case 5:return L(e.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case I:return"Profiler";case E:return"StrictMode";case _:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){Q(e,t);var n=V(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function oe(e,t){var n=V(t.value),r=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,Ee=null;function Ie(e){if(e=bi(e)){if("function"!==typeof ke)throw Error(o(280));var t=e.stateNode;t&&(t=wi(t),ke(e.stateNode,e.type,t))}}function Te(e){Se?Ee?Ee.push(e):Ee=[e]:Se=e}function Ce(){if(Se){var e=Se,t=Ee;if(Ee=Se=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Ae(e,t){return e(t)}function _e(){}var Ne=!1;function Oe(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ae(e,t,n)}finally{Ne=!1,(null!==Se||null!==Ee)&&(_e(),Ce())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var $e=!1;if(c)try{var De={};Object.defineProperty(De,"passive",{get:function(){$e=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ce){$e=!1}function Pe(e,t,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Me=!1,Fe=null,Le=!1,je=null,ze={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,o,a,s,l){Me=!1,Fe=null,Pe.apply(ze,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(Ue(e)!==e)throw Error(o(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Ve(i),e;if(a===r)return Ve(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var qe=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Xe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Qe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=ht(s):0!==(o&=a)&&(r=ht(o))}else 0!==(a=n&~i)?r=ht(a):0!==o&&(r=ht(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,kt,St,Et,It,Tt=!1,Ct=[],At=null,_t=null,Nt=null,Ot=new Map,Rt=new Map,$t=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":_t=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void It(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Lt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function jt(e,t,n){Lt(e)&&n.delete(t)}function zt(){Tt=!1,null!==At&&Lt(At)&&(At=null),null!==_t&&Lt(_t)&&(_t=null),null!==Nt&&Lt(Nt)&&(Nt=null),Ot.forEach(jt),Rt.forEach(jt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Ut(e){function t(t){return Bt(t,e)}if(0<Ct.length){Bt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&Bt(At,e),null!==_t&&Bt(_t,e),null!==Nt&&Bt(Nt,e),Ot.forEach(t),Rt.forEach(t),n=0;n<$t.length;n++)(r=$t[n]).blockedOn===e&&(r.blockedOn=null);for(;0<$t.length&&null===(n=$t[0]).blockedOn;)Ft(n),null===n.blockedOn&&$t.shift()}var Wt=x.ReactCurrentBatchConfig,Vt=!0;function Gt(e,t,n,r){var i=bt,o=Wt.transition;Wt.transition=null;try{bt=1,qt(e,t,n,r)}finally{bt=i,Wt.transition=o}}function Ht(e,t,n,r){var i=bt,o=Wt.transition;Wt.transition=null;try{bt=4,qt(e,t,n,r)}finally{bt=i,Wt.transition=o}}function qt(e,t,n,r){if(Vt){var i=Xt(e,t,n,r);if(null===i)Vr(e,t,r,Kt,n),Pt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return At=Mt(At,e,t,n,r,i),!0;case"dragenter":return _t=Mt(_t,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ot.set(o,Mt(Ot.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Rt.set(o,Mt(Rt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Pt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&wt(o),null===(o=Xt(e,t,n,r))&&Vr(e,t,r,Kt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Vr(e,t,r,null,n)}}var Kt=null;function Xt(e,t,n,r){if(Kt=null,null!==(e=vi(e=we(r))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=on(un),hn=F({},un,{view:0,detail:0}),dn=on(hn),pn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=on(pn),mn=on(F({},pn,{dataTransfer:0})),gn=on(F({},hn,{relatedTarget:0})),yn=on(F({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(vn),xn=on(F({},un,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function In(){return En}var Tn=F({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=on(Tn),An=on(F({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),_n=on(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),Nn=on(F({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=F({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=on(On),$n=[9,13,27,32],Dn=c&&"CompositionEvent"in window,Pn=null;c&&"documentMode"in document&&(Pn=document.documentMode);var Mn=c&&"TextEvent"in window&&!Pn,Fn=c&&(!Dn||Pn&&8<Pn&&11>=Pn),Ln=String.fromCharCode(32),jn=!1;function zn(e,t){switch(e){case"keyup":return-1!==$n.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Gn(e,t,n,r){Te(r),0<(t=Hr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,qn=null;function Kn(e){Lr(e,0)}function Xn(e){if(q(xi(e)))return e}function Yn(e,t){if("change"===e)return t}var Qn=!1;if(c){var Jn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Qn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),qn=Hn=null)}function nr(e){if("value"===e.propertyName&&Xn(qn)){var t=[];Gn(t,qn,e,we(e)),Oe(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),qn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(qn)}function or(e,t){if("click"===e)return Xn(t)}function ar(e,t){if("input"===e||"change"===e)return Xn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=cr(n,o);var a=cr(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==K(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},Er={};function Ir(e){if(Sr[e])return Sr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return Sr[e]=n[t];return e}c&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Tr=Ir("animationend"),Cr=Ir("animationiteration"),Ar=Ir("animationstart"),_r=Ir("transitionend"),Nr=new Map,Or="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Nr.set(e,t),l(t,[e])}for(var $r=0;$r<Or.length;$r++){var Dr=Or[$r];Rr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Rr(Tr,"onAnimationEnd"),Rr(Cr,"onAnimationIteration"),Rr(Ar,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(_r,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,l,u){if(Be.apply(this,arguments),Me){if(!Me)throw Error(o(198));var c=Fe;Me=!1,Fe=null,Le||(Le=!0,je=c)}}(r,t,void 0,e),e.currentTarget=null}function Lr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;Fr(i,s,u),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;Fr(i,s,u),o=l}}}if(Le)throw e=je,Le=!1,je=null,e}function jr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Ur(e){if(!e[Br]){e[Br]=!0,a.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,zr("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Yt(t)){case 1:var i=Gt;break;case 4:i=Ht;break;default:i=qt}n=i.bind(null,t,n,e),i=void 0,!$e||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Vr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=vi(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue e}s=s.parentNode}}r=r.return}Oe((function(){var r=o,i=we(n),a=[];e:{var s=Nr.get(e);if(void 0!==s){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=_n;break;case Tr:case Cr:case Ar:l=yn;break;case _r:l=Nn;break;case"scroll":l=dn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==s?s+"Capture":null:s;c=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=Re(f,d))&&c.push(Gr(f,m,p)))),h)break;f=f.return}0<c.length&&(s=new l(s,u,null,n,i),a.push({event:s,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(u=n.relatedTarget||n.fromElement)||!vi(u)&&!u[fi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?vi(u):null)&&(u!==(h=Ue(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=fn,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(c=An,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?s:xi(l),p=null==u?s:xi(u),(s=new c(m,f+"leave",l,n,i)).target=h,s.relatedTarget=p,m=null,vi(i)===r&&((c=new c(d,f+"enter",u,n,i)).target=p,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(d=u,f=0,p=c=l;p;p=qr(p))f++;for(p=0,m=d;m;m=qr(m))p++;for(;0<f-p;)c=qr(c),f--;for(;0<p-f;)d=qr(d),p--;for(;f--;){if(c===d||null!==d&&c===d.alternate)break e;c=qr(c),d=qr(d)}c=null}else c=null;null!==l&&Kr(a,s,l,c,!1),null!==u&&null!==h&&Kr(a,h,u,c,!0)}if("select"===(l=(s=r?xi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Yn;else if(Vn(s))if(Qn)g=ar;else{g=ir;var y=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(e,r))?Gn(a,g,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?xi(r):window,e){case"focusin":(Vn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(a,n,i)}var v;if(Dn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Un?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Un||"onCompositionStart"!==b?"onCompositionEnd"===b&&Un&&(v=en()):(Jt="value"in(Qt=i)?Qt.value:Qt.textContent,Un=!0)),0<(y=Hr(r,b)).length&&(b=new xn(b,e,null,n,i),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=Bn(n))&&(b.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(jn=!0,Ln);case"textInput":return(e=t.data)===Ln&&jn?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!Dn&&zn(e,t)?(e=en(),Zt=Jt=Qt=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}Lr(a,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Re(e,n))&&r.unshift(Gr(e,o,i)),null!=(o=Re(e,t))&&r.push(Gr(e,o,i))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=Re(n,o))&&a.unshift(Gr(n,l,s)):i||null!=(l=Re(n,o))&&a.push(Gr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Xr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Ut(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ut(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,pi="__reactProps$"+hi,fi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[di])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[di]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function wi(e){return e[pi]||null}var ki=[],Si=-1;function Ei(e){return{current:e}}function Ii(e){0>Si||(e.current=ki[Si],ki[Si]=null,Si--)}function Ti(e,t){Si++,ki[Si]=e.current,e.current=t}var Ci={},Ai=Ei(Ci),_i=Ei(!1),Ni=Ci;function Oi(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function $i(){Ii(_i),Ii(Ai)}function Di(e,t,n){if(Ai.current!==Ci)throw Error(o(168));Ti(Ai,t),Ti(_i,n)}function Pi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,W(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ni=Ai.current,Ti(Ai,e),Ti(_i,_i.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Pi(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ii(_i),Ii(Ai),Ti(Ai,e)):Ii(_i),Ti(_i,n)}var Li=null,ji=!1,zi=!1;function Bi(e){null===Li?Li=[e]:Li.push(e)}function Ui(){if(!zi&&null!==Li){zi=!0;var e=0,t=bt;try{var n=Li;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Li=null,ji=!1}catch(i){throw null!==Li&&(Li=Li.slice(e+1)),qe(Ze,Ui),i}finally{bt=t,zi=!1}}return null}var Wi=[],Vi=0,Gi=null,Hi=0,qi=[],Ki=0,Xi=null,Yi=1,Qi="";function Ji(e,t){Wi[Vi++]=Hi,Wi[Vi++]=Gi,Gi=e,Hi=t}function Zi(e,t,n){qi[Ki++]=Yi,qi[Ki++]=Qi,qi[Ki++]=Xi,Xi=e;var r=Yi;e=Qi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Yi=1<<32-at(t)+i|n<<i|r,Qi=o+e}else Yi=1<<o|n<<i|r,Qi=e}function eo(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function to(e){for(;e===Gi;)Gi=Wi[--Vi],Wi[Vi]=null,Hi=Wi[--Vi],Wi[Vi]=null;for(;e===Xi;)Xi=qi[--Ki],qi[Ki]=null,Qi=qi[--Ki],qi[Ki]=null,Yi=qi[--Ki],qi[Ki]=null}var no=null,ro=null,io=!1,oo=null;function ao(e,t){var n=Ou(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xi?{id:Yi,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ou(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function uo(e){if(io){var t=ro;if(t){var n=t;if(!so(e,t)){if(lo(e))throw Error(o(418));t=ui(n.nextSibling);var r=no;t&&so(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function co(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return co(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw po(),Error(o(418));for(;t;)ao(e,t),t=ui(t.nextSibling)}if(co(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ui(e.stateNode.nextSibling):null;return!0}function po(){for(var e=ro;e;)e=ui(e.nextSibling)}function fo(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=x.ReactCurrentBatchConfig;function yo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function vo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bo(e){return(0,e._init)(e._payload)}function xo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=$u(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var o=n.type;return o===S?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===R&&bo(o)===t.type)?((r=i(t,n.props)).ref=yo(e,t,n),r.return=e,r):((r=Du(n.type,n.key,n.props,null,e.mode,r)).ref=yo(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Lu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Pu(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Du(t.type,t.key,t.props,null,e.mode,n)).ref=yo(e,null,t),n.return=e,n;case k:return(t=Lu(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||P(t))return(t=Pu(t,e.mode,n,null)).return=e,t;vo(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?u(e,t,n,r):null;case k:return n.key===i?c(e,t,n,r):null;case R:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||P(n))return null!==i?null:h(e,t,n,r,null);vo(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||P(r))return h(t,e=e.get(n)||null,r,i,null);vo(t,r)}return null}function m(i,o,s,l){for(var u=null,c=null,h=o,m=o=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=p(i,h,s[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),o=a(y,o,m),null===c?u=y:c.sibling=y,c=y,h=g}if(m===s.length)return n(i,h),io&&Ji(i,m),u;if(null===h){for(;m<s.length;m++)null!==(h=d(i,s[m],l))&&(o=a(h,o,m),null===c?u=h:c.sibling=h,c=h);return io&&Ji(i,m),u}for(h=r(i,h);m<s.length;m++)null!==(g=f(h,i,m,s[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=a(g,o,m),null===c?u=g:c.sibling=g,c=g);return e&&h.forEach((function(e){return t(i,e)})),io&&Ji(i,m),u}function g(i,s,l,u){var c=P(l);if("function"!==typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var h=c=null,m=s,g=s=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=p(i,m,v.value,u);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),s=a(b,s,g),null===h?c=b:h.sibling=b,h=b,m=y}if(v.done)return n(i,m),io&&Ji(i,g),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,u))&&(s=a(v,s,g),null===h?c=v:h.sibling=v,h=v);return io&&Ji(i,g),c}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=f(m,i,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=a(v,s,g),null===h?c=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),io&&Ji(i,g),c}return function e(r,o,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var u=a.key,c=o;null!==c;){if(c.key===u){if((u=a.type)===S){if(7===c.tag){n(r,c.sibling),(o=i(c,a.props.children)).return=r,r=o;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===R&&bo(u)===c.type){n(r,c.sibling),(o=i(c,a.props)).ref=yo(r,c,a),o.return=r,r=o;break e}n(r,c);break}t(r,c),c=c.sibling}a.type===S?((o=Pu(a.props.children,r.mode,l,a.key)).return=r,r=o):((l=Du(a.type,a.key,a.props,null,r.mode,l)).ref=yo(r,o,a),l.return=r,r=l)}return s(r);case k:e:{for(c=a.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Lu(a,r.mode,l)).return=r,r=o}return s(r);case R:return e(r,o,(c=a._init)(a._payload),l)}if(te(a))return m(r,o,a,l);if(P(a))return g(r,o,a,l);vo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=Fu(a,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var wo=xo(!0),ko=xo(!1),So=Ei(null),Eo=null,Io=null,To=null;function Co(){To=Io=Eo=null}function Ao(e){var t=So.current;Ii(So),e._currentValue=t}function _o(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function No(e,t){Eo=e,To=Io=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Oo(e){var t=e._currentValue;if(To!==e)if(e={context:e,memoizedValue:t,next:null},null===Io){if(null===Eo)throw Error(o(308));Io=e,Eo.dependencies={lanes:0,firstContext:e}}else Io=Io.next=e;return t}var Ro=null;function $o(e){null===Ro?Ro=[e]:Ro.push(e)}function Do(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,$o(t)):(n.next=i.next,i.next=n),t.interleaved=n,Po(e,r)}function Po(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Mo=!1;function Fo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function jo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Po(e,n)}return null===(i=r.interleaved)?(t.next=t,$o(r)):(t.next=i.next,i.next=t),r.interleaved=t,Po(e,n)}function Bo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Uo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wo(e,t,n,r){var i=e.updateQueue;Mo=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===a?o=u:a.next=u,a=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==o){var h=i.baseState;for(a=0,c=u=l=null,s=o;;){var d=s.lane,p=s.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(d=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){h=f.call(p,h,d);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=m.payload)?f.call(p,h,d):f)||void 0===d)break e;h=F({},h,d);break e;case 2:Mo=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[s]:d.push(s))}else p={eventTime:p,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=p,l=h):c=c.next=p,a|=d;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(d=s).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Ml|=a,e.lanes=a,e.memoizedState=h}}function Vo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Go={},Ho=Ei(Go),qo=Ei(Go),Ko=Ei(Go);function Xo(e){if(e===Go)throw Error(o(174));return e}function Yo(e,t){switch(Ti(Ko,t),Ti(qo,e),Ti(Ho,Go),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ii(Ho),Ti(Ho,t)}function Qo(){Ii(Ho),Ii(qo),Ii(Ko)}function Jo(e){Xo(Ko.current);var t=Xo(Ho.current),n=le(t,e.type);t!==n&&(Ti(qo,e),Ti(Ho,n))}function Zo(e){qo.current===e&&(Ii(Ho),Ii(qo))}var ea=Ei(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var ia=x.ReactCurrentDispatcher,oa=x.ReactCurrentBatchConfig,aa=0,sa=null,la=null,ua=null,ca=!1,ha=!1,da=0,pa=0;function fa(){throw Error(o(321))}function ma(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ga(e,t,n,r,i,a){if(aa=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=null===e||null===e.memoizedState?Za:es,e=n(r,i),ha){a=0;do{if(ha=!1,da=0,25<=a)throw Error(o(301));a+=1,ua=la=null,t.updateQueue=null,ia.current=ts,e=n(r,i)}while(ha)}if(ia.current=Ja,t=null!==la&&null!==la.next,aa=0,ua=la=sa=null,ca=!1,t)throw Error(o(300));return e}function ya(){var e=0!==da;return da=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ua?sa.memoizedState=ua=e:ua=ua.next=e,ua}function ba(){if(null===la){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ua?sa.memoizedState:ua.next;if(null!==t)ua=t,la=e;else{if(null===e)throw Error(o(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ua?sa.memoizedState=ua=e:ua=ua.next=e}return ua}function xa(e,t){return"function"===typeof t?t(e):t}function wa(e){var t=ba(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=la,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,u=null,c=a;do{var h=c.lane;if((aa&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,s=r):u=u.next=d,sa.lanes|=h,Ml|=h}c=c.next}while(null!==c&&c!==a);null===u?s=r:u.next=l,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,sa.lanes|=a,Ml|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ka(e){var t=ba(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sr(a,t.memoizedState)||(bs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Sa(){}function Ea(e,t){var n=sa,r=ba(),i=t(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,bs=!0),r=r.queue,Ma(Ca.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ua&&1&ua.memoizedState.tag){if(n.flags|=2048,Oa(9,Ta.bind(null,n,r,i,t),void 0,null),null===_l)throw Error(o(349));0!==(30&aa)||Ia(n,t,i)}return i}function Ia(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ta(e,t,n,r){t.value=n,t.getSnapshot=r,Aa(t)&&_a(e)}function Ca(e,t,n){return n((function(){Aa(t)&&_a(e)}))}function Aa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function _a(e){var t=Po(e,1);null!==t&&nu(t,e,1,-1)}function Na(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ka.bind(null,sa,e),[t.memoizedState,e]}function Oa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ra(){return ba().memoizedState}function $a(e,t,n,r){var i=va();sa.flags|=e,i.memoizedState=Oa(1|t,n,void 0,void 0===r?null:r)}function Da(e,t,n,r){var i=ba();r=void 0===r?null:r;var o=void 0;if(null!==la){var a=la.memoizedState;if(o=a.destroy,null!==r&&ma(r,a.deps))return void(i.memoizedState=Oa(t,n,o,r))}sa.flags|=e,i.memoizedState=Oa(1|t,n,o,r)}function Pa(e,t){return $a(8390656,8,e,t)}function Ma(e,t){return Da(2048,8,e,t)}function Fa(e,t){return Da(4,2,e,t)}function La(e,t){return Da(4,4,e,t)}function ja(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function za(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Da(4,4,ja.bind(null,t,e),n)}function Ba(){}function Ua(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wa(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Va(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),sa.lanes|=n,Ml|=n,e.baseState=!0),t)}function Ga(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=oa.transition;oa.transition={};try{e(!1),t()}finally{bt=n,oa.transition=r}}function Ha(){return ba().memoizedState}function qa(e,t,n){var r=tu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xa(e))Ya(t,n);else if(null!==(n=Do(e,t,n,r))){nu(n,e,r,eu()),Qa(n,t,r)}}function Ka(e,t,n){var r=tu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xa(e))Ya(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var l=t.interleaved;return null===l?(i.next=i,$o(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Do(e,t,i,r))&&(nu(n,e,r,i=eu()),Qa(n,t,r))}}function Xa(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Ya(e,t){ha=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Ja={readContext:Oo,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Za={readContext:Oo,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Oo,useEffect:Pa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,$a(4194308,4,ja.bind(null,t,e),n)},useLayoutEffect:function(e,t){return $a(4194308,4,e,t)},useInsertionEffect:function(e,t){return $a(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=va();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qa.bind(null,sa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Na,useDebugValue:Ba,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Na(!1),t=e[0];return e=Ga.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sa,i=va();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===_l)throw Error(o(349));0!==(30&aa)||Ia(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Pa(Ca.bind(null,r,a,e),[e]),r.flags|=2048,Oa(9,Ta.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=va(),t=_l.identifierPrefix;if(io){var n=Qi;t=":"+t+"R"+(n=(Yi&~(1<<32-at(Yi)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=pa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Oo,useCallback:Ua,useContext:Oo,useEffect:Ma,useImperativeHandle:za,useInsertionEffect:Fa,useLayoutEffect:La,useMemo:Wa,useReducer:wa,useRef:Ra,useState:function(){return wa(xa)},useDebugValue:Ba,useDeferredValue:function(e){return Va(ba(),la.memoizedState,e)},useTransition:function(){return[wa(xa)[0],ba().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Ea,useId:Ha,unstable_isNewReconciler:!1},ts={readContext:Oo,useCallback:Ua,useContext:Oo,useEffect:Ma,useImperativeHandle:za,useInsertionEffect:Fa,useLayoutEffect:La,useMemo:Wa,useReducer:ka,useRef:Ra,useState:function(){return ka(xa)},useDebugValue:Ba,useDeferredValue:function(e){var t=ba();return null===la?t.memoizedState=e:Va(t,la.memoizedState,e)},useTransition:function(){return[ka(xa)[0],ba().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Ea,useId:Ha,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var is={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),o=jo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=zo(e,o,i))&&(nu(t,e,i,r),Bo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),o=jo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=zo(e,o,i))&&(nu(t,e,i,r),Bo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=eu(),r=tu(e),i=jo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=zo(e,i,r))&&(nu(t,e,r,n),Bo(t,e,r))}};function os(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function as(e,t,n){var r=!1,i=Ci,o=t.contextType;return"object"===typeof o&&null!==o?o=Oo(o):(i=Ri(t)?Ni:Ai.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Oi(e,i):Ci),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=is,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&is.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Fo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Oo(o):(o=Ri(t)?Ni:Ai.current,i.context=Oi(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(rs(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&is.enqueueReplaceState(i,i.state,null),Wo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function us(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function cs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=jo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vl||(Vl=!0,Gl=r),hs(0,t)},n}function fs(e,t,n){(n=jo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hs(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===Hl?Hl=new Set([this]):Hl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Iu.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=jo(-1,1)).tag=2,zo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var vs=x.ReactCurrentOwner,bs=!1;function xs(e,t,n,r){t.child=null===e?ko(t,null,n,r):wo(t,e.child,n,r)}function ws(e,t,n,r,i){n=n.render;var o=t.ref;return No(t,i),r=ga(e,t,n,r,o,i),n=ya(),null===e||bs?(io&&n&&eo(t),t.flags|=1,xs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vs(e,t,i))}function ks(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Ru(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Du(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ss(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Vs(e,t,i)}return t.flags|=1,(e=$u(o,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Vs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Ts(e,t,n,r,i)}function Es(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti($l,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti($l,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ti($l,Rl),Rl|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ti($l,Rl),Rl|=r;return xs(e,t,i,n),t.child}function Is(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,i){var o=Ri(n)?Ni:Ai.current;return o=Oi(t,o),No(t,i),n=ga(e,t,n,r,o,i),r=ya(),null===e||bs?(io&&r&&eo(t),t.flags|=1,xs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vs(e,t,i))}function Cs(e,t,n,r,i){if(Ri(n)){var o=!0;Mi(t)}else o=!1;if(No(t,i),null===t.stateNode)Ws(e,t),as(t,n,r),ls(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;"object"===typeof u&&null!==u?u=Oo(u):u=Oi(t,u=Ri(n)?Ni:Ai.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==u)&&ss(t,a,r,u),Mo=!1;var d=t.memoizedState;a.state=d,Wo(t,r,a,i),l=t.memoizedState,s!==r||d!==l||_i.current||Mo?("function"===typeof c&&(rs(t,n,c,r),l=t.memoizedState),(s=Mo||os(t,n,s,r,d,l,u))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Lo(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:ns(t.type,s),a.props=u,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Oo(l):l=Oi(t,l=Ri(n)?Ni:Ai.current);var p=n.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||d!==l)&&ss(t,a,r,l),Mo=!1,d=t.memoizedState,a.state=d,Wo(t,r,a,i);var f=t.memoizedState;s!==h||d!==f||_i.current||Mo?("function"===typeof p&&(rs(t,n,p,r),f=t.memoizedState),(u=Mo||os(t,n,u,r,d,f,l)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=u):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return As(e,t,n,r,o,i)}function As(e,t,n,r,i,o){Is(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Fi(t,n,!1),Vs(e,t,o);r=t.stateNode,vs.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=wo(t,e.child,null,o),t.child=wo(t,null,s,o)):xs(e,t,s,o),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function _s(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),Yo(e,t.containerInfo)}function Ns(e,t,n,r,i){return fo(),mo(i),t.flags|=256,xs(e,t,n,r),t.child}var Os,Rs,$s,Ds,Ps={dehydrated:null,treeContext:null,retryLane:0};function Ms(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,n){var r,i=t.pendingProps,a=ea.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ti(ea,1&a),null===e)return uo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Mu(l,i,0,null),e=Pu(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ms(n),t.memoizedState=Ps,e):Ls(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,js(e,t,s,r=cs(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Mu({mode:"visible",children:r.children},i,0,null),(a=Pu(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&wo(t,e.child,null,s),t.child.memoizedState=Ms(s),t.memoizedState=Ps,a);if(0===(1&t.mode))return js(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,js(e,t,s,r=cs(a=Error(o(419)),r,void 0))}if(l=0!==(s&e.childLanes),bs||l){if(null!==(r=_l)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Po(e,i),nu(r,e,i,-1))}return mu(),js(e,t,s,r=cs(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cu.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ro=ui(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(qi[Ki++]=Yi,qi[Ki++]=Qi,qi[Ki++]=Xi,Yi=e.id,Qi=e.overflow,Xi=t),t=Ls(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(s){s=i.fallback,l=t.mode,r=(a=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=$u(a,u)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=$u(r,s):(s=Pu(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Ms(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ps,i}return e=(s=e.child).sibling,i=$u(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ls(e,t){return(t=Mu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function js(e,t,n,r){return null!==r&&mo(r),wo(t,e.child,null,n),(e=Ls(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_o(e.return,t,n)}function Bs(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Us(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(xs(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zs(e,n,t);else if(19===e.tag)zs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bs(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ta(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bs(t,!0,n,null,o);break;case"together":Bs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=$u(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=$u(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gs(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function qs(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hs(t),null;case 1:case 17:return Ri(t.type)&&$i(),Hs(t),null;case 3:return r=t.stateNode,Qo(),Ii(_i),Ii(Ai),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(au(oo),oo=null))),Rs(e,t),Hs(t),null;case 5:Zo(t);var i=Xo(Ko.current);if(n=t.type,null!==e&&null!=t.stateNode)$s(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Hs(t),null}if(e=Xo(Ho.current),ho(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[di]=t,r[pi]=a,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Pr.length;i++)jr(Pr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":Y(r,a),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},jr("invalid",r);break;case"textarea":ie(r,a),jr("invalid",r)}for(var l in ve(n,a),i=null,a)if(a.hasOwnProperty(l)){var u=a[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,u,e),i=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&jr("scroll",r)}switch(n){case"input":H(r),Z(r,a,!0);break;case"textarea":H(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[pi]=r,Os(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Pr.length;i++)jr(Pr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":Y(e,r),i=X(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(a in ve(n,i),u=i)if(u.hasOwnProperty(a)){var c=u[a];"style"===a?ge(e,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===a?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=c&&"onScroll"===a&&jr("scroll",e):null!=c&&b(e,a,c,l))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+V(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hs(t),null;case 6:if(e&&null!=t.stateNode)Ds(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Xo(Ko.current),Xo(Ho.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(a=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Hs(t),null;case 13:if(Ii(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))po(),fo(),t.flags|=98560,a=!1;else if(a=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[di]=t}else fo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hs(t),a=!1}else null!==oo&&(au(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Dl&&(Dl=3):mu())),null!==t.updateQueue&&(t.flags|=4),Hs(t),null);case 4:return Qo(),Rs(e,t),null===e&&Ur(t.stateNode.containerInfo),Hs(t),null;case 10:return Ao(t.type._context),Hs(t),null;case 19:if(Ii(ea),null===(a=t.memoizedState))return Hs(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Gs(a,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Gs(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Qe()>Ul&&(t.flags|=128,r=!0,Gs(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!io)return Hs(t),null}else 2*Qe()-a.renderingStartTime>Ul&&1073741824!==n&&(t.flags|=128,r=!0,Gs(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Qe(),t.sibling=null,n=ea.current,Ti(ea,r?1&n|2:1&n),t):(Hs(t),null);case 22:case 23:return hu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Hs(t),6&t.subtreeFlags&&(t.flags|=8192)):Hs(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ks(e,t){switch(to(t),t.tag){case 1:return Ri(t.type)&&$i(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qo(),Ii(_i),Ii(Ai),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zo(t),null;case 13:if(Ii(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ii(ea),null;case 4:return Qo(),null;case 10:return Ao(t.type._context),null;case 22:case 23:return hu(),null;default:return null}}Os=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Rs=function(){},$s=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Xo(Ho.current);var o,a=null;switch(n){case"input":i=X(e,i),r=X(e,r),a=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ve(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(a=a||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(a=a||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&jr("scroll",e),a||l===u||(a=[])):(a=a||[]).push(c,u))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},Ds=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xs=!1,Ys=!1,Qs="function"===typeof WeakSet?WeakSet:Set,Js=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Eu(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Eu(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(t,n,o)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[pi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var cl=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Ys||Zs(n,t);case 6:var r=cl,i=hl;cl=null,dl(e,t,n),hl=i,null!==(cl=r)&&(hl?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(hl?(e=cl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Ut(e)):li(cl,n.stateNode));break;case 4:r=cl,i=hl,cl=n.stateNode.containerInfo,hl=!0,dl(e,t,n),cl=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Ys&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&el(n,t,a),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Ys&&(Zs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Eu(n,t,s)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Ys=(r=Ys)||null!==n.memoizedState,dl(e,t,n),Ys=r):dl(e,t,n);break;default:dl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qs),t.forEach((function(t){var r=Au.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,hl=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===cl)throw Error(o(160));pl(a,s,i),cl=null,hl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Eu(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Eu(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Eu(e,e.return,g)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Eu(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===a.type&&null!=a.name&&Q(i,a),be(l,s);var c=be(l,a);for(s=0;s<u.length;s+=2){var h=u[s],d=u[s+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):b(i,h,d,c)}switch(l){case"input":J(i,a);break;case"textarea":oe(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?ne(i,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[pi]=a}catch(g){Eu(e,e.return,g)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Eu(e,e.return,g)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(g){Eu(e,e.return,g)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Bl=Qe())),4&r&&fl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ys=(c=Ys)||h,ml(t,e),Ys=c):ml(t,e),yl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(Js=e,h=e.child;null!==h;){for(d=Js=h;null!==Js;){switch(f=(p=Js).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Zs(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Eu(r,n,g)}}break;case 5:Zs(p,p.return);break;case 22:if(null!==p.memoizedState){wl(d);continue}}null!==f?(f.return=p,Js=f):wl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,s=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",s))}catch(g){Eu(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){Eu(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),yl(e),4&r&&fl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,sl(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,sl(e),a);break;default:throw Error(o(161))}}catch(s){Eu(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Js=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Js;){var i=Js,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Xs;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Ys;s=Xs;var u=Ys;if(Xs=a,(Ys=l)&&!u)for(Js=i;null!==Js;)l=(a=Js).child,22===a.tag&&null!==a.memoizedState?kl(i):null!==l?(l.return=a,Js=l):kl(i);for(;null!==o;)Js=o,bl(o,t,n),o=o.sibling;Js=i,Xs=s,Ys=u}xl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Js=o):xl(e)}}function xl(e){for(;null!==Js;){var t=Js;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ys||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ys)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Vo(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Vo(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Ut(d)}}}break;default:throw Error(o(163))}Ys||512&t.flags&&il(t)}catch(p){Eu(t,t.return,p)}}if(t===e){Js=null;break}if(null!==(n=t.sibling)){n.return=t.return,Js=n;break}Js=t.return}}function wl(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Js=n;break}Js=t.return}}function kl(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Eu(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Eu(t,i,l)}}var o=t.return;try{il(t)}catch(l){Eu(t,o,l)}break;case 5:var a=t.return;try{il(t)}catch(l){Eu(t,a,l)}}}catch(l){Eu(t,t.return,l)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var Sl,El=Math.ceil,Il=x.ReactCurrentDispatcher,Tl=x.ReactCurrentOwner,Cl=x.ReactCurrentBatchConfig,Al=0,_l=null,Nl=null,Ol=0,Rl=0,$l=Ei(0),Dl=0,Pl=null,Ml=0,Fl=0,Ll=0,jl=null,zl=null,Bl=0,Ul=1/0,Wl=null,Vl=!1,Gl=null,Hl=null,ql=!1,Kl=null,Xl=0,Yl=0,Ql=null,Jl=-1,Zl=0;function eu(){return 0!==(6&Al)?Qe():-1!==Jl?Jl:Jl=Qe()}function tu(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Ol?Ol&-Ol:null!==go.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nu(e,t,n,r){if(50<Yl)throw Yl=0,Ql=null,Error(o(185));yt(e,n,r),0!==(2&Al)&&e===_l||(e===_l&&(0===(2&Al)&&(Fl|=n),4===Dl&&su(e,Ol)),ru(e,r),1===n&&0===Al&&0===(1&t.mode)&&(Ul=Qe()+500,ji&&Ui()))}function ru(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=pt(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=dt(e,e===_l?Ol:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){ji=!0,Bi(e)}(lu.bind(null,e)):Bi(lu.bind(null,e)),ai((function(){0===(6&Al)&&Ui()})),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=_u(n,iu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function iu(e,t){if(Jl=-1,Zl=0,0!==(6&Al))throw Error(o(327));var n=e.callbackNode;if(ku()&&e.callbackNode!==n)return null;var r=dt(e,e===_l?Ol:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gu(e,r);else{t=r;var i=Al;Al|=2;var a=fu();for(_l===e&&Ol===t||(Wl=null,Ul=Qe()+500,du(e,t));;)try{vu();break}catch(l){pu(e,l)}Co(),Il.current=a,Al=i,null!==Nl?t=0:(_l=null,Ol=0,t=Dl)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=ou(e,i))),1===t)throw n=Pl,du(e,0),su(e,r),ru(e,Qe()),n;if(6===t)su(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gu(e,r))&&(0!==(a=ft(e))&&(r=a,t=ou(e,a))),1===t))throw n=Pl,du(e,0),su(e,r),ru(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:wu(e,zl,Wl);break;case 3:if(su(e,r),(130023424&r)===r&&10<(t=Bl+500-Qe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){eu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wu.bind(null,e,zl,Wl),t);break}wu(e,zl,Wl);break;case 4:if(su(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){e.timeoutHandle=ri(wu.bind(null,e,zl,Wl),r);break}wu(e,zl,Wl);break;default:throw Error(o(329))}}}return ru(e,Qe()),e.callbackNode===n?iu.bind(null,e):null}function ou(e,t){var n=jl;return e.current.memoizedState.isDehydrated&&(du(e,t).flags|=256),2!==(e=gu(e,t))&&(t=zl,zl=n,null!==t&&au(t)),e}function au(e){null===zl?zl=e:zl.push.apply(zl,e)}function su(e,t){for(t&=~Ll,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lu(e){if(0!==(6&Al))throw Error(o(327));ku();var t=dt(e,0);if(0===(1&t))return ru(e,Qe()),null;var n=gu(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ou(e,r))}if(1===n)throw n=Pl,du(e,0),su(e,t),ru(e,Qe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wu(e,zl,Wl),ru(e,Qe()),null}function uu(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Ul=Qe()+500,ji&&Ui())}}function cu(e){null!==Kl&&0===Kl.tag&&0===(6&Al)&&ku();var t=Al;Al|=1;var n=Cl.transition,r=bt;try{if(Cl.transition=null,bt=1,e)return e()}finally{bt=r,Cl.transition=n,0===(6&(Al=t))&&Ui()}}function hu(){Rl=$l.current,Ii($l)}function du(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Nl)for(n=Nl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&$i();break;case 3:Qo(),Ii(_i),Ii(Ai),ra();break;case 5:Zo(r);break;case 4:Qo();break;case 13:case 19:Ii(ea);break;case 10:Ao(r.type._context);break;case 22:case 23:hu()}n=n.return}if(_l=e,Nl=e=$u(e.current,null),Ol=Rl=t,Dl=0,Pl=null,Ll=Fl=Ml=0,zl=jl=null,null!==Ro){for(t=0;t<Ro.length;t++)if(null!==(r=(n=Ro[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}Ro=null}return e}function pu(e,t){for(;;){var n=Nl;try{if(Co(),ia.current=Ja,ca){for(var r=sa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ca=!1}if(aa=0,ua=la=sa=null,ha=!1,da=0,Tl.current=null,null===n||null===n.return){Dl=1,Pl=t,Nl=null;break}e:{var a=e,s=n.return,l=n,u=t;if(t=Ol,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=gs(s);if(null!==f){f.flags&=-257,ys(f,s,l,0,t),1&f.mode&&ms(a,c,t),u=c;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){ms(a,c,t),mu();break e}u=Error(o(426))}else if(io&&1&l.mode){var y=gs(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ys(y,s,l,0,t),mo(us(u,l));break e}}a=u=us(u,l),4!==Dl&&(Dl=2),null===jl?jl=[a]:jl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Uo(a,ps(0,u,t));break e;case 1:l=u;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Hl||!Hl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Uo(a,fs(a,l,t));break e}}a=a.return}while(null!==a)}xu(n)}catch(x){t=x,Nl===n&&null!==n&&(Nl=n=n.return);continue}break}}function fu(){var e=Il.current;return Il.current=Ja,null===e?Ja:e}function mu(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===_l||0===(268435455&Ml)&&0===(268435455&Fl)||su(_l,Ol)}function gu(e,t){var n=Al;Al|=2;var r=fu();for(_l===e&&Ol===t||(Wl=null,du(e,t));;)try{yu();break}catch(i){pu(e,i)}if(Co(),Al=n,Il.current=r,null!==Nl)throw Error(o(261));return _l=null,Ol=0,Dl}function yu(){for(;null!==Nl;)bu(Nl)}function vu(){for(;null!==Nl&&!Xe();)bu(Nl)}function bu(e){var t=Sl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?xu(e):Nl=t,Tl.current=null}function xu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qs(n,t,Rl)))return void(Nl=n)}else{if(null!==(n=Ks(n,t)))return n.flags&=32767,void(Nl=n);if(null===e)return Dl=6,void(Nl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nl=t);Nl=t=e}while(null!==t);0===Dl&&(Dl=5)}function wu(e,t,n){var r=bt,i=Cl.transition;try{Cl.transition=null,bt=1,function(e,t,n,r){do{ku()}while(null!==Kl);if(0!==(6&Al))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===_l&&(Nl=_l=null,Ol=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||ql||(ql=!0,_u(tt,(function(){return ku(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Cl.transition,Cl.transition=null;var s=bt;bt=1;var l=Al;Al|=4,Tl.current=null,function(e,t){if(ei=Vt,pr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var s=0,l=-1,u=-1,c=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==n||0!==i&&3!==d.nodeType||(l=s+i),d!==a||0!==r&&3!==d.nodeType||(u=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===n&&++c===i&&(l=s),p===a&&++h===r&&(u=s),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Vt=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:ns(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(o(163))}}catch(w){Eu(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}m=tl,tl=!1}(e,n),gl(n,e),fr(ti),Vt=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Ye(),Al=l,bt=s,Cl.transition=a}else e.current=n;if(ql&&(ql=!1,Kl=e,Xl=i),a=e.pendingLanes,0===a&&(Hl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ru(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Vl)throw Vl=!1,e=Gl,Gl=null,e;0!==(1&Xl)&&0!==e.tag&&ku(),a=e.pendingLanes,0!==(1&a)?e===Ql?Yl++:(Yl=0,Ql=e):Yl=0,Ui()}(e,t,n,r)}finally{Cl.transition=i,bt=r}return null}function ku(){if(null!==Kl){var e=xt(Xl),t=Cl.transition,n=bt;try{if(Cl.transition=null,bt=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Xl=0,0!==(6&Al))throw Error(o(331));var i=Al;for(Al|=4,Js=e.current;null!==Js;){var a=Js,s=a.child;if(0!==(16&Js.flags)){var l=a.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Js=c;null!==Js;){var h=Js;switch(h.tag){case 0:case 11:case 15:nl(8,h,a)}var d=h.child;if(null!==d)d.return=h,Js=d;else for(;null!==Js;){var p=(h=Js).sibling,f=h.return;if(ol(h),h===c){Js=null;break}if(null!==p){p.return=f,Js=p;break}Js=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Js=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Js=s;else e:for(;null!==Js;){if(0!==(2048&(a=Js).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Js=v;break e}Js=a.return}}var b=e.current;for(Js=b;null!==Js;){var x=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Js=x;else e:for(s=b;null!==Js;){if(0!==(2048&(l=Js).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(k){Eu(l,l.return,k)}if(l===s){Js=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Js=w;break e}Js=l.return}}if(Al=i,Ui(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(k){}r=!0}return r}finally{bt=n,Cl.transition=t}}return!1}function Su(e,t,n){e=zo(e,t=ps(0,t=us(n,t),1),1),t=eu(),null!==e&&(yt(e,1,t),ru(e,t))}function Eu(e,t,n){if(3===e.tag)Su(e,e,n);else for(;null!==t;){if(3===t.tag){Su(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hl||!Hl.has(r))){t=zo(t,e=fs(t,e=us(n,e),1),1),e=eu(),null!==t&&(yt(t,1,e),ru(t,e));break}}t=t.return}}function Iu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=eu(),e.pingedLanes|=e.suspendedLanes&n,_l===e&&(Ol&n)===n&&(4===Dl||3===Dl&&(130023424&Ol)===Ol&&500>Qe()-Bl?du(e,0):Ll|=n),ru(e,t)}function Tu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=eu();null!==(e=Po(e,t))&&(yt(e,t,n),ru(e,n))}function Cu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tu(e,n)}function Au(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Tu(e,n)}function _u(e,t){return qe(e,t)}function Nu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ou(e,t,n,r){return new Nu(e,t,n,r)}function Ru(e){return!(!(e=e.prototype)||!e.isReactComponent)}function $u(e,t){var n=e.alternate;return null===n?((n=Ou(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Du(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Ru(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Pu(n.children,i,a,t);case E:s=8,i|=8;break;case I:return(e=Ou(12,n,t,2|i)).elementType=I,e.lanes=a,e;case _:return(e=Ou(13,n,t,i)).elementType=_,e.lanes=a,e;case N:return(e=Ou(19,n,t,i)).elementType=N,e.lanes=a,e;case $:return Mu(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:s=10;break e;case C:s=9;break e;case A:s=11;break e;case O:s=14;break e;case R:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ou(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Pu(e,t,n,r){return(e=Ou(7,e,r,t)).lanes=n,e}function Mu(e,t,n,r){return(e=Ou(22,e,r,t)).elementType=$,e.lanes=n,e.stateNode={isHidden:!1},e}function Fu(e,t,n){return(e=Ou(6,e,null,t)).lanes=n,e}function Lu(e,t,n){return(t=Ou(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ju(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zu(e,t,n,r,i,o,a,s,l){return e=new ju(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Ou(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fo(o),e}function Bu(e){if(!e)return Ci;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Pi(e,n,t)}return t}function Uu(e,t,n,r,i,o,a,s,l){return(e=zu(n,r,!0,e,0,o,0,s,l)).context=Bu(null),n=e.current,(o=jo(r=eu(),i=tu(n))).callback=void 0!==t&&null!==t?t:null,zo(n,o,i),e.current.lanes=i,yt(e,i,r),ru(e,r),e}function Wu(e,t,n,r){var i=t.current,o=eu(),a=tu(i);return n=Bu(n),null===t.context?t.context=n:t.pendingContext=n,(t=jo(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zo(i,t,a))&&(nu(e,i,a,o),Bo(e,i,a)),a}function Vu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hu(e,t){Gu(e,t),(e=e.alternate)&&Gu(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||_i.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:_s(t),fo();break;case 5:Jo(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:Yo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(So,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(Ti(ea,1&ea.current),null!==(e=Vs(e,t,n))?e.sibling:null);Ti(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Us(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Vs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,io&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ws(e,t),e=t.pendingProps;var i=Oi(t,Ai.current);No(t,n),i=ga(null,t,r,e,i,n);var a=ya();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(a=!0,Mi(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Fo(t),i.updater=is,t.stateNode=i,i._reactInternals=t,ls(t,r,e,n),t=As(null,t,r,!0,a,n)):(t.tag=0,io&&a&&eo(t),xs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ws(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ru(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===O)return 14}return 2}(r),e=ns(r,e),i){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=Cs(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=ks(null,t,r,ns(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 3:e:{if(_s(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,Lo(e,t),Wo(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ns(e,t,r,n,i=us(Error(o(423)),t));break e}if(r!==i){t=Ns(e,t,r,n,i=us(Error(o(424)),t));break e}for(ro=ui(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=ko(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),r===i){t=Vs(e,t,n);break e}xs(e,t,r,n)}t=t.child}return t;case 5:return Jo(t),null===e&&uo(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(t.flags|=32),Is(e,t),xs(e,t,s,n),t.child;case 6:return null===e&&uo(t),null;case 13:return Fs(e,t,n);case 4:return Yo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wo(t,null,r,n):xs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ws(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 7:return xs(e,t,t.pendingProps,n),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Ti(So,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!_i.current){t=Vs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===a.tag){(u=jo(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),_o(a.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),_o(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}xs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,No(t,n),r=r(i=Oo(i)),t.flags|=1,xs(e,t,r,n),t.child;case 14:return i=ns(r=t.type,t.pendingProps),ks(e,t,r,i=ns(r.type,i),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ns(r,i),Ws(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,No(t,n),as(t,r,i),ls(t,r,i,n),As(null,t,r,!0,e,n);case 19:return Us(e,t,n);case 22:return Es(e,t,n)}throw Error(o(156,t.tag))};var qu="function"===typeof reportError?reportError:function(e){console.error(e)};function Ku(e){this._internalRoot=e}function Xu(e){this._internalRoot=e}function Yu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ju(){}function Zu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=Vu(a);s.call(e)}}Wu(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Vu(a);o.call(e)}}var a=Uu(t,r,e,0,null,!1,0,"",Ju);return e._reactRootContainer=a,e[fi]=a.current,Ur(8===e.nodeType?e.parentNode:e),cu(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Vu(l);s.call(e)}}var l=zu(e,0,!1,null,0,!1,0,"",Ju);return e._reactRootContainer=l,e[fi]=l.current,Ur(8===e.nodeType?e.parentNode:e),cu((function(){Wu(t,l,n,r)})),l}(n,t,e,i,r);return Vu(a)}Xu.prototype.render=Ku.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Wu(e,t,null,null)},Xu.prototype.unmount=Ku.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cu((function(){Wu(null,e,null,null)})),t[fi]=null}},Xu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<$t.length&&0!==t&&t<$t[n].priority;n++);$t.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),ru(t,Qe()),0===(6&Al)&&(Ul=Qe()+500,Ui()))}break;case 13:cu((function(){var t=Po(e,1);if(null!==t){var n=eu();nu(t,e,1,n)}})),Hu(e,1)}},kt=function(e){if(13===e.tag){var t=Po(e,134217728);if(null!==t)nu(t,e,134217728,eu());Hu(e,134217728)}},St=function(e){if(13===e.tag){var t=tu(e),n=Po(e,t);if(null!==n)nu(n,e,t,eu());Hu(e,t)}},Et=function(){return bt},It=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(o(90));q(r),J(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=uu,_e=cu;var ec={usingClientEntryPoint:!1,Events:[bi,xi,wi,Te,Ce,uu]},tc={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{it=rc.inject(nc),ot=rc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yu(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yu(e))throw Error(o(299));var n=!1,r="",i=qu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zu(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,Ur(8===e.nodeType?e.parentNode:e),new Ku(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return cu(e)},t.hydrate=function(e,t,n){if(!Qu(t))throw Error(o(200));return Zu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yu(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=qu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Uu(t,null,e,1,null!=n?n:null,i,0,a,s),e[fi]=t.current,Ur(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xu(t)},t.render=function(e,t,n){if(!Qu(t))throw Error(o(200));return Zu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qu(e))throw Error(o(40));return!!e._reactRootContainer&&(cu((function(){Zu(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=uu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qu(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Zu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},6366:e=>{"use strict";var t=Array.isArray,n=Object.keys,r=Object.prototype.hasOwnProperty,i="undefined"!==typeof Element;function o(e,a){if(e===a)return!0;if(e&&a&&"object"==typeof e&&"object"==typeof a){var s,l,u,c=t(e),h=t(a);if(c&&h){if((l=e.length)!=a.length)return!1;for(s=l;0!==s--;)if(!o(e[s],a[s]))return!1;return!0}if(c!=h)return!1;var d=e instanceof Date,p=a instanceof Date;if(d!=p)return!1;if(d&&p)return e.getTime()==a.getTime();var f=e instanceof RegExp,m=a instanceof RegExp;if(f!=m)return!1;if(f&&m)return e.toString()==a.toString();var g=n(e);if((l=g.length)!==n(a).length)return!1;for(s=l;0!==s--;)if(!r.call(a,g[s]))return!1;if(i&&e instanceof Element&&a instanceof Element)return e===a;for(s=l;0!==s--;)if(("_owner"!==(u=g[s])||!e.$$typeof)&&!o(e[u],a[u]))return!1;return!0}return e!==e&&a!==a}e.exports=function(e,t){try{return o(e,t)}catch(n){if(n.message&&n.message.match(/stack|recursion/i)||-2146828260===n.number)return console.warn("Warning: react-fast-compare does not handle circular references.",n.name,n.message),!1;throw n}}},5082:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case o:case s:case a:case d:case p:return e;default:switch(e=e&&e.$$typeof){case c:case u:case h:case m:case f:case l:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},2086:(e,t,n)=>{"use strict";n(5082)},1153:(e,t,n)=>{"use strict";var r=n(5043),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:o,_owner:s.current}}t.Fragment=o,t.jsx=u,t.jsxs=u},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,m(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)k.call(t,i)&&!E.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:S.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function _(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===o?"."+A(l,0):o,w(a)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),_(a,t,i,"",(function(e){return e}))):null!=a&&(T(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",w(e))for(var u=0;u<e.length;u++){var c=o+A(s=e[u],u);l+=_(s,t,i,c,a)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=_(s=s.value,t,i,c=o+A(s,u++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var r=[],i=0;return _(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function O(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},$={transition:null},D={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:$,ReactCurrentOwner:S};function P(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)k.call(t,u)&&!E.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=$.transition;$.transition={};try{e()}finally{$.transition=t}},t.unstable_act=P,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},579:(e,t,n)=>{"use strict";e.exports=n(1153)},6378:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case h:case o:case s:case a:case p:return e;default:switch(e=e&&e.$$typeof){case u:case d:case g:case m:case l:return e;default:return t}}case i:return t}}}function k(e){return w(e)===h}t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isFragment=function(e){return w(e)===o}},9062:(e,t,n)=>{"use strict";e.exports=n(6378)},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>o(l,n))u<i&&0>o(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>o(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function w(e){if(g=!1,x(e),!m)if(null!==r(u))m=!0,$(k);else{var t=r(c);null!==t&&D(w,t.startTime-e)}}function k(e,n){m=!1,g&&(g=!1,v(T),T=-1),f=!0;var o=p;try{for(x(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!_());){var a=d.callback;if("function"===typeof a){d.callback=null,p=d.priorityLevel;var s=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(u)&&i(u),x(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&D(w,h.startTime-n),l=!1}return l}finally{d=null,p=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,I=null,T=-1,C=5,A=-1;function _(){return!(t.unstable_now()-A<C)}function N(){if(null!==I){var e=t.unstable_now();A=e;var n=!0;try{n=I(!0,e)}finally{n?S():(E=!1,I=null)}}else E=!1}if("function"===typeof b)S=function(){b(N)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,R=O.port2;O.port1.onmessage=N,S=function(){R.postMessage(null)}}else S=function(){y(N,0)};function $(e){I=e,E||(E=!0,S())}function D(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,$(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(c,e),null===r(u)&&e===r(c)&&(g?(v(T),T=-1):g=!0,D(w,o-a))):(e.sortIndex=s,n(u,e),m||f||(m=!0,$(k))),e},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},4334:(e,t,n)=>{var r=n(7359),i=n(7066),o=n(9016),a=n(9538),s=n(6288),l=n(5262),u=n(2430);u.alea=r,u.xor128=i,u.xorwow=o,u.xorshift7=a,u.xor4096=s,u.tychei=l,e.exports=u},7359:function(e,t,n){var r;!function(e,i){function o(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var n=new o(e),r=t&&t.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,r&&("object"==typeof r&&a(r,n),i.state=function(){return a(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.alea=s}(0,e=n.nmd(e),n.amdD)},5262:function(e,t,n){var r;!function(e,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&a(r,n),i.state=function(){return a(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.tychei=s}(0,e=n.nmd(e),n.amdD)},7066:function(e,t,n){var r;!function(e,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&a(r,n),i.state=function(){return a(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.xor128=s}(0,e=n.nmd(e),n.amdD)},6288:function(e,t,n){var r;!function(e,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,i=t.X,o=t.i;return t.w=r=r+1640531527|0,n=i[o+34&127],e=i[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=i[o]=n^e,t.i=o,n+(r^r>>>16)|0},function(e,t){var n,r,i,o,a,s=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),i=0,o=-32;o<l;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(a=a+1640531527|0,i=0==(n=s[127&o]^=r+a)?i+1:0);for(i>=128&&(s[127&(t&&t.length||0)]=-1),i=127,o=512;o>0;--o)r=s[i+34&127],n=s[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[i]=r^n;e.w=a,e.X=s,e.i=i}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.X&&a(r,n),i.state=function(){return a(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.xor4096=s}(0,e=n.nmd(e),n.amdD)},9538:function(e,t,n){var r;!function(e,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,i=t.i;return e=r[i],n=(e^=e>>>7)^e<<24,n^=(e=r[i+1&7])^e>>>10,n^=(e=r[i+3&7])^e>>>3,n^=(e=r[i+4&7])^e<<7,e=r[i+7&7],n^=(e^=e<<13)^e<<9,r[i]=n,t.i=i+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.x&&a(r,n),i.state=function(){return a(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.xorshift7=s}(0,e=n.nmd(e),n.amdD)},9016:function(e,t,n){var r;!function(e,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&a(r,n),i.state=function(){return a(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.xorwow=s}(0,e=n.nmd(e),n.amdD)},2430:function(e,t,n){var r;!function(i,o,a){var s,l=256,u=a.pow(l,6),c=a.pow(2,52),h=2*c,d=255;function p(e,t,n){var r=[],d=y(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,v(o)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(l):(e=new Uint8Array(l),(i.crypto||i.msCrypto).getRandomValues(e)),v(e)}catch(r){var t=i.navigator,n=t&&t.plugins;return[+new Date,i,n,i.screen,v(o)]}}():e,3),r),p=new f(r),b=function(){for(var e=p.g(6),t=u,n=0;e<c;)e=(e+n)*l,t*=l,n=p.g(1);for(;e>=h;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|p.g(4)},b.quick=function(){return p.g(4)/4294967296},b.double=b,y(v(p.S),o),(t.pass||n||function(e,t,n,r){return r&&(r.S&&m(r,p),e.state=function(){return m(p,{})}),n?(a.random=e,t):e})(b,d,"global"in t?t.global:this==a,t.state)}function f(e){var t,n=e.length,r=this,i=0,o=r.i=r.j=0,a=r.S=[];for(n||(e=[n++]);i<l;)a[i]=i++;for(i=0;i<l;i++)a[i]=a[o=d&o+e[i%n]+(t=a[i])],a[o]=t;(r.g=function(e){for(var t,n=0,i=r.i,o=r.j,a=r.S;e--;)t=a[i=d&i+1],n=n*l+a[d&(a[i]=a[o=d&o+t])+(a[o]=t)];return r.i=i,r.j=o,n})(l)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,r=[],i=typeof e;if(t&&"object"==i)for(n in e)try{r.push(g(e[n],t-1))}catch(o){}return r.length?r:"string"==i?e:e+"\0"}function y(e,t){for(var n,r=e+"",i=0;i<r.length;)t[d&i]=d&(n^=19*t[d&i])+r.charCodeAt(i++);return v(t)}function v(e){return String.fromCharCode.apply(0,e)}if(y(a.random(),o),e.exports){e.exports=p;try{s=n(1234)}catch(b){}}else void 0===(r=function(){return p}.call(t,n,t,e))||(e.exports=r)}("undefined"!==typeof self?self:this,[],Math)},1517:e=>{const t=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['\u2019](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,n=e=>e.match(t)||[],r=e=>e[0].toUpperCase()+e.slice(1),i=(e,t)=>n(e).join(t).toLowerCase(),o=e=>n(e).reduce(((e,t)=>`${e}${e?t[0].toUpperCase()+t.slice(1).toLowerCase():t.toLowerCase()}`),"");e.exports={words:n,upperFirst:r,camelCase:o,pascalCase:e=>r(o(e)),snakeCase:e=>i(e,"_"),kebabCase:e=>i(e,"-"),sentenceCase:e=>r(i(e," ")),titleCase:e=>n(e).map(r).join(" ")}},8704:e=>{function t(e,t){var n=e.length,r=new Array(n),i={},o=n,a=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++){var i=e[n];t.has(i[0])||t.set(i[0],new Set),t.has(i[1])||t.set(i[1],new Set),t.get(i[0]).add(i[1])}return t}(t),s=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++)t.set(e[n],n);return t}(e);for(t.forEach((function(e){if(!s.has(e[0])||!s.has(e[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")}));o--;)i[o]||l(e[o],o,new Set);return r;function l(e,t,o){if(o.has(e)){var u;try{u=", node was:"+JSON.stringify(e)}catch(d){u=""}throw new Error("Cyclic dependency"+u)}if(!s.has(e))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(e));if(!i[t]){i[t]=!0;var c=a.get(e)||new Set;if(t=(c=Array.from(c)).length){o.add(e);do{var h=c[--t];l(h,s.get(h),o)}while(t);o.delete(e)}r[--n]=e}}}e.exports=function(e){return t(function(e){for(var t=new Set,n=0,r=e.length;n<r;n++){var i=e[n];t.add(i[0]),t.add(i[1])}return Array.from(t)}(e),e)},e.exports.array=t},3895:(e,t,n)=>{"use strict";var r=n(5043);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=r.useSyncExternalStore,a=r.useRef,s=r.useEffect,l=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,c){var h=a(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=l((function(){function e(e){if(!s){if(s=!0,o=e,e=r(e),void 0!==c&&d.hasValue){var t=d.value;if(c(t,e))return a=t}return a=e}if(t=a,i(o,e))return t;var n=r(e);return void 0!==c&&c(t,n)?t:(o=e,a=n)}var o,a,s=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,n,r,c]);var p=o(e,h[0],h[1]);return s((function(){d.hasValue=!0,d.value=p}),[p]),u(p),p}},7237:(e,t,n)=>{"use strict";e.exports=n(3895)},5817:()=>{},8590:()=>{},4530:()=>{},8108:()=>{},551:()=>{},1234:()=>{}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(o,a),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".166c4e7d.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="daily-expense-tracker:";n.l=(r,i,o,a)=>{if(e[r])e[r].push(i);else{var s,l;if(void 0!==o)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var h=u[c];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+o){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=r),e[r]=[i];var d=(t,n)=>{s.onerror=s.onload=null,clearTimeout(p);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((e=>e(n))),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/daily-expense-tracker-ai/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=o);var a=n.p+n.u(t),s=new Error;n.l(a,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,i[1](s)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,o,a=r[0],s=r[1],l=r[2],u=0;if(a.some((t=>0!==e[t]))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)l(n)}for(t&&t(r);u<a.length;u++)o=a[u],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkdaily_expense_tracker=self.webpackChunkdaily_expense_tracker||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{scaleBand:()=>gj,scaleDiverging:()=>qV,scaleDivergingLog:()=>KV,scaleDivergingPow:()=>YV,scaleDivergingSqrt:()=>QV,scaleDivergingSymlog:()=>XV,scaleIdentity:()=>BB,scaleImplicit:()=>fj,scaleLinear:()=>zB,scaleLog:()=>YB,scaleOrdinal:()=>mj,scalePoint:()=>vj,scalePow:()=>oU,scaleQuantile:()=>yU,scaleQuantize:()=>vU,scaleRadial:()=>lU,scaleSequential:()=>zV,scaleSequentialLog:()=>BV,scaleSequentialPow:()=>WV,scaleSequentialQuantile:()=>GV,scaleSequentialSqrt:()=>VV,scaleSequentialSymlog:()=>UV,scaleSqrt:()=>aU,scaleSymlog:()=>eU,scaleThreshold:()=>bU,scaleTime:()=>MV,scaleUtc:()=>FV,tickFormat:()=>LB});var t={};n.r(t),n.d(t,{assertParamsValid:()=>T6,computeFlatOffset:()=>j6,computeOutShape:()=>A6,getNormalizedAxes:()=>R6,isSliceContinous:()=>L6,maskToAxes:()=>C6,parseSliceParams:()=>z6,sliceInfo:()=>B6,startForAxis:()=>M6,startIndicesWithElidedDims:()=>$6,stopForAxis:()=>F6,stopIndicesWithElidedDims:()=>D6,stridesForAxis:()=>P6,stridesWithElidedDims:()=>_6});var r={};n.r(r),n.d(r,{collectGatherOpShapeInfo:()=>ote,computeOutShape:()=>ite,segOpComputeOptimalWindowSize:()=>rte});var i={};n.r(i),n.d(i,{ERF_A1:()=>wee,ERF_A2:()=>kee,ERF_A3:()=>See,ERF_A4:()=>Eee,ERF_A5:()=>Iee,ERF_P:()=>xee,PARALLELIZE_THRESHOLD:()=>aee,RowPartitionType:()=>tee,SELU_SCALE:()=>bee,SELU_SCALEALPHA:()=>vee,applyActivation:()=>i8,assertAndGetBroadcastShape:()=>u6,assertAxesAreInnerMostDims:()=>Q9,assertParamsConsistent:()=>Z8,assignToTypedArray:()=>Oee,axesAreInnerMostDims:()=>q9,calculateShapes:()=>yee,checkEinsumDimSizes:()=>zee,checkPadOnDimRoundingMode:()=>a9,combineLocations:()=>K9,combineRaggedTensorToTensorShapes:()=>nee,complexWithEvenIndex:()=>Aee,complexWithOddIndex:()=>_ee,computeConv2DInfo:()=>X6,computeConv3DInfo:()=>Y6,computeDefaultPad:()=>Q6,computeDilation2DInfo:()=>H6,computeOptimalWindowSize:()=>see,computeOutAndReduceShapes:()=>X9,computeOutShape:()=>eee,computePool2DInfo:()=>q6,computePool3DInfo:()=>K6,convertConv2DDataFormat:()=>o9,decodeEinsumEquation:()=>Lee,eitherStridesOrDilationsAreOne:()=>r9,expandShapeToKeepDim:()=>Y9,exponent:()=>$ee,exponents:()=>Ree,fromStringArrayToUint8:()=>ste,fromUint8ToStringArray:()=>ate,getAxesPermutation:()=>J9,getBroadcastDims:()=>s6,getComplexWithIndex:()=>Nee,getEinsumComputePath:()=>Bee,getEinsumPermutation:()=>jee,getFusedBiasGradient:()=>r8,getFusedDyActivation:()=>n8,getImageCenter:()=>lee,getInnerMostAxes:()=>e7,getPermuted:()=>cee,getRaggedRank:()=>iee,getReductionAxes:()=>l6,getReshaped:()=>uee,getReshapedPermuted:()=>hee,getRowPartitionTypesHelper:()=>ree,getSliceBeginCoords:()=>dee,getSliceSize:()=>pee,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>Gee,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>Hee,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>qee,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>Yee,getSparseReshapeInputOutputMismatchErrorMessage:()=>Jee,getSparseReshapeInputOutputMultipleErrorMessage:()=>Qee,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>Kee,getSparseReshapeNegativeOutputDimErrorMessage:()=>Xee,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>nte,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>Zee,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>ete,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>tte,getUndoAxesPermutation:()=>Z9,isIdentityPermutation:()=>Uee,log:()=>x3,mergeRealAndImagArrays:()=>Tee,prepareAndValidate:()=>fee,prepareSplitSize:()=>Vee,segment_util:()=>r,shouldFuse:()=>o8,slice_util:()=>t,splitRealAndImagArrays:()=>Cee,stridesOrDilationsArePositive:()=>i9,tupleValuesAreOne:()=>n9,upcastType:()=>v4,validateDefaultValueShape:()=>oee,validateInput:()=>gee,validateUpdateShape:()=>mee,warn:()=>b3});var o={};n.r(o),n.d(o,{mx:()=>ohe,XI:()=>Qhe,Nk:()=>Jhe,f6:()=>ede,ct:()=>ehe,YG:()=>rde,hH:()=>ude,z3:()=>qde,sG:()=>ipe,uM:()=>upe,vS:()=>Tpe,qB:()=>Dpe,GG:()=>Mpe,lg:()=>Bpe,rq:()=>Lpe,cu:()=>efe,WR:()=>Qpe,GE:()=>rfe,px:()=>ofe,jC:()=>xfe,He:()=>Sfe,hE:()=>$fe,BF:()=>jde,Dk:()=>Wfe,cl:()=>Qfe,_B:()=>cme,ub:()=>mme,_f:()=>vme,Ku:()=>Eme,qy:()=>Tme,Zy:()=>Lme,bu:()=>Bme,zv:()=>Gce,dH:()=>fhe,HS:()=>qhe,yH:()=>sge,l3:()=>uge,z9:()=>hge,x6:()=>gge,_m:()=>Sge,eW:()=>Age,GK:()=>Oge,SP:()=>Dge,yr:()=>Mge,dl:()=>mpe,Dw:()=>Uge,xT:()=>Hge,_X:()=>whe,wz:()=>Zge});var a={};n.r(a),n.d(a,{hasBrowserEnv:()=>AAe,hasStandardBrowserEnv:()=>NAe,hasStandardBrowserWebWorkerEnv:()=>OAe,navigator:()=>_Ae,origin:()=>RAe});var s,l=n(5043),u=n.t(l,2),c=n(4391);function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(s||(s={}));const d="popstate";function p(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function f(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function m(e,t){return{usr:e.state,key:e.key,idx:t}}function g(e,t,n,r){return void 0===n&&(n=null),h({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?v(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function y(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function v(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function b(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,l=s.Pop,u=null,c=f();function f(){return(a.state||{idx:null}).idx}function v(){l=s.Pop;let e=f(),t=null==e?null:e-c;c=e,u&&u({action:l,location:x.location,delta:t})}function b(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:y(e);return n=n.replace(/ $/,"%20"),p(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==c&&(c=0,a.replaceState(h({},a.state,{idx:c}),""));let x={get action(){return l},get location(){return e(i,a)},listen(e){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(d,v),u=e,()=>{i.removeEventListener(d,v),u=null}},createHref:e=>t(i,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=s.Push;let r=g(x.location,e,t);n&&n(r,e),c=f()+1;let h=m(r,c),d=x.createHref(r);try{a.pushState(h,"",d)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;i.location.assign(d)}o&&u&&u({action:l,location:x.location,delta:1})},replace:function(e,t){l=s.Replace;let r=g(x.location,e,t);n&&n(r,e),c=f();let i=m(r,c),h=x.createHref(r);a.replaceState(i,"",h),o&&u&&u({action:l,location:x.location,delta:0})},go:e=>a.go(e)};return x}var x;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(x||(x={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function w(e,t,n){return void 0===n&&(n="/"),k(e,t,n,!1)}function k(e,t,n,r){let i=M(("string"===typeof t?v(t):t).pathname||"/",n);if(null==i)return null;let o=S(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(o);let a=null;for(let s=0;null==a&&s<o.length;++s){let e=P(i);a=$(o[s],e,r)}return a}function S(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let a={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(p(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let s=B([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(p(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),S(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:R(s,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of E(e.path))i(e,t,r);else i(e,t)})),t}function E(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let a=E(r.join("/")),s=[];return s.push(...a.map((e=>""===e?o:[o,e].join("/")))),i&&s.push(...a),s.map((t=>e.startsWith("/")&&""===t?"/":t))}const I=/^:[\w-]+$/,T=3,C=2,A=1,_=10,N=-2,O=e=>"*"===e;function R(e,t){let n=e.split("/"),r=n.length;return n.some(O)&&(r+=N),t&&(r+=C),n.filter((e=>!O(e))).reduce(((e,t)=>e+(I.test(t)?T:""===t?A:_)),r)}function $(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},o="/",a=[];for(let s=0;s<r.length;++s){let e=r[s],l=s===r.length-1,u="/"===o?t:t.slice(o.length)||"/",c=D({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},u),h=e.route;if(!c&&l&&n&&!r[r.length-1].route.index&&(c=D({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},u)),!c)return null;Object.assign(i,c.params),a.push({params:i,pathname:B([o,c.pathname]),pathnameBase:U(B([o,c.pathnameBase])),route:h}),"/"!==c.pathnameBase&&(o=B([o,c.pathnameBase]))}return a}function D(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);f("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1),l=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=s[n]||"";a=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:o,pathnameBase:a,pattern:e}}function P(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return f(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function M(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function F(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function L(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function j(e,t){let n=L(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function z(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=v(e):(i=h({},e),p(!i.pathname||!i.pathname.includes("?"),F("?","pathname","search",i)),p(!i.pathname||!i.pathname.includes("#"),F("#","pathname","hash",i)),p(!i.search||!i.search.includes("#"),F("#","search","hash",i)));let o,a=""===e||""===i.pathname,s=a?"/":i.pathname;if(null==s)o=n;else{let e=t.length-1;if(!r&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?v(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:W(r),hash:V(i)}}(i,o),u=s&&"/"!==s&&s.endsWith("/"),c=(a||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!c||(l.pathname+="/"),l}const B=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),W=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",V=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function G(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const H=["post","put","patch","delete"],q=(new Set(H),["get",...H]);new Set(q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K.apply(this,arguments)}const X=l.createContext(null);const Y=l.createContext(null);const Q=l.createContext(null);const J=l.createContext(null);const Z=l.createContext({outlet:null,matches:[],isDataRoute:!1});const ee=l.createContext(null);function te(){return null!=l.useContext(J)}function ne(){return te()||p(!1),l.useContext(J).location}function re(e){l.useContext(Q).static||l.useLayoutEffect(e)}function ie(){let{isDataRoute:e}=l.useContext(Z);return e?function(){let{router:e}=pe(he.UseNavigateStable),t=me(de.UseNavigateStable),n=l.useRef(!1);return re((()=>{n.current=!0})),l.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,K({fromRouteId:t},i)))}),[e,t])}():function(){te()||p(!1);let e=l.useContext(X),{basename:t,future:n,navigator:r}=l.useContext(Q),{matches:i}=l.useContext(Z),{pathname:o}=ne(),a=JSON.stringify(j(i,n.v7_relativeSplatPath)),s=l.useRef(!1);re((()=>{s.current=!0}));let u=l.useCallback((function(n,i){if(void 0===i&&(i={}),!s.current)return;if("number"===typeof n)return void r.go(n);let l=z(n,JSON.parse(a),o,"path"===i.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:B([t,l.pathname])),(i.replace?r.replace:r.push)(l,i.state,i)}),[t,r,a,o,e]);return u}()}function oe(e,t,n,r){te()||p(!1);let{navigator:i}=l.useContext(Q),{matches:o}=l.useContext(Z),a=o[o.length-1],u=a?a.params:{},c=(a&&a.pathname,a?a.pathnameBase:"/");a&&a.route;let h,d=ne();if(t){var f;let e="string"===typeof t?v(t):t;"/"===c||(null==(f=e.pathname)?void 0:f.startsWith(c))||p(!1),h=e}else h=d;let m=h.pathname||"/",g=m;if("/"!==c){let e=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=w(e,{pathname:g});let b=ce(y&&y.map((e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:B([c,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:B([c,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,n,r);return t&&b?l.createElement(J.Provider,{value:{location:K({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:s.Pop}},b):b}function ae(){let e=function(){var e;let t=l.useContext(ee),n=fe(de.UseRouteError),r=me(de.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=G(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return l.createElement(l.Fragment,null,l.createElement("h2",null,"Unexpected Application Error!"),l.createElement("h3",{style:{fontStyle:"italic"}},t),n?l.createElement("pre",{style:i},n):null,null)}const se=l.createElement(ae,null);class le extends l.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?l.createElement(Z.Provider,{value:this.props.routeContext},l.createElement(ee.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ue(e){let{routeContext:t,match:n,children:r}=e,i=l.useContext(X);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),l.createElement(Z.Provider,{value:t},r)}function ce(e,t,n,r){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var o;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(o=r)&&o.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let a=e,s=null==(i=n)?void 0:i.errors;if(null!=s){let e=a.findIndex((e=>e.route.id&&void 0!==(null==s?void 0:s[e.route.id])));e>=0||p(!1),a=a.slice(0,Math.min(a.length,e+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let l=0;l<a.length;l++){let e=a[l];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=l),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){u=!0,a=c>=0?a.slice(0,c+1):[a[0]];break}}}return a.reduceRight(((e,r,i)=>{let o,h=!1,d=null,p=null;var f;n&&(o=s&&r.route.id?s[r.route.id]:void 0,d=r.route.errorElement||se,u&&(c<0&&0===i?(f="route-fallback",!1||ge[f]||(ge[f]=!0),h=!0,p=null):c===i&&(h=!0,p=r.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,i+1)),g=()=>{let t;return t=o?d:h?p:r.route.Component?l.createElement(r.route.Component,null):r.route.element?r.route.element:e,l.createElement(ue,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?l.createElement(le,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var he=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(he||{}),de=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(de||{});function pe(e){let t=l.useContext(X);return t||p(!1),t}function fe(e){let t=l.useContext(Y);return t||p(!1),t}function me(e){let t=function(){let e=l.useContext(Z);return e||p(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||p(!1),n.route.id}const ge={};u.startTransition;function ye(e){let{to:t,replace:n,state:r,relative:i}=e;te()||p(!1);let{future:o,static:a}=l.useContext(Q),{matches:s}=l.useContext(Z),{pathname:u}=ne(),c=ie(),h=z(t,j(s,o.v7_relativeSplatPath),u,"path"===i),d=JSON.stringify(h);return l.useEffect((()=>c(JSON.parse(d),{replace:n,state:r,relative:i})),[c,d,i,n,r]),null}function ve(e){p(!1)}function be(e){let{basename:t="/",children:n=null,location:r,navigationType:i=s.Pop,navigator:o,static:a=!1,future:u}=e;te()&&p(!1);let c=t.replace(/^\/*/,"/"),h=l.useMemo((()=>({basename:c,navigator:o,static:a,future:K({v7_relativeSplatPath:!1},u)})),[c,u,o,a]);"string"===typeof r&&(r=v(r));let{pathname:d="/",search:f="",hash:m="",state:g=null,key:y="default"}=r,b=l.useMemo((()=>{let e=M(d,c);return null==e?null:{location:{pathname:e,search:f,hash:m,state:g,key:y},navigationType:i}}),[c,d,f,m,g,y,i]);return null==b?null:l.createElement(Q.Provider,{value:h},l.createElement(J.Provider,{children:n,value:b}))}function xe(e){let{children:t,location:n}=e;return oe(we(t),n)}new Promise((()=>{}));l.Component;function we(e,t){void 0===t&&(t=[]);let n=[];return l.Children.forEach(e,((e,r)=>{if(!l.isValidElement(e))return;let i=[...t,r];if(e.type===l.Fragment)return void n.push.apply(n,we(e.props.children,i));e.type!==ve&&p(!1),e.props.index&&e.props.children&&p(!1);let o={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=we(e.props.children,i)),n.push(o)})),n}function ke(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=ke(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const Se=function(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=ke(e))&&(r&&(r+=" "),r+=t);return r},Ee=e=>e,Ie=(()=>{let e=Ee;return{configure(t){e=t},generate:t=>e(t),reset(){e=Ee}}})(),Te=Ie,Ce={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Ae(e,t){const n=Ce[t];return n?`${arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui"}-${n}`:`${Te.generate(e)}-${t}`}function _e(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};for(const i in e){const o=e[i];let a="",s=!0;for(let e=0;e<o.length;e+=1){const r=o[e];r&&(a+=(!0===s?"":" ")+t(r),s=!1,n&&n[r]&&(a+=" "+n[r]))}r[i]=a}return r}function Ne(e){const t=new URL(`https://mui.com/production-error/?code=${e}`);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.searchParams.append("args[]",e))),`Minified MUI error #${e}; visit ${t} for the full message.`}function Oe(e){if("string"!==typeof e)throw new Error(Ne(7));return e.charAt(0).toUpperCase()+e.slice(1)}function Re(e,t){const n={...t};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const i=r;if("components"===i||"slots"===i)n[i]={...e[i],...n[i]};else if("componentsProps"===i||"slotProps"===i){const r=e[i],o=t[i];if(o)if(r){n[i]={...o};for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e)){const t=e;n[i][t]=Re(r[t],o[t])}}else n[i]=o;else n[i]=r||{}}else void 0===n[i]&&(n[i]=e[i])}return n}function $e(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function De(e){if(!$e(e))return e;const t={};return Object.keys(e).forEach((n=>{t[n]=De(e[n])})),t}function Pe(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const r=n.clone?{...e}:e;return $e(e)&&$e(t)&&Object.keys(t).forEach((i=>{$e(t[i])&&Object.prototype.hasOwnProperty.call(e,i)&&$e(e[i])?r[i]=Pe(e[i],t[i],n):n.clone?r[i]=$e(t[i])?De(t[i]):t[i]:r[i]=t[i]})),r}function Me(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...i}=e,o=(e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>({...e,[t.key]:t.val})),{})})(t),a=Object.keys(o);function s(e){return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n})`}function l(e){return`@media (max-width:${("number"===typeof t[e]?t[e]:e)-r/100}${n})`}function u(e,i){const o=a.indexOf(i);return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n}) and (max-width:${(-1!==o&&"number"===typeof t[a[o]]?t[a[o]]:i)-r/100}${n})`}return{keys:a,values:o,up:s,down:l,between:u,only:function(e){return a.indexOf(e)+1<a.length?u(e,a[a.indexOf(e)+1]):s(e)},not:function(e){const t=a.indexOf(e);return 0===t?s(a[1]):t===a.length-1?l(a[t]):u(e,a[a.indexOf(e)+1]).replace("@media","@media not all and")},unit:n,...i}}const Fe={borderRadius:4},Le={xs:0,sm:600,md:900,lg:1200,xl:1536},je={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${Le[e]}px)`},ze={containerQueries:e=>({up:t=>{let n="number"===typeof t?t:Le[t]||t;return"number"===typeof n&&(n=`${n}px`),e?`@container ${e} (min-width:${n})`:`@container (min-width:${n})`}})};function Be(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||je;return t.reduce(((r,i,o)=>(r[e.up(e.keys[o])]=n(t[o]),r)),{})}if("object"===typeof t){const e=r.breakpoints||je;return Object.keys(t).reduce(((i,o)=>{if(function(e,t){return"@"===t||t.startsWith("@")&&(e.some((e=>t.startsWith(`@${e}`)))||!!t.match(/^@\d/))}(e.keys,o)){const e=function(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,i]=n,o=Number.isNaN(+r)?r||0:+r;return e.containerQueries(i).up(o)}(r.containerQueries?r:ze,o);e&&(i[e]=n(t[o],o))}else if(Object.keys(e.values||Le).includes(o)){i[e.up(o)]=n(t[o],o)}else{const e=o;i[e]=t[e]}return i}),{})}return n(t)}function Ue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.keys?.reduce(((t,n)=>(t[e.up(n)]={},t)),{});return t||{}}function We(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function Ve(e){let{values:t,breakpoints:n,base:r}=e;const i=r||function(e,t){if("object"!==typeof e)return{};const n={},r=Object.keys(t);return Array.isArray(e)?r.forEach(((t,r)=>{r<e.length&&(n[t]=!0)})):r.forEach((t=>{null!=e[t]&&(n[t]=!0)})),n}(t,n),o=Object.keys(i);if(0===o.length)return t;let a;return o.reduce(((e,n,r)=>(Array.isArray(t)?(e[n]=null!=t[r]?t[r]:t[a],a=r):"object"===typeof t?(e[n]=null!=t[n]?t[n]:t[a],a=n):e[n]=t,e)),{})}function Ge(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n=`vars.${t}`.split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function He(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:Ge(e,n)||i,t&&(r=t(r,i,e)),r}const qe=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:i}=e,o=e=>{if(null==e[t])return null;const o=e[t],a=Ge(e.theme,r)||{};return Be(e,o,(e=>{let r=He(a,i,e);return e===r&&"string"===typeof e&&(r=He(a,i,`${t}${"default"===e?"":Oe(e)}`,e)),!1===n?r:{[n]:r}}))};return o.propTypes={},o.filterProps=[t],o};const Ke=function(e,t){return t?Pe(e,t,{clone:!1}):e};const Xe={m:"margin",p:"padding"},Ye={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Qe={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Je=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!Qe[e])return[e];e=Qe[e]}const[t,n]=e.split(""),r=Xe[t],i=Ye[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),Ze=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],et=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],tt=[...Ze,...et];function nt(e,t,n,r){const i=Ge(e,t,!0)??n;return"number"===typeof i||"string"===typeof i?e=>"string"===typeof e?e:"string"===typeof i?`calc(${e} * ${i})`:i*e:Array.isArray(i)?e=>{if("string"===typeof e)return e;const t=Math.abs(e);const n=i[t];return e>=0?n:"number"===typeof n?-n:`-${n}`}:"function"===typeof i?i:()=>{}}function rt(e){return nt(e,"spacing",8)}function it(e,t){return"string"===typeof t||null==t?t:e(t)}function ot(e,t,n,r){if(!t.includes(n))return null;const i=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=it(t,n),e)),{})}(Je(n),r);return Be(e,e[n],i)}function at(e,t){const n=rt(e.theme);return Object.keys(e).map((r=>ot(e,t,r,n))).reduce(Ke,{})}function st(e){return at(e,Ze)}function lt(e){return at(e,et)}function ut(e){return at(e,tt)}st.propTypes={},st.filterProps=Ze,lt.propTypes={},lt.filterProps=et,ut.propTypes={},ut.filterProps=tt;function ct(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rt({spacing:e});if(e.mui)return e;const n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?`${n}px`:n})).join(" ")};return n.mui=!0,n}const ht=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),i=e=>Object.keys(e).reduce(((t,n)=>r[n]?Ke(t,r[n](e)):t),{});return i.propTypes={},i.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),i};function dt(e){return"number"!==typeof e?e:`${e}px solid`}function pt(e,t){return qe({prop:e,themeKey:"borders",transform:t})}const ft=pt("border",dt),mt=pt("borderTop",dt),gt=pt("borderRight",dt),yt=pt("borderBottom",dt),vt=pt("borderLeft",dt),bt=pt("borderColor"),xt=pt("borderTopColor"),wt=pt("borderRightColor"),kt=pt("borderBottomColor"),St=pt("borderLeftColor"),Et=pt("outline",dt),It=pt("outlineColor"),Tt=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=nt(e.theme,"shape.borderRadius",4),n=e=>({borderRadius:it(t,e)});return Be(e,e.borderRadius,n)}return null};Tt.propTypes={},Tt.filterProps=["borderRadius"];ht(ft,mt,gt,yt,vt,bt,xt,wt,kt,St,Tt,Et,It);const Ct=e=>{if(void 0!==e.gap&&null!==e.gap){const t=nt(e.theme,"spacing",8),n=e=>({gap:it(t,e)});return Be(e,e.gap,n)}return null};Ct.propTypes={},Ct.filterProps=["gap"];const At=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=nt(e.theme,"spacing",8),n=e=>({columnGap:it(t,e)});return Be(e,e.columnGap,n)}return null};At.propTypes={},At.filterProps=["columnGap"];const _t=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=nt(e.theme,"spacing",8),n=e=>({rowGap:it(t,e)});return Be(e,e.rowGap,n)}return null};_t.propTypes={},_t.filterProps=["rowGap"];ht(Ct,At,_t,qe({prop:"gridColumn"}),qe({prop:"gridRow"}),qe({prop:"gridAutoFlow"}),qe({prop:"gridAutoColumns"}),qe({prop:"gridAutoRows"}),qe({prop:"gridTemplateColumns"}),qe({prop:"gridTemplateRows"}),qe({prop:"gridTemplateAreas"}),qe({prop:"gridArea"}));function Nt(e,t){return"grey"===t?t:e}ht(qe({prop:"color",themeKey:"palette",transform:Nt}),qe({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Nt}),qe({prop:"backgroundColor",themeKey:"palette",transform:Nt}));function Ot(e){return e<=1&&0!==e?100*e+"%":e}const Rt=qe({prop:"width",transform:Ot}),$t=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{const n=e.theme?.breakpoints?.values?.[t]||Le[t];return n?"px"!==e.theme?.breakpoints?.unit?{maxWidth:`${n}${e.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:Ot(t)}};return Be(e,e.maxWidth,t)}return null};$t.filterProps=["maxWidth"];const Dt=qe({prop:"minWidth",transform:Ot}),Pt=qe({prop:"height",transform:Ot}),Mt=qe({prop:"maxHeight",transform:Ot}),Ft=qe({prop:"minHeight",transform:Ot}),Lt=(qe({prop:"size",cssProperty:"width",transform:Ot}),qe({prop:"size",cssProperty:"height",transform:Ot}),ht(Rt,$t,Dt,Pt,Mt,Ft,qe({prop:"boxSizing"})),{border:{themeKey:"borders",transform:dt},borderTop:{themeKey:"borders",transform:dt},borderRight:{themeKey:"borders",transform:dt},borderBottom:{themeKey:"borders",transform:dt},borderLeft:{themeKey:"borders",transform:dt},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:dt},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Tt},color:{themeKey:"palette",transform:Nt},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Nt},backgroundColor:{themeKey:"palette",transform:Nt},p:{style:lt},pt:{style:lt},pr:{style:lt},pb:{style:lt},pl:{style:lt},px:{style:lt},py:{style:lt},padding:{style:lt},paddingTop:{style:lt},paddingRight:{style:lt},paddingBottom:{style:lt},paddingLeft:{style:lt},paddingX:{style:lt},paddingY:{style:lt},paddingInline:{style:lt},paddingInlineStart:{style:lt},paddingInlineEnd:{style:lt},paddingBlock:{style:lt},paddingBlockStart:{style:lt},paddingBlockEnd:{style:lt},m:{style:st},mt:{style:st},mr:{style:st},mb:{style:st},ml:{style:st},mx:{style:st},my:{style:st},margin:{style:st},marginTop:{style:st},marginRight:{style:st},marginBottom:{style:st},marginLeft:{style:st},marginX:{style:st},marginY:{style:st},marginInline:{style:st},marginInlineStart:{style:st},marginInlineEnd:{style:st},marginBlock:{style:st},marginBlockStart:{style:st},marginBlockEnd:{style:st},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Ct},rowGap:{style:_t},columnGap:{style:At},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Ot},maxWidth:{style:$t},minWidth:{transform:Ot},height:{transform:Ot},maxHeight:{transform:Ot},minHeight:{transform:Ot},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}}),jt=Lt;const zt=function(){function e(e,t,n,r){const i={[e]:t,theme:n},o=r[e];if(!o)return{[e]:t};const{cssProperty:a=e,themeKey:s,transform:l,style:u}=o;if(null==t)return null;if("typography"===s&&"inherit"===t)return{[e]:t};const c=Ge(n,s)||{};if(u)return u(i);return Be(i,t,(t=>{let n=He(c,l,t);return t===n&&"string"===typeof t&&(n=He(c,l,`${e}${"default"===t?"":Oe(t)}`,t)),!1===a?n:{[a]:n}}))}return function t(n){const{sx:r,theme:i={}}=n||{};if(!r)return null;const o=i.unstable_sxConfig??jt;function a(n){let r=n;if("function"===typeof n)r=n(i);else if("object"!==typeof n)return n;if(!r)return null;const a=Ue(i.breakpoints),s=Object.keys(a);let l=a;return Object.keys(r).forEach((n=>{const a=function(e,t){return"function"===typeof e?e(t):e}(r[n],i);if(null!==a&&void 0!==a)if("object"===typeof a)if(o[n])l=Ke(l,e(n,a,i,o));else{const e=Be({theme:i},a,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),i=new Set(r);return t.every((e=>i.size===Object.keys(e).length))}(e,a)?l=Ke(l,e):l[n]=t({sx:a,theme:i})}else l=Ke(l,e(n,a,i,o))})),function(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter((e=>e.startsWith("@container"))).sort(((e,t)=>{const n=/min-width:\s*([0-9.]+)/;return+(e.match(n)?.[1]||0)-+(t.match(n)?.[1]||0)}));return n.length?n.reduce(((e,n)=>{const r=t[n];return delete e[n],e[n]=r,e}),{...t}):t}(i,We(s,l))}return Array.isArray(r)?r.map(a):a(r)}}();zt.filterProps=["sx"];const Bt=zt;function Ut(e,t){const n=this;if(n.vars){if(!n.colorSchemes?.[e]||"function"!==typeof n.getColorSchemeSelector)return{};let r=n.getColorSchemeSelector(e);return"&"===r?t:((r.includes("data-")||r.includes("."))&&(r=`*:where(${r.replace(/\s*&$/,"")}) &`),{[r]:t})}return n.palette.mode===e?t:{}}const Wt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:r,shape:i={},...o}=e;let a=Pe({breakpoints:Me(t),direction:"ltr",components:{},palette:{mode:"light",...n},spacing:ct(r),shape:{...Fe,...i}},o);a=function(e){const t=(e,t)=>e.replace("@media",t?`@container ${t}`:"@container");function n(n,r){n.up=function(){return t(e.breakpoints.up(...arguments),r)},n.down=function(){return t(e.breakpoints.down(...arguments),r)},n.between=function(){return t(e.breakpoints.between(...arguments),r)},n.only=function(){return t(e.breakpoints.only(...arguments),r)},n.not=function(){const n=t(e.breakpoints.not(...arguments),r);return n.includes("not all and")?n.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):n}}const r={},i=e=>(n(r,e),r);return n(i),{...e,containerQueries:i}}(a),a.applyStyles=Ut;for(var s=arguments.length,l=new Array(s>1?s-1:0),u=1;u<s;u++)l[u-1]=arguments[u];return a=l.reduce(((e,t)=>Pe(e,t)),a),a.unstable_sxConfig={...jt,...o?.unstable_sxConfig},a.unstable_sx=function(e){return Bt({sx:e,theme:this})},a};var Vt=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),Gt=Math.abs,Ht=String.fromCharCode,qt=Object.assign;function Kt(e){return e.trim()}function Xt(e,t,n){return e.replace(t,n)}function Yt(e,t){return e.indexOf(t)}function Qt(e,t){return 0|e.charCodeAt(t)}function Jt(e,t,n){return e.slice(t,n)}function Zt(e){return e.length}function en(e){return e.length}function tn(e,t){return t.push(e),e}var nn=1,rn=1,on=0,an=0,sn=0,ln="";function un(e,t,n,r,i,o,a){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:nn,column:rn,length:a,return:""}}function cn(e,t){return qt(un("",null,null,"",null,null,0),e,{length:-e.length},t)}function hn(){return sn=an>0?Qt(ln,--an):0,rn--,10===sn&&(rn=1,nn--),sn}function dn(){return sn=an<on?Qt(ln,an++):0,rn++,10===sn&&(rn=1,nn++),sn}function pn(){return Qt(ln,an)}function fn(){return an}function mn(e,t){return Jt(ln,e,t)}function gn(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function yn(e){return nn=rn=1,on=Zt(ln=e),an=0,[]}function vn(e){return ln="",e}function bn(e){return Kt(mn(an-1,kn(91===e?e+2:40===e?e+1:e)))}function xn(e){for(;(sn=pn())&&sn<33;)dn();return gn(e)>2||gn(sn)>3?"":" "}function wn(e,t){for(;--t&&dn()&&!(sn<48||sn>102||sn>57&&sn<65||sn>70&&sn<97););return mn(e,fn()+(t<6&&32==pn()&&32==dn()))}function kn(e){for(;dn();)switch(sn){case e:return an;case 34:case 39:34!==e&&39!==e&&kn(sn);break;case 40:41===e&&kn(e);break;case 92:dn()}return an}function Sn(e,t){for(;dn()&&e+sn!==57&&(e+sn!==84||47!==pn()););return"/*"+mn(t,an-1)+"*"+Ht(47===e?e:dn())}function En(e){for(;!gn(pn());)dn();return mn(e,an)}var In="-ms-",Tn="-moz-",Cn="-webkit-",An="comm",_n="rule",Nn="decl",On="@keyframes";function Rn(e,t){for(var n="",r=en(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function $n(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case Nn:return e.return=e.return||e.value;case An:return"";case On:return e.return=e.value+"{"+Rn(e.children,r)+"}";case _n:e.value=e.props.join(",")}return Zt(n=Rn(e.children,r))?e.return=e.value+"{"+n+"}":""}function Dn(e){return vn(Pn("",null,null,null,[""],e=yn(e),0,[0],e))}function Pn(e,t,n,r,i,o,a,s,l){for(var u=0,c=0,h=a,d=0,p=0,f=0,m=1,g=1,y=1,v=0,b="",x=i,w=o,k=r,S=b;g;)switch(f=v,v=dn()){case 40:if(108!=f&&58==Qt(S,h-1)){-1!=Yt(S+=Xt(bn(v),"&","&\f"),"&\f")&&(y=-1);break}case 34:case 39:case 91:S+=bn(v);break;case 9:case 10:case 13:case 32:S+=xn(f);break;case 92:S+=wn(fn()-1,7);continue;case 47:switch(pn()){case 42:case 47:tn(Fn(Sn(dn(),fn()),t,n),l);break;default:S+="/"}break;case 123*m:s[u++]=Zt(S)*y;case 125*m:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+c:-1==y&&(S=Xt(S,/\f/g,"")),p>0&&Zt(S)-h&&tn(p>32?Ln(S+";",r,n,h-1):Ln(Xt(S," ","")+";",r,n,h-2),l);break;case 59:S+=";";default:if(tn(k=Mn(S,t,n,u,c,i,s,b,x=[],w=[],h),o),123===v)if(0===c)Pn(S,t,k,k,x,o,h,s,w);else switch(99===d&&110===Qt(S,3)?100:d){case 100:case 108:case 109:case 115:Pn(e,k,k,r&&tn(Mn(e,k,k,0,0,i,s,b,i,x=[],h),w),i,w,h,s,r?x:w);break;default:Pn(S,k,k,k,[""],w,0,s,w)}}u=c=p=0,m=y=1,b=S="",h=a;break;case 58:h=1+Zt(S),p=f;default:if(m<1)if(123==v)--m;else if(125==v&&0==m++&&125==hn())continue;switch(S+=Ht(v),v*m){case 38:y=c>0?1:(S+="\f",-1);break;case 44:s[u++]=(Zt(S)-1)*y,y=1;break;case 64:45===pn()&&(S+=bn(dn())),d=pn(),c=h=Zt(b=S+=En(fn())),v++;break;case 45:45===f&&2==Zt(S)&&(m=0)}}return o}function Mn(e,t,n,r,i,o,a,s,l,u,c){for(var h=i-1,d=0===i?o:[""],p=en(d),f=0,m=0,g=0;f<r;++f)for(var y=0,v=Jt(e,h+1,h=Gt(m=a[f])),b=e;y<p;++y)(b=Kt(m>0?d[y]+" "+v:Xt(v,/&\f/g,d[y])))&&(l[g++]=b);return un(e,t,n,0===i?_n:s,l,u,c)}function Fn(e,t,n){return un(e,t,n,An,Ht(sn),Jt(e,2,-2),0)}function Ln(e,t,n,r){return un(e,t,n,Nn,Jt(e,0,r),Jt(e,r+1,-1),r)}var jn=function(e,t,n){for(var r=0,i=0;r=i,i=pn(),38===r&&12===i&&(t[n]=1),!gn(i);)dn();return mn(e,an)},zn=function(e,t){return vn(function(e,t){var n=-1,r=44;do{switch(gn(r)){case 0:38===r&&12===pn()&&(t[n]=1),e[n]+=jn(an-1,t,n);break;case 2:e[n]+=bn(r);break;case 4:if(44===r){e[++n]=58===pn()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=Ht(r)}}while(r=dn());return e}(yn(e),t))},Bn=new WeakMap,Un=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Bn.get(n))&&!r){Bn.set(e,!0);for(var i=[],o=zn(t,i),a=n.props,s=0,l=0;s<o.length;s++)for(var u=0;u<a.length;u++,l++)e.props[l]=i[s]?o[s].replace(/&\f/g,a[u]):a[u]+" "+o[s]}}},Wn=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function Vn(e,t){switch(function(e,t){return 45^Qt(e,0)?(((t<<2^Qt(e,0))<<2^Qt(e,1))<<2^Qt(e,2))<<2^Qt(e,3):0}(e,t)){case 5103:return Cn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Cn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Cn+e+Tn+e+In+e+e;case 6828:case 4268:return Cn+e+In+e+e;case 6165:return Cn+e+In+"flex-"+e+e;case 5187:return Cn+e+Xt(e,/(\w+).+(:[^]+)/,Cn+"box-$1$2"+In+"flex-$1$2")+e;case 5443:return Cn+e+In+"flex-item-"+Xt(e,/flex-|-self/,"")+e;case 4675:return Cn+e+In+"flex-line-pack"+Xt(e,/align-content|flex-|-self/,"")+e;case 5548:return Cn+e+In+Xt(e,"shrink","negative")+e;case 5292:return Cn+e+In+Xt(e,"basis","preferred-size")+e;case 6060:return Cn+"box-"+Xt(e,"-grow","")+Cn+e+In+Xt(e,"grow","positive")+e;case 4554:return Cn+Xt(e,/([^-])(transform)/g,"$1"+Cn+"$2")+e;case 6187:return Xt(Xt(Xt(e,/(zoom-|grab)/,Cn+"$1"),/(image-set)/,Cn+"$1"),e,"")+e;case 5495:case 3959:return Xt(e,/(image-set\([^]*)/,Cn+"$1$`$1");case 4968:return Xt(Xt(e,/(.+:)(flex-)?(.*)/,Cn+"box-pack:$3"+In+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Cn+e+e;case 4095:case 3583:case 4068:case 2532:return Xt(e,/(.+)-inline(.+)/,Cn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Zt(e)-1-t>6)switch(Qt(e,t+1)){case 109:if(45!==Qt(e,t+4))break;case 102:return Xt(e,/(.+:)(.+)-([^]+)/,"$1"+Cn+"$2-$3$1"+Tn+(108==Qt(e,t+3)?"$3":"$2-$3"))+e;case 115:return~Yt(e,"stretch")?Vn(Xt(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==Qt(e,t+1))break;case 6444:switch(Qt(e,Zt(e)-3-(~Yt(e,"!important")&&10))){case 107:return Xt(e,":",":"+Cn)+e;case 101:return Xt(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Cn+(45===Qt(e,14)?"inline-":"")+"box$3$1"+Cn+"$2$3$1"+In+"$2box$3")+e}break;case 5936:switch(Qt(e,t+11)){case 114:return Cn+e+In+Xt(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Cn+e+In+Xt(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Cn+e+In+Xt(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Cn+e+In+e+e}return e}var Gn=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case Nn:e.return=Vn(e.value,e.length);break;case On:return Rn([cn(e,{value:Xt(e.value,"@","@"+Cn)})],r);case _n:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Rn([cn(e,{props:[Xt(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return Rn([cn(e,{props:[Xt(t,/:(plac\w+)/,":"+Cn+"input-$1")]}),cn(e,{props:[Xt(t,/:(plac\w+)/,":-moz-$1")]}),cn(e,{props:[Xt(t,/:(plac\w+)/,In+"input-$1")]})],r)}return""}))}}],Hn=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r,i,o=e.stylisPlugins||Gn,a={},s=[];r=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;s.push(e)}));var l,u,c=[$n,(u=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&u(e)})],h=function(e){var t=en(e);return function(n,r,i,o){for(var a="",s=0;s<t;s++)a+=e[s](n,r,i,o)||"";return a}}([Un,Wn].concat(o,c));i=function(e,t,n,r){l=n,function(e){Rn(Dn(e),h)}(e?e+"{"+t.styles+"}":t.styles),r&&(d.inserted[t.name]=!0)};var d={key:t,sheet:new Vt({key:t,container:r,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:i};return d.sheet.hydrate(s),d};var qn={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function Kn(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var Xn=/[A-Z]|^ms/g,Yn=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Qn=function(e){return 45===e.charCodeAt(1)},Jn=function(e){return null!=e&&"boolean"!==typeof e},Zn=Kn((function(e){return Qn(e)?e:e.replace(Xn,"-$&").toLowerCase()})),er=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(Yn,(function(e,t,n){return nr={name:t,styles:n,next:nr},t}))}return 1===qn[e]||Qn(e)||"number"!==typeof t||0===t?t:t+"px"};function tr(e,t,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var i=n;if(1===i.anim)return nr={name:i.name,styles:i.styles,next:nr},i.name;var o=n;if(void 0!==o.styles){var a=o.next;if(void 0!==a)for(;void 0!==a;)nr={name:a.name,styles:a.styles,next:nr},a=a.next;return o.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=tr(e,t,n[i])+";";else for(var o in n){var a=n[o];if("object"!==typeof a){var s=a;null!=t&&void 0!==t[s]?r+=o+"{"+t[s]+"}":Jn(s)&&(r+=Zn(o)+":"+er(o,s)+";")}else if(!Array.isArray(a)||"string"!==typeof a[0]||null!=t&&void 0!==t[a[0]]){var l=tr(e,t,a);switch(o){case"animation":case"animationName":r+=Zn(o)+":"+l+";";break;default:r+=o+"{"+l+"}"}}else for(var u=0;u<a.length;u++)Jn(a[u])&&(r+=Zn(o)+":"+er(o,a[u])+";")}return r}(e,t,n);case"function":if(void 0!==e){var s=nr,l=n(e);return nr=s,tr(e,t,l)}}var u=n;if(null==t)return u;var c=t[u];return void 0!==c?c:u}var nr,rr=/label:\s*([^\s;{]+)\s*(;|$)/g;function ir(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";nr=void 0;var o=e[0];null==o||void 0===o.raw?(r=!1,i+=tr(n,t,o)):i+=o[0];for(var a=1;a<e.length;a++){if(i+=tr(n,t,e[a]),r)i+=o[a]}rr.lastIndex=0;for(var s,l="";null!==(s=rr.exec(i));)l+="-"+s[1];var u=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:u,styles:i,next:nr}}var or=!!u.useInsertionEffect&&u.useInsertionEffect,ar=or||function(e){return e()},sr=or||l.useLayoutEffect,lr=l.createContext("undefined"!==typeof HTMLElement?Hn({key:"css"}):null),ur=(lr.Provider,function(e){return(0,l.forwardRef)((function(t,n){var r=(0,l.useContext)(lr);return e(t,r,n)}))}),cr=l.createContext({});const hr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=l.useContext(cr);return t&&(n=t,0!==Object.keys(n).length)?t:e;var n},dr=Wt();const pr=function(){return hr(arguments.length>0&&void 0!==arguments[0]?arguments[0]:dr)};function fr(e){let{props:t,name:n,defaultTheme:r,themeId:i}=e,o=pr(r);return i&&(o=o[i]||o),function(e){const{theme:t,name:n,props:r}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?Re(t.components[n].defaultProps,r):r}({theme:o,name:n,props:t})}function mr(){return mr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mr.apply(null,arguments)}var gr=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/;var yr=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},vr=function(e,t,n){yr(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}},br=Kn((function(e){return gr.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),xr=function(e){return"theme"!==e},wr=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?br:xr},kr=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},Sr=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return yr(t,n,r),ar((function(){return vr(t,n,r)})),null},Er=function e(t,n){var r,i,o=t.__emotion_real===t,a=o&&t.__emotion_base||t;void 0!==n&&(r=n.label,i=n.target);var s=kr(t,n,o),u=s||wr(a),c=!u("as");return function(){var h=arguments,d=o&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==r&&d.push("label:"+r+";"),null==h[0]||void 0===h[0].raw)d.push.apply(d,h);else{d.push(h[0][0]);for(var p=h.length,f=1;f<p;f++)d.push(h[f],h[0][f])}var m=ur((function(e,t,n){var r=c&&e.as||a,o="",h=[],p=e;if(null==e.theme){for(var f in p={},e)p[f]=e[f];p.theme=l.useContext(cr)}"string"===typeof e.className?o=function(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):n&&(r+=n+" ")})),r}(t.registered,h,e.className):null!=e.className&&(o=e.className+" ");var m=ir(d.concat(h),t.registered,p);o+=t.key+"-"+m.name,void 0!==i&&(o+=" "+i);var g=c&&void 0===s?wr(r):u,y={};for(var v in e)c&&"as"===v||g(v)&&(y[v]=e[v]);return y.className=o,n&&(y.ref=n),l.createElement(l.Fragment,null,l.createElement(Sr,{cache:t,serialized:m,isStringTag:"string"===typeof r}),l.createElement(r,y))}));return m.displayName=void 0!==r?r:"Styled("+("string"===typeof a?a:a.displayName||a.name||"Component")+")",m.defaultProps=t.defaultProps,m.__emotion_real=m,m.__emotion_base=a,m.__emotion_styles=d,m.__emotion_forwardProp=s,Object.defineProperty(m,"toString",{value:function(){return"."+i}}),m.withComponent=function(t,r){return e(t,mr({},n,r,{shouldForwardProp:kr(m,r,!0)})).apply(void 0,d)},m}}.bind();function Ir(e,t){return Er(e,t)}["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){Er[e]=Er(e)}));const Tr=[];function Cr(e){return Tr[0]=e,ir(Tr)}function Ar(e){const{variants:t,...n}=e,r={variants:t,style:Cr(n),isProcessed:!0};return r.style===n||t&&t.forEach((e=>{"function"!==typeof e.style&&(e.style=Cr(e.style))})),r}const _r=Wt();function Nr(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}function Or(e){return e?(t,n)=>n[e]:null}function Rr(e,t){const n="function"===typeof t?t(e):t;if(Array.isArray(n))return n.flatMap((t=>Rr(e,t)));if(Array.isArray(n?.variants)){let t;if(n.isProcessed)t=n.style;else{const{variants:e,...r}=n;t=r}return $r(e,n.variants,[t])}return n?.isProcessed?n.style:n}function $r(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e:for(let i=0;i<t.length;i+=1){const o=t[i];if("function"===typeof o.props){if(n??={...e,...e.ownerState,ownerState:e.ownerState},!o.props(n))continue}else for(const t in o.props)if(e[t]!==o.props[t]&&e.ownerState?.[t]!==o.props[t])continue e;"function"===typeof o.style?(n??={...e,...e.ownerState,ownerState:e.ownerState},r.push(o.style(n))):r.push(o.style)}return r}function Dr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=_r,rootShouldForwardProp:r=Nr,slotShouldForwardProp:i=Nr}=e;function o(e){!function(e,t,n){e.theme=function(e){for(const t in e)return!1;return!0}(e.theme)?n:e.theme[t]||e.theme}(e,t,n)}return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}(e,(e=>e.filter((e=>e!==Bt))));const{name:n,slot:a,skipVariantsResolver:s,skipSx:l,overridesResolver:u=Or(Mr(a)),...c}=t,h=void 0!==s?s:a&&"Root"!==a&&"root"!==a||!1,d=l||!1;let p=Nr;"Root"===a||"root"===a?p=r:a?p=i:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(p=void 0);const f=Ir(e,{shouldForwardProp:p,label:Pr(n,a),...c}),m=e=>{if("function"===typeof e&&e.__emotion_real!==e)return function(t){return Rr(t,e)};if($e(e)){const t=Ar(e);return t.variants?function(e){return Rr(e,t)}:t.style}return e},g=function(){const t=[];for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];const s=i.map(m),l=[];if(t.push(o),n&&u&&l.push((function(e){const t=e.theme,r=t.components?.[n]?.styleOverrides;if(!r)return null;const i={};for(const n in r)i[n]=Rr(e,r[n]);return u(e,i)})),n&&!h&&l.push((function(e){const t=e.theme,r=t?.components?.[n]?.variants;return r?$r(e,r):null})),d||l.push(Bt),Array.isArray(s[0])){const e=s.shift(),n=new Array(t.length).fill(""),r=new Array(l.length).fill("");let i;i=[...n,...e,...r],i.raw=[...n,...e.raw,...r],t.unshift(i)}const c=[...t,...s,...l],p=f(...c);return e.muiName&&(p.muiName=e.muiName),p};return f.withConfig&&(g.withConfig=f.withConfig),g}}function Pr(e,t){}function Mr(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}const Fr=Dr();var Lr=n(579);const jr=Wt(),zr=Fr("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${Oe(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),Br=e=>fr({props:e,name:"MuiContainer",defaultTheme:jr});const Ur=Oe;const Wr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,n))};function Vr(e){return Wr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1)}function Gr(e){if(e.type)return e;if("#"===e.charAt(0))return Gr(function(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?`rgb${4===n.length?"a":""}(${n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(Ne(9,e));let r,i=e.substring(t+1,e.length-1);if("color"===n){if(i=i.split(" "),r=i.shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(r))throw new Error(Ne(10,r))}else i=i.split(",");return i=i.map((e=>parseFloat(e))),{type:n,values:i,colorSpace:r}}const Hr=(e,t)=>{try{return(e=>{const t=Gr(e);return t.values.slice(0,3).map(((e,n)=>t.type.includes("hsl")&&0!==n?`${e}%`:e)).join(" ")})(e)}catch(n){return e}};function qr(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return t.includes("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):t.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),r=t.includes("color")?`${n} ${r.join(" ")}`:`${r.join(", ")}`,`${t}(${r})`}function Kr(e){e=Gr(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-o*Math.max(Math.min(t-3,9-t,1),-1)};let s="rgb";const l=[Math.round(255*a(0)),Math.round(255*a(8)),Math.round(255*a(4))];return"hsla"===e.type&&(s+="a",l.push(t[3])),qr({type:s,values:l})}function Xr(e){let t="hsl"===(e=Gr(e)).type||"hsla"===e.type?Gr(Kr(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Yr(e,t){return e=Gr(e),t=Vr(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${t}`:e.values[3]=t,qr(e)}function Qr(e,t,n){try{return Yr(e,t)}catch(r){return e}}function Jr(e,t){if(e=Gr(e),t=Vr(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return qr(e)}function Zr(e,t,n){try{return Jr(e,t)}catch(r){return e}}function ei(e,t){if(e=Gr(e),t=Vr(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return qr(e)}function ti(e,t,n){try{return ei(e,t)}catch(r){return e}}function ni(e,t,n){try{return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return Xr(e)>.5?Jr(e,t):ei(e,t)}(e,t)}catch(r){return e}}const ri={black:"#000",white:"#fff"},ii={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},oi={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},ai={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},si={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},li={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},ui={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},ci={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},hi={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:ri.white,default:ri.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},di={text:{primary:ri.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:ri.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function pi(e,t,n,r){const i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=ei(e.main,i):"dark"===t&&(e.dark=Jr(e.main,o)))}function fi(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2,...i}=e,o=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:li[200],light:li[50],dark:li[400]}:{main:li[700],light:li[400],dark:li[800]}}(t),a=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:oi[200],light:oi[50],dark:oi[400]}:{main:oi[500],light:oi[300],dark:oi[700]}}(t),s=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:ai[500],light:ai[300],dark:ai[700]}:{main:ai[700],light:ai[400],dark:ai[800]}}(t),l=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:ui[400],light:ui[300],dark:ui[700]}:{main:ui[700],light:ui[500],dark:ui[900]}}(t),u=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:ci[400],light:ci[300],dark:ci[700]}:{main:ci[800],light:ci[500],dark:ci[900]}}(t),c=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:si[400],light:si[300],dark:si[700]}:{main:"#ed6c02",light:si[500],dark:si[900]}}(t);function h(e){const t=function(e,t){const n=Xr(e),r=Xr(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,di.text.primary)>=n?di.text.primary:hi.text.primary;return t}const d=e=>{let{color:t,name:n,mainShade:i=500,lightShade:o=300,darkShade:a=700}=e;if(t={...t},!t.main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error(Ne(11,n?` (${n})`:"",i));if("string"!==typeof t.main)throw new Error(Ne(12,n?` (${n})`:"",JSON.stringify(t.main)));return pi(t,"light",o,r),pi(t,"dark",a,r),t.contrastText||(t.contrastText=h(t.main)),t},p={dark:di,light:hi};return Pe({common:{...ri},mode:t,primary:d({color:o,name:"primary"}),secondary:d({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:d({color:s,name:"error"}),warning:d({color:c,name:"warning"}),info:d({color:l,name:"info"}),success:d({color:u,name:"success"}),grey:ii,contrastThreshold:n,getContrastText:h,augmentColor:d,tonalOffset:r,...p[t]},i)}function mi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";function t(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(!r.length)return"";const o=r[0];return"string"!==typeof o||o.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, ${o}`:`, var(--${e?`${e}-`:""}${o}${t(...r.slice(1))})`}return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return`var(--${e?`${e}-`:""}${n}${t(...i)})`}}function gi(e){const t={};return Object.entries(e).forEach((e=>{const[n,r]=e;"object"===typeof r&&(t[n]=`${r.fontStyle?`${r.fontStyle} `:""}${r.fontVariant?`${r.fontVariant} `:""}${r.fontWeight?`${r.fontWeight} `:""}${r.fontStretch?`${r.fontStretch} `:""}${r.fontSize||""}${r.lineHeight?`/${r.lineHeight} `:""}${r.fontFamily||""}`)})),t}const yi=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=e;t.forEach(((e,o)=>{o===t.length-1?Array.isArray(i)?i[Number(e)]=n:i&&"object"===typeof i&&(i[e]=n):i&&"object"===typeof i&&(i[e]||(i[e]=r.includes(e)?[]:{}),i=i[e])}))};function vi(e,t){const{prefix:n,shouldSkipGeneratingVar:r}=t||{},i={},o={},a={};var s,l;return s=(e,t,s)=>{if(("string"===typeof t||"number"===typeof t)&&(!r||!r(e,t))){const r=`--${n?`${n}-`:""}${e.join("-")}`,l=((e,t)=>"number"===typeof t?["lineHeight","fontWeight","opacity","zIndex"].some((t=>e.includes(t)))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t)(e,t);Object.assign(i,{[r]:l}),yi(o,e,`var(${r})`,s),yi(a,e,`var(${r}, ${l})`,s)}},l=e=>"vars"===e[0],function e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object.entries(t).forEach((t=>{let[i,o]=t;(!l||l&&!l([...n,i]))&&void 0!==o&&null!==o&&("object"===typeof o&&Object.keys(o).length>0?e(o,[...n,i],Array.isArray(o)?[...r,i]:r):s([...n,i],o,r))}))}(e),{css:i,vars:o,varsWithDefaults:a}}const bi=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{getSelector:n=g,disableCssColorScheme:r,colorSchemeSelector:i}=t,{colorSchemes:o={},components:a,defaultColorScheme:s="light",...l}=e,{vars:u,css:c,varsWithDefaults:h}=vi(l,t);let d=h;const p={},{[s]:f,...m}=o;if(Object.entries(m||{}).forEach((e=>{let[n,r]=e;const{vars:i,css:o,varsWithDefaults:a}=vi(r,t);d=Pe(d,a),p[n]={css:o,vars:i}})),f){const{css:e,vars:n,varsWithDefaults:r}=vi(f,t);d=Pe(d,r),p[s]={css:e,vars:n}}function g(t,n){let r=i;if("class"===i&&(r=".%s"),"data"===i&&(r="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(r=`[${i}="%s"]`),t){if("media"===r){if(e.defaultColorScheme===t)return":root";const r=o[t]?.palette?.mode||t;return{[`@media (prefers-color-scheme: ${r})`]:{":root":n}}}if(r)return e.defaultColorScheme===t?`:root, ${r.replace("%s",String(t))}`:r.replace("%s",String(t))}return":root"}return{vars:d,generateThemeVars:()=>{let e={...u};return Object.entries(p).forEach((t=>{let[,{vars:n}]=t;e=Pe(e,n)})),e},generateStyleSheets:()=>{const t=[],i=e.defaultColorScheme||"light";function a(e,n){Object.keys(n).length&&t.push("string"===typeof e?{[e]:{...n}}:e)}a(n(void 0,{...c}),c);const{[i]:s,...l}=p;if(s){const{css:e}=s,t=o[i]?.palette?.mode,l=!r&&t?{colorScheme:t,...e}:{...e};a(n(i,{...l}),l)}return Object.entries(l).forEach((e=>{let[t,{css:i}]=e;const s=o[t]?.palette?.mode,l=!r&&s?{colorScheme:s,...i}:{...i};a(n(t,{...l}),l)})),t}}};function xi(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function wi(e){return Math.round(1e5*e)/1e5}const ki={textTransform:"uppercase"},Si='"Roboto", "Helvetica", "Arial", sans-serif';function Ei(e,t){const{fontFamily:n=Si,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:s=700,htmlFontSize:l=16,allVariants:u,pxToRem:c,...h}="function"===typeof t?t(e):t;const d=r/14,p=c||(e=>e/l*d+"rem"),f=(e,t,r,i,o)=>({fontFamily:n,fontWeight:e,fontSize:p(t),lineHeight:r,...n===Si?{letterSpacing:`${wi(i/t)}em`}:{},...o,...u}),m={h1:f(i,96,1.167,-1.5),h2:f(i,60,1.2,-.5),h3:f(o,48,1.167,0),h4:f(o,34,1.235,.25),h5:f(o,24,1.334,0),h6:f(a,20,1.6,.15),subtitle1:f(o,16,1.75,.15),subtitle2:f(a,14,1.57,.1),body1:f(o,16,1.5,.15),body2:f(o,14,1.43,.15),button:f(a,14,1.75,.4,ki),caption:f(o,12,1.66,.4),overline:f(o,12,2.66,1,ki),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Pe({htmlFontSize:l,pxToRem:p,fontFamily:n,fontSize:r,fontWeightLight:i,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:s,...m},h,{clone:!1})}function Ii(){return[`${arguments.length<=0?void 0:arguments[0]}px ${arguments.length<=1?void 0:arguments[1]}px ${arguments.length<=2?void 0:arguments[2]}px ${arguments.length<=3?void 0:arguments[3]}px rgba(0,0,0,0.2)`,`${arguments.length<=4?void 0:arguments[4]}px ${arguments.length<=5?void 0:arguments[5]}px ${arguments.length<=6?void 0:arguments[6]}px ${arguments.length<=7?void 0:arguments[7]}px rgba(0,0,0,0.14)`,`${arguments.length<=8?void 0:arguments[8]}px ${arguments.length<=9?void 0:arguments[9]}px ${arguments.length<=10?void 0:arguments[10]}px ${arguments.length<=11?void 0:arguments[11]}px rgba(0,0,0,0.12)`].join(",")}const Ti=["none",Ii(0,2,1,-1,0,1,1,0,0,1,3,0),Ii(0,3,1,-2,0,2,2,0,0,1,5,0),Ii(0,3,3,-2,0,3,4,0,0,1,8,0),Ii(0,2,4,-1,0,4,5,0,0,1,10,0),Ii(0,3,5,-1,0,5,8,0,0,1,14,0),Ii(0,3,5,-1,0,6,10,0,0,1,18,0),Ii(0,4,5,-2,0,7,10,1,0,2,16,1),Ii(0,5,5,-3,0,8,10,1,0,3,14,2),Ii(0,5,6,-3,0,9,12,1,0,3,16,2),Ii(0,6,6,-3,0,10,14,1,0,4,18,3),Ii(0,6,7,-4,0,11,15,1,0,4,20,3),Ii(0,7,8,-4,0,12,17,2,0,5,22,4),Ii(0,7,8,-4,0,13,19,2,0,5,24,4),Ii(0,7,9,-4,0,14,21,2,0,5,26,4),Ii(0,8,9,-5,0,15,22,2,0,6,28,5),Ii(0,8,10,-5,0,16,24,2,0,6,30,5),Ii(0,8,11,-5,0,17,26,2,0,6,32,5),Ii(0,9,11,-5,0,18,28,2,0,7,34,6),Ii(0,9,12,-6,0,19,29,2,0,7,36,6),Ii(0,10,13,-6,0,20,31,3,0,8,38,7),Ii(0,10,13,-6,0,21,33,3,0,8,40,7),Ii(0,10,14,-6,0,22,35,3,0,8,42,7),Ii(0,11,14,-7,0,23,36,3,0,9,44,8),Ii(0,11,15,-7,0,24,38,3,0,9,46,8)],Ci={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Ai={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function _i(e){return`${Math.round(e)}ms`}function Ni(e){if(!e)return 0;const t=e/36;return Math.min(Math.round(10*(4+15*t**.25+t/5)),3e3)}function Oi(e){const t={...Ci,...e.easing},n={...Ai,...e.duration};return{getAutoHeightDuration:Ni,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:i=n.standard,easing:o=t.easeInOut,delay:a=0,...s}=r;return(Array.isArray(e)?e:[e]).map((e=>`${e} ${"string"===typeof i?i:_i(i)} ${o} ${"string"===typeof a?a:_i(a)}`)).join(",")},...e,easing:t,duration:n}}const Ri={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function $i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t,mixins:n={},spacing:r,palette:i={},transitions:o={},typography:a={},shape:s,...l}=e;if(e.vars)throw new Error(Ne(20));const u=fi(i),c=Wt(e);let h=Pe(c,{mixins:xi(c.breakpoints,n),palette:u,shadows:Ti.slice(),typography:Ei(u,a),transitions:Oi(o),zIndex:{...Ri}});h=Pe(h,l);for(var d=arguments.length,p=new Array(d>1?d-1:0),f=1;f<d;f++)p[f-1]=arguments[f];return h=p.reduce(((e,t)=>Pe(e,t)),h),h.unstable_sxConfig={...jt,...l?.unstable_sxConfig},h.unstable_sx=function(e){return Bt({sx:e,theme:this})},h}const Di=$i;function Pi(e){let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,Math.round(10*t)/1e3}const Mi=[...Array(25)].map(((e,t)=>{if(0===t)return"none";const n=Pi(t);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`}));function Fi(e){return{inputPlaceholder:"dark"===e?.5:.42,inputUnderline:"dark"===e?.7:.42,switchTrackDisabled:"dark"===e?.2:.12,switchTrack:"dark"===e?.3:.38}}function Li(e){return"dark"===e?Mi:[]}function ji(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||"palette"===e[0]&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const zi=e=>[...[...Array(25)].map(((t,n)=>`--${e?`${e}-`:""}overlays-${n}`)),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],Bi=e=>(t,n)=>{const r=e.rootSelector||":root",i=e.colorSchemeSelector;let o=i;if("class"===i&&(o=".%s"),"data"===i&&(o="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(o=`[${i}="%s"]`),e.defaultColorScheme===t){if("dark"===t){const i={};return zi(e.cssVarPrefix).forEach((e=>{i[e]=n[e],delete n[e]})),"media"===o?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:i}}:o?{[o.replace("%s",t)]:i,[`${r}, ${o.replace("%s",t)}`]:n}:{[r]:{...n,...i}}}if(o&&"media"!==o)return`${r}, ${o.replace("%s",String(t))}`}else if(t){if("media"===o)return{[`@media (prefers-color-scheme: ${String(t)})`]:{[r]:n}};if(o)return o.replace("%s",String(t))}return r};function Ui(){const e={...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}};return function e(t){const n=Object.entries(t);for(let i=0;i<n.length;i++){const[o,a]=n[i];!$e(r=a)&&"undefined"!==typeof r&&"string"!==typeof r&&"boolean"!==typeof r&&"number"!==typeof r&&!Array.isArray(r)||o.startsWith("unstable_")?delete t[o]:$e(a)&&(t[o]={...a},e(t[o]))}var r}(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';\n\nconst theme = ${JSON.stringify(e,null,2)};\n\ntheme.breakpoints = createBreakpoints(theme.breakpoints || {});\ntheme.transitions = createTransitions(theme.transitions || {});\n\nexport default theme;`}function Wi(e,t,n){!e[t]&&n&&(e[t]=n)}function Vi(e){return e&&e.startsWith("hsl")?Kr(e):e}function Gi(e,t){`${t}Channel`in e||(e[`${t}Channel`]=Hr(Vi(e[t])))}const Hi=e=>{try{return e()}catch(t){}};function qi(e,t,n,r){if(!t)return;t=!0===t?{}:t;const i="dark"===r?"dark":"light";if(!n)return void(e[r]=function(e){const{palette:t={mode:"light"},opacity:n,overlays:r,...i}=e,o=fi(t);return{palette:o,opacity:{...Fi(o.mode),...n},overlays:r||Li(o.mode),...i}}({...t,palette:{mode:i,...t?.palette}}));const{palette:o,...a}=Di({...n,palette:{mode:i,...t?.palette}});return e[r]={...t,palette:o,opacity:{...Fi(i),...t?.opacity},overlays:t?.overlays||Li(i)},a}function Ki(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{colorSchemes:t={light:!0},defaultColorScheme:n,disableCssColorScheme:r=!1,cssVarPrefix:i="mui",shouldSkipGeneratingVar:o=ji,colorSchemeSelector:a=(t.light&&t.dark?"media":void 0),rootSelector:s=":root",...l}=e,u=Object.keys(t)[0],c=n||(t.light&&"light"!==u?"light":u),h=function(){return mi(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mui")}(i),{[c]:d,light:p,dark:f,...m}=t,g={...m};let y=d;if(("dark"===c&&!("dark"in t)||"light"===c&&!("light"in t))&&(y=!0),!y)throw new Error(Ne(21,c));const v=qi(g,y,l,c);p&&!g.light&&qi(g,p,void 0,"light"),f&&!g.dark&&qi(g,f,void 0,"dark");let b={defaultColorScheme:c,...v,cssVarPrefix:i,colorSchemeSelector:a,rootSelector:s,getCssVar:h,colorSchemes:g,font:{...gi(v.typography),...v.font},spacing:(x=l.spacing,"number"===typeof x?`${x}px`:"string"===typeof x||"function"===typeof x||Array.isArray(x)?x:"8px")};var x;Object.keys(b.colorSchemes).forEach((e=>{const t=b.colorSchemes[e].palette,n=e=>{const n=e.split("-"),r=n[1],i=n[2];return h(e,t[r][i])};if("light"===t.mode&&(Wi(t.common,"background","#fff"),Wi(t.common,"onBackground","#000")),"dark"===t.mode&&(Wi(t.common,"background","#000"),Wi(t.common,"onBackground","#fff")),function(e,t){t.forEach((t=>{e[t]||(e[t]={})}))}(t,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),"light"===t.mode){Wi(t.Alert,"errorColor",Zr(t.error.light,.6)),Wi(t.Alert,"infoColor",Zr(t.info.light,.6)),Wi(t.Alert,"successColor",Zr(t.success.light,.6)),Wi(t.Alert,"warningColor",Zr(t.warning.light,.6)),Wi(t.Alert,"errorFilledBg",n("palette-error-main")),Wi(t.Alert,"infoFilledBg",n("palette-info-main")),Wi(t.Alert,"successFilledBg",n("palette-success-main")),Wi(t.Alert,"warningFilledBg",n("palette-warning-main")),Wi(t.Alert,"errorFilledColor",Hi((()=>t.getContrastText(t.error.main)))),Wi(t.Alert,"infoFilledColor",Hi((()=>t.getContrastText(t.info.main)))),Wi(t.Alert,"successFilledColor",Hi((()=>t.getContrastText(t.success.main)))),Wi(t.Alert,"warningFilledColor",Hi((()=>t.getContrastText(t.warning.main)))),Wi(t.Alert,"errorStandardBg",ti(t.error.light,.9)),Wi(t.Alert,"infoStandardBg",ti(t.info.light,.9)),Wi(t.Alert,"successStandardBg",ti(t.success.light,.9)),Wi(t.Alert,"warningStandardBg",ti(t.warning.light,.9)),Wi(t.Alert,"errorIconColor",n("palette-error-main")),Wi(t.Alert,"infoIconColor",n("palette-info-main")),Wi(t.Alert,"successIconColor",n("palette-success-main")),Wi(t.Alert,"warningIconColor",n("palette-warning-main")),Wi(t.AppBar,"defaultBg",n("palette-grey-100")),Wi(t.Avatar,"defaultBg",n("palette-grey-400")),Wi(t.Button,"inheritContainedBg",n("palette-grey-300")),Wi(t.Button,"inheritContainedHoverBg",n("palette-grey-A100")),Wi(t.Chip,"defaultBorder",n("palette-grey-400")),Wi(t.Chip,"defaultAvatarColor",n("palette-grey-700")),Wi(t.Chip,"defaultIconColor",n("palette-grey-700")),Wi(t.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Wi(t.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Wi(t.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Wi(t.LinearProgress,"primaryBg",ti(t.primary.main,.62)),Wi(t.LinearProgress,"secondaryBg",ti(t.secondary.main,.62)),Wi(t.LinearProgress,"errorBg",ti(t.error.main,.62)),Wi(t.LinearProgress,"infoBg",ti(t.info.main,.62)),Wi(t.LinearProgress,"successBg",ti(t.success.main,.62)),Wi(t.LinearProgress,"warningBg",ti(t.warning.main,.62)),Wi(t.Skeleton,"bg",`rgba(${n("palette-text-primaryChannel")} / 0.11)`),Wi(t.Slider,"primaryTrack",ti(t.primary.main,.62)),Wi(t.Slider,"secondaryTrack",ti(t.secondary.main,.62)),Wi(t.Slider,"errorTrack",ti(t.error.main,.62)),Wi(t.Slider,"infoTrack",ti(t.info.main,.62)),Wi(t.Slider,"successTrack",ti(t.success.main,.62)),Wi(t.Slider,"warningTrack",ti(t.warning.main,.62));const e=ni(t.background.default,.8);Wi(t.SnackbarContent,"bg",e),Wi(t.SnackbarContent,"color",Hi((()=>t.getContrastText(e)))),Wi(t.SpeedDialAction,"fabHoverBg",ni(t.background.paper,.15)),Wi(t.StepConnector,"border",n("palette-grey-400")),Wi(t.StepContent,"border",n("palette-grey-400")),Wi(t.Switch,"defaultColor",n("palette-common-white")),Wi(t.Switch,"defaultDisabledColor",n("palette-grey-100")),Wi(t.Switch,"primaryDisabledColor",ti(t.primary.main,.62)),Wi(t.Switch,"secondaryDisabledColor",ti(t.secondary.main,.62)),Wi(t.Switch,"errorDisabledColor",ti(t.error.main,.62)),Wi(t.Switch,"infoDisabledColor",ti(t.info.main,.62)),Wi(t.Switch,"successDisabledColor",ti(t.success.main,.62)),Wi(t.Switch,"warningDisabledColor",ti(t.warning.main,.62)),Wi(t.TableCell,"border",ti(Qr(t.divider,1),.88)),Wi(t.Tooltip,"bg",Qr(t.grey[700],.92))}if("dark"===t.mode){Wi(t.Alert,"errorColor",ti(t.error.light,.6)),Wi(t.Alert,"infoColor",ti(t.info.light,.6)),Wi(t.Alert,"successColor",ti(t.success.light,.6)),Wi(t.Alert,"warningColor",ti(t.warning.light,.6)),Wi(t.Alert,"errorFilledBg",n("palette-error-dark")),Wi(t.Alert,"infoFilledBg",n("palette-info-dark")),Wi(t.Alert,"successFilledBg",n("palette-success-dark")),Wi(t.Alert,"warningFilledBg",n("palette-warning-dark")),Wi(t.Alert,"errorFilledColor",Hi((()=>t.getContrastText(t.error.dark)))),Wi(t.Alert,"infoFilledColor",Hi((()=>t.getContrastText(t.info.dark)))),Wi(t.Alert,"successFilledColor",Hi((()=>t.getContrastText(t.success.dark)))),Wi(t.Alert,"warningFilledColor",Hi((()=>t.getContrastText(t.warning.dark)))),Wi(t.Alert,"errorStandardBg",Zr(t.error.light,.9)),Wi(t.Alert,"infoStandardBg",Zr(t.info.light,.9)),Wi(t.Alert,"successStandardBg",Zr(t.success.light,.9)),Wi(t.Alert,"warningStandardBg",Zr(t.warning.light,.9)),Wi(t.Alert,"errorIconColor",n("palette-error-main")),Wi(t.Alert,"infoIconColor",n("palette-info-main")),Wi(t.Alert,"successIconColor",n("palette-success-main")),Wi(t.Alert,"warningIconColor",n("palette-warning-main")),Wi(t.AppBar,"defaultBg",n("palette-grey-900")),Wi(t.AppBar,"darkBg",n("palette-background-paper")),Wi(t.AppBar,"darkColor",n("palette-text-primary")),Wi(t.Avatar,"defaultBg",n("palette-grey-600")),Wi(t.Button,"inheritContainedBg",n("palette-grey-800")),Wi(t.Button,"inheritContainedHoverBg",n("palette-grey-700")),Wi(t.Chip,"defaultBorder",n("palette-grey-700")),Wi(t.Chip,"defaultAvatarColor",n("palette-grey-300")),Wi(t.Chip,"defaultIconColor",n("palette-grey-300")),Wi(t.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Wi(t.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Wi(t.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Wi(t.LinearProgress,"primaryBg",Zr(t.primary.main,.5)),Wi(t.LinearProgress,"secondaryBg",Zr(t.secondary.main,.5)),Wi(t.LinearProgress,"errorBg",Zr(t.error.main,.5)),Wi(t.LinearProgress,"infoBg",Zr(t.info.main,.5)),Wi(t.LinearProgress,"successBg",Zr(t.success.main,.5)),Wi(t.LinearProgress,"warningBg",Zr(t.warning.main,.5)),Wi(t.Skeleton,"bg",`rgba(${n("palette-text-primaryChannel")} / 0.13)`),Wi(t.Slider,"primaryTrack",Zr(t.primary.main,.5)),Wi(t.Slider,"secondaryTrack",Zr(t.secondary.main,.5)),Wi(t.Slider,"errorTrack",Zr(t.error.main,.5)),Wi(t.Slider,"infoTrack",Zr(t.info.main,.5)),Wi(t.Slider,"successTrack",Zr(t.success.main,.5)),Wi(t.Slider,"warningTrack",Zr(t.warning.main,.5));const e=ni(t.background.default,.98);Wi(t.SnackbarContent,"bg",e),Wi(t.SnackbarContent,"color",Hi((()=>t.getContrastText(e)))),Wi(t.SpeedDialAction,"fabHoverBg",ni(t.background.paper,.15)),Wi(t.StepConnector,"border",n("palette-grey-600")),Wi(t.StepContent,"border",n("palette-grey-600")),Wi(t.Switch,"defaultColor",n("palette-grey-300")),Wi(t.Switch,"defaultDisabledColor",n("palette-grey-600")),Wi(t.Switch,"primaryDisabledColor",Zr(t.primary.main,.55)),Wi(t.Switch,"secondaryDisabledColor",Zr(t.secondary.main,.55)),Wi(t.Switch,"errorDisabledColor",Zr(t.error.main,.55)),Wi(t.Switch,"infoDisabledColor",Zr(t.info.main,.55)),Wi(t.Switch,"successDisabledColor",Zr(t.success.main,.55)),Wi(t.Switch,"warningDisabledColor",Zr(t.warning.main,.55)),Wi(t.TableCell,"border",Zr(Qr(t.divider,1),.68)),Wi(t.Tooltip,"bg",Qr(t.grey[700],.92))}Gi(t.background,"default"),Gi(t.background,"paper"),Gi(t.common,"background"),Gi(t.common,"onBackground"),Gi(t,"divider"),Object.keys(t).forEach((e=>{const n=t[e];n&&"object"===typeof n&&(n.main&&Wi(t[e],"mainChannel",Hr(Vi(n.main))),n.light&&Wi(t[e],"lightChannel",Hr(Vi(n.light))),n.dark&&Wi(t[e],"darkChannel",Hr(Vi(n.dark))),n.contrastText&&Wi(t[e],"contrastTextChannel",Hr(Vi(n.contrastText))),"text"===e&&(Gi(t[e],"primary"),Gi(t[e],"secondary")),"action"===e&&(n.active&&Gi(t[e],"active"),n.selected&&Gi(t[e],"selected")))}))}));for(var w=arguments.length,k=new Array(w>1?w-1:0),S=1;S<w;S++)k[S-1]=arguments[S];b=k.reduce(((e,t)=>Pe(e,t)),b);const E={prefix:i,disableCssColorScheme:r,shouldSkipGeneratingVar:o,getSelector:Bi(b)},{vars:I,generateThemeVars:T,generateStyleSheets:C}=bi(b,E);return b.vars=I,Object.entries(b.colorSchemes[b.defaultColorScheme]).forEach((e=>{let[t,n]=e;b[t]=n})),b.generateThemeVars=T,b.generateStyleSheets=C,b.generateSpacing=function(){return ct(l.spacing,rt(this))},b.getColorSchemeSelector=function(e){return function(t){return"media"===e?`@media (prefers-color-scheme: ${t})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${t}"] &`:"class"===e?`.${t} &`:"data"===e?`[data-${t}] &`:`${e.replace("%s",t)} &`:"&"}}(a),b.spacing=b.generateSpacing(),b.shouldSkipGeneratingVar=o,b.unstable_sxConfig={...jt,...l?.unstable_sxConfig},b.unstable_sx=function(e){return Bt({sx:e,theme:this})},b.toRuntimeSource=Ui,b}function Xi(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]={...!0!==n&&n,palette:fi({...!0===n?{}:n.palette,mode:t})})}function Yi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{palette:t,cssVariables:n=!1,colorSchemes:r=(t?void 0:{light:!0}),defaultColorScheme:i=t?.mode,...o}=e,a=i||"light",s=r?.[a],l={...r,...t?{[a]:{..."boolean"!==typeof s&&s,palette:t}}:void 0};for(var u=arguments.length,c=new Array(u>1?u-1:0),h=1;h<u;h++)c[h-1]=arguments[h];if(!1===n){if(!("colorSchemes"in e))return Di(e,...c);let n=t;"palette"in e||l[a]&&(!0!==l[a]?n=l[a].palette:"dark"===a&&(n={mode:"dark"}));const r=Di({...e,palette:n},...c);return r.defaultColorScheme=a,r.colorSchemes=l,"light"===r.palette.mode&&(r.colorSchemes.light={...!0!==l.light&&l.light,palette:r.palette},Xi(r,"dark",l.dark)),"dark"===r.palette.mode&&(r.colorSchemes.dark={...!0!==l.dark&&l.dark,palette:r.palette},Xi(r,"light",l.light)),r}return t||"light"in l||"light"!==a||(l.light=!0),Ki({...o,colorSchemes:l,defaultColorScheme:a,..."boolean"!==typeof n&&n},...c)}const Qi=Yi(),Ji="$$material";const Zi=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e},eo=e=>Zi(e)&&"classes"!==e,to=Dr({themeId:Ji,defaultTheme:Qi,rootShouldForwardProp:eo});function no(e){let{props:t,name:n}=e;return fr({props:t,name:n,defaultTheme:Qi,themeId:Ji})}const ro=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:t=zr,useThemeProps:n=Br,componentName:r="MuiContainer"}=e,i=t((e=>{let{theme:t,ownerState:n}=e;return{width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!n.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}}}}),(e=>{let{theme:t,ownerState:n}=e;return n.fixed&&Object.keys(t.breakpoints.values).reduce(((e,n)=>{const r=n,i=t.breakpoints.values[r];return 0!==i&&(e[t.breakpoints.up(r)]={maxWidth:`${i}${t.breakpoints.unit}`}),e}),{})}),(e=>{let{theme:t,ownerState:n}=e;return{..."xs"===n.maxWidth&&{[t.breakpoints.up("xs")]:{maxWidth:Math.max(t.breakpoints.values.xs,444)}},...n.maxWidth&&"xs"!==n.maxWidth&&{[t.breakpoints.up(n.maxWidth)]:{maxWidth:`${t.breakpoints.values[n.maxWidth]}${t.breakpoints.unit}`}}}})),o=l.forwardRef((function(e,t){const o=n(e),{className:a,component:s="div",disableGutters:l=!1,fixed:u=!1,maxWidth:c="lg",classes:h,...d}=o,p={...o,component:s,disableGutters:l,fixed:u,maxWidth:c},f=((e,t)=>{const{classes:n,fixed:r,disableGutters:i,maxWidth:o}=e;return _e({root:["root",o&&`maxWidth${Oe(String(o))}`,r&&"fixed",i&&"disableGutters"]},(e=>Ae(t,e)),n)})(p,r);return(0,Lr.jsx)(i,{as:s,ownerState:p,className:Se(f.root,a),ref:t,...d})}));return o}({createStyledComponent:to("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${Ur(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>no({props:e,name:"MuiContainer"})}),io=ro;function oo(e){const{sx:t,...n}=e,{systemProps:r,otherProps:i}=(e=>{const t={systemProps:{},otherProps:{}},n=e?.theme?.unstable_sxConfig??jt;return Object.keys(e).forEach((r=>{n[r]?t.systemProps[r]=e[r]:t.otherProps[r]=e[r]})),t})(n);let o;return o=Array.isArray(t)?[r,...t]:"function"===typeof t?function(){const e=t(...arguments);return $e(e)?{...r,...e}:r}:{...r,...t},{...i,sx:o}}function ao(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r={};return t.forEach((t=>{r[t]=Ae(e,t,n)})),r}const so=ao("MuiBox",["root"]),lo=Yi(),uo=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=e,o=Ir("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(Bt);return l.forwardRef((function(e,a){const s=pr(n),{className:l,component:u="div",...c}=oo(e);return(0,Lr.jsx)(o,{as:u,ref:a,className:Se(l,i?i(r):r),theme:t&&s[t]||s,...c})}))}({themeId:Ji,defaultTheme:lo,defaultClassName:so.root,generateClassName:Te.generate}),co=uo;var ho=n(219),po=n.n(ho),fo=ur((function(e,t){var n=ir([e.styles],void 0,l.useContext(cr)),r=l.useRef();return sr((function(){var e=t.key+"-global",i=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),o=!1,a=document.querySelector('style[data-emotion="'+e+" "+n.name+'"]');return t.sheet.tags.length&&(i.before=t.sheet.tags[0]),null!==a&&(o=!0,a.setAttribute("data-emotion",e),i.hydrate([a])),r.current=[i,o],function(){i.flush()}}),[t]),sr((function(){var e=r.current,i=e[0];if(e[1])e[1]=!1;else{if(void 0!==n.next&&vr(t,n.next,!0),i.tags.length){var o=i.tags[i.tags.length-1].nextElementSibling;i.before=o,i.flush()}t.insert("",n,i,!1)}}),[t,n.name]),null}));function mo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ir(t)}var go=function(){var e=mo.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function yo(e){const{styles:t,defaultTheme:n={}}=e,r="function"===typeof t?e=>{return t(void 0===(r=e)||null===r||0===Object.keys(r).length?n:e);var r}:t;return(0,Lr.jsx)(fo,{styles:r})}const vo=function(e){let{styles:t,themeId:n,defaultTheme:r={}}=e;const i=pr(r),o="function"===typeof t?t(n&&i[n]||i):t;return(0,Lr.jsx)(yo,{styles:o})};const bo=function(e){return(0,Lr.jsx)(vo,{...e,defaultTheme:Qi,themeId:Ji})};const xo={theme:void 0};const wo=function(e){let t,n;return function(r){let i=t;return void 0!==i&&r.theme===n||(xo.theme=r.theme,i=Ar(e(xo)),t=i,n=r.theme),i}},ko=wo,So=l.createContext(void 0);function Eo(e){let{props:t,name:n}=e;return function(e){const{theme:t,name:n,props:r}=e;if(!t||!t.components||!t.components[n])return r;const i=t.components[n];return i.defaultProps?Re(i.defaultProps,r):i.styleOverrides||i.variants?r:Re(i,r)}({props:t,name:n,theme:{components:l.useContext(So)}})}function Io(e){return Eo(e)}function To(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t=>{let[,n]=t;return n&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!function(e){return"string"===typeof e.main}(e))return!1;for(const n of t)if(!e.hasOwnProperty(n)||"string"!==typeof e[n])return!1;return!0}(n,e)}}function Co(e){return Ae("MuiTypography",e)}ao("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Ao={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},_o=oo,No=to("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t[`align${Ur(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(ko((e=>{let{theme:t}=e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter((e=>{let[t,n]=e;return"inherit"!==t&&n&&"object"===typeof n})).map((e=>{let[t,n]=e;return{props:{variant:t},style:n}})),...Object.entries(t.palette).filter(To()).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars||t).palette[n].main}}})),...Object.entries(t.palette?.text||{}).filter((e=>{let[,t]=e;return"string"===typeof t})).map((e=>{let[n]=e;return{props:{color:`text${Ur(n)}`},style:{color:(t.vars||t).palette.text[n]}}})),{props:e=>{let{ownerState:t}=e;return"inherit"!==t.align},style:{textAlign:"var(--Typography-textAlign)"}},{props:e=>{let{ownerState:t}=e;return t.noWrap},style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:e=>{let{ownerState:t}=e;return t.gutterBottom},style:{marginBottom:"0.35em"}},{props:e=>{let{ownerState:t}=e;return t.paragraph},style:{marginBottom:16}}]}}))),Oo={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Ro=l.forwardRef((function(e,t){const{color:n,...r}=Io({props:e,name:"MuiTypography"}),i=_o({...r,...!Ao[n]&&{color:n}}),{align:o="inherit",className:a,component:s,gutterBottom:l=!1,noWrap:u=!1,paragraph:c=!1,variant:h="body1",variantMapping:d=Oo,...p}=i,f={...i,align:o,color:n,className:a,component:s,gutterBottom:l,noWrap:u,paragraph:c,variant:h,variantMapping:d},m=s||(c?"p":d[h]||Oo[h])||"span",g=(e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:i,variant:o,classes:a}=e;return _e({root:["root",o,"inherit"!==e.align&&`align${Ur(t)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]},Co,a)})(f);return(0,Lr.jsx)(No,{as:m,ref:t,className:Se(g.root,a),...p,ownerState:f,style:{..."inherit"!==o&&{"--Typography-textAlign":o},...p.style}})})),$o=Ro;let Do=0;const Po={...u}.useId;function Mo(e){if(void 0!==Po){const t=Po();return e??t}return function(e){const[t,n]=l.useState(e),r=e||t;return l.useEffect((()=>{null==t&&(Do+=1,n(`mui-${Do}`))}),[t]),r}(e)}function Fo(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function Lo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.useMemo((()=>t.every((e=>null==e))?null:e=>{t.forEach((t=>{Fo(t,e)}))}),t)}function jo(e){return e&&e.ownerDocument||document}function zo(e){return jo(e).defaultView||window}const Bo="undefined"!==typeof window?l.useLayoutEffect:l.useEffect;function Uo(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];clearTimeout(t),t=setTimeout((()=>{e.apply(this,i)}),n)}return r.clear=()=>{clearTimeout(t)},r}function Wo(e){return parseInt(e,10)||0}const Vo={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};const Go=l.forwardRef((function(e,t){const{onChange:n,maxRows:r,minRows:i=1,style:o,value:a,...s}=e,{current:u}=l.useRef(null!=a),c=l.useRef(null),h=Lo(t,c),d=l.useRef(null),p=l.useRef(null),f=l.useCallback((()=>{const t=c.current,n=zo(t).getComputedStyle(t);if("0px"===n.width)return{outerHeightStyle:0,overflowing:!1};const o=p.current;o.style.width=n.width,o.value=t.value||e.placeholder||"x","\n"===o.value.slice(-1)&&(o.value+=" ");const a=n.boxSizing,s=Wo(n.paddingBottom)+Wo(n.paddingTop),l=Wo(n.borderBottomWidth)+Wo(n.borderTopWidth),u=o.scrollHeight;o.value="x";const h=o.scrollHeight;let d=u;i&&(d=Math.max(Number(i)*h,d)),r&&(d=Math.min(Number(r)*h,d)),d=Math.max(d,h);return{outerHeightStyle:d+("border-box"===a?s+l:0),overflowing:Math.abs(d-u)<=1}}),[r,i,e.placeholder]),m=l.useCallback((()=>{const e=f();if(void 0===(t=e)||null===t||0===Object.keys(t).length||0===t.outerHeightStyle&&!t.overflowing)return;var t;const n=e.outerHeightStyle,r=c.current;d.current!==n&&(d.current=n,r.style.height=`${n}px`),r.style.overflow=e.overflowing?"hidden":""}),[f]);Bo((()=>{const e=()=>{m()};let t;const n=Uo(e),r=c.current,i=zo(r);let o;return i.addEventListener("resize",n),"undefined"!==typeof ResizeObserver&&(o=new ResizeObserver(e),o.observe(r)),()=>{n.clear(),cancelAnimationFrame(t),i.removeEventListener("resize",n),o&&o.disconnect()}}),[f,m]),Bo((()=>{m()}));return(0,Lr.jsxs)(l.Fragment,{children:[(0,Lr.jsx)("textarea",{value:a,onChange:e=>{u||m(),n&&n(e)},ref:h,rows:i,style:o,...s}),(0,Lr.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:p,tabIndex:-1,style:{...Vo,...o,paddingTop:0,paddingBottom:0}})]})})),Ho=Go;const qo=function(e){return"string"===typeof e};function Ko(e){let{props:t,states:n,muiFormControl:r}=e;return n.reduce(((e,n)=>(e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e)),{})}const Xo=l.createContext(void 0);function Yo(){return l.useContext(Xo)}const Qo=Lo,Jo=Bo;function Zo(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function ea(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(Zo(e.value)&&""!==e.value||t&&Zo(e.defaultValue)&&""!==e.defaultValue)}function ta(e){return Ae("MuiInputBase",e)}const na=ao("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var ra;const ia=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${Ur(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},oa=(e,t)=>{const{ownerState:n}=e;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},aa=to("div",{name:"MuiInputBase",slot:"Root",overridesResolver:ia})(ko((e=>{let{theme:t}=e;return{...t.typography.body1,color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${na.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"},variants:[{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:"4px 0 5px"}},{props:e=>{let{ownerState:t,size:n}=e;return t.multiline&&"small"===n},style:{paddingTop:1}},{props:e=>{let{ownerState:t}=e;return t.fullWidth},style:{width:"100%"}}]}}))),sa=to("input",{name:"MuiInputBase",slot:"Input",overridesResolver:oa})(ko((e=>{let{theme:t}=e;const n="light"===t.palette.mode,r={color:"currentColor",...t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})},i={opacity:"0 !important"},o=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${na.formControl} &`]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus::-ms-input-placeholder":o},[`&.${na.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableInjectingGlobalStyles},style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}}))),la=function(e){return function(t){return(0,Lr.jsx)(bo,{styles:"function"===typeof e?n=>e({theme:n,...t}):e})}}({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),ua=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiInputBase"}),{"aria-describedby":r,autoComplete:i,autoFocus:o,className:a,color:s,components:u={},componentsProps:c={},defaultValue:h,disabled:d,disableInjectingGlobalStyles:p,endAdornment:f,error:m,fullWidth:g=!1,id:y,inputComponent:v="input",inputProps:b={},inputRef:x,margin:w,maxRows:k,minRows:S,multiline:E=!1,name:I,onBlur:T,onChange:C,onClick:A,onFocus:_,onKeyDown:N,onKeyUp:O,placeholder:R,readOnly:$,renderSuffix:D,rows:P,size:M,slotProps:F={},slots:L={},startAdornment:j,type:z="text",value:B,...U}=n,W=null!=b.value?b.value:B,{current:V}=l.useRef(null!=W),G=l.useRef(),H=l.useCallback((e=>{0}),[]),q=Qo(G,x,b.ref,H),[K,X]=l.useState(!1),Y=Yo();const Q=Ko({props:n,muiFormControl:Y,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Q.focused=Y?Y.focused:K,l.useEffect((()=>{!Y&&d&&K&&(X(!1),T&&T())}),[Y,d,K,T]);const J=Y&&Y.onFilled,Z=Y&&Y.onEmpty,ee=l.useCallback((e=>{ea(e)?J&&J():Z&&Z()}),[J,Z]);Jo((()=>{V&&ee({value:W})}),[W,ee,V]);l.useEffect((()=>{ee(G.current)}),[]);let te=v,ne=b;E&&"input"===te&&(ne=P?{type:void 0,minRows:P,maxRows:P,...ne}:{type:void 0,maxRows:k,minRows:S,...ne},te=Ho);l.useEffect((()=>{Y&&Y.setAdornedStart(Boolean(j))}),[Y,j]);const re={...n,color:Q.color||"primary",disabled:Q.disabled,endAdornment:f,error:Q.error,focused:Q.focused,formControl:Y,fullWidth:g,hiddenLabel:Q.hiddenLabel,multiline:E,size:Q.size,startAdornment:j,type:z},ie=(e=>{const{classes:t,color:n,disabled:r,error:i,endAdornment:o,focused:a,formControl:s,fullWidth:l,hiddenLabel:u,multiline:c,readOnly:h,size:d,startAdornment:p,type:f}=e;return _e({root:["root",`color${Ur(n)}`,r&&"disabled",i&&"error",l&&"fullWidth",a&&"focused",s&&"formControl",d&&"medium"!==d&&`size${Ur(d)}`,c&&"multiline",p&&"adornedStart",o&&"adornedEnd",u&&"hiddenLabel",h&&"readOnly"],input:["input",r&&"disabled","search"===f&&"inputTypeSearch",c&&"inputMultiline","small"===d&&"inputSizeSmall",u&&"inputHiddenLabel",p&&"inputAdornedStart",o&&"inputAdornedEnd",h&&"readOnly"]},ta,t)})(re),oe=L.root||u.Root||aa,ae=F.root||c.root||{},se=L.input||u.Input||sa;return ne={...ne,...F.input??c.input},(0,Lr.jsxs)(l.Fragment,{children:[!p&&"function"===typeof la&&(ra||(ra=(0,Lr.jsx)(la,{}))),(0,Lr.jsxs)(oe,{...ae,ref:t,onClick:e=>{G.current&&e.currentTarget===e.target&&G.current.focus(),A&&A(e)},...U,...!qo(oe)&&{ownerState:{...re,...ae.ownerState}},className:Se(ie.root,ae.className,a,$&&"MuiInputBase-readOnly"),children:[j,(0,Lr.jsx)(Xo.Provider,{value:null,children:(0,Lr.jsx)(se,{"aria-invalid":Q.error,"aria-describedby":r,autoComplete:i,autoFocus:o,defaultValue:h,disabled:Q.disabled,id:y,onAnimationStart:e=>{ee("mui-auto-fill-cancel"===e.animationName?G.current:{value:"x"})},name:I,placeholder:R,readOnly:$,required:Q.required,rows:P,value:W,onKeyDown:N,onKeyUp:O,type:z,...ne,...!qo(se)&&{as:te,ownerState:{...re,...ne.ownerState}},ref:q,className:Se(ie.input,ne.className,$&&"MuiInputBase-readOnly"),onBlur:e=>{T&&T(e),b.onBlur&&b.onBlur(e),Y&&Y.onBlur?Y.onBlur(e):X(!1)},onChange:function(e){if(!V){const t=e.target||G.current;if(null==t)throw new Error(Ne(1));ee({value:t.value})}for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];b.onChange&&b.onChange(e,...n),C&&C(e,...n)},onFocus:e=>{_&&_(e),b.onFocus&&b.onFocus(e),Y&&Y.onFocus?Y.onFocus(e):X(!0)}})}),f,D?D({...Q,startAdornment:j}):null]})]})})),ca=ua;function ha(e){return Ae("MuiInput",e)}const da={...na,...ao("MuiInput",["root","underline","input"])},pa=to(aa,{shouldForwardProp:e=>eo(e)||"classes"===e,name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...ia(e,t),!n.disableUnderline&&t.underline]}})(ko((e=>{let{theme:t}=e;let n="light"===t.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(n=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:e=>{let{ownerState:t}=e;return t.formControl},style:{"label + &":{marginTop:16}}},{props:e=>{let{ownerState:t}=e;return!t.disableUnderline},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${da.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${da.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${da.disabled}, .${da.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${da.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(To()).map((e=>{let[n]=e;return{props:{color:n,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[n].main}`}}}}))]}}))),fa=to(sa,{name:"MuiInput",slot:"Input",overridesResolver:oa})({}),ma=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiInput"}),{disableUnderline:r=!1,components:i={},componentsProps:o,fullWidth:a=!1,inputComponent:s="input",multiline:l=!1,slotProps:u,slots:c={},type:h="text",...d}=n,p=(e=>{const{classes:t,disableUnderline:n}=e,r=_e({root:["root",!n&&"underline"],input:["input"]},ha,t);return{...t,...r}})(n),f={root:{ownerState:{disableUnderline:r}}},m=u??o?Pe(u??o,f):f,g=c.root??i.Root??pa,y=c.input??i.Input??fa;return(0,Lr.jsx)(ca,{slots:{root:g,input:y},slotProps:m,fullWidth:a,inputComponent:s,multiline:l,ref:t,type:h,...d,classes:p})}));ma&&(ma.muiName="Input");const ga=ma;function ya(e){return Ae("MuiFilledInput",e)}const va={...na,...ao("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},ba=to(aa,{shouldForwardProp:e=>eo(e)||"classes"===e,name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...ia(e,t),!n.disableUnderline&&t.underline]}})(ko((e=>{let{theme:t}=e;const n="light"===t.palette.mode,r=n?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",i=n?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=n?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=n?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:i,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:i}},[`&.${va.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:i},[`&.${va.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:a},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableUnderline},style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${va.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${va.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${va.disabled}, .${va.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${va.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(t.palette).filter(To()).map((e=>{let[n]=e;return{props:{disableUnderline:!1,color:n},style:{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[n]?.main}`}}}})),{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:12}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:12}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:"25px 12px 8px"}},{props:e=>{let{ownerState:t,size:n}=e;return t.multiline&&"small"===n},style:{paddingTop:21,paddingBottom:4}},{props:e=>{let{ownerState:t}=e;return t.multiline&&t.hiddenLabel},style:{paddingTop:16,paddingBottom:17}},{props:e=>{let{ownerState:t}=e;return t.multiline&&t.hiddenLabel&&"small"===t.size},style:{paddingTop:8,paddingBottom:9}}]}}))),xa=to(sa,{name:"MuiFilledInput",slot:"Input",overridesResolver:oa})(ko((e=>{let{theme:t}=e;return{paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:e=>{let{ownerState:t}=e;return t.hiddenLabel},style:{paddingTop:16,paddingBottom:17}},{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:0}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:0}},{props:e=>{let{ownerState:t}=e;return t.hiddenLabel&&"small"===t.size},style:{paddingTop:8,paddingBottom:9}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}}))),wa=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiFilledInput"}),{disableUnderline:r=!1,components:i={},componentsProps:o,fullWidth:a=!1,hiddenLabel:s,inputComponent:l="input",multiline:u=!1,slotProps:c,slots:h={},type:d="text",...p}=n,f={...n,disableUnderline:r,fullWidth:a,inputComponent:l,multiline:u,type:d},m=(e=>{const{classes:t,disableUnderline:n,startAdornment:r,endAdornment:i,size:o,hiddenLabel:a,multiline:s}=e,l=_e({root:["root",!n&&"underline",r&&"adornedStart",i&&"adornedEnd","small"===o&&`size${Ur(o)}`,a&&"hiddenLabel",s&&"multiline"],input:["input"]},ya,t);return{...t,...l}})(n),g={root:{ownerState:f},input:{ownerState:f}},y=c??o?Pe(g,c??o):g,v=h.root??i.Root??ba,b=h.input??i.Input??xa;return(0,Lr.jsx)(ca,{slots:{root:v,input:b},componentsProps:y,fullWidth:a,inputComponent:l,multiline:u,ref:t,type:d,...p,classes:m})}));wa&&(wa.muiName="Input");const ka=wa;var Sa;const Ea=to("fieldset",{shouldForwardProp:eo})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Ia=to("legend",{shouldForwardProp:eo})(ko((e=>{let{theme:t}=e;return{float:"unset",width:"auto",overflow:"hidden",variants:[{props:e=>{let{ownerState:t}=e;return!t.withLabel},style:{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})}},{props:e=>{let{ownerState:t}=e;return t.withLabel},style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:e=>{let{ownerState:t}=e;return t.withLabel&&t.notched},style:{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}]}})));function Ta(e){return Ae("MuiOutlinedInput",e)}const Ca={...na,...ao("MuiOutlinedInput",["root","notchedOutline","input"])},Aa=to(aa,{shouldForwardProp:e=>eo(e)||"classes"===e,name:"MuiOutlinedInput",slot:"Root",overridesResolver:ia})(ko((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${Ca.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${Ca.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${Ca.focused} .${Ca.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(t.palette).filter(To()).map((e=>{let[n]=e;return{props:{color:n},style:{[`&.${Ca.focused} .${Ca.notchedOutline}`]:{borderColor:(t.vars||t).palette[n].main}}}})),{props:{},style:{[`&.${Ca.error} .${Ca.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${Ca.disabled} .${Ca.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}}},{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:14}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:14}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:"16.5px 14px"}},{props:e=>{let{ownerState:t,size:n}=e;return t.multiline&&"small"===n},style:{padding:"8.5px 14px"}}]}}))),_a=to((function(e){const{children:t,classes:n,className:r,label:i,notched:o,...a}=e,s=null!=i&&""!==i,l={...e,notched:o,withLabel:s};return(0,Lr.jsx)(Ea,{"aria-hidden":!0,className:r,ownerState:l,...a,children:(0,Lr.jsx)(Ia,{ownerState:l,children:s?(0,Lr.jsx)("span",{children:i}):Sa||(Sa=(0,Lr.jsx)("span",{className:"notranslate",children:"\u200b"}))})})}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(ko((e=>{let{theme:t}=e;const n="light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}}))),Na=to(sa,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:oa})(ko((e=>{let{theme:t}=e;return{padding:"16.5px 14px",...!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.mode?null:"#fff",caretColor:"light"===t.palette.mode?null:"#fff",borderRadius:"inherit"}},...t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:e=>{let{ownerState:t}=e;return t.multiline},style:{padding:0}},{props:e=>{let{ownerState:t}=e;return t.startAdornment},style:{paddingLeft:0}},{props:e=>{let{ownerState:t}=e;return t.endAdornment},style:{paddingRight:0}}]}}))),Oa=l.forwardRef((function(e,t){var n;const r=Io({props:e,name:"MuiOutlinedInput"}),{components:i={},fullWidth:o=!1,inputComponent:a="input",label:s,multiline:u=!1,notched:c,slots:h={},type:d="text",...p}=r,f=(e=>{const{classes:t}=e,n=_e({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Ta,t);return{...t,...n}})(r),m=Yo(),g=Ko({props:r,muiFormControl:m,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),y={...r,color:g.color||"primary",disabled:g.disabled,error:g.error,focused:g.focused,formControl:m,fullWidth:o,hiddenLabel:g.hiddenLabel,multiline:u,size:g.size,type:d},v=h.root??i.Root??Aa,b=h.input??i.Input??Na;return(0,Lr.jsx)(ca,{slots:{root:v,input:b},renderSuffix:e=>(0,Lr.jsx)(_a,{ownerState:y,className:f.notchedOutline,label:null!=s&&""!==s&&g.required?n||(n=(0,Lr.jsxs)(l.Fragment,{children:[s,"\u2009","*"]})):s,notched:"undefined"!==typeof c?c:Boolean(e.startAdornment||e.filled||e.focused)}),fullWidth:o,inputComponent:a,multiline:u,ref:t,type:d,...p,classes:{...f,notchedOutline:null}})}));Oa&&(Oa.muiName="Input");const Ra=Oa;function $a(e){return Ae("MuiFormLabel",e)}const Da=ao("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Pa=to("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return{...t.root,..."secondary"===n.color&&t.colorSecondary,...n.filled&&t.filled}}})(ko((e=>{let{theme:t}=e;return{color:(t.vars||t).palette.text.secondary,...t.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(t.palette).filter(To()).map((e=>{let[n]=e;return{props:{color:n},style:{[`&.${Da.focused}`]:{color:(t.vars||t).palette[n].main}}}})),{props:{},style:{[`&.${Da.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${Da.error}`]:{color:(t.vars||t).palette.error.main}}}]}}))),Ma=to("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(ko((e=>{let{theme:t}=e;return{[`&.${Da.error}`]:{color:(t.vars||t).palette.error.main}}}))),Fa=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiFormLabel"}),{children:r,className:i,color:o,component:a="label",disabled:s,error:l,filled:u,focused:c,required:h,...d}=n,p=Ko({props:n,muiFormControl:Yo(),states:["color","required","focused","disabled","error","filled"]}),f={...n,color:p.color||"primary",component:a,disabled:p.disabled,error:p.error,filled:p.filled,focused:p.focused,required:p.required},m=(e=>{const{classes:t,color:n,focused:r,disabled:i,error:o,filled:a,required:s}=e;return _e({root:["root",`color${Ur(n)}`,i&&"disabled",o&&"error",a&&"filled",r&&"focused",s&&"required"],asterisk:["asterisk",o&&"error"]},$a,t)})(f);return(0,Lr.jsxs)(Pa,{as:a,ownerState:f,className:Se(m.root,i),ref:t,...d,children:[r,p.required&&(0,Lr.jsxs)(Ma,{ownerState:f,"aria-hidden":!0,className:m.asterisk,children:["\u2009","*"]})]})})),La=Fa;function ja(e){return Ae("MuiInputLabel",e)}ao("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const za=to(La,{shouldForwardProp:e=>eo(e)||"classes"===e,name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Da.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,"small"===n.size&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})(ko((e=>{let{theme:t}=e;return{display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:e=>{let{ownerState:t}=e;return t.formControl},style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:e=>{let{ownerState:t}=e;return t.shrink},style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:e=>{let{ownerState:t}=e;return!t.disableAnimation},style:{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:e=>{let{variant:t,ownerState:n}=e;return"filled"===t&&n.shrink},style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:e=>{let{variant:t,ownerState:n,size:r}=e;return"filled"===t&&n.shrink&&"small"===r},style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:e=>{let{variant:t,ownerState:n}=e;return"outlined"===t&&n.shrink},style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}}))),Ba=l.forwardRef((function(e,t){const n=Io({name:"MuiInputLabel",props:e}),{disableAnimation:r=!1,margin:i,shrink:o,variant:a,className:s,...l}=n,u=Yo();let c=o;"undefined"===typeof c&&u&&(c=u.filled||u.focused||u.adornedStart);const h=Ko({props:n,muiFormControl:u,states:["size","variant","required","focused"]}),d={...n,disableAnimation:r,formControl:u,shrink:c,size:h.size,variant:h.variant,required:h.required,focused:h.focused},p=(e=>{const{classes:t,formControl:n,size:r,shrink:i,disableAnimation:o,variant:a,required:s}=e,l=_e({root:["root",n&&"formControl",!o&&"animated",i&&"shrink",r&&"normal"!==r&&`size${Ur(r)}`,a],asterisk:[s&&"asterisk"]},ja,t);return{...t,...l}})(d);return(0,Lr.jsx)(za,{"data-shrink":c,ref:t,className:Se(p.root,s),...l,ownerState:d,classes:p})})),Ua=Ba;const Wa=function(e,t){return l.isValidElement(e)&&-1!==t.indexOf(e.type.muiName??e.type?._payload?.value?.muiName)};function Va(e){return Ae("MuiFormControl",e)}ao("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Ga=to("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return{...t.root,...t[`margin${Ur(n.margin)}`],...n.fullWidth&&t.fullWidth}}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),Ha=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiFormControl"}),{children:r,className:i,color:o="primary",component:a="div",disabled:s=!1,error:u=!1,focused:c,fullWidth:h=!1,hiddenLabel:d=!1,margin:p="none",required:f=!1,size:m="medium",variant:g="outlined",...y}=n,v={...n,color:o,component:a,disabled:s,error:u,fullWidth:h,hiddenLabel:d,margin:p,required:f,size:m,variant:g},b=(e=>{const{classes:t,margin:n,fullWidth:r}=e;return _e({root:["root","none"!==n&&`margin${Ur(n)}`,r&&"fullWidth"]},Va,t)})(v),[x,w]=l.useState((()=>{let e=!1;return r&&l.Children.forEach(r,(t=>{if(!Wa(t,["Input","Select"]))return;const n=Wa(t,["Select"])?t.props.input:t;n&&n.props.startAdornment&&(e=!0)})),e})),[k,S]=l.useState((()=>{let e=!1;return r&&l.Children.forEach(r,(t=>{Wa(t,["Input","Select"])&&(ea(t.props,!0)||ea(t.props.inputProps,!0))&&(e=!0)})),e})),[E,I]=l.useState(!1);s&&E&&I(!1);const T=void 0===c||s?E:c;let C;l.useRef(!1);const A=l.useMemo((()=>({adornedStart:x,setAdornedStart:w,color:o,disabled:s,error:u,filled:k,focused:T,fullWidth:h,hiddenLabel:d,size:m,onBlur:()=>{I(!1)},onEmpty:()=>{S(!1)},onFilled:()=>{S(!0)},onFocus:()=>{I(!0)},registerEffect:C,required:f,variant:g})),[x,o,s,u,k,T,h,d,C,f,m,g]);return(0,Lr.jsx)(Xo.Provider,{value:A,children:(0,Lr.jsx)(Ga,{as:a,ownerState:v,className:Se(b.root,i),ref:t,...y,children:r})})})),qa=Ha;function Ka(e){return Ae("MuiFormHelperText",e)}const Xa=ao("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var Ya;const Qa=to("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${Ur(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})(ko((e=>{let{theme:t}=e;return{color:(t.vars||t).palette.text.secondary,...t.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${Xa.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${Xa.error}`]:{color:(t.vars||t).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:e=>{let{ownerState:t}=e;return t.contained},style:{marginLeft:14,marginRight:14}}]}}))),Ja=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiFormHelperText"}),{children:r,className:i,component:o="p",disabled:a,error:s,filled:l,focused:u,margin:c,required:h,variant:d,...p}=n,f=Ko({props:n,muiFormControl:Yo(),states:["variant","size","disabled","error","filled","focused","required"]}),m={...n,component:o,contained:"filled"===f.variant||"outlined"===f.variant,variant:f.variant,size:f.size,disabled:f.disabled,error:f.error,filled:f.filled,focused:f.focused,required:f.required};delete m.ownerState;const g=(e=>{const{classes:t,contained:n,size:r,disabled:i,error:o,filled:a,focused:s,required:l}=e;return _e({root:["root",i&&"disabled",o&&"error",r&&`size${Ur(r)}`,n&&"contained",s&&"focused",a&&"filled",l&&"required"]},Ka,t)})(m);return(0,Lr.jsx)(Qa,{as:o,className:Se(g.root,i),ref:t,...p,ownerState:m,children:" "===r?Ya||(Ya=(0,Lr.jsx)("span",{className:"notranslate",children:"\u200b"})):r})}));function Za(e){return parseInt(l.version,10)>=19?e?.props?.ref||null:e?.ref||null}n(2086);const es=jo,ts=l.createContext();const ns=()=>l.useContext(ts)??!1;const rs=function(e){return"string"===typeof e};const is=function(e,t,n){return void 0===e||rs(e)?t:{...t,ownerState:{...t.ownerState,...n}}};const os=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const n={};return Object.keys(e).filter((n=>n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n))).forEach((t=>{n[t]=e[t]})),n};const as=function(e){if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>!(t.match(/^on[A-Z]/)&&"function"===typeof e[t]))).forEach((n=>{t[n]=e[n]})),t};const ss=function(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:o}=e;if(!t){const e=Se(n?.className,o,i?.className,r?.className),t={...n?.style,...i?.style,...r?.style},a={...n,...i,...r};return e.length>0&&(a.className=e),Object.keys(t).length>0&&(a.style=t),{props:a,internalRef:void 0}}const a=os({...i,...r}),s=as(r),l=as(i),u=t(a),c=Se(u?.className,n?.className,o,i?.className,r?.className),h={...u?.style,...n?.style,...i?.style,...r?.style},d={...u,...n,...l,...s};return c.length>0&&(d.className=c),Object.keys(h).length>0&&(d.style=h),{props:d,internalRef:u.ref}};const ls=function(e,t,n){return"function"===typeof e?e(t,n):e};const us=function(e){const{elementType:t,externalSlotProps:n,ownerState:r,skipResolvingSlotProps:i=!1,...o}=e,a=i?{}:ls(n,r),{props:s,internalRef:l}=ss({...o,externalSlotProps:a}),u=Lo(l,a?.ref,e.additionalProps?.ref);return is(t,{...s,ref:u},r)};const cs=l.createContext({});function hs(e){return Ae("MuiList",e)}ao("MuiList",["root","padding","dense","subheader"]);const ds=to("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:e=>{let{ownerState:t}=e;return!t.disablePadding},style:{paddingTop:8,paddingBottom:8}},{props:e=>{let{ownerState:t}=e;return t.subheader},style:{paddingTop:0}}]}),ps=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiList"}),{children:r,className:i,component:o="ul",dense:a=!1,disablePadding:s=!1,subheader:u,...c}=n,h=l.useMemo((()=>({dense:a})),[a]),d={...n,component:o,dense:a,disablePadding:s},p=(e=>{const{classes:t,disablePadding:n,dense:r,subheader:i}=e;return _e({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},hs,t)})(d);return(0,Lr.jsx)(cs.Provider,{value:h,children:(0,Lr.jsxs)(ds,{as:o,className:Se(p.root,i),ref:t,ownerState:d,...c,children:[u,r]})})})),fs=ps;function ms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;const t=e.document.documentElement.clientWidth;return e.innerWidth-t}const gs=ms,ys=zo;function vs(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function bs(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function xs(e,t){if(void 0===t)return!0;let n=e.innerText;return void 0===n&&(n=e.textContent),n=n.trim().toLowerCase(),0!==n.length&&(t.repeating?n[0]===t.keys[0]:n.startsWith(t.keys.join("")))}function ws(e,t,n,r,i,o){let a=!1,s=i(e,t,!!t&&n);for(;s;){if(s===e.firstChild){if(a)return!1;a=!0}const t=!r&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&xs(s,o)&&!t)return s.focus(),!0;s=i(e,s,n)}return!1}const ks=l.forwardRef((function(e,t){const{actions:n,autoFocus:r=!1,autoFocusItem:i=!1,children:o,className:a,disabledItemsFocusable:s=!1,disableListWrap:u=!1,onKeyDown:c,variant:h="selectedMenu",...d}=e,p=l.useRef(null),f=l.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Jo((()=>{r&&p.current.focus()}),[r]),l.useImperativeHandle(n,(()=>({adjustStyleForScrollbar:(e,t)=>{let{direction:n}=t;const r=!p.current.style.width;if(e.clientHeight<p.current.clientHeight&&r){const t=`${gs(ys(e))}px`;p.current.style["rtl"===n?"paddingLeft":"paddingRight"]=t,p.current.style.width=`calc(100% + ${t})`}return p.current}})),[]);const m=Qo(p,t);let g=-1;l.Children.forEach(o,((e,t)=>{l.isValidElement(e)?(e.props.disabled||("selectedMenu"===h&&e.props.selected||-1===g)&&(g=t),g===t&&(e.props.disabled||e.props.muiSkipListHighlight||e.type.muiSkipListHighlight)&&(g+=1,g>=o.length&&(g=-1))):g===t&&(g+=1,g>=o.length&&(g=-1))}));const y=l.Children.map(o,((e,t)=>{if(t===g){const t={};return i&&(t.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===h&&(t.tabIndex=0),l.cloneElement(e,t)}return e}));return(0,Lr.jsx)(fs,{role:"menu",ref:m,className:a,onKeyDown:e=>{const t=p.current,n=e.key;if(e.ctrlKey||e.metaKey||e.altKey)return void(c&&c(e));const r=es(t).activeElement;if("ArrowDown"===n)e.preventDefault(),ws(t,r,u,s,vs);else if("ArrowUp"===n)e.preventDefault(),ws(t,r,u,s,bs);else if("Home"===n)e.preventDefault(),ws(t,null,u,s,vs);else if("End"===n)e.preventDefault(),ws(t,null,u,s,bs);else if(1===n.length){const i=f.current,o=n.toLowerCase(),a=performance.now();i.keys.length>0&&(a-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&o!==i.keys[0]&&(i.repeating=!1)),i.lastTime=a,i.keys.push(o);const l=r&&!i.repeating&&xs(r,i);i.previousKeyMatched&&(l||ws(t,r,!1,s,vs,i))?e.preventDefault():i.previousKeyMatched=!1}c&&c(e)},tabIndex:r?0:-1,...d,children:y})})),Ss=ks,Es=Uo,Is={};function Ts(e,t){const n=l.useRef(Is);return n.current===Is&&(n.current=e(t)),n}const Cs=[];class As{static create(){return new As}currentId=null;start(e,t){this.clear(),this.currentId=setTimeout((()=>{this.currentId=null,t()}),e)}clear=()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function _s(){const e=Ts(As.create).current;var t;return t=e.disposeEffect,l.useEffect(t,Cs),e}function Ns(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function Os(e,t){return Os=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Os(e,t)}function Rs(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Os(e,t)}var $s=n(7950),Ds=n.t($s,2);const Ps=!1,Ms=l.createContext(null);var Fs="unmounted",Ls="exited",js="entering",zs="entered",Bs="exiting",Us=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=Ls,r.appearStatus=js):i=zs:i=t.unmountOnExit||t.mountOnEnter?Fs:Ls,r.state={status:i},r.nextCallback=null,r}Rs(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Fs?{status:Ls}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==js&&n!==zs&&(t=js):n!==js&&n!==zs||(t=Bs)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===js){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:$s.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ls&&this.setState({status:Fs})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[$s.findDOMNode(this),r],o=i[0],a=i[1],s=this.getTimeouts(),l=r?s.appear:s.enter;!e&&!n||Ps?this.safeSetState({status:zs},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:js},(function(){t.props.onEntering(o,a),t.onTransitionEnd(l,(function(){t.safeSetState({status:zs},(function(){t.props.onEntered(o,a)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:$s.findDOMNode(this);t&&!Ps?(this.props.onExit(r),this.safeSetState({status:Bs},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:Ls},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:Ls},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:$s.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===Fs)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,Ns(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return l.createElement(Ms.Provider,{value:null},"function"===typeof n?n(e,r):l.cloneElement(l.Children.only(n),r))},t}(l.Component);function Ws(){}Us.contextType=Ms,Us.propTypes={},Us.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ws,onEntering:Ws,onEntered:Ws,onExit:Ws,onExiting:Ws,onExited:Ws},Us.UNMOUNTED=Fs,Us.EXITED=Ls,Us.ENTERING=js,Us.ENTERED=zs,Us.EXITING=Bs;const Vs=Us;function Gs(){const e=pr(Qi);return e[Ji]||e}const Hs=e=>e.scrollTop;function qs(e,t){const{timeout:n,easing:r,style:i={}}=e;return{duration:i.transitionDuration??("number"===typeof n?n:n[t.mode]||0),easing:i.transitionTimingFunction??("object"===typeof r?r[t.mode]:r),delay:i.transitionDelay}}function Ks(e){return`scale(${e}, ${e**2})`}const Xs={entering:{opacity:1,transform:Ks(1)},entered:{opacity:1,transform:"none"}},Ys="undefined"!==typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Qs=l.forwardRef((function(e,t){const{addEndListener:n,appear:r=!0,children:i,easing:o,in:a,onEnter:s,onEntered:u,onEntering:c,onExit:h,onExited:d,onExiting:p,style:f,timeout:m="auto",TransitionComponent:g=Vs,...y}=e,v=_s(),b=l.useRef(),x=Gs(),w=l.useRef(null),k=Qo(w,Za(i),t),S=e=>t=>{if(e){const n=w.current;void 0===t?e(n):e(n,t)}},E=S(c),I=S(((e,t)=>{Hs(e);const{duration:n,delay:r,easing:i}=qs({style:f,timeout:m,easing:o},{mode:"enter"});let a;"auto"===m?(a=x.transitions.getAutoHeightDuration(e.clientHeight),b.current=a):a=n,e.style.transition=[x.transitions.create("opacity",{duration:a,delay:r}),x.transitions.create("transform",{duration:Ys?a:.666*a,delay:r,easing:i})].join(","),s&&s(e,t)})),T=S(u),C=S(p),A=S((e=>{const{duration:t,delay:n,easing:r}=qs({style:f,timeout:m,easing:o},{mode:"exit"});let i;"auto"===m?(i=x.transitions.getAutoHeightDuration(e.clientHeight),b.current=i):i=t,e.style.transition=[x.transitions.create("opacity",{duration:i,delay:n}),x.transitions.create("transform",{duration:Ys?i:.666*i,delay:Ys?n:n||.333*i,easing:r})].join(","),e.style.opacity=0,e.style.transform=Ks(.75),h&&h(e)})),_=S(d);return(0,Lr.jsx)(g,{appear:r,in:a,nodeRef:w,onEnter:I,onEntered:T,onEntering:E,onExit:A,onExited:_,onExiting:C,addEndListener:e=>{"auto"===m&&v.start(b.current||0,e),n&&n(w.current,e)},timeout:"auto"===m?null:m,...y,children:(e,t)=>l.cloneElement(i,{style:{opacity:0,transform:Ks(.75),visibility:"exited"!==e||a?void 0:"hidden",...Xs[e],...f,...i.props.style},ref:k,...t})})}));Qs&&(Qs.muiSupportAuto=!0);const Js=Qs,Zs=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function el(e){const t=[],n=[];return Array.from(e.querySelectorAll(Zs)).forEach(((e,r)=>{const i=function(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==i&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const t=t=>e.ownerDocument.querySelector(`input[type="radio"]${t}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}(e))}(e)&&(0===i?t.push(e):n.push({documentOrder:r,tabIndex:i,node:e}))})),n.sort(((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex)).map((e=>e.node)).concat(t)}function tl(){return!0}const nl=function(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:o=el,isEnabled:a=tl,open:s}=e,u=l.useRef(!1),c=l.useRef(null),h=l.useRef(null),d=l.useRef(null),p=l.useRef(null),f=l.useRef(!1),m=l.useRef(null),g=Lo(Za(t),m),y=l.useRef(null);l.useEffect((()=>{s&&m.current&&(f.current=!n)}),[n,s]),l.useEffect((()=>{if(!s||!m.current)return;const e=jo(m.current);return m.current.contains(e.activeElement)||(m.current.hasAttribute("tabIndex")||m.current.setAttribute("tabIndex","-1"),f.current&&m.current.focus()),()=>{i||(d.current&&d.current.focus&&(u.current=!0,d.current.focus()),d.current=null)}}),[s]),l.useEffect((()=>{if(!s||!m.current)return;const e=jo(m.current),t=t=>{y.current=t,!r&&a()&&"Tab"===t.key&&e.activeElement===m.current&&t.shiftKey&&(u.current=!0,h.current&&h.current.focus())},n=()=>{const t=m.current;if(null===t)return;if(!e.hasFocus()||!a()||u.current)return void(u.current=!1);if(t.contains(e.activeElement))return;if(r&&e.activeElement!==c.current&&e.activeElement!==h.current)return;if(e.activeElement!==p.current)p.current=null;else if(null!==p.current)return;if(!f.current)return;let n=[];if(e.activeElement!==c.current&&e.activeElement!==h.current||(n=o(m.current)),n.length>0){const e=Boolean(y.current?.shiftKey&&"Tab"===y.current?.key),t=n[0],r=n[n.length-1];"string"!==typeof t&&"string"!==typeof r&&(e?r.focus():t.focus())}else t.focus()};e.addEventListener("focusin",n),e.addEventListener("keydown",t,!0);const i=setInterval((()=>{e.activeElement&&"BODY"===e.activeElement.tagName&&n()}),50);return()=>{clearInterval(i),e.removeEventListener("focusin",n),e.removeEventListener("keydown",t,!0)}}),[n,r,i,a,s,o]);const v=e=>{null===d.current&&(d.current=e.relatedTarget),f.current=!0};return(0,Lr.jsxs)(l.Fragment,{children:[(0,Lr.jsx)("div",{tabIndex:s?0:-1,onFocus:v,ref:c,"data-testid":"sentinelStart"}),l.cloneElement(t,{ref:g,onFocus:e=>{null===d.current&&(d.current=e.relatedTarget),f.current=!0,p.current=e.target;const n=t.props.onFocus;n&&n(e)}}),(0,Lr.jsx)("div",{tabIndex:s?0:-1,onFocus:v,ref:h,"data-testid":"sentinelEnd"})]})};const rl=l.forwardRef((function(e,t){const{children:n,container:r,disablePortal:i=!1}=e,[o,a]=l.useState(null),s=Lo(l.isValidElement(n)?Za(n):null,t);if(Bo((()=>{i||a(function(e){return"function"===typeof e?e():e}(r)||document.body)}),[r,i]),Bo((()=>{if(o&&!i)return Fo(t,o),()=>{Fo(t,null)}}),[t,o,i]),i){if(l.isValidElement(n)){const e={ref:s};return l.cloneElement(n,e)}return(0,Lr.jsx)(l.Fragment,{children:n})}return(0,Lr.jsx)(l.Fragment,{children:o?$s.createPortal(n,o):o})}));function il(e,t){const{className:n,elementType:r,ownerState:i,externalForwardedProps:o,getSlotOwnerState:a,internalForwardedProps:s,...l}=t,{component:u,slots:c={[e]:void 0},slotProps:h={[e]:void 0},...d}=o,p=c[e]||r,f=ls(h[e],i),{props:{component:m,...g},internalRef:y}=ss({className:n,...l,externalForwardedProps:"root"===e?d:void 0,externalSlotProps:f}),v=Lo(y,f?.ref,t.ref),b=a?a(g):{},x={...i,...b},w="root"===e?m||u:m,k=is(p,{..."root"===e&&!u&&!c[e]&&s,..."root"!==e&&!c[e]&&s,...g,...w&&{as:w},ref:v},x);return Object.keys(b).forEach((e=>{delete k[e]})),[p,k]}const ol={entering:{opacity:1},entered:{opacity:1}},al=l.forwardRef((function(e,t){const n=Gs(),r={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:i,appear:o=!0,children:a,easing:s,in:u,onEnter:c,onEntered:h,onEntering:d,onExit:p,onExited:f,onExiting:m,style:g,timeout:y=r,TransitionComponent:v=Vs,...b}=e,x=l.useRef(null),w=Qo(x,Za(a),t),k=e=>t=>{if(e){const n=x.current;void 0===t?e(n):e(n,t)}},S=k(d),E=k(((e,t)=>{Hs(e);const r=qs({style:g,timeout:y,easing:s},{mode:"enter"});e.style.webkitTransition=n.transitions.create("opacity",r),e.style.transition=n.transitions.create("opacity",r),c&&c(e,t)})),I=k(h),T=k(m),C=k((e=>{const t=qs({style:g,timeout:y,easing:s},{mode:"exit"});e.style.webkitTransition=n.transitions.create("opacity",t),e.style.transition=n.transitions.create("opacity",t),p&&p(e)})),A=k(f);return(0,Lr.jsx)(v,{appear:o,in:u,nodeRef:x,onEnter:E,onEntered:I,onEntering:S,onExit:C,onExited:A,onExiting:T,addEndListener:e=>{i&&i(x.current,e)},timeout:y,...b,children:(e,t)=>l.cloneElement(a,{style:{opacity:0,visibility:"exited"!==e||u?void 0:"hidden",...ol[e],...g,...a.props.style},ref:w,...t})})})),sl=al;function ll(e){return Ae("MuiBackdrop",e)}ao("MuiBackdrop",["root","invisible"]);const ul=to("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),cl=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiBackdrop"}),{children:r,className:i,component:o="div",invisible:a=!1,open:s,components:l={},componentsProps:u={},slotProps:c={},slots:h={},TransitionComponent:d,transitionDuration:p,...f}=n,m={...n,component:o,invisible:a},g=(e=>{const{classes:t,invisible:n}=e;return _e({root:["root",n&&"invisible"]},ll,t)})(m),y={slots:{transition:d,root:l.Root,...h},slotProps:{...u,...c}},[v,b]=il("root",{elementType:ul,externalForwardedProps:y,className:Se(g.root,i),ownerState:m}),[x,w]=il("transition",{elementType:sl,externalForwardedProps:y,ownerState:m}),k=(e=>{const{ownerState:t,...n}=e;return n})(w);return(0,Lr.jsx)(x,{in:s,timeout:p,...f,...k,children:(0,Lr.jsx)(v,{"aria-hidden":!0,...b,classes:g,ref:t,children:r})})}));const hl=function(e){const t=l.useRef(e);return Bo((()=>{t.current=e})),l.useRef((function(){return(0,t.current)(...arguments)})).current};function dl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}),(()=>{}))}function pl(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function fl(e){return parseInt(zo(e).getComputedStyle(e).paddingRight,10)||0}function ml(e,t,n,r,i){const o=[t,n,...r];[].forEach.call(e.children,(e=>{const t=!o.includes(e),n=!function(e){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}(e);t&&n&&pl(e,i)}))}function gl(e,t){let n=-1;return e.some(((e,r)=>!!t(e)&&(n=r,!0))),n}function yl(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(function(e){const t=jo(e);return t.body===e?zo(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){const e=ms(zo(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${fl(r)+e}px`;const t=jo(r).querySelectorAll(".mui-fixed");[].forEach.call(t,(t=>{n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight=`${fl(t)+e}px`}))}let e;if(r.parentNode instanceof DocumentFragment)e=jo(r).body;else{const t=r.parentElement,n=zo(r);e="HTML"===t?.nodeName&&"scroll"===n.getComputedStyle(t).overflowY?t:r}n.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{n.forEach((e=>{let{value:t,el:n,property:r}=e;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}const vl=new class{constructor(){this.modals=[],this.containers=[]}add(e,t){let n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&pl(e.modalRef,!1);const r=function(e){const t=[];return[].forEach.call(e.children,(e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);ml(t,e.mount,e.modalRef,r,!0);const i=gl(this.containers,(e=>e.container===t));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}mount(e,t){const n=gl(this.containers,(t=>t.modals.includes(e))),r=this.containers[n];r.restore||(r.restore=yl(r,t))}remove(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.modals.indexOf(e);if(-1===n)return n;const r=gl(this.containers,(t=>t.modals.includes(e))),i=this.containers[r];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(n,1),0===i.modals.length)i.restore&&i.restore(),e.modalRef&&pl(e.modalRef,t),ml(i.container,e.mount,e.modalRef,i.hiddenSiblings,!1),this.containers.splice(r,1);else{const e=i.modals[i.modals.length-1];e.modalRef&&pl(e.modalRef,!1)}return n}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}};const bl=function(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,closeAfterTransition:i=!1,onTransitionEnter:o,onTransitionExited:a,children:s,onClose:u,open:c,rootRef:h}=e,d=l.useRef({}),p=l.useRef(null),f=l.useRef(null),m=Lo(f,h),[g,y]=l.useState(!c),v=function(e){return!!e&&e.props.hasOwnProperty("in")}(s);let b=!0;"false"!==e["aria-hidden"]&&!1!==e["aria-hidden"]||(b=!1);const x=()=>(d.current.modalRef=f.current,d.current.mount=p.current,d.current),w=()=>{vl.mount(x(),{disableScrollLock:r}),f.current&&(f.current.scrollTop=0)},k=hl((()=>{const e=function(e){return"function"===typeof e?e():e}(t)||jo(p.current).body;vl.add(x(),e),f.current&&w()})),S=()=>vl.isTopModal(x()),E=hl((e=>{p.current=e,e&&(c&&S()?w():f.current&&pl(f.current,b))})),I=l.useCallback((()=>{vl.remove(x(),b)}),[b]);l.useEffect((()=>()=>{I()}),[I]),l.useEffect((()=>{c?k():v&&i||I()}),[c,I,v,i,k]);const T=e=>t=>{e.onKeyDown?.(t),"Escape"===t.key&&229!==t.which&&S()&&(n||(t.stopPropagation(),u&&u(t,"escapeKeyDown")))},C=e=>t=>{e.onClick?.(t),t.target===t.currentTarget&&u&&u(t,"backdropClick")};return{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=os(e);delete n.onTransitionEnter,delete n.onTransitionExited;const r={...n,...t};return{role:"presentation",...r,onKeyDown:T(r),ref:m}},getBackdropProps:function(){const e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{"aria-hidden":!0,...e,onClick:C(e),open:c}},getTransitionProps:()=>({onEnter:dl((()=>{y(!1),o&&o()}),s?.props.onEnter),onExited:dl((()=>{y(!0),a&&a(),i&&I()}),s?.props.onExited)}),rootRef:m,portalRef:E,isTopModal:S,exited:g,hasTransition:v}};function xl(e){return Ae("MuiModal",e)}ao("MuiModal",["root","hidden","backdrop"]);const wl=to("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(ko((e=>{let{theme:t}=e;return{position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:e=>{let{ownerState:t}=e;return!t.open&&t.exited},style:{visibility:"hidden"}}]}}))),kl=to(cl,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),Sl=l.forwardRef((function(e,t){const n=Io({name:"MuiModal",props:e}),{BackdropComponent:r=kl,BackdropProps:i,classes:o,className:a,closeAfterTransition:s=!1,children:u,container:c,component:h,components:d={},componentsProps:p={},disableAutoFocus:f=!1,disableEnforceFocus:m=!1,disableEscapeKeyDown:g=!1,disablePortal:y=!1,disableRestoreFocus:v=!1,disableScrollLock:b=!1,hideBackdrop:x=!1,keepMounted:w=!1,onBackdropClick:k,onClose:S,onTransitionEnter:E,onTransitionExited:I,open:T,slotProps:C={},slots:A={},theme:_,...N}=n,O={...n,closeAfterTransition:s,disableAutoFocus:f,disableEnforceFocus:m,disableEscapeKeyDown:g,disablePortal:y,disableRestoreFocus:v,disableScrollLock:b,hideBackdrop:x,keepMounted:w},{getRootProps:R,getBackdropProps:$,getTransitionProps:D,portalRef:P,isTopModal:M,exited:F,hasTransition:L}=bl({...O,rootRef:t}),j={...O,exited:F},z=(e=>{const{open:t,exited:n,classes:r}=e;return _e({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},xl,r)})(j),B={};if(void 0===u.props.tabIndex&&(B.tabIndex="-1"),L){const{onEnter:e,onExited:t}=D();B.onEnter=e,B.onExited=t}const U={...N,slots:{root:d.Root,backdrop:d.Backdrop,...A},slotProps:{...p,...C}},[W,V]=il("root",{elementType:wl,externalForwardedProps:U,getSlotProps:R,additionalProps:{ref:t,as:h},ownerState:j,className:Se(a,z?.root,!j.open&&j.exited&&z?.hidden)}),[G,H]=il("backdrop",{elementType:r,externalForwardedProps:U,additionalProps:i,getSlotProps:e=>$({...e,onClick:t=>{k&&k(t),e?.onClick&&e.onClick(t)}}),className:Se(i?.className,z?.backdrop),ownerState:j}),q=Qo(i?.ref,H.ref);return w||T||L&&!F?(0,Lr.jsx)(rl,{ref:P,container:c,disablePortal:y,children:(0,Lr.jsxs)(W,{...V,children:[!x&&r?(0,Lr.jsx)(G,{...H,ref:q}):null,(0,Lr.jsx)(nl,{disableEnforceFocus:m,disableAutoFocus:f,disableRestoreFocus:v,isEnabled:M,open:T,children:l.cloneElement(u,B)})]})}):null})),El=Sl;function Il(e){return Ae("MuiPaper",e)}ao("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Tl=to("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t[`elevation${n.elevation}`]]}})(ko((e=>{let{theme:t}=e;return{backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:e=>{let{ownerState:t}=e;return!t.square},style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(t.vars||t).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}}))),Cl=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiPaper"}),r=Gs(),{className:i,component:o="div",elevation:a=1,square:s=!1,variant:l="elevation",...u}=n,c={...n,component:o,elevation:a,square:s,variant:l},h=(e=>{const{square:t,elevation:n,variant:r,classes:i}=e;return _e({root:["root",r,!t&&"rounded","elevation"===r&&`elevation${n}`]},Il,i)})(c);return(0,Lr.jsx)(Tl,{as:o,ownerState:c,className:Se(h.root,i),ref:t,...u,style:{..."elevation"===l&&{"--Paper-shadow":(r.vars||r).shadows[a],...r.vars&&{"--Paper-overlay":r.vars.overlays?.[a]},...!r.vars&&"dark"===r.palette.mode&&{"--Paper-overlay":`linear-gradient(${Yr("#fff",Pi(a))}, ${Yr("#fff",Pi(a))})`}},...u.style}})})),Al=Cl;function _l(e){return Ae("MuiPopover",e)}ao("MuiPopover",["root","paper"]);function Nl(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.height/2:"bottom"===t&&(n=e.height),n}function Ol(e,t){let n=0;return"number"===typeof t?n=t:"center"===t?n=e.width/2:"right"===t&&(n=e.width),n}function Rl(e){return[e.horizontal,e.vertical].map((e=>"number"===typeof e?`${e}px`:e)).join(" ")}function $l(e){return"function"===typeof e?e():e}const Dl=to(El,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Pl=to(Al,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Ml=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiPopover"}),{action:r,anchorEl:i,anchorOrigin:o={vertical:"top",horizontal:"left"},anchorPosition:a,anchorReference:s="anchorEl",children:u,className:c,container:h,elevation:d=8,marginThreshold:p=16,open:f,PaperProps:m={},slots:g={},slotProps:y={},transformOrigin:v={vertical:"top",horizontal:"left"},TransitionComponent:b=Js,transitionDuration:x="auto",TransitionProps:{onEntering:w,...k}={},disableScrollLock:S=!1,...E}=n,I=y?.paper??m,T=l.useRef(),C={...n,anchorOrigin:o,anchorReference:s,elevation:d,marginThreshold:p,externalPaperSlotProps:I,transformOrigin:v,TransitionComponent:b,transitionDuration:x,TransitionProps:k},A=(e=>{const{classes:t}=e;return _e({root:["root"],paper:["paper"]},_l,t)})(C),_=l.useCallback((()=>{if("anchorPosition"===s)return a;const e=$l(i),t=(e&&1===e.nodeType?e:es(T.current).body).getBoundingClientRect();return{top:t.top+Nl(t,o.vertical),left:t.left+Ol(t,o.horizontal)}}),[i,o.horizontal,o.vertical,a,s]),N=l.useCallback((e=>({vertical:Nl(e,v.vertical),horizontal:Ol(e,v.horizontal)})),[v.horizontal,v.vertical]),O=l.useCallback((e=>{const t={width:e.offsetWidth,height:e.offsetHeight},n=N(t);if("none"===s)return{top:null,left:null,transformOrigin:Rl(n)};const r=_();let o=r.top-n.vertical,a=r.left-n.horizontal;const l=o+t.height,u=a+t.width,c=ys($l(i)),h=c.innerHeight-p,d=c.innerWidth-p;if(null!==p&&o<p){const e=o-p;o-=e,n.vertical+=e}else if(null!==p&&l>h){const e=l-h;o-=e,n.vertical+=e}if(null!==p&&a<p){const e=a-p;a-=e,n.horizontal+=e}else if(u>d){const e=u-d;a-=e,n.horizontal+=e}return{top:`${Math.round(o)}px`,left:`${Math.round(a)}px`,transformOrigin:Rl(n)}}),[i,s,_,N,p]),[R,$]=l.useState(f),D=l.useCallback((()=>{const e=T.current;if(!e)return;const t=O(e);null!==t.top&&e.style.setProperty("top",t.top),null!==t.left&&(e.style.left=t.left),e.style.transformOrigin=t.transformOrigin,$(!0)}),[O]);l.useEffect((()=>(S&&window.addEventListener("scroll",D),()=>window.removeEventListener("scroll",D))),[i,S,D]);l.useEffect((()=>{f&&D()})),l.useImperativeHandle(r,(()=>f?{updatePosition:()=>{D()}}:null),[f,D]),l.useEffect((()=>{if(!f)return;const e=Es((()=>{D()})),t=ys(i);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[i,f,D]);let P=x;"auto"!==x||b.muiSupportAuto||(P=void 0);const M=h||(i?es($l(i)).body:void 0),F={slots:g,slotProps:{...y,paper:I}},[L,j]=il("paper",{elementType:Pl,externalForwardedProps:F,additionalProps:{elevation:d,className:Se(A.paper,I?.className),style:R?I.style:{...I.style,opacity:0}},ownerState:C}),[z,{slotProps:B,...U}]=il("root",{elementType:Dl,externalForwardedProps:F,additionalProps:{slotProps:{backdrop:{invisible:!0}},container:M,open:f},ownerState:C,className:Se(A.root,c)}),W=Qo(T,j.ref);return(0,Lr.jsx)(z,{...U,...!qo(z)&&{slotProps:B,disableScrollLock:S},...E,ref:t,children:(0,Lr.jsx)(b,{appear:!0,in:f,onEntering:(e,t)=>{w&&w(e,t),D()},onExited:()=>{$(!1)},timeout:P,...k,children:(0,Lr.jsx)(L,{...j,ref:W,children:u})})})}));function Fl(e){return Ae("MuiMenu",e)}ao("MuiMenu",["root","paper","list"]);const Ll={vertical:"top",horizontal:"right"},jl={vertical:"top",horizontal:"left"},zl=to(Ml,{shouldForwardProp:e=>eo(e)||"classes"===e,name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Bl=to(Pl,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Ul=to(Ss,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),Wl=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiMenu"}),{autoFocus:r=!0,children:i,className:o,disableAutoFocusItem:a=!1,MenuListProps:s={},onClose:u,open:c,PaperProps:h={},PopoverClasses:d,transitionDuration:p="auto",TransitionProps:{onEntering:f,...m}={},variant:g="selectedMenu",slots:y={},slotProps:v={},...b}=n,x=ns(),w={...n,autoFocus:r,disableAutoFocusItem:a,MenuListProps:s,onEntering:f,PaperProps:h,transitionDuration:p,TransitionProps:m,variant:g},k=(e=>{const{classes:t}=e;return _e({root:["root"],paper:["paper"],list:["list"]},Fl,t)})(w),S=r&&!a&&c,E=l.useRef(null);let I=-1;l.Children.map(i,((e,t)=>{l.isValidElement(e)&&(e.props.disabled||("selectedMenu"===g&&e.props.selected||-1===I)&&(I=t))}));const T=y.paper??Bl,C=v.paper??h,A=us({elementType:y.root,externalSlotProps:v.root,ownerState:w,className:[k.root,o]}),_=us({elementType:T,externalSlotProps:C,ownerState:w,className:k.paper});return(0,Lr.jsx)(zl,{onClose:u,anchorOrigin:{vertical:"bottom",horizontal:x?"right":"left"},transformOrigin:x?Ll:jl,slots:{paper:T,root:y.root},slotProps:{root:A,paper:_},open:c,ref:t,transitionDuration:p,TransitionProps:{onEntering:(e,t)=>{E.current&&E.current.adjustStyleForScrollbar(e,{direction:x?"rtl":"ltr"}),f&&f(e,t)},...m},ownerState:w,...b,classes:d,children:(0,Lr.jsx)(Ul,{onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),u&&u(e,"tabKeyDown"))},actions:E,autoFocus:r&&(-1===I||a),autoFocusItem:S,variant:g,...s,className:Se(k.list,s.className),children:i})})})),Vl=Wl;function Gl(e){return Ae("MuiNativeSelect",e)}const Hl=ao("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),ql=to("select")((e=>{let{theme:t}=e;return{MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${Hl.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},variants:[{props:e=>{let{ownerState:t}=e;return"filled"!==t.variant&&"outlined"!==t.variant},style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}}]}})),Kl=to(ql,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:eo,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${Hl.multiple}`]:t.multiple}]}})({}),Xl=to("svg")((e=>{let{theme:t}=e;return{position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${Hl.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:e=>{let{ownerState:t}=e;return t.open},style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]}})),Yl=to(Xl,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${Ur(n.variant)}`],n.open&&t.iconOpen]}})({}),Ql=l.forwardRef((function(e,t){const{className:n,disabled:r,error:i,IconComponent:o,inputRef:a,variant:s="standard",...u}=e,c={...e,disabled:r,variant:s,error:i},h=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o,error:a}=e;return _e({select:["select",n,r&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${Ur(n)}`,o&&"iconOpen",r&&"disabled"]},Gl,t)})(c);return(0,Lr.jsxs)(l.Fragment,{children:[(0,Lr.jsx)(Kl,{ownerState:c,className:Se(h.select,n),disabled:r,ref:a||t,...u}),e.multiple?null:(0,Lr.jsx)(Yl,{as:o,ownerState:c,className:h.icon})]})})),Jl=Ql;const Zl=function(e){let{controlled:t,default:n,name:r,state:i="value"}=e;const{current:o}=l.useRef(void 0!==t),[a,s]=l.useState(n);return[o?t:a,l.useCallback((e=>{o||s(e)}),[])]};function eu(e){return Ae("MuiSelect",e)}const tu=ao("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var nu;const ru=to(ql,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${tu.select}`]:t.select},{[`&.${tu.select}`]:t[n.variant]},{[`&.${tu.error}`]:t.error},{[`&.${tu.multiple}`]:t.multiple}]}})({[`&.${tu.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),iu=to(Xl,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${Ur(n.variant)}`],n.open&&t.iconOpen]}})({}),ou=to("input",{shouldForwardProp:e=>Zi(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function au(e,t){return"object"===typeof t&&null!==t?e===t:String(e)===String(t)}function su(e){return null==e||"string"===typeof e&&!e.trim()}const lu=l.forwardRef((function(e,t){const{"aria-describedby":n,"aria-label":r,autoFocus:i,autoWidth:o,children:a,className:s,defaultOpen:u,defaultValue:c,disabled:h,displayEmpty:d,error:p=!1,IconComponent:f,inputRef:m,labelId:g,MenuProps:y={},multiple:v,name:b,onBlur:x,onChange:w,onClose:k,onFocus:S,onOpen:E,open:I,readOnly:T,renderValue:C,SelectDisplayProps:A={},tabIndex:_,type:N,value:O,variant:R="standard",...$}=e,[D,P]=Zl({controlled:O,default:c,name:"Select"}),[M,F]=Zl({controlled:I,default:u,name:"Select"}),L=l.useRef(null),j=l.useRef(null),[z,B]=l.useState(null),{current:U}=l.useRef(null!=I),[W,V]=l.useState(),G=Qo(t,m),H=l.useCallback((e=>{j.current=e,e&&B(e)}),[]),q=z?.parentNode;l.useImperativeHandle(G,(()=>({focus:()=>{j.current.focus()},node:L.current,value:D})),[D]),l.useEffect((()=>{u&&M&&z&&!U&&(V(o?null:q.clientWidth),j.current.focus())}),[z,o]),l.useEffect((()=>{i&&j.current.focus()}),[i]),l.useEffect((()=>{if(!g)return;const e=es(j.current).getElementById(g);if(e){const t=()=>{getSelection().isCollapsed&&j.current.focus()};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}}}),[g]);const K=(e,t)=>{e?E&&E(t):k&&k(t),U||(V(o?null:q.clientWidth),F(e))},X=l.Children.toArray(a),Y=e=>t=>{let n;if(t.currentTarget.hasAttribute("tabindex")){if(v){n=Array.isArray(D)?D.slice():[];const t=D.indexOf(e.props.value);-1===t?n.push(e.props.value):n.splice(t,1)}else n=e.props.value;if(e.props.onClick&&e.props.onClick(t),D!==n&&(P(n),w)){const r=t.nativeEvent||t,i=new r.constructor(r.type,r);Object.defineProperty(i,"target",{writable:!0,value:{value:n,name:b}}),w(i,e)}v||K(!1,t)}},Q=null!==z&&M;let J,Z;delete $["aria-invalid"];const ee=[];let te=!1,ne=!1;(ea({value:D})||d)&&(C?J=C(D):te=!0);const re=X.map((e=>{if(!l.isValidElement(e))return null;let t;if(v){if(!Array.isArray(D))throw new Error(Ne(2));t=D.some((t=>au(t,e.props.value))),t&&te&&ee.push(e.props.children)}else t=au(D,e.props.value),t&&te&&(Z=e.props.children);return t&&(ne=!0),l.cloneElement(e,{"aria-selected":t?"true":"false",onClick:Y(e),onKeyUp:t=>{" "===t.key&&t.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(t)},role:"option",selected:t,value:void 0,"data-value":e.props.value})}));te&&(J=v?0===ee.length?null:ee.reduce(((e,t,n)=>(e.push(t),n<ee.length-1&&e.push(", "),e)),[]):Z);let ie,oe=W;!o&&U&&z&&(oe=q.clientWidth),ie="undefined"!==typeof _?_:h?null:0;const ae=A.id||(b?`mui-component-select-${b}`:void 0),se={...e,variant:R,value:D,open:Q,error:p},le=(e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o,error:a}=e;return _e({select:["select",n,r&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${Ur(n)}`,o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]},eu,t)})(se),ue={...y.PaperProps,...y.slotProps?.paper},ce=Mo();return(0,Lr.jsxs)(l.Fragment,{children:[(0,Lr.jsx)(ru,{as:"div",ref:H,tabIndex:ie,role:"combobox","aria-controls":ce,"aria-disabled":h?"true":void 0,"aria-expanded":Q?"true":"false","aria-haspopup":"listbox","aria-label":r,"aria-labelledby":[g,ae].filter(Boolean).join(" ")||void 0,"aria-describedby":n,onKeyDown:e=>{if(!T){[" ","ArrowUp","ArrowDown","Enter"].includes(e.key)&&(e.preventDefault(),K(!0,e))}},onMouseDown:h||T?null:e=>{0===e.button&&(e.preventDefault(),j.current.focus(),K(!0,e))},onBlur:e=>{!Q&&x&&(Object.defineProperty(e,"target",{writable:!0,value:{value:D,name:b}}),x(e))},onFocus:S,...A,ownerState:se,className:Se(A.className,le.select,s),id:ae,children:su(J)?nu||(nu=(0,Lr.jsx)("span",{className:"notranslate",children:"\u200b"})):J}),(0,Lr.jsx)(ou,{"aria-invalid":p,value:Array.isArray(D)?D.join(","):D,name:b,ref:L,"aria-hidden":!0,onChange:e=>{const t=X.find((t=>t.props.value===e.target.value));void 0!==t&&(P(t.props.value),w&&w(e,t))},tabIndex:-1,disabled:h,className:le.nativeInput,autoFocus:i,...$,ownerState:se}),(0,Lr.jsx)(iu,{as:f,className:le.icon,ownerState:se}),(0,Lr.jsx)(Vl,{id:`menu-${b||""}`,anchorEl:q,open:Q,onClose:e=>{K(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...y,MenuListProps:{"aria-labelledby":g,role:"listbox","aria-multiselectable":v?"true":void 0,disableListWrap:!0,id:ce,...y.MenuListProps},slotProps:{...y.slotProps,paper:{...ue,style:{minWidth:oe,...null!=ue?ue.style:null}}},children:re})]})})),uu=lu;function cu(e){return Ae("MuiSvgIcon",e)}ao("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const hu=to("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t[`color${Ur(n.color)}`],t[`fontSize${Ur(n.fontSize)}`]]}})(ko((e=>{let{theme:t}=e;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:t.transitions?.create?.("fill",{duration:(t.vars??t).transitions?.duration?.shorter}),variants:[{props:e=>!e.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:t.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:t.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:t.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter((e=>{let[,t]=e;return t&&t.main})).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars??t).palette?.[n]?.main}}})),{props:{color:"action"},style:{color:(t.vars??t).palette?.action?.active}},{props:{color:"disabled"},style:{color:(t.vars??t).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}}))),du=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiSvgIcon"}),{children:r,className:i,color:o="inherit",component:a="svg",fontSize:s="medium",htmlColor:u,inheritViewBox:c=!1,titleAccess:h,viewBox:d="0 0 24 24",...p}=n,f=l.isValidElement(r)&&"svg"===r.type,m={...n,color:o,component:a,fontSize:s,instanceFontSize:e.fontSize,inheritViewBox:c,viewBox:d,hasSvgAsChild:f},g={};c||(g.viewBox=d);const y=(e=>{const{color:t,fontSize:n,classes:r}=e;return _e({root:["root","inherit"!==t&&`color${Ur(t)}`,`fontSize${Ur(n)}`]},cu,r)})(m);return(0,Lr.jsxs)(hu,{as:a,className:Se(y.root,i),focusable:"false",color:u,"aria-hidden":!h||void 0,role:h?"img":void 0,ref:t,...g,...p,...f&&r.props,ownerState:m,children:[f?r.props.children:r,h?(0,Lr.jsx)("title",{children:h}):null]})}));du&&(du.muiName="SvgIcon");const pu=du;function fu(e,t){function n(n,r){return(0,Lr.jsx)(pu,{"data-testid":`${t}Icon`,ref:r,...n,children:e})}return n.muiName=pu.muiName,l.memo(l.forwardRef(n))}const mu=fu((0,Lr.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),gu={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>eo(e)&&"variant"!==e,slot:"Root"},yu=to(ga,gu)(""),vu=to(Ra,gu)(""),bu=to(ka,gu)(""),xu=l.forwardRef((function(e,t){const n=no({name:"MuiSelect",props:e}),{autoWidth:r=!1,children:i,classes:o={},className:a,defaultOpen:s=!1,displayEmpty:u=!1,IconComponent:c=mu,id:h,input:d,inputProps:p,label:f,labelId:m,MenuProps:g,multiple:y=!1,native:v=!1,onClose:b,onOpen:x,open:w,renderValue:k,SelectDisplayProps:S,variant:E="outlined",...I}=n,T=v?Jl:uu,C=Ko({props:n,muiFormControl:Yo(),states:["variant","error"]}),A=C.variant||E,_={...n,variant:A,classes:o},N=(e=>{const{classes:t}=e;return t})(_),{root:O,...R}=N,$=d||{standard:(0,Lr.jsx)(yu,{ownerState:_}),outlined:(0,Lr.jsx)(vu,{label:f,ownerState:_}),filled:(0,Lr.jsx)(bu,{ownerState:_})}[A],D=Qo(t,Za($));return(0,Lr.jsx)(l.Fragment,{children:l.cloneElement($,{inputComponent:T,inputProps:{children:i,error:C.error,IconComponent:c,variant:A,type:void 0,multiple:y,...v?{id:h}:{autoWidth:r,defaultOpen:s,displayEmpty:u,labelId:m,MenuProps:g,onClose:b,onOpen:x,open:w,renderValue:k,SelectDisplayProps:{id:h,...S}},...p,classes:p?Pe(R,p.classes):R,...d?d.props.inputProps:{}},...(y&&v||u)&&"outlined"===A?{notched:!0}:{},ref:D,className:Se($.props.className,a,N.root),...!d&&{variant:A},...I})})}));xu.muiName="Select";const wu=xu;function ku(e){return Ae("MuiTextField",e)}ao("MuiTextField",["root"]);const Su={standard:ga,filled:ka,outlined:Ra},Eu=to(qa,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Iu=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiTextField"}),{autoComplete:r,autoFocus:i=!1,children:o,className:a,color:s="primary",defaultValue:l,disabled:u=!1,error:c=!1,FormHelperTextProps:h,fullWidth:d=!1,helperText:p,id:f,InputLabelProps:m,inputProps:g,InputProps:y,inputRef:v,label:b,maxRows:x,minRows:w,multiline:k=!1,name:S,onBlur:E,onChange:I,onFocus:T,placeholder:C,required:A=!1,rows:_,select:N=!1,SelectProps:O,slots:R={},slotProps:$={},type:D,value:P,variant:M="outlined",...F}=n,L={...n,autoFocus:i,color:s,disabled:u,error:c,fullWidth:d,multiline:k,required:A,select:N,variant:M},j=(e=>{const{classes:t}=e;return _e({root:["root"]},ku,t)})(L);const z=Mo(f),B=p&&z?`${z}-helper-text`:void 0,U=b&&z?`${z}-label`:void 0,W=Su[M],V={slots:R,slotProps:{input:y,inputLabel:m,htmlInput:g,formHelperText:h,select:O,...$}},G={},H=V.slotProps.inputLabel;"outlined"===M&&(H&&"undefined"!==typeof H.shrink&&(G.notched=H.shrink),G.label=b),N&&(O&&O.native||(G.id=void 0),G["aria-describedby"]=void 0);const[q,K]=il("input",{elementType:W,externalForwardedProps:V,additionalProps:G,ownerState:L}),[X,Y]=il("inputLabel",{elementType:Ua,externalForwardedProps:V,ownerState:L}),[Q,J]=il("htmlInput",{elementType:"input",externalForwardedProps:V,ownerState:L}),[Z,ee]=il("formHelperText",{elementType:Ja,externalForwardedProps:V,ownerState:L}),[te,ne]=il("select",{elementType:wu,externalForwardedProps:V,ownerState:L}),re=(0,Lr.jsx)(q,{"aria-describedby":B,autoComplete:r,autoFocus:i,defaultValue:l,fullWidth:d,multiline:k,name:S,rows:_,maxRows:x,minRows:w,type:D,value:P,id:z,inputRef:v,onBlur:E,onChange:I,onFocus:T,placeholder:C,inputProps:J,slots:{input:R.htmlInput?Q:void 0},...K});return(0,Lr.jsxs)(Eu,{className:Se(j.root,a),disabled:u,error:c,fullWidth:d,ref:t,required:A,color:s,variant:M,ownerState:L,...F,children:[null!=b&&""!==b&&(0,Lr.jsx)(X,{htmlFor:z,id:U,...Y,children:b}),N?(0,Lr.jsx)(te,{"aria-describedby":B,id:z,labelId:U,value:P,input:re,...ne,children:o}):re,p&&(0,Lr.jsx)(Z,{id:B,...ee,children:p})]})})),Tu=Iu;function Cu(e){return Ae("MuiInputAdornment",e)}const Au=ao("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var _u;const Nu=to("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${Ur(n.position)}`],!0===n.disablePointerEvents&&t.disablePointerEvents,t[n.variant]]}})(ko((e=>{let{theme:t}=e;return{display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active,variants:[{props:{variant:"filled"},style:{[`&.${Au.positionStart}&:not(.${Au.hiddenLabel})`]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}}))),Ou=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiInputAdornment"}),{children:r,className:i,component:o="div",disablePointerEvents:a=!1,disableTypography:s=!1,position:u,variant:c,...h}=n,d=Yo()||{};let p=c;c&&d.variant,d&&!p&&(p=d.variant);const f={...n,hiddenLabel:d.hiddenLabel,size:d.size,disablePointerEvents:a,position:u,variant:p},m=(e=>{const{classes:t,disablePointerEvents:n,hiddenLabel:r,position:i,size:o,variant:a}=e;return _e({root:["root",n&&"disablePointerEvents",i&&`position${Ur(i)}`,a,r&&"hiddenLabel",o&&`size${Ur(o)}`]},Cu,t)})(f);return(0,Lr.jsx)(Xo.Provider,{value:null,children:(0,Lr.jsx)(Nu,{as:o,ownerState:f,className:Se(m.root,i),ref:t,...h,children:"string"!==typeof r||s?(0,Lr.jsxs)(l.Fragment,{children:["start"===u?_u||(_u=(0,Lr.jsx)("span",{className:"notranslate",children:"\u200b"})):null,r]}):(0,Lr.jsx)($o,{color:"textSecondary",children:r})})})})),Ru=Ou;function $u(e){try{return e.matches(":focus-visible")}catch(t){0}return!1}const Du=hl;class Pu{static create(){return new Pu}static use(){const e=Ts(Pu.create).current,[t,n]=l.useState(!1);return e.shouldMount=t,e.setShouldMount=n,l.useEffect(e.mountEffect,[t]),e}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=function(){let e,t;const n=new Promise(((n,r)=>{e=n,t=r}));return n.resolve=e,n.reject=t,n}(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&null!==this.ref.current&&(this.didMount=!0,this.mounted.resolve())};start(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.mount().then((()=>this.ref.current?.start(...t)))}stop(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.mount().then((()=>this.ref.current?.stop(...t)))}pulsate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.mount().then((()=>this.ref.current?.pulsate(...t)))}}function Mu(e,t){var n=Object.create(null);return e&&l.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,l.isValidElement)(e)?t(e):e}(e)})),n}function Fu(e,t,n){return null!=n[t]?n[t]:e.props[t]}function Lu(e,t,n){var r=Mu(e.children),i=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var a in e)a in t?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var u=i[l][r];s[i[l][r]]=n(u)}s[l]=n(l)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(t,r);return Object.keys(i).forEach((function(o){var a=i[o];if((0,l.isValidElement)(a)){var s=o in t,u=o in r,c=t[o],h=(0,l.isValidElement)(c)&&!c.props.in;!u||s&&!h?u||!s||h?u&&s&&(0,l.isValidElement)(c)&&(i[o]=(0,l.cloneElement)(a,{onExited:n.bind(null,a),in:c.props.in,exit:Fu(a,"exit",e),enter:Fu(a,"enter",e)})):i[o]=(0,l.cloneElement)(a,{in:!1}):i[o]=(0,l.cloneElement)(a,{onExited:n.bind(null,a),in:!0,exit:Fu(a,"exit",e),enter:Fu(a,"enter",e)})}})),i}var ju=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},zu=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}Rs(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,i=t.children,o=t.handleExited;return{children:t.firstRender?(n=e,r=o,Mu(n.children,(function(e){return(0,l.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:Fu(e,"appear",n),enter:Fu(e,"enter",n),exit:Fu(e,"exit",n)})}))):Lu(e,i,o),firstRender:!1}},n.handleExited=function(e,t){var n=Mu(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=mr({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=Ns(e,["component","childFactory"]),i=this.state.contextValue,o=ju(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?l.createElement(Ms.Provider,{value:i},o):l.createElement(Ms.Provider,{value:i},l.createElement(t,r,o))},t}(l.Component);zu.propTypes={},zu.defaultProps={component:"div",childFactory:function(e){return e}};const Bu=zu;const Uu=function(e){const{className:t,classes:n,pulsate:r=!1,rippleX:i,rippleY:o,rippleSize:a,in:s,onExited:u,timeout:c}=e,[h,d]=l.useState(!1),p=Se(t,n.ripple,n.rippleVisible,r&&n.ripplePulsate),f={width:a,height:a,top:-a/2+o,left:-a/2+i},m=Se(n.child,h&&n.childLeaving,r&&n.childPulsate);return s||h||d(!0),l.useEffect((()=>{if(!s&&null!=u){const e=setTimeout(u,c);return()=>{clearTimeout(e)}}}),[u,s,c]),(0,Lr.jsx)("span",{className:p,style:f,children:(0,Lr.jsx)("span",{className:m})})};const Wu=ao("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Vu=go`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,Gu=go`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,Hu=go`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,qu=to("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Ku=to(Uu,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Wu.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${Vu};
    animation-duration: ${550}ms;
    animation-timing-function: ${e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}};
  }

  &.${Wu.ripplePulsate} {
    animation-duration: ${e=>{let{theme:t}=e;return t.transitions.duration.shorter}}ms;
  }

  & .${Wu.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Wu.childLeaving} {
    opacity: 0;
    animation-name: ${Gu};
    animation-duration: ${550}ms;
    animation-timing-function: ${e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}};
  }

  & .${Wu.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${Hu};
    animation-duration: 2500ms;
    animation-timing-function: ${e=>{let{theme:t}=e;return t.transitions.easing.easeInOut}};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,Xu=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiTouchRipple"}),{center:r=!1,classes:i={},className:o,...a}=n,[s,u]=l.useState([]),c=l.useRef(0),h=l.useRef(null);l.useEffect((()=>{h.current&&(h.current(),h.current=null)}),[s]);const d=l.useRef(!1),p=_s(),f=l.useRef(null),m=l.useRef(null),g=l.useCallback((e=>{const{pulsate:t,rippleX:n,rippleY:r,rippleSize:o,cb:a}=e;u((e=>[...e,(0,Lr.jsx)(Ku,{classes:{ripple:Se(i.ripple,Wu.ripple),rippleVisible:Se(i.rippleVisible,Wu.rippleVisible),ripplePulsate:Se(i.ripplePulsate,Wu.ripplePulsate),child:Se(i.child,Wu.child),childLeaving:Se(i.childLeaving,Wu.childLeaving),childPulsate:Se(i.childPulsate,Wu.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:o},c.current)])),c.current+=1,h.current=a}),[i]),y=l.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{pulsate:i=!1,center:o=r||t.pulsate,fakeElement:a=!1}=t;if("mousedown"===e?.type&&d.current)return void(d.current=!1);"touchstart"===e?.type&&(d.current=!0);const s=a?null:m.current,l=s?s.getBoundingClientRect():{width:0,height:0,left:0,top:0};let u,c,h;if(o||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)u=Math.round(l.width/2),c=Math.round(l.height/2);else{const{clientX:t,clientY:n}=e.touches&&e.touches.length>0?e.touches[0]:e;u=Math.round(t-l.left),c=Math.round(n-l.top)}if(o)h=Math.sqrt((2*l.width**2+l.height**2)/3),h%2===0&&(h+=1);else{const e=2*Math.max(Math.abs((s?s.clientWidth:0)-u),u)+2,t=2*Math.max(Math.abs((s?s.clientHeight:0)-c),c)+2;h=Math.sqrt(e**2+t**2)}e?.touches?null===f.current&&(f.current=()=>{g({pulsate:i,rippleX:u,rippleY:c,rippleSize:h,cb:n})},p.start(80,(()=>{f.current&&(f.current(),f.current=null)}))):g({pulsate:i,rippleX:u,rippleY:c,rippleSize:h,cb:n})}),[r,g,p]),v=l.useCallback((()=>{y({},{pulsate:!0})}),[y]),b=l.useCallback(((e,t)=>{if(p.clear(),"touchend"===e?.type&&f.current)return f.current(),f.current=null,void p.start(0,(()=>{b(e,t)}));f.current=null,u((e=>e.length>0?e.slice(1):e)),h.current=t}),[p]);return l.useImperativeHandle(t,(()=>({pulsate:v,start:y,stop:b})),[v,y,b]),(0,Lr.jsx)(qu,{className:Se(Wu.root,i.root,o),ref:m,...a,children:(0,Lr.jsx)(Bu,{component:null,exit:!0,children:s})})}));function Yu(e){return Ae("MuiButtonBase",e)}const Qu=ao("MuiButtonBase",["root","disabled","focusVisible"]),Ju=to("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Qu.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Zu=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiButtonBase"}),{action:r,centerRipple:i=!1,children:o,className:a,component:s="button",disabled:u=!1,disableRipple:c=!1,disableTouchRipple:h=!1,focusRipple:d=!1,focusVisibleClassName:p,LinkComponent:f="a",onBlur:m,onClick:g,onContextMenu:y,onDragLeave:v,onFocus:b,onFocusVisible:x,onKeyDown:w,onKeyUp:k,onMouseDown:S,onMouseLeave:E,onMouseUp:I,onTouchEnd:T,onTouchMove:C,onTouchStart:A,tabIndex:_=0,TouchRippleProps:N,touchRippleRef:O,type:R,...$}=n,D=l.useRef(null),P=Pu.use(),M=Qo(P.ref,O),[F,L]=l.useState(!1);u&&F&&L(!1),l.useImperativeHandle(r,(()=>({focusVisible:()=>{L(!0),D.current.focus()}})),[]);const j=P.shouldMount&&!c&&!u;function z(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h;return Du((r=>{t&&t(r);return n||P[e](r),!0}))}l.useEffect((()=>{F&&d&&!c&&P.pulsate()}),[c,d,F,P]);const B=z("start",S),U=z("stop",y),W=z("stop",v),V=z("stop",I),G=z("stop",(e=>{F&&e.preventDefault(),E&&E(e)})),H=z("start",A),q=z("stop",T),K=z("stop",C),X=z("stop",(e=>{$u(e.target)||L(!1),m&&m(e)}),!1),Y=Du((e=>{D.current||(D.current=e.currentTarget),$u(e.target)&&(L(!0),x&&x(e)),b&&b(e)})),Q=()=>{const e=D.current;return s&&"button"!==s&&!("A"===e.tagName&&e.href)},J=Du((e=>{d&&!e.repeat&&F&&" "===e.key&&P.stop(e,(()=>{P.start(e)})),e.target===e.currentTarget&&Q()&&" "===e.key&&e.preventDefault(),w&&w(e),e.target===e.currentTarget&&Q()&&"Enter"===e.key&&!u&&(e.preventDefault(),g&&g(e))})),Z=Du((e=>{d&&" "===e.key&&F&&!e.defaultPrevented&&P.stop(e,(()=>{P.pulsate(e)})),k&&k(e),g&&e.target===e.currentTarget&&Q()&&" "===e.key&&!e.defaultPrevented&&g(e)}));let ee=s;"button"===ee&&($.href||$.to)&&(ee=f);const te={};"button"===ee?(te.type=void 0===R?"button":R,te.disabled=u):($.href||$.to||(te.role="button"),u&&(te["aria-disabled"]=u));const ne=Qo(t,D),re={...n,centerRipple:i,component:s,disabled:u,disableRipple:c,disableTouchRipple:h,focusRipple:d,tabIndex:_,focusVisible:F},ie=(e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:i}=e,o=_e({root:["root",t&&"disabled",n&&"focusVisible"]},Yu,i);return n&&r&&(o.root+=` ${r}`),o})(re);return(0,Lr.jsxs)(Ju,{as:ee,className:Se(ie.root,a),ownerState:re,onBlur:X,onClick:g,onContextMenu:U,onFocus:Y,onKeyDown:J,onKeyUp:Z,onMouseDown:B,onMouseLeave:G,onMouseUp:V,onDragLeave:W,onTouchEnd:q,onTouchMove:K,onTouchStart:H,ref:ne,tabIndex:u?-1:_,type:R,...te,...$,children:[o,j?(0,Lr.jsx)(Xu,{ref:M,center:i,...N}):null]})}));function ec(e){return Ae("MuiIconButton",e)}const tc=ao("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),nc=to(Zu,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"default"!==n.color&&t[`color${Ur(n.color)}`],n.edge&&t[`edge${Ur(n.edge)}`],t[`size${Ur(n.size)}`]]}})(ko((e=>{let{theme:t}=e;return{textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),variants:[{props:{disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Yr(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]}})),ko((e=>{let{theme:t}=e;return{variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(t.palette).filter(To()).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars||t).palette[n].main}}})),...Object.entries(t.palette).filter(To()).map((e=>{let[n]=e;return{props:{color:n,disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?`rgba(${(t.vars||t).palette[n].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Yr((t.vars||t).palette[n].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}}})),{props:{size:"small"},style:{padding:5,fontSize:t.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:t.typography.pxToRem(28)}}],[`&.${tc.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}}}))),rc=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiIconButton"}),{edge:r=!1,children:i,className:o,color:a="default",disabled:s=!1,disableFocusRipple:l=!1,disableRipple:u=!1,size:c="medium",...h}=n,d={...n,edge:r,color:a,disabled:s,disableFocusRipple:l,disableRipple:u,size:c},p=(e=>{const{classes:t,disabled:n,color:r,edge:i,size:o}=e;return _e({root:["root",n&&"disabled","default"!==r&&`color${Ur(r)}`,i&&`edge${Ur(i)}`,`size${Ur(o)}`]},ec,t)})(d);return(0,Lr.jsx)(nc,{className:Se(p.root,o),centerRipple:!0,focusRipple:!l,disabled:s,disableRipple:u,ref:t,...h,ownerState:d,children:i})})),ic=rc;function oc(e){return Ae("MuiButton",e)}const ac=ao("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);const sc=l.createContext({});const lc=l.createContext(void 0),uc=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],cc=to(Zu,{shouldForwardProp:e=>eo(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${Ur(n.color)}`],t[`size${Ur(n.size)}`],t[`${n.variant}Size${Ur(n.size)}`],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})(ko((e=>{let{theme:t}=e;const n="light"===t.palette.mode?t.palette.grey[300]:t.palette.grey[800],r="light"===t.palette.mode?t.palette.grey.A100:t.palette.grey[700];return{...t.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${ac.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},[`&.${ac.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},[`&.${ac.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${ac.disabled}`]:{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(To()).map((e=>{let[n]=e;return{props:{color:n},style:{"--variant-textColor":(t.vars||t).palette[n].main,"--variant-outlinedColor":(t.vars||t).palette[n].main,"--variant-outlinedBorder":t.vars?`rgba(${t.vars.palette[n].mainChannel} / 0.5)`:Yr(t.palette[n].main,.5),"--variant-containedColor":(t.vars||t).palette[n].contrastText,"--variant-containedBg":(t.vars||t).palette[n].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[n].dark,"--variant-textBg":t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Yr(t.palette[n].main,t.palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[n].main,"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Yr(t.palette[n].main,t.palette.action.hoverOpacity)}}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:n,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:r,"--variant-textBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:Yr(t.palette.text.primary,t.palette.action.hoverOpacity),"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:Yr(t.palette.text.primary,t.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${ac.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${ac.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}}]}}))),hc=to("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${Ur(n.size)}`]]}})({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},...uc]}),dc=to("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${Ur(n.size)}`]]}})({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},...uc]}),pc=l.forwardRef((function(e,t){const n=l.useContext(sc),r=l.useContext(lc),i=Io({props:Re(n,e),name:"MuiButton"}),{children:o,color:a="primary",component:s="button",className:u,disabled:c=!1,disableElevation:h=!1,disableFocusRipple:d=!1,endIcon:p,focusVisibleClassName:f,fullWidth:m=!1,size:g="medium",startIcon:y,type:v,variant:b="text",...x}=i,w={...i,color:a,component:s,disabled:c,disableElevation:h,disableFocusRipple:d,fullWidth:m,size:g,type:v,variant:b},k=(e=>{const{color:t,disableElevation:n,fullWidth:r,size:i,variant:o,classes:a}=e,s=_e({root:["root",o,`${o}${Ur(t)}`,`size${Ur(i)}`,`${o}Size${Ur(i)}`,`color${Ur(t)}`,n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${Ur(i)}`],endIcon:["icon","endIcon",`iconSize${Ur(i)}`]},oc,a);return{...a,...s}})(w),S=y&&(0,Lr.jsx)(hc,{className:k.startIcon,ownerState:w,children:y}),E=p&&(0,Lr.jsx)(dc,{className:k.endIcon,ownerState:w,children:p}),I=r||"";return(0,Lr.jsxs)(cc,{ownerState:w,className:Se(n.className,k.root,u,I),component:s,disabled:c,focusRipple:!d,focusVisibleClassName:Se(k.focusVisible,f),ref:t,type:v,...x,classes:k,children:[S,o,E]})})),fc=pc;function mc(e){return Ae("MuiCircularProgress",e)}ao("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const gc=44,yc=go`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,vc=go`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`,bc="string"!==typeof yc?mo`
        animation: ${yc} 1.4s linear infinite;
      `:null,xc="string"!==typeof vc?mo`
        animation: ${vc} 1.4s ease-in-out infinite;
      `:null,wc=to("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${Ur(n.color)}`]]}})(ko((e=>{let{theme:t}=e;return{display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:bc||{animation:`${yc} 1.4s linear infinite`}},...Object.entries(t.palette).filter(To()).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars||t).palette[n].main}}}))]}}))),kc=to("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),Sc=to("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${Ur(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(ko((e=>{let{theme:t}=e;return{stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&!t.disableShrink},style:xc||{animation:`${vc} 1.4s ease-in-out infinite`}}]}}))),Ec=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiCircularProgress"}),{className:r,color:i="primary",disableShrink:o=!1,size:a=40,style:s,thickness:l=3.6,value:u=0,variant:c="indeterminate",...h}=n,d={...n,color:i,disableShrink:o,size:a,thickness:l,value:u,variant:c},p=(e=>{const{classes:t,variant:n,color:r,disableShrink:i}=e;return _e({root:["root",n,`color${Ur(r)}`],svg:["svg"],circle:["circle",`circle${Ur(n)}`,i&&"circleDisableShrink"]},mc,t)})(d),f={},m={},g={};if("determinate"===c){const e=2*Math.PI*((gc-l)/2);f.strokeDasharray=e.toFixed(3),g["aria-valuenow"]=Math.round(u),f.strokeDashoffset=`${((100-u)/100*e).toFixed(3)}px`,m.transform="rotate(-90deg)"}return(0,Lr.jsx)(wc,{className:Se(p.root,r),style:{width:a,height:a,...m,...s},ownerState:d,ref:t,role:"progressbar",...g,...h,children:(0,Lr.jsx)(kc,{className:p.svg,ownerState:d,viewBox:"22 22 44 44",children:(0,Lr.jsx)(Sc,{className:p.circle,style:f,ownerState:d,cx:gc,cy:gc,r:(gc-l)/2,fill:"none",strokeWidth:l})})})})),Ic=Ec,Tc=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Cc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,a=o?e[i+1]:0,s=i+2<e.length,l=s?e[i+2]:0,u=t>>2,c=(3&t)<<4|a>>4;let h=(15&a)<<2|l>>6,d=63&l;s||(d=64,o||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Tc(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const s=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==a||null==s)throw new Ac;const l=t<<2|o>>4;if(r.push(l),64!==a){const e=o<<4&240|a>>2;if(r.push(e),64!==s){const e=a<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ac extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _c=function(e){return function(e){const t=Tc(e);return Cc.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Nc=function(e){try{return Cc.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const Oc=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Rc=()=>{try{return Oc()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/daily-expense-tracker-ai",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_KEY:"AIzaSyDZlPTNtWbRsCxS1b9zj8eVP_Zp7K9U3YU",REACT_APP_HUGGING_FACE_API_KEY:"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",REACT_APP_HUGGING_FACE_API_URL:"https://api-inference.huggingface.co/models/meta-llama/Meta-Llama-3-8B-Instruct",REACT_APP_HUGGING_FACE_API_URL_OLD:"https://api-inference.huggingface.co/models/gpt2",REACT_APP_OPENAI_SECRET:"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"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Nc(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},$c=e=>{var t,n;return null===(n=null===(t=Rc())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Dc=()=>{var e;return null===(e=Rc())||void 0===e?void 0:e.config},Pc=e=>{var t;return null===(t=Rc())||void 0===t?void 0:t[`_${e}`]};class Mc{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Fc(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Lc(){return!function(){var e;const t=null===(e=Rc())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jc(){try{return"object"===typeof indexedDB}catch(e){return!1}}class zc extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,zc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bc.prototype.create)}}class Bc{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(Uc,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",o=`${this.serviceName}: ${i} (${n}).`;return new zc(n,o,t)}}const Uc=/\{\$([^}]+)}/g;function Wc(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(Vc(n)&&Vc(o)){if(!Wc(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Vc(e){return null!==e&&"object"===typeof e}function Gc(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Hc(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function qc(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Kc{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Xc),void 0===r.error&&(r.error=Xc),void 0===r.complete&&(r.complete=Xc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Xc(){}function Yc(e){return e&&e._delegate?e._delegate:e}class Qc{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Jc="[DEFAULT]";class Zc{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Mc;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Jc})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jc;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jc;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jc;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:eh(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jc;return this.component?this.component.multipleInstances?e:Jc:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function eh(e){return e===Jc?void 0:e}class th{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Zc(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const nh=[];var rh;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(rh||(rh={}));const ih={debug:rh.DEBUG,verbose:rh.VERBOSE,info:rh.INFO,warn:rh.WARN,error:rh.ERROR,silent:rh.SILENT},oh=rh.INFO,ah={[rh.DEBUG]:"log",[rh.VERBOSE]:"log",[rh.INFO]:"info",[rh.WARN]:"warn",[rh.ERROR]:"error"},sh=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=ah[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];console[r](`[${n}]  ${e.name}:`,...o)};class lh{constructor(e){this.name=e,this._logLevel=oh,this._logHandler=sh,this._userLogHandler=null,nh.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rh))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?ih[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,rh.DEBUG,...t),this._logHandler(this,rh.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,rh.VERBOSE,...t),this._logHandler(this,rh.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,rh.INFO,...t),this._logHandler(this,rh.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,rh.WARN,...t),this._logHandler(this,rh.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,rh.ERROR,...t),this._logHandler(this,rh.ERROR,...t)}}let uh,ch;const hh=new WeakMap,dh=new WeakMap,ph=new WeakMap,fh=new WeakMap,mh=new WeakMap;let gh={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return dh.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ph.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return bh(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function yh(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ch||(ch=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(xh(this),n),bh(hh.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return bh(e.apply(xh(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(xh(this),t,...r);return ph.set(o,t.sort?t.sort():[t]),bh(o)}}function vh(e){return"function"===typeof e?yh(e):(e instanceof IDBTransaction&&function(e){if(dh.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));dh.set(e,t)}(e),((e,t)=>t.some((t=>e instanceof t)))(e,uh||(uh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,gh):e)}function bh(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(bh(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&hh.set(t,e)})).catch((()=>{})),mh.set(t,e),t}(e);if(fh.has(e))return fh.get(e);const t=vh(e);return t!==e&&(fh.set(e,t),mh.set(t,e)),t}const xh=e=>mh.get(e);const wh=["get","getKey","getAll","getAllKeys","count"],kh=["put","add","delete","clear"],Sh=new Map;function Eh(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Sh.get(t))return Sh.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=kh.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!wh.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return r&&(o=o.index(s.shift())),(await Promise.all([o[n](...s),i&&t.done]))[0]};return Sh.set(t,o),o}gh=(e=>({...e,get:(t,n,r)=>Eh(t,n)||e.get(t,n,r),has:(t,n)=>!!Eh(t,n)||e.has(t,n)}))(gh);class Ih{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Th="@firebase/app",Ch="0.10.12",Ah=new lh("@firebase/app"),_h="@firebase/app-compat",Nh="@firebase/analytics-compat",Oh="@firebase/analytics",Rh="@firebase/app-check-compat",$h="@firebase/app-check",Dh="@firebase/auth",Ph="@firebase/auth-compat",Mh="@firebase/database",Fh="@firebase/data-connect",Lh="@firebase/database-compat",jh="@firebase/functions",zh="@firebase/functions-compat",Bh="@firebase/installations",Uh="@firebase/installations-compat",Wh="@firebase/messaging",Vh="@firebase/messaging-compat",Gh="@firebase/performance",Hh="@firebase/performance-compat",qh="@firebase/remote-config",Kh="@firebase/remote-config-compat",Xh="@firebase/storage",Yh="@firebase/storage-compat",Qh="@firebase/firestore",Jh="@firebase/vertexai-preview",Zh="@firebase/firestore-compat",ed="firebase",td="[DEFAULT]",nd={[Th]:"fire-core",[_h]:"fire-core-compat",[Oh]:"fire-analytics",[Nh]:"fire-analytics-compat",[$h]:"fire-app-check",[Rh]:"fire-app-check-compat",[Dh]:"fire-auth",[Ph]:"fire-auth-compat",[Mh]:"fire-rtdb",[Fh]:"fire-data-connect",[Lh]:"fire-rtdb-compat",[jh]:"fire-fn",[zh]:"fire-fn-compat",[Bh]:"fire-iid",[Uh]:"fire-iid-compat",[Wh]:"fire-fcm",[Vh]:"fire-fcm-compat",[Gh]:"fire-perf",[Hh]:"fire-perf-compat",[qh]:"fire-rc",[Kh]:"fire-rc-compat",[Xh]:"fire-gcs",[Yh]:"fire-gcs-compat",[Qh]:"fire-fst",[Zh]:"fire-fst-compat",[Jh]:"fire-vertex","fire-js":"fire-js",[ed]:"fire-js-all"},rd=new Map,id=new Map,od=new Map;function ad(e,t){try{e.container.addComponent(t)}catch(n){Ah.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function sd(e){const t=e.name;if(od.has(t))return Ah.debug(`There were multiple attempts to register component ${t}.`),!1;od.set(t,e);for(const n of rd.values())ad(n,e);for(const n of id.values())ad(n,e);return!0}function ld(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ud(e){return void 0!==e.settings}const cd=new Bc("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class hd{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Qc("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cd.create("app-deleted",{appName:this._name})}}const dd="10.14.0";function pd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:td,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw cd.create("bad-app-name",{appName:String(i)});if(n||(n=Dc()),!n)throw cd.create("no-options");const o=rd.get(i);if(o){if(Wc(n,o.options)&&Wc(r,o.config))return o;throw cd.create("duplicate-app",{appName:i})}const a=new th(i);for(const l of od.values())a.addComponent(l);const s=new hd(n,r,a);return rd.set(i,s),s}function fd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:td;const t=rd.get(e);if(!t&&e===td&&Dc())return pd();if(!t)throw cd.create("no-app",{appName:e});return t}function md(e,t,n){var r;let i=null!==(r=nd[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${i}" with version "${t}":`];return o&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Ah.warn(e.join(" "))}sd(new Qc(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const gd="firebase-heartbeat-store";let yd=null;function vd(){return yd||(yd=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),s=bh(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(bh(a.result),e.oldVersion,e.newVersion,bh(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),s.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),s}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(gd)}catch(n){console.warn(n)}}}).catch((e=>{throw cd.create("idb-open",{originalErrorMessage:e.message})}))),yd}async function bd(e,t){try{const n=(await vd()).transaction(gd,"readwrite"),r=n.objectStore(gd);await r.put(t,xd(e)),await n.done}catch(n){if(n instanceof zc)Ah.warn(n.message);else{const e=cd.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Ah.warn(e.message)}}}function xd(e){return`${e.name}!${e.options.appId}`}class wd{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Sd(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=kd();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(n){Ah.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=kd(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Ed(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ed(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=_c(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Ah.warn(t),""}}}function kd(){return(new Date).toISOString().substring(0,10)}class Sd{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!jc()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await vd()).transaction(gd),n=await t.objectStore(gd).get(xd(e));return await t.done,n}catch(t){if(t instanceof zc)Ah.warn(t.message);else{const e=cd.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Ah.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return bd(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return bd(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Ed(e){return _c(JSON.stringify({version:2,heartbeats:e})).length}var Id;Id="",sd(new Qc("platform-logger",(e=>new Ih(e)),"PRIVATE")),sd(new Qc("heartbeat",(e=>new wd(e)),"PRIVATE")),md(Th,Ch,Id),md(Th,Ch,"esm2017"),md("fire-js","");function Td(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Cd(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ad=Cd,_d=new Bc("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Nd=new lh("@firebase/auth");function Od(e){if(Nd.logLevel<=rh.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Nd.error(`Auth (${dd}): ${e}`,...n)}}function Rd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Fd(e,...n)}function $d(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Fd(e,...n)}function Dd(e,t,n){const r=Object.assign(Object.assign({},Ad()),{[t]:n});return new Bc("auth","Firebase",r).create(t,{appName:e.name})}function Pd(e){return Dd(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Md(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Rd(e,"argument-error"),Dd(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Fd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return _d.create(e,...n)}function Ld(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Fd(t,...r)}}function jd(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Od(t),new Error(t)}function zd(e,t){e||jd(t)}function Bd(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ud(){return"http:"===Wd()||"https:"===Wd()}function Wd(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Vd(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Ud()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Gd{constructor(e,t){this.shortDelay=e,this.longDelay=t,zd(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fc())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Vd()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Hd(e,t){zd(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class qd{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void jd("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void jd("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void jd("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Kd={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Xd=new Gd(3e4,6e4);function Yd(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Qd(e,t,n,r){return Jd(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const a=Gc(Object.assign({key:e.config.apiKey},o)).slice(1),s=await e._getAdditionalHeaders();s["Content-Type"]="application/json",e.languageCode&&(s["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:s},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),qd.fetch()(ep(e,e.config.apiHost,n,a),l)}))}async function Jd(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Kd),t);try{const t=new np(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw rp(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw rp(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw rp(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw rp(e,"user-disabled",o);const s=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Dd(e,s,a);Rd(e,s)}}catch(i){if(i instanceof zc)throw i;Rd(e,"network-request-failed",{message:String(i)})}}async function Zd(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await Qd(e,t,n,r,i);return"mfaPendingCredential"in o&&Rd(e,"multi-factor-auth-required",{_serverResponse:o}),o}function ep(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?Hd(e.config,i):`${e.config.apiScheme}://${i}`}function tp(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class np{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t($d(this.auth,"network-request-failed"))),Xd.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function rp(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=$d(e,t,r);return i.customData._tokenResponse=n,i}function ip(e){return void 0!==e&&void 0!==e.enterprise}class op{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return tp(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function ap(e,t){return Qd(e,"GET","/v2/recaptchaConfig",Yd(e,t))}async function sp(e,t){return Qd(e,"POST","/v1/accounts:lookup",t)}function lp(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function up(e){return 1e3*Number(e)}function cp(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Od("JWT malformed, contained fewer than 3 sections"),null;try{const e=Nc(n);return e?JSON.parse(e):(Od("Failed to decode base64 JWT payload"),null)}catch(i){return Od("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function hp(e){const t=cp(e);return Ld(t,"internal-error"),Ld("undefined"!==typeof t.exp,"internal-error"),Ld("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function dp(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof zc&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class pp{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null===e||void 0===e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class fp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=lp(this.lastLoginAt),this.creationTime=lp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function mp(e){var t;const n=e.auth,r=await e.getIdToken(),i=await dp(e,sp(n,{idToken:r}));Ld(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const a=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?gp(o.providerUserInfo):[],s=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,a),l=e.isAnonymous,u=!(e.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),c=!!l&&u,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new fp(o.createdAt,o.lastLoginAt),isAnonymous:c};Object.assign(e,h)}function gp(e){return e.map((e=>{var{providerId:t}=e,n=Td(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class yp{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ld(e.idToken,"internal-error"),Ld("undefined"!==typeof e.idToken,"internal-error"),Ld("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):hp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ld(0!==e.length,"internal-error");const t=hp(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Ld(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Jd(e,{},(async()=>{const n=Gc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=ep(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",qd.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new yp;return n&&(Ld("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(Ld("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(Ld("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yp,this.toJSON())}_performRefresh(){return jd("not implemented")}}function vp(e,t){Ld("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class bp{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Td(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pp(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new fp(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await dp(this,this.stsTokenManager.getToken(this.auth,e));return Ld(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Yc(e),r=await n.getIdToken(t),i=cp(r);Ld(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,a=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:lp(up(i.auth_time)),issuedAtTime:lp(up(i.iat)),expirationTime:lp(up(i.exp)),signInProvider:a||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Yc(e);await mp(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Ld(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new bp(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ld(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await mp(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ud(this.auth.app))return Promise.reject(Pd(this.auth));const e=await this.getIdToken();return await dp(this,async function(e,t){return Qd(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,a,s,l,u;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,f=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(s=t._redirectEventId)&&void 0!==s?s:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:b,isAnonymous:x,providerData:w,stsTokenManager:k}=t;Ld(v&&k,e,"internal-error");const S=yp.fromJSON(this.name,k);Ld("string"===typeof v,e,"internal-error"),vp(c,e.name),vp(h,e.name),Ld("boolean"===typeof b,e,"internal-error"),Ld("boolean"===typeof x,e,"internal-error"),vp(d,e.name),vp(p,e.name),vp(f,e.name),vp(m,e.name),vp(g,e.name),vp(y,e.name);const E=new bp({uid:v,auth:e,email:h,emailVerified:b,displayName:c,isAnonymous:x,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:S,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(E.providerData=w.map((e=>Object.assign({},e)))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new yp;r.updateFromServerResponse(t);const i=new bp({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await mp(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Ld(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?gp(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),a=new yp;a.updateFromIdToken(n);const s=new bp({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new fp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(s,l),s}}const xp=new Map;function wp(e){zd(e instanceof Function,"Expected a class definition");let t=xp.get(e);return t?(zd(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,xp.set(e,t),t)}class kp{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}kp.type="NONE";const Sp=kp;function Ep(e,t,n){return`firebase:${e}:${t}:${n}`}class Ip{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Ep(this.userKey,r.apiKey,i),this.fullPersistenceKey=Ep("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?bp._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Ip(wp(Sp),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||wp(Sp);const o=Ep(n,e.config.apiKey,e.name);let a=null;for(const u of t)try{const t=await u._get(o);if(t){const n=bp._fromJSON(e,t);u!==i&&(a=n),i=u;break}}catch(l){}const s=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&s.length?(i=s[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(o)}catch(l){}}))),new Ip(i,e,n)):new Ip(i,e,n)}}function Tp(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Np(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Cp(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Rp(t))return"Blackberry";if($p(t))return"Webos";if(Ap(t))return"Safari";if((t.includes("chrome/")||_p(t))&&!t.includes("edge/"))return"Chrome";if(Op(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Cp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fc();return/firefox\//i.test(e)}function Ap(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fc()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fc();return/crios\//i.test(e)}function Np(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fc();return/iemobile/i.test(e)}function Op(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fc();return/android/i.test(e)}function Rp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fc();return/blackberry/i.test(e)}function $p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fc();return/webos/i.test(e)}function Dp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fc();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Pp(){return function(){const e=Fc();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Mp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fc();return Dp(e)||Op(e)||$p(e)||Rp(e)||/windows phone/i.test(e)||Np(e)}function Fp(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Tp(Fc());break;case"Worker":t=`${Tp(Fc())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${dd}/${r}`}class Lp{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class jp{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,a;const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=null===(t=s.meetsMinPasswordLength)||void 0===t||t),s.isValid&&(s.isValid=null===(n=s.meetsMaxPasswordLength)||void 0===n||n),s.isValid&&(s.isValid=null===(r=s.containsLowercaseLetter)||void 0===r||r),s.isValid&&(s.isValid=null===(i=s.containsUppercaseLetter)||void 0===i||i),s.isValid&&(s.isValid=null===(o=s.containsNumericCharacter)||void 0===o||o),s.isValid&&(s.isValid=null===(a=s.containsNonAlphanumericCharacter)||void 0===a||a),s}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class zp{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Up(this),this.idTokenSubscription=new Up(this),this.beforeStateQueue=new Lp(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_d,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=wp(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Ip.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await sp(this,{idToken:e}),n=await bp._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ud(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==o||!(null===a||void 0===a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(o)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ld(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await mp(e)}catch(t){if("auth/network-request-failed"!==(null===t||void 0===t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ud(this.app))return Promise.reject(Pd(this));const t=e?Yc(e):null;return t&&Ld(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Ld(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return ud(this.app)?Promise.reject(Pd(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ud(this.app)?Promise.reject(Pd(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(wp(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Qd(e,"GET","/v2/passwordPolicy",Yd(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new jp(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Bc("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Qd(e,"POST","/v2/accounts:revokeToken",Yd(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&wp(e)||this._popupRedirectResolver;Ld(t,this,"argument-error"),this.redirectPersistenceManager=await Ip.create(this,[wp(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ld(a,this,"internal-error"),a.then((()=>{o||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ld(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Fp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Nd.logLevel<=rh.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Nd.warn(`Auth (${dd}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function Bp(e){return Yc(e)}class Up{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Kc(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return Ld(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Wp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Vp(e){return Wp.loadJS(e)}function Gp(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Hp{constructor(e){this.type="recaptcha-enterprise",this.auth=Bp(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;ip(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{ap(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new op(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&ip(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Wp.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Vp(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function qp(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Hp(e);let o;try{o=await i.verify(n)}catch(s){o=await i.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Kp(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await qp(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await qp(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function Xp(e,t,n){const r=Bp(e);Ld(r._canInitEmulator,r,"emulator-config-failed"),Ld(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=Yp(t),{host:a,port:s}=function(e){const t=Yp(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Qp(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Qp(t)}}}(t),l=null===s?"":`:${s}`;r.config.emulator={url:`${o}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:s,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Yp(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Qp(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Jp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return jd("not implemented")}_getIdTokenResponse(e){return jd("not implemented")}_linkToIdToken(e,t){return jd("not implemented")}_getReauthenticationResolver(e){return jd("not implemented")}}async function Zp(e,t){return Qd(e,"POST","/v1/accounts:signUp",t)}async function ef(e,t){return Zd(e,"POST","/v1/accounts:signInWithPassword",Yd(e,t))}class tf extends Jp{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new tf(e,t,"password")}static _fromEmailAndCode(e,t){return new tf(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Kp(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ef);case"emailLink":return async function(e,t){return Zd(e,"POST","/v1/accounts:signInWithEmailLink",Yd(e,t))}(e,{email:this._email,oobCode:this._password});default:Rd(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Kp(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Zp);case"emailLink":return async function(e,t){return Zd(e,"POST","/v1/accounts:signInWithEmailLink",Yd(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Rd(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function nf(e,t){return Zd(e,"POST","/v1/accounts:signInWithIdp",Yd(e,t))}class rf extends Jp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new rf(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Rd("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Td(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new rf(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return nf(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,nf(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,nf(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Gc(t)}return e}}const of={USER_NOT_FOUND:"user-not-found"};class af extends Jp{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new af({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new af({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Zd(e,"POST","/v1/accounts:signInWithPhoneNumber",Yd(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Zd(e,"POST","/v1/accounts:signInWithPhoneNumber",Yd(e,t));if(n.temporaryProof)throw rp(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Zd(e,"POST","/v1/accounts:signInWithPhoneNumber",Yd(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),of)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new af({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class sf{constructor(e){var t,n,r,i,o,a;const s=Hc(qc(e)),l=null!==(t=s.apiKey)&&void 0!==t?t:null,u=null!==(n=s.oobCode)&&void 0!==n?n:null,c=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=s.mode)&&void 0!==r?r:null);Ld(l&&u&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=u,this.continueUrl=null!==(i=s.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=s.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=Hc(qc(e)).link,n=t?Hc(qc(t)).deep_link_id:null,r=Hc(qc(e)).deep_link_id;return(r?Hc(qc(r)).link:null)||r||n||t||e}(e);try{return new sf(t)}catch(n){return null}}}class lf{constructor(){this.providerId=lf.PROVIDER_ID}static credential(e,t){return tf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=sf.parseLink(t);return Ld(n,"argument-error"),tf._fromEmailAndCode(e,n.code,n.tenantId)}}lf.PROVIDER_ID="password",lf.EMAIL_PASSWORD_SIGN_IN_METHOD="password",lf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class uf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class cf extends uf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class hf extends cf{constructor(){super("facebook.com")}static credential(e){return rf._fromParams({providerId:hf.PROVIDER_ID,signInMethod:hf.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hf.credentialFromTaggedObject(e)}static credentialFromError(e){return hf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return hf.credential(t.oauthAccessToken)}catch(n){return null}}}hf.FACEBOOK_SIGN_IN_METHOD="facebook.com",hf.PROVIDER_ID="facebook.com";class df extends cf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return rf._fromParams({providerId:df.PROVIDER_ID,signInMethod:df.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return df.credentialFromTaggedObject(e)}static credentialFromError(e){return df.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return df.credential(n,r)}catch(i){return null}}}df.GOOGLE_SIGN_IN_METHOD="google.com",df.PROVIDER_ID="google.com";class pf extends cf{constructor(){super("github.com")}static credential(e){return rf._fromParams({providerId:pf.PROVIDER_ID,signInMethod:pf.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pf.credentialFromTaggedObject(e)}static credentialFromError(e){return pf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return pf.credential(t.oauthAccessToken)}catch(n){return null}}}pf.GITHUB_SIGN_IN_METHOD="github.com",pf.PROVIDER_ID="github.com";class ff extends cf{constructor(){super("twitter.com")}static credential(e,t){return rf._fromParams({providerId:ff.PROVIDER_ID,signInMethod:ff.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ff.credentialFromTaggedObject(e)}static credentialFromError(e){return ff.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return ff.credential(n,r)}catch(i){return null}}}async function mf(e,t){return Zd(e,"POST","/v1/accounts:signUp",Yd(e,t))}ff.TWITTER_SIGN_IN_METHOD="twitter.com",ff.PROVIDER_ID="twitter.com";class gf{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await bp._fromIdTokenResponse(e,n,r),o=yf(n);return new gf({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=yf(n);return new gf({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function yf(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class vf extends zc{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,vf.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new vf(e,t,n,r)}}function bf(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw vf._fromErrorAndOperation(e,n,t,r);throw n}))}async function xf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await dp(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return gf._forOperation(e,"link",r)}async function wf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(ud(r.app))return Promise.reject(Pd(r));const i="reauthenticate";try{const o=await dp(e,bf(r,i,t,e),n);Ld(o.idToken,r,"internal-error");const a=cp(o.idToken);Ld(a,r,"internal-error");const{sub:s}=a;return Ld(e.uid===s,r,"user-mismatch"),gf._forOperation(e,i,o)}catch(o){throw"auth/user-not-found"===(null===o||void 0===o?void 0:o.code)&&Rd(r,"user-mismatch"),o}}async function kf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ud(e.app))return Promise.reject(Pd(e));const r="signIn",i=await bf(e,r,t),o=await gf._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function Sf(e,t){return kf(Bp(e),t)}async function Ef(e){const t=Bp(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}new WeakMap;const If="__sak";class Tf{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(If,"1"),this.storage.removeItem(If),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Cf extends Tf{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Mp(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Pp()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Cf.type="LOCAL";const Af=Cf;class _f extends Tf{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}_f.type="SESSION";const Nf=_f;class Of{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Of(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(o).map((async e=>e(t.origin,i))),s=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Rf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Of.receivers=[];class $f{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise(((a,s)=>{const l=Rf("",20);r.port1.start();const u=setTimeout((()=>{s(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(u),clearTimeout(i),s(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function Df(){return window}function Pf(){return"undefined"!==typeof Df().WorkerGlobalScope&&"function"===typeof Df().importScripts}const Mf="firebaseLocalStorageDb",Ff="firebaseLocalStorage",Lf="fbase_key";class jf{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function zf(e,t){return e.transaction([Ff],t?"readwrite":"readonly").objectStore(Ff)}function Bf(){const e=indexedDB.open(Mf,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Ff,{keyPath:Lf})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Ff)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Mf);return new jf(e).toPromise()}(),t(await Bf()))}))}))}async function Uf(e,t,n){const r=zf(e,!0).put({[Lf]:t,value:n});return new jf(r).toPromise()}function Wf(e,t){const n=zf(e,!0).delete(t);return new jf(n).toPromise()}class Vf{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Bf()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Pf()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Of._getInstance(Pf()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new $f(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bf();return await Uf(e,If,"1"),await Wf(e,If),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Uf(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=zf(e,!1).get(t),r=await new jf(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Wf(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=zf(e,!1).getAll();return new jf(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Vf.type="LOCAL";const Gf=Vf;Gp("rcb"),new Gd(3e4,6e4);const Hf="recaptcha";async function qf(e,t,n){var r;const i=await n.verify();try{let o;if(Ld("string"===typeof i,e,"argument-error"),Ld(n.type===Hf,e,"argument-error"),o="string"===typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){Ld("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Qd(e,"POST","/v2/accounts/mfaEnrollment:start",Yd(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Ld("signin"===t.type,e,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;Ld(n,e,"missing-multi-factor-info");const a=await function(e,t){return Qd(e,"POST","/v2/accounts/mfaSignIn:start",Yd(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Qd(e,"POST","/v1/accounts:sendVerificationCode",Yd(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Kf{constructor(e){this.providerId=Kf.PROVIDER_ID,this.auth=Bp(e)}verifyPhoneNumber(e,t){return qf(this.auth,e,Yc(t))}static credential(e,t){return af._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Kf.credentialFromTaggedObject(t)}static credentialFromError(e){return Kf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?af._fromTokenResponse(n,r):null}}function Xf(e,t){return t?wp(t):(Ld(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Kf.PROVIDER_ID="phone",Kf.PHONE_SIGN_IN_METHOD="phone";class Yf extends Jp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nf(e,this._buildIdpRequest())}_linkToIdToken(e,t){return nf(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return nf(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Qf(e){return kf(e.auth,new Yf(e),e.bypassAuthState)}function Jf(e){const{auth:t,user:n}=e;return Ld(n,t,"internal-error"),wf(n,new Yf(e),e.bypassAuthState)}async function Zf(e){const{auth:t,user:n}=e;return Ld(n,t,"internal-error"),xf(n,new Yf(e),e.bypassAuthState)}class em{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:a}=e;if(o)return void this.reject(o);const s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(s))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Qf;case"linkViaPopup":case"linkViaRedirect":return Zf;case"reauthViaPopup":case"reauthViaRedirect":return Jf;default:Rd(this.auth,"internal-error")}}resolve(e){zd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const tm=new Gd(2e3,1e4);async function nm(e,t,n){if(ud(e.app))return Promise.reject($d(e,"operation-not-supported-in-this-environment"));const r=Bp(e);Md(e,t,uf);const i=Xf(r,n);return new rm(r,"signInViaPopup",t,i).executeNotNull()}class rm extends em{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,rm.currentPopupAction&&rm.currentPopupAction.cancel(),rm.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ld(e,this.auth,"internal-error"),e}async onExecution(){zd(1===this.filter.length,"Popup operations only handle one event");const e=Rf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject($d(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject($d(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rm.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject($d(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,tm.get())};e()}}rm.currentPopupAction=null;const im=new Map;class om extends em{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=im.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=lm(t),r=sm(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}im.set(this.auth._key(),e)}return this.bypassAuthState||im.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function am(e,t){im.set(e._key(),t)}function sm(e){return wp(e._redirectPersistence)}function lm(e){return Ep("pendingRedirect",e.config.apiKey,e.name)}async function um(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ud(e.app))return Promise.reject(Pd(e));const r=Bp(e),i=Xf(r,t),o=new om(r,i,n),a=await o.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class cm{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dm(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!dm(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError($d(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(hm(e))}saveEventToCache(e){this.cachedEventUids.add(hm(e)),this.lastProcessedEventTime=Date.now()}}function hm(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function dm(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const pm=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fm=/^https?/;async function mm(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Qd(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(gm(r))return}catch(n){}Rd(e,"unauthorized-domain")}function gm(e){const t=Bd(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!fm.test(n))return!1;if(pm.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const ym=new Gd(3e4,6e4);function vm(){const e=Df().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function bm(e){return new Promise(((t,n)=>{var r,i,o;function a(){vm(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{vm(),n($d(e,"network-request-failed"))},timeout:ym.get()})}if(null===(i=null===(r=Df().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=Df().gapi)||void 0===o?void 0:o.load)){const t=Gp("iframefcb");return Df()[t]=()=>{gapi.load?a():n($d(e,"network-request-failed"))},Vp(`${Wp.gapiScript}?onload=${t}`).catch((e=>n(e)))}a()}})).catch((e=>{throw xm=null,e}))}let xm=null;const wm=new Gd(5e3,15e3),km={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Sm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Em(e){const t=e.config;Ld(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Hd(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:dd},i=Sm.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Gc(r).slice(1)}`}async function Im(e){const t=await function(e){return xm=xm||bm(e),xm}(e),n=Df().gapi;return Ld(n,e,"internal-error"),t.open({where:document.body,url:Em(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:km,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=$d(e,"network-request-failed"),o=Df().setTimeout((()=>{r(i)}),wm.get());function a(){Df().clearTimeout(o),n(t)}t.ping(a).then(a,(()=>{r(i)}))}))))}const Tm={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Cm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Am(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const l=Object.assign(Object.assign({},Tm),{width:r.toString(),height:i.toString(),top:o,left:a}),u=Fc().toLowerCase();n&&(s=_p(u)?"_blank":n),Cp(u)&&(t=t||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`}),"");if(function(){var e;return Dp(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fc())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==s)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new Cm(null);const h=window.open(t||"",s,c);Ld(h,e,"popup-blocked");try{h.focus()}catch(d){}return new Cm(h)}const _m="__/auth/handler",Nm="emulator/auth/handler",Om=encodeURIComponent("fac");async function Rm(e,t,n,r,i,o){Ld(e.config.authDomain,e,"auth-domain-config-required"),Ld(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:dd,eventId:i};if(t instanceof uf){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))a[e]=t}if(t instanceof cf){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const s=a;for(const c of Object.keys(s))void 0===s[c]&&delete s[c];const l=await e._getAppCheckToken(),u=l?`#${Om}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${_m}`;return Hd(t,Nm)}(e)}?${Gc(s).slice(1)}${u}`}const $m="webStorageSupport";const Dm=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Nf,this._completeRedirectFn=um,this._overrideRedirectResult=am}async _openPopup(e,t,n,r){var i;zd(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Am(e,await Rm(e,t,n,Bd(),r),Rf())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Df().location.href=e}(await Rm(e,t,n,Bd(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(zd(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Im(e),n=new cm(e);return t.register("authEvent",(t=>{Ld(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($m,{type:$m},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[$m];void 0!==i&&t(!!i),Rd(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=mm(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Mp()||Ap()||Dp()}};var Pm="@firebase/auth",Mm="1.7.9";class Fm{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ld(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Lm=Pc("authIdTokenMaxAge")||300;let jm=null;var zm;!function(e){Wp=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=$d("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),zm="Browser",sd(new Qc("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:s}=r.options;Ld(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:s,clientPlatform:zm,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fp(zm)},u=new zp(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(wp);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(u,n),u}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),sd(new Qc("auth-internal",(e=>(e=>new Fm(e))(Bp(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),md(Pm,Mm,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(zm)),md(Pm,Mm,"esm2017");var Bm=n(7237),Um=l,Wm=Symbol.for("react-redux-context"),Vm="undefined"!==typeof globalThis?globalThis:{};function Gm(){if(!Um.createContext)return{};const e=Vm[Wm]??(Vm[Wm]=new Map);let t=e.get(Um.createContext);return t||(t=Um.createContext(null),e.set(Um.createContext,t)),t}var Hm=Gm(),qm=()=>{throw new Error("uSES not initialized!")};function Km(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hm;return function(){return Um.useContext(e)}}var Xm=Km(),Ym=qm,Qm=(e,t)=>e===t;function Jm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hm;const t=e===Hm?Xm:Km(e),n=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:r=Qm,devModeChecks:i={}}="function"===typeof n?{equalityFn:n}:n;const{store:o,subscription:a,getServerState:s,stabilityCheck:l,identityFunctionCheck:u}=t(),c=(Um.useRef(!0),Um.useCallback({[e.name]:t=>e(t)}[e.name],[e,l,i.stabilityCheck])),h=Ym(a.addNestedSub,o.getState,s||o.getState,c,r);return Um.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var Zm=Jm();Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen"),Symbol.for("react.client.reference");function eg(e){e()}var tg={notify(){},get:()=>[]};function ng(e,t){let n,r=tg,i=0,o=!1;function a(){u.onStateChange&&u.onStateChange()}function s(){i++,n||(n=t?t.addNestedSub(a):e.subscribe(a),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){eg((()=>{let t=e;for(;t;)t.callback(),t=t.next}))},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){r&&null!==e&&(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}function l(){i--,n&&0===i&&(n(),n=void 0,r.clear(),r=tg)}const u={addNestedSub:function(e){s();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:a,isSubscribed:function(){return o},trySubscribe:function(){o||(o=!0,s())},tryUnsubscribe:function(){o&&(o=!1,l())},getListeners:()=>r};return u}var rg=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),ig="undefined"!==typeof navigator&&"ReactNative"===navigator.product,og=rg||ig?Um.useLayoutEffect:Um.useEffect;Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var ag=function(e){let{store:t,context:n,children:r,serverState:i,stabilityCheck:o="once",identityFunctionCheck:a="once"}=e;const s=Um.useMemo((()=>{const e=ng(t);return{store:t,subscription:e,getServerState:i?()=>i:void 0,stabilityCheck:o,identityFunctionCheck:a}}),[t,i,o,a]),l=Um.useMemo((()=>t.getState()),[t]);og((()=>{const{subscription:e}=s;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),l!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[s,l]);const u=n||Hm;return Um.createElement(u.Provider,{value:s},r)};function sg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hm;const t=e===Hm?Xm:Km(e),n=()=>{const{store:e}=t();return e};return Object.assign(n,{withTypes:()=>n}),n}var lg=sg();function ug(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hm;const t=e===Hm?lg:sg(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var cg,hg=ug();function dg(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}cg=Bm.useSyncExternalStoreWithSelector,Ym=cg,(e=>{0})(l.useSyncExternalStore);var pg=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),fg=()=>Math.random().toString(36).substring(7).split("").join("."),mg={INIT:`@@redux/INIT${fg()}`,REPLACE:`@@redux/REPLACE${fg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${fg()}`};function gg(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function yg(e,t,n){if("function"!==typeof e)throw new Error(dg(2));if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(dg(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(dg(1));return n(yg)(e,t)}let r=e,i=t,o=new Map,a=o,s=0,l=!1;function u(){a===o&&(a=new Map,o.forEach(((e,t)=>{a.set(t,e)})))}function c(){if(l)throw new Error(dg(3));return i}function h(e){if("function"!==typeof e)throw new Error(dg(4));if(l)throw new Error(dg(5));let t=!0;u();const n=s++;return a.set(n,e),function(){if(t){if(l)throw new Error(dg(6));t=!1,u(),a.delete(n),o=null}}}function d(e){if(!gg(e))throw new Error(dg(7));if("undefined"===typeof e.type)throw new Error(dg(8));if("string"!==typeof e.type)throw new Error(dg(17));if(l)throw new Error(dg(9));try{l=!0,i=r(i,e)}finally{l=!1}return(o=a).forEach((e=>{e()})),e}d({type:mg.INIT});return{dispatch:d,subscribe:h,getState:c,replaceReducer:function(e){if("function"!==typeof e)throw new Error(dg(10));r=e,d({type:mg.REPLACE})},[pg]:function(){const e=h;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(dg(11));function n(){const e=t;e.next&&e.next(c())}n();return{unsubscribe:e(n)}},[pg](){return this}}}}}function vg(e){const t=Object.keys(e),n={};for(let a=0;a<t.length;a++){const r=t[a];0,"function"===typeof e[r]&&(n[r]=e[r])}const r=Object.keys(n);let i;try{!function(e){Object.keys(e).forEach((t=>{const n=e[t];if("undefined"===typeof n(void 0,{type:mg.INIT}))throw new Error(dg(12));if("undefined"===typeof n(void 0,{type:mg.PROBE_UNKNOWN_ACTION()}))throw new Error(dg(13))}))}(n)}catch(o){i=o}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(i)throw i;let o=!1;const a={};for(let i=0;i<r.length;i++){const s=r[i],l=n[s],u=e[s],c=l(u,t);if("undefined"===typeof c){t&&t.type;throw new Error(dg(14))}a[s]=c,o=o||c!==u}return o=o||r.length!==Object.keys(e).length,o?a:e}}function bg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce(((e,t)=>function(){return e(t(...arguments))}))}function xg(e){return t=>{let{dispatch:n,getState:r}=t;return t=>i=>"function"===typeof i?i(n,r,e):t(i)}}var wg=xg(),kg=xg,Sg=Symbol.for("immer-nothing"),Eg=Symbol.for("immer-draftable"),Ig=Symbol.for("immer-state");function Tg(e){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Cg=Object.getPrototypeOf;function Ag(e){return!!e&&!!e[Ig]}function _g(e){return!!e&&(Og(e)||Array.isArray(e)||!!e[Eg]||!!e.constructor?.[Eg]||Mg(e)||Fg(e))}var Ng=Object.prototype.constructor.toString();function Og(e){if(!e||"object"!==typeof e)return!1;const t=Cg(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Ng}function Rg(e,t){0===$g(e)?Reflect.ownKeys(e).forEach((n=>{t(n,e[n],e)})):e.forEach(((n,r)=>t(r,n,e)))}function $g(e){const t=e[Ig];return t?t.type_:Array.isArray(e)?1:Mg(e)?2:Fg(e)?3:0}function Dg(e,t){return 2===$g(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Pg(e,t,n){const r=$g(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function Mg(e){return e instanceof Map}function Fg(e){return e instanceof Set}function Lg(e){return e.copy_||e.base_}function jg(e,t){if(Mg(e))return new Map(e);if(Fg(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Og(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[Ig];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Cg(e),t)}{const t=Cg(e);if(null!==t&&n)return{...e};const r=Object.create(t);return Object.assign(r,e)}}function zg(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ug(e)||Ag(e)||!_g(e)||($g(e)>1&&(e.set=e.add=e.clear=e.delete=Bg),Object.freeze(e),t&&Object.entries(e).forEach((e=>{let[t,n]=e;return zg(n,!0)}))),e}function Bg(){Tg(2)}function Ug(e){return Object.isFrozen(e)}var Wg,Vg={};function Gg(e){const t=Vg[e];return t||Tg(0),t}function Hg(){return Wg}function qg(e,t){t&&(Gg("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Kg(e){Xg(e),e.drafts_.forEach(Qg),e.drafts_=null}function Xg(e){e===Wg&&(Wg=e.parent_)}function Yg(e){return Wg={drafts_:[],parent_:Wg,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Qg(e){const t=e[Ig];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Jg(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[Ig].modified_&&(Kg(t),Tg(4)),_g(e)&&(e=Zg(t,e),t.parent_||ty(t,e)),t.patches_&&Gg("Patches").generateReplacementPatches_(n[Ig].base_,e,t.patches_,t.inversePatches_)):e=Zg(t,n,[]),Kg(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Sg?e:void 0}function Zg(e,t,n){if(Ug(t))return t;const r=t[Ig];if(!r)return Rg(t,((i,o)=>ey(e,r,t,i,o,n))),t;if(r.scope_!==e)return t;if(!r.modified_)return ty(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let i=t,o=!1;3===r.type_&&(i=new Set(t),t.clear(),o=!0),Rg(i,((i,a)=>ey(e,r,t,i,a,n,o))),ty(e,t,!1),n&&e.patches_&&Gg("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function ey(e,t,n,r,i,o,a){if(Ag(i)){const a=Zg(e,i,o&&t&&3!==t.type_&&!Dg(t.assigned_,r)?o.concat(r):void 0);if(Pg(n,r,a),!Ag(a))return;e.canAutoFreeze_=!1}else a&&n.add(i);if(_g(i)&&!Ug(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Zg(e,i),t&&t.scope_.parent_||"symbol"===typeof r||!Object.prototype.propertyIsEnumerable.call(n,r)||ty(e,i)}}function ty(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&zg(t,n)}var ny={get(e,t){if(t===Ig)return e;const n=Lg(e);if(!Dg(n,t))return function(e,t,n){const r=oy(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!_g(r)?r:r===iy(e.base_,t)?(sy(e),e.copy_[t]=ly(r,e)):r},has:(e,t)=>t in Lg(e),ownKeys:e=>Reflect.ownKeys(Lg(e)),set(e,t,n){const r=oy(Lg(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=iy(Lg(e),t),i=r?.[Ig];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(n,r)&&(void 0!==n||Dg(e.base_,t)))return!0;sy(e),ay(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==iy(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,sy(e),ay(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=Lg(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){Tg(11)},getPrototypeOf:e=>Cg(e.base_),setPrototypeOf(){Tg(12)}},ry={};function iy(e,t){const n=e[Ig];return(n?Lg(n):e)[t]}function oy(e,t){if(!(t in e))return;let n=Cg(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=Cg(n)}}function ay(e){e.modified_||(e.modified_=!0,e.parent_&&ay(e.parent_))}function sy(e){e.copy_||(e.copy_=jg(e.base_,e.scope_.immer_.useStrictShallowCopy_))}Rg(ny,((e,t)=>{ry[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),ry.deleteProperty=function(e,t){return ry.set.call(this,e,t,void 0)},ry.set=function(e,t,n){return ny.set.call(this,e[0],t,n,e[0])};function ly(e,t){const n=Mg(e)?Gg("MapSet").proxyMap_(e,t):Fg(e)?Gg("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Hg(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=ny;n&&(i=[r],o=ry);const{revoke:a,proxy:s}=Proxy.revocable(i,o);return r.draft_=s,r.revoke_=a,s}(e,t);return(t?t.scope_:Hg()).drafts_.push(n),n}function uy(e){if(!_g(e)||Ug(e))return e;const t=e[Ig];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=jg(e,t.scope_.immer_.useStrictShallowCopy_)}else n=jg(e,!0);return Rg(n,((e,t)=>{Pg(n,e,uy(t))})),t&&(t.finalized_=!1),n}var cy=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const r=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return r.produce(e,(e=>t.call(this,e,...o)))}}let r;if("function"!==typeof t&&Tg(6),void 0!==n&&"function"!==typeof n&&Tg(7),_g(e)){const i=Yg(this),o=ly(e,void 0);let a=!0;try{r=t(o),a=!1}finally{a?Kg(i):Xg(i)}return qg(i,n),Jg(r,i)}if(!e||"object"!==typeof e){if(r=t(e),void 0===r&&(r=e),r===Sg&&(r=void 0),this.autoFreeze_&&zg(r,!0),n){const t=[],i=[];Gg("Patches").generateReplacementPatches_(e,r,t,i),n(t,i)}return r}Tg(1)},this.produceWithPatches=(e,n)=>{if("function"===typeof e)return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.produceWithPatches(n,(t=>e(t,...i)))};let r,i;const o=this.produce(e,n,((e,t)=>{r=e,i=t}));return[o,r,i]},"boolean"===typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){_g(e)||Tg(8),Ag(e)&&(e=function(e){Ag(e)||Tg(10);return uy(e)}(e));const t=Yg(this),n=ly(e,void 0);return n[Ig].isManual_=!0,Xg(t),n}finishDraft(e,t){const n=e&&e[Ig];n&&n.isManual_||Tg(9);const{scope_:r}=n;return qg(r,t),Jg(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=Gg("Patches").applyPatches_;return Ag(e)?r(e,t):this.produce(e,(e=>r(e,t)))}},hy=cy.produce;cy.produceWithPatches.bind(cy),cy.setAutoFreeze.bind(cy),cy.setUseStrictShallowCopy.bind(cy),cy.applyPatches.bind(cy),cy.createDraft.bind(cy),cy.finishDraft.bind(cy);var dy="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?bg:bg.apply(null,arguments)},py=("undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__,e=>e&&"function"===typeof e.match);function fy(e,t){function n(){if(t){let n=t(...arguments);if(!n)throw new Error(jy(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=t=>function(e){return gg(e)&&"type"in e&&"string"===typeof e.type}(t)&&t.type===e,n}var my=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return 1===n.length&&Array.isArray(n[0])?new e(...n[0].concat(this)):new e(...n.concat(this))}};function gy(e){return _g(e)?hy(e,(()=>{})):e}function yy(e,t,n){if(e.has(t)){let r=e.get(t);return n.update&&(r=n.update(r,t,e),e.set(t,r)),r}if(!n.insert)throw new Error(jy(10));const r=n.insert(t,e);return e.set(t,r),r}var vy="RTK_autoBatch",by=e=>t=>{setTimeout(t,e)},xy="undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:by(10),wy=e=>function(t){const{autoBatch:n=!0}=t??{};let r=new my(e);return n&&r.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const n=t(...arguments);let r=!0,i=!1,o=!1;const a=new Set,s="tick"===e.type?queueMicrotask:"raf"===e.type?xy:"callback"===e.type?e.queueNotification:by(e.timeout),l=()=>{o=!1,i&&(i=!1,a.forEach((e=>e())))};return Object.assign({},n,{subscribe(e){const t=n.subscribe((()=>r&&e()));return a.add(e),()=>{t(),a.delete(e)}},dispatch(e){try{return r=!e?.meta?.[vy],i=!r,i&&(o||(o=!0,s(l))),n.dispatch(e)}finally{r=!0}}})}}("object"===typeof n?n:void 0)),r};function ky(e){const t={},n=[];let r;const i={addCase(e,n){const r="string"===typeof e?e:e.type;if(!r)throw new Error(jy(28));if(r in t)throw new Error(jy(29));return t[r]=n,i},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),i),addDefaultCase:e=>(r=e,i)};return e(i),[t,n,r]}var Sy=(e,t)=>py(e)?e.match(t):e(t);function Ey(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.some((t=>Sy(t,e)))}var Iy=function(){let e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;for(;t--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e},Ty=["name","message","stack","code"],Cy=class{constructor(e,t){this.payload=e,this.meta=t}_type},Ay=class{constructor(e,t){this.payload=e,this.meta=t}_type},_y=e=>{if("object"===typeof e&&null!==e){const t={};for(const n of Ty)"string"===typeof e[n]&&(t[n]=e[n]);return t}return{message:String(e)}},Ny=(()=>{function e(e,t,n){const r=fy(e+"/fulfilled",((e,t,n,r)=>({payload:e,meta:{...r||{},arg:n,requestId:t,requestStatus:"fulfilled"}}))),i=fy(e+"/pending",((e,t,n)=>({payload:void 0,meta:{...n||{},arg:t,requestId:e,requestStatus:"pending"}}))),o=fy(e+"/rejected",((e,t,r,i,o)=>({payload:i,error:(n&&n.serializeError||_y)(e||"Rejected"),meta:{...o||{},arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===e?.name,condition:"ConditionError"===e?.name}})));return Object.assign((function(e){return(a,s,l)=>{const u=n?.idGenerator?n.idGenerator(e):Iy(),c=new AbortController;let h,d;function p(e){d=e,c.abort()}const f=async function(){let f;try{let o=n?.condition?.(e,{getState:s,extra:l});if(function(e){return null!==e&&"object"===typeof e&&"function"===typeof e.then}(o)&&(o=await o),!1===o||c.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const m=new Promise(((e,t)=>{h=()=>{t({name:"AbortError",message:d||"Aborted"})},c.signal.addEventListener("abort",h)}));a(i(u,e,n?.getPendingMeta?.({requestId:u,arg:e},{getState:s,extra:l}))),f=await Promise.race([m,Promise.resolve(t(e,{dispatch:a,getState:s,extra:l,requestId:u,signal:c.signal,abort:p,rejectWithValue:(e,t)=>new Cy(e,t),fulfillWithValue:(e,t)=>new Ay(e,t)})).then((t=>{if(t instanceof Cy)throw t;return t instanceof Ay?r(t.payload,u,e,t.meta):r(t,u,e)}))])}catch(m){f=m instanceof Cy?o(null,u,e,m.payload,m.meta):o(m,u,e)}finally{h&&c.signal.removeEventListener("abort",h)}return n&&!n.dispatchConditionRejection&&o.match(f)&&f.meta.condition||a(f),f}();return Object.assign(f,{abort:p,requestId:u,arg:e,unwrap:()=>f.then(Oy)})}}),{pending:i,rejected:o,fulfilled:r,settled:Ey(o,r),typePrefix:e})}return e.withTypes=()=>e,e})();function Oy(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var Ry=Symbol.for("rtk-slice-createasyncthunk");function $y(e,t){return`${e}/${t}`}function Dy(){let{creators:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e?.asyncThunk?.[Ry];return function(e){const{name:n,reducerPath:r=n}=e;if(!n)throw new Error(jy(11));const i=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},o=Object.keys(i),a={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},s={addCase(e,t){const n="string"===typeof e?e:e.type;if(!n)throw new Error(jy(12));if(n in a.sliceCaseReducersByType)throw new Error(jy(13));return a.sliceCaseReducersByType[n]=t,s},addMatcher:(e,t)=>(a.sliceMatchers.push({matcher:e,reducer:t}),s),exposeAction:(e,t)=>(a.actionCreators[e]=t,s),exposeCaseReducer:(e,t)=>(a.sliceCaseReducersByName[e]=t,s)};function l(){const[t={},n=[],r]="function"===typeof e.extraReducers?ky(e.extraReducers):[e.extraReducers],i={...t,...a.sliceCaseReducersByType};return function(e,t){let n,[r,i,o]=ky(t);if(function(e){return"function"===typeof e}(e))n=()=>gy(e());else{const t=gy(e);n=()=>t}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n(),t=arguments.length>1?arguments[1]:void 0,a=[r[t.type],...i.filter((e=>{let{matcher:n}=e;return n(t)})).map((e=>{let{reducer:t}=e;return t}))];return 0===a.filter((e=>!!e)).length&&(a=[o]),a.reduce(((e,n)=>{if(n){if(Ag(e)){const r=n(e,t);return void 0===r?e:r}if(_g(e))return hy(e,(e=>n(e,t)));{const r=n(e,t);if(void 0===r){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}}return e}),e)}return a.getInitialState=n,a}(e.initialState,(e=>{for(let t in i)e.addCase(t,i[t]);for(let t of a.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);r&&e.addDefaultCase(r)}))}o.forEach((r=>{const o=i[r],a={reducerName:r,type:$y(n,r),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(o)?function(e,t,n){let r,i,{type:o,reducerName:a,createNotation:s}=e;if("reducer"in t){if(s&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(jy(17));r=t.reducer,i=t.prepare}else r=t;n.addCase(o,r).exposeCaseReducer(a,r).exposeAction(a,i?fy(o,i):fy(o))}(a,o,s):function(e,t,n,r){let{type:i,reducerName:o}=e;if(!r)throw new Error(jy(18));const{payloadCreator:a,fulfilled:s,pending:l,rejected:u,settled:c,options:h}=t,d=r(i,a,h);n.exposeAction(o,d),s&&n.addCase(d.fulfilled,s);l&&n.addCase(d.pending,l);u&&n.addCase(d.rejected,u);c&&n.addMatcher(d.settled,c);n.exposeCaseReducer(o,{fulfilled:s||Fy,pending:l||Fy,rejected:u||Fy,settled:c||Fy})}(a,o,s,t)}));const u=e=>e,c=new Map;let h;function d(e,t){return h||(h=l()),h(e,t)}function p(){return h||(h=l()),h.getInitialState()}function f(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function r(e){let r=e[t];return"undefined"===typeof r&&n&&(r=p()),r}function i(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;const r=yy(c,n,{insert:()=>new WeakMap});return yy(r,t,{insert:()=>{const r={};for(const[i,o]of Object.entries(e.selectors??{}))r[i]=Py(o,t,p,n);return r}})}return{reducerPath:t,getSelectors:i,get selectors(){return i(r)},selectSlice:r}}const m={name:n,reducer:d,actions:a.actionCreators,caseReducers:a.sliceCaseReducersByName,getInitialState:p,...f(r),injectInto(e){let{reducerPath:t,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=t??r;return e.inject({reducerPath:i,reducer:d},n),{...m,...f(i,!0)}}};return m}}function Py(e,t,n,r){function i(i){let o=t(i);"undefined"===typeof o&&r&&(o=n());for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return e(o,...s)}return i.unwrapped=e,i}var My=Dy();function Fy(){}var{assign:Ly}=Object;Symbol.for("rtk-state-proxy-original");function jy(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const zy=My({name:"auth",initialState:{user:null,isAuthenticated:!1},reducers:{setUser(e,t){e.user=t.payload,e.isAuthenticated=!0},clearUser(e){e.user=null,e.isAuthenticated=!1}}}),{setUser:By,clearUser:Uy}=zy.actions,Wy=zy.reducer;md("firebase","10.14.0","app");var Vy,Gy,Hy="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},qy={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],a=t+(o^n&(i^o))+r[0]+3614090360&4294967295;a=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(a<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((o=(t=n+((a=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=o+((a=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,o=this.h,a=0;a<t;){if(0==o)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[o++]=e.charCodeAt(a++),o==this.blockSize){n(this,i),o=0;break}}else for(;a<t;)if(i[o++]=e[a++],o==this.blockSize){n(this,i),o=0;break}}this.h=o,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function o(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return s;if(0>e)return d(a(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var s=o(0),l=o(1),u=o(16777216);function c(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function p(e,t){return e.add(d(t))}function f(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(c(t))throw Error("division by zero");if(c(e))return new m(s,s);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),o=v(r,1);for(r=v(r,2),n=v(n,2);!c(r);){var u=o.add(r);0>=u.l(e)&&(i=i.add(n),o=u),r=v(r,1),n=v(n,1)}return t=p(e,i.j(t)),new m(i,t)}for(i=s;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),u=(o=a(n)).j(t);h(u)||0<u.l(e);)u=(o=a(n-=r)).j(t);c(o)&&(o=l),i=i.add(o),e=p(e,u)}return new m(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,o=[],a=0;a<i;a++)o[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(o,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(c(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,o=((0<(n=p(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(c(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=p(this,e))?-1:c(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,o=0;o<=t;o++){var a=i+(65535&this.i(o))+(65535&e.i(o)),s=(a>>>16)+(this.i(o)>>>16)+(e.i(o)>>>16);i=s>>>16,a&=65535,s&=65535,n[o]=s<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(c(this)||c(e))return s;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(u)&&0>e.l(u))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var o=0;o<e.g.length;o++){var l=this.i(i)>>>16,p=65535&this.i(i),m=e.i(o)>>>16,g=65535&e.i(o);n[2*i+2*o]+=p*g,f(n,2*i+2*o),n[2*i+2*o+1]+=l*g,f(n,2*i+2*o+1),n[2*i+2*o+1]+=p*m,f(n,2*i+2*o+1),n[2*i+2*o+2]+=l*m,f(n,2*i+2*o+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Gy=qy.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),i=s,o=0;o<t.length;o+=8){var l=Math.min(8,t.length-o),u=parseInt(t.substring(o,o+l),n);8>l?(l=a(Math.pow(n,l)),i=i.j(l).add(a(u))):i=(i=i.j(r)).add(a(u))}return i},Vy=qy.Integer=r}).apply("undefined"!==typeof Hy?Hy:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Ky,Xy,Yy,Qy,Jy,Zy,ev,tv,nv="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},rv={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof nv&&nv];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];if(!(a in i))break e;i=i[a]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function o(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function s(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function u(e,t,n){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?s:l).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function p(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(o(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function f(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<x.length;t++)n=x[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function k(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function S(e){i.setTimeout((()=>{throw e}),0)}function E(){var e=_;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var I=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new T),(e=>e.reset()));class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,A=!1,_=new class{constructor(){this.h=this.g=null}add(e,t){const n=I.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},N=()=>{const e=i.Promise.resolve(void 0);C=()=>{e.then(O)}};var O=()=>{for(var e;e=E();){try{e.h.call(e.g)}catch(uM){S(uM)}var t=I;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}A=!1};function R(){this.s=this.s,this.C=this.C}function $(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},$.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(uM){}return e}();function P(e,t){if($.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&P.aa.h.call(this)}}h(P,$);var M={2:"touch",3:"pen",4:"mouse"};P.prototype.h=function(){P.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),L=0;function j(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++L,this.da=this.fa=!1}function z(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function B(e){this.src=e,this.g={},this.h=0}function U(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=Array.prototype.indexOf.call(i,t,void 0);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(z(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function W(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.da&&o.listener==t&&o.capture==!!n&&o.ha==r)return i}return-1}B.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var a=W(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new j(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var V="closure_lm_"+(1e6*Math.random()|0),G={};function H(e,t,n,r,i){if(r&&r.once)return K(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)H(e,t[o],n,r,i);return null}return n=te(n),e&&e[F]?e.K(t,n,a(r)?!!r.capture:!!r,i):q(e,t,n,!1,r,i)}function q(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=a(i)?!!i.capture:!!i,l=Z(e);if(l||(e[V]=l=new B(e)),(n=l.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)D||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Q(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function K(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)K(e,t[o],n,r,i);return null}return n=te(n),e&&e[F]?e.L(t,n,a(r)?!!r.capture:!!r,i):q(e,t,n,!0,r,i)}function X(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)X(e,t[o],n,r,i);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[F]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=W(o=e.g[t],n,r,i))&&(z(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=W(t,n,r,i)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[F])U(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Q(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(U(n,e),0==n.h&&(n.src=null,t[V]=null)):z(e)}}}function Q(e){return e in G?G[e]:G[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new P(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[V])instanceof B?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){R.call(this),this.i=new B(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new $(t,e);else if(t instanceof $)t.target=t.target||e;else{var i=t;w(t=new $(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];i=ie(a,r,!0,t)&&i}if(i=ie(a=t.g=e,r,!0,t)&&i,i=ie(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=ie(a=t.g=n[o],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.da&&a.capture==n){var s=a.listener,l=a.ha||a.src;a.fa&&U(e.i,a),i=!1!==s.call(l,r)&&i}}return i&&!r.defaultPrevented}function oe(e,t,n){if("function"===typeof e)n&&(e=u(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=u(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ae(e){e.g=oe((()=>{e.g=null,e.i&&(e.i=!1,ae(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,R),ne.prototype[F]=!0,ne.prototype.removeEventListener=function(e,t,n,r){X(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)z(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class se extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){R.call(this),this.h=e,this.g={}}h(le,R);var ue=[];function ce(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Y(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ce(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,pe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function fe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}fe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){$.call(this,"d")}function be(){$.call(this,"c")}h(ve,$),h(be,$);var xe={},we=null;function ke(){return we=we||new ne}function Se(e){$.call(this,xe.La,e)}function Ee(e){const t=ke();re(t,new Se(t))}function Ie(e,t){$.call(this,xe.STAT_EVENT,e),this.stat=t}function Te(e){const t=ke();re(t,new Ie(t,e))}function Ce(e,t){$.call(this,xe.Ma,e),this.size=t}function Ae(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function _e(){this.g=!0}function Ne(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return he(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}xe.La="serverreachability",h(Se,$),xe.STAT_EVENT="statevent",h(Ie,$),xe.Ma="timingevent",h(Ce,$),_e.prototype.xa=function(){this.g=!1},_e.prototype.info=function(){};var Oe,Re={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$e={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function Pe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}h(De,fe),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},Oe=new De;var Fe={},Le={};function je(e,t,n){e.L=1,e.v=ht(at(t)),e.m=n,e.P=!0,ze(e,null)}function ze(e,t){e.F=Date.now(),We(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Et(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Me,e.g=dn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new se(u(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ue[0]=i.toString()),i=ue);for(var o=0;o<i.length;o++){var a=H(n,i[o],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ee(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var a="",s=o.split("&"),l=0;l<s.length;l++){var u=s[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");a=2<=h.length&&"type"==h[1]?a+(c+"=")+u+"&":a+(c+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Be(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Ue(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Le:(n=Number(t.substring(n,r)),isNaN(n)?Fe:(r+=1)+n>t.length?Le:(t=t.slice(r,r+n),e.C=r+n,t))}function We(e){e.S=Date.now()+e.I,Ve(e,e.I)}function Ve(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ae(u(e.ba,e),t)}function Ge(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function He(e){0==e.j.G||e.J||sn(e.j,e)}function qe(e){Ge(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ce(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ke(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Xt(n)}nn(n),Te(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ae(u(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(c){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&an(n),!f(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.T=u[0],u=u[1],2==n.G)if("c"==u[0]){n.K=u[1],n.ia=u[2];const t=u[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=u[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.h;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(et(o,o.h),o.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ct(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=hn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var s=a,l=r.L;l&&(s.I=l),s.B&&(Ge(s),We(s)),r.g=a}else tn(r);0<n.i.length&&Qt(n)}else"stop"!=u[0]&&"close"!=u[0]||un(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?un(n,7):Kt(n):"noop"!=u[0]&&n.l&&n.l.ta(u),n.v=0)}Ee()}catch(c){}}Pe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Vt(e)?t.j():this.Y(e)},Pe.prototype.Y=function(e){try{if(e==this.g)e:{const d=Vt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Gt(this.g)))){this.J||4!=d||7==t||Ee(),Ge(this);var n=this.g.Z();this.X=n;t:if(Be(this)){var r=Gt(this.g);e="";var o=r.length,a=4==Vt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){qe(this),He(this);var s="";break t}this.h.i=new i.TextDecoder}for(t=0;t<o;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==o-1)});r.length=0,this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,o,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,u=this.g;if((l=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!f(l)){var c=l;break t}}c=null}if(!(n=c)){this.o=!1,this.s=3,Te(12),qe(this),He(this);break e}Ne(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ke(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<s.length;){if(e=Ue(this,s),e==Le){4==d&&(this.s=4,Te(14),n=!1),Ne(this.i,this.l,null,"[Incomplete Response]");break}if(e==Fe){this.s=4,Te(15),Ne(this.i,this.l,s,"[Invalid Chunk]"),n=!1;break}Ne(this.i,this.l,e,null),Ke(this,e)}if(Be(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=s.length||this.h.h||(this.s=1,Te(16),n=!1),this.o=this.o&&n,n){if(0<s.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+s.length),rn(h),h.M=!0,Te(11))}}else Ne(this.i,this.l,s,"[Invalid Chunked Response]"),qe(this),He(this)}else Ne(this.i,this.l,s,null),Ke(this,s);4==d&&qe(this),this.o&&!this.J&&(4==d?sn(this.j,this):(this.o=!1,We(this)))}else(function(e){const t={};e=(e.g&&2<=Vt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(f(e[r]))continue;var n=k(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),qe(this),He(this)}}}catch(iv){}},Pe.prototype.cancel=function(){this.J=!0,qe(this)},Pe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Ee(),Te(17)),qe(this),this.s=2,He(this)):Ve(this,this.S-e)};var Xe=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(o(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(o(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(o(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}Ye.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ot(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof ot){this.h=e.h,st(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new xt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ut(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,st(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ut(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new xt(null,this.h))}function at(e){return new ot(e)}function st(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ut(e,t,n){t instanceof xt?(e.i=t,function(e,t){t&&!e.j&&(wt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(kt(this,t),Et(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=pt(t,vt)),e.i=new xt(t,e.h))}function ct(e,t,n){e.i.set(t,n)}function ht(e){return ct(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function pt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ft),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ft(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ot.prototype.toString=function(){var e=[],t=this.j;t&&e.push(pt(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(pt(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(pt(n,"/"==n.charAt(0)?yt:gt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",pt(n,bt)),e.join("")};var mt=/[#\/\?@]/g,gt=/[#\?:]/g,yt=/[#\?]/g,vt=/[#\?@]/g,bt=/#/g;function xt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function wt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function kt(e,t){wt(e),t=It(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function St(e,t){return wt(e),t=It(e,t),e.g.has(t)}function Et(e,t,n){kt(e,t),0<n.length&&(e.i=null,e.g.set(It(e,t),d(n)),e.h+=n.length)}function It(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Tt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(o){}}function Ct(){this.g=new pe}function At(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;a(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function _t(e){this.l=e.Ub||null,this.j=e.eb||!1}function Nt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Ot(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Rt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,$t(e)}function $t(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Dt(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Pt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Dt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ct(e,t,n))}function Mt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=xt.prototype).add=function(e,t){wt(this),this.i=null,e=It(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){wt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){wt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){wt(this);let t=[];if("string"===typeof e)St(this,e)&&(t=t.concat(this.g.get(It(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return wt(this),this.i=null,St(this,e=It(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=o;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},h(_t,fe),_t.prototype.g=function(){return new Nt(this.l,this.j)},_t.prototype.i=function(e){return function(){return e}}({}),h(Nt,ne),(e=Nt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,$t(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,$t(this)),this.g&&(this.readyState=3,$t(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ot(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Rt(this):$t(this),3==this.readyState&&Ot(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Rt(this))},e.Qa=function(e){this.g&&(this.response=e,Rt(this))},e.ga=function(){this.g&&Rt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Nt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Mt,ne);var Ft=/^https?$/i,Lt=["POST","PUT"];function jt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),Ut(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Vt(e)||2!=e.Z()))if(e.u&&4==Vt(e))oe(e.Ea,0,e);else if(re(e,"readystatechange"),4==Vt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var o;if(o=0===r){var a=String(e.D).match(it)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),o=!Ft.test(a?a.toLowerCase():"")}n=o}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var s=2<Vt(e)?e.g.statusText:""}catch(l){s=""}e.l=s+" ["+e.Z()+"]",zt(e)}}finally{Ut(e)}}}function Ut(e,t){if(e.g){Wt(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Wt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Vt(e){return e.g?e.g.readyState:0}function Gt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(sv){return null}}function Ht(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function qt(e){this.Aa=0,this.i=[],this.j=new _e,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ht("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ht("baseRetryDelayMs",5e3,e),this.cb=Ht("retryDelaySeedMs",1e4,e),this.Wa=Ht("forwardChannelMaxRetries",2,e),this.wa=Ht("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new Ct,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Kt(e){if(Yt(e),3==e.G){var t=e.U++,n=at(e.I);if(ct(n,"SID",e.K),ct(n,"RID",t),ct(n,"TYPE","terminate"),Zt(e,n),(t=new Pe(e,e.j,t)).L=2,t.v=ht(at(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=dn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),We(t)}cn(e)}function Xt(e){e.g&&(rn(e),e.g.cancel(),e.g=null)}function Yt(e){Xt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Qt(e){if(!Qe(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||N(),A||(C(),A=!0),_.add(t,e),e.B=0}}function Jt(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ct(r,"SID",e.K),ct(r,"RID",n),ct(r,"AID",e.T),Zt(e,r),e.m&&e.o&&Pt(r,e.m,e.o),n=new Pe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=en(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),je(n,r,t)}function Zt(e,t){e.H&&v(e.H,(function(e,n){ct(t,n,e)})),e.l&&rt({},(function(e,n){ct(t,n,e)}))}function en(e,t,n){n=Math.min(e.i.length,n);var r=e.l?u(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const s=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{At(s,e,"req"+n+"_")}catch(iv){r&&r(s)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function tn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||N(),A||(C(),A=!0),_.add(t,e),e.v=0}}function nn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ae(u(e.Fa,e),ln(e,e.v)),e.v++,!0)}function rn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function on(e){e.g=new Pe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ct(t,"RID","rpc"),ct(t,"SID",e.K),ct(t,"AID",e.T),ct(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ct(t,"TO",e.ja),ct(t,"TYPE","xmlhttp"),Zt(e,t),e.m&&e.o&&Pt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(at(t)),n.m=null,n.P=!0,ze(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function sn(e,t){var n=null;if(e.g==t){an(e),rn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=ke(),new Ce(r,n)),Qt(e)}else tn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ae(u(e.Ga,e,t),ln(e,e.B)),e.B++,!0))}(e,t)||2==r&&nn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function ln(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=u(e.fb,e),r=e.Xa;const t=!r;r=new ot(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||st(r,"https"),ht(r),t?function(e,t){const n=new _e;if(i.Image){const r=new Image;r.onload=c(Tt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(Tt,n,"TestLoadImage: error",!1,t,r),r.onabort=c(Tt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(Tt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new _e;const n=new AbortController,r=setTimeout((()=>{n.abort(),Tt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Tt(0,0,!0,t):Tt(0,0,!1,t)})).catch((()=>{clearTimeout(r),Tt(0,0,!1,t)}))}(r.toString(),n)}else Te(2);e.G=0,e.l&&e.l.sa(t),cn(e),Yt(e)}function cn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(p(e.ka,t),p(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function hn(e,t,n){var r=n instanceof ot?at(n):new ot(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var o=i.location;r=o.protocol,t=t?t+"."+o.hostname:o.hostname,o=+o.port;var a=new ot(null);r&&st(a,r),t&&(a.g=t),o&&lt(a,o),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ct(r,n,t),ct(r,"VER",e.la),Zt(e,r),r}function dn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new _t({eb:n})):new Mt(e.pa)).Ha(e.J),t}function pn(){}function fn(){}function mn(e,t){ne.call(this),this.g=new qt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!f(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!f(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new vn(this)}function gn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){be.call(this),this.status=1}function vn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Oe.g(),this.v=this.o?me(this.o):me(Oe),this.g.onreadystatechange=u(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void jt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)n.set(o,r[o]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),o=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Lt,t,void 0))||r||o||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,s]of n)this.g.setRequestHeader(i,s);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wt(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){jt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Ut(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ut(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Vt(this)?this.g.status:-1}catch(dM){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(dM){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=qt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Te(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=hn(this,null,this.W),Qt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Pe(this,this.j,e);let o=this.o;if(this.S&&(o?(o=b(o),w(o,this.S)):o=this.S),null!==this.m||this.O||(i.H=o,o=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=en(this,i,t),ct(n=at(this.I),"RID",e),ct(n,"CVER",22),this.D&&ct(n,"X-HTTP-Session-Id",this.D),Zt(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(Dt(o)))+"&"+t:this.m&&Pt(n,this.m,o)),et(this.h,i),this.Ua&&ct(n,"TYPE","init"),this.P?(ct(n,"$req",t),ct(n,"SID","null"),i.T=!0,je(i,n,null)):je(i,n,t),this.G=2}}else 3==this.G&&(e?Jt(this,e):0==this.i.length||Qe(this.h)||Jt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ae(u(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),Xt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Xt(this),nn(this),Te(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},fn.prototype.g=function(e,t){return new mn(e,t)},h(mn,ne),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Kt(this.g)},mn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Xe(t.Ya++,e)),3==t.G&&Qt(t)},mn.prototype.N=function(){this.g.l=null,delete this.j,Kt(this.g),delete this.g,mn.aa.N.call(this)},h(gn,ve),h(yn,be),h(vn,pn),vn.prototype.ua=function(){re(this.g,"a")},vn.prototype.ta=function(e){re(this.g,new gn(e))},vn.prototype.sa=function(e){re(this.g,new yn)},vn.prototype.ra=function(){re(this.g,"b")},fn.prototype.createWebChannel=fn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,tv=rv.createWebChannelTransport=function(){return new fn},ev=rv.getStatEventTarget=function(){return ke()},Zy=rv.Event=xe,Jy=rv.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,Qy=rv.ErrorCode=Re,$e.COMPLETE="complete",Yy=rv.EventType=$e,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Xy=rv.WebChannel=ge,rv.FetchXmlHttpFactory=_t,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,Ky=rv.XhrIo=Mt}).apply("undefined"!==typeof nv?nv:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const iv="@firebase/firestore";class ov{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ov.UNAUTHENTICATED=new ov(null),ov.GOOGLE_CREDENTIALS=new ov("google-credentials-uid"),ov.FIRST_PARTY=new ov("first-party-uid"),ov.MOCK_USER=new ov("mock-user");let av="10.14.0";const sv=new lh("@firebase/firestore");function lv(){return sv.logLevel}function uv(e){if(sv.logLevel<=rh.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(dv);sv.debug(`Firestore (${av}): ${e}`,...i)}}function cv(e){if(sv.logLevel<=rh.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(dv);sv.error(`Firestore (${av}): ${e}`,...i)}}function hv(e){if(sv.logLevel<=rh.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(dv);sv.warn(`Firestore (${av}): ${e}`,...i)}}function dv(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function pv(){const e=`FIRESTORE (${av}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw cv(e),new Error(e)}function fv(e,t){e||pv()}function mv(e,t){return e}const gv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class yv extends zc{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class vv{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class bv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ov.UNAUTHENTICATED)))}shutdown(){}}class wv{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class kv{constructor(e){this.t=e,this.currentUser=ov.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){fv(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new vv;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new vv,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},a=e=>{uv("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((e=>a(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(uv("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new vv)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(uv("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(fv("string"==typeof t.accessToken),new bv(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return fv(null===e||"string"==typeof e),new ov(e)}}class Sv{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=ov.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ev{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Sv(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(ov.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Iv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Tv{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){fv(void 0===this.o);const n=e=>{null!=e.error&&uv("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,uv("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{uv("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):uv("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(fv("string"==typeof e.token),this.R=e.token,new Iv(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Cv(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Av{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Cv(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function _v(e,t){return e<t?-1:e>t?1:0}function Nv(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class Ov{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new yv(gv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new yv(gv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new yv(gv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new yv(gv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ov.fromMillis(Date.now())}static fromDate(e){return Ov.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Ov(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_v(this.nanoseconds,e.nanoseconds):_v(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Rv{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Rv(e)}static min(){return new Rv(new Ov(0,0))}static max(){return new Rv(new Ov(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class $v{constructor(e,t,n){void 0===t?t=0:t>e.length&&pv(),void 0===n?n=e.length-t:n>e.length-t&&pv(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===$v.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $v?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Dv extends $v{construct(e,t,n){return new Dv(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new yv(gv.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((e=>e.length>0)))}return new Dv(e)}static emptyPath(){return new Dv([])}}const Pv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mv extends $v{construct(e,t,n){return new Mv(e,t,n)}static isValidIdentifier(e){return Pv.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mv.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Mv(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new yv(gv.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new yv(gv.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new yv(gv.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new yv(gv.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mv(t)}static emptyPath(){return new Mv([])}}class Fv{constructor(e){this.path=e}static fromPath(e){return new Fv(Dv.fromString(e))}static fromName(e){return new Fv(Dv.fromString(e).popFirst(5))}static empty(){return new Fv(Dv.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Dv.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Dv.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fv(new Dv(e.slice()))}}class Lv{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Lv.UNKNOWN_ID=-1;function jv(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Rv.fromTimestamp(1e9===r?new Ov(n+1,0):new Ov(n,r));return new Bv(i,Fv.empty(),t)}function zv(e){return new Bv(e.readTime,e.key,-1)}class Bv{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Bv(Rv.min(),Fv.empty(),-1)}static max(){return new Bv(Rv.max(),Fv.empty(),-1)}}function Uv(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Fv.comparator(e.documentKey,t.documentKey),0!==n?n:_v(e.largestBatchId,t.largestBatchId))}const Wv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Vv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Gv(e){if(e.code!==gv.FAILED_PRECONDITION||e.message!==Wv)throw e;uv("LocalStore","Unexpectedly lost primary lease")}class Hv{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pv(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Hv(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Hv?t:Hv.resolve(t)}catch(e){return Hv.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Hv.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Hv.reject(t)}static resolve(e){return new Hv(((t,n)=>{t(e)}))}static reject(e){return new Hv(((t,n)=>{n(e)}))}static waitFor(e){return new Hv(((t,n)=>{let r=0,i=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++i,o&&i===r&&t()}),(e=>n(e)))})),o=!0,i===r&&t()}))}static or(e){let t=Hv.resolve(!1);for(const n of e)t=t.next((e=>e?Hv.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Hv(((n,r)=>{const i=e.length,o=new Array(i);let a=0;for(let s=0;s<i;s++){const l=s;t(e[l]).next((e=>{o[l]=e,++a,a===i&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new Hv(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function qv(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Kv(e){return"IndexedDbTransactionError"===e.name}class Xv{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Yv(e){return null==e}function Qv(e){return 0===e&&1/e==-1/0}function Jv(e){return"number"==typeof e&&Number.isInteger(e)&&!Qv(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Xv.oe=-1;const Zv=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],eb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],tb=eb,nb=[...tb,"indexConfiguration","indexState","indexEntries"];function rb(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ib(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ob(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ab{constructor(e,t){this.comparator=e,this.root=t||lb.EMPTY}insert(e,t){return new ab(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,lb.BLACK,null,null))}remove(e){return new ab(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lb.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sb(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sb(this.root,e,this.comparator,!1)}getReverseIterator(){return new sb(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sb(this.root,e,this.comparator,!0)}}class sb{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class lb{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:lb.RED,this.left=null!=r?r:lb.EMPTY,this.right=null!=i?i:lb.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new lb(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return lb.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return lb.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,lb.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,lb.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pv();if(this.right.isRed())throw pv();const e=this.left.check();if(e!==this.right.check())throw pv();return e+(this.isRed()?0:1)}}lb.EMPTY=null,lb.RED=!0,lb.BLACK=!1,lb.EMPTY=new class{constructor(){this.size=0}get key(){throw pv()}get value(){throw pv()}get color(){throw pv()}get left(){throw pv()}get right(){throw pv()}copy(e,t,n,r,i){return this}insert(e,t,n){return new lb(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ub{constructor(e){this.comparator=e,this.data=new ab(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new cb(this.data.getIterator())}getIteratorFrom(e){return new cb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof ub))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ub(this.comparator);return t.data=e,t}}class cb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class hb{constructor(e){this.fields=e,e.sort(Mv.comparator)}static empty(){return new hb([])}unionWith(e){let t=new ub(Mv.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new hb(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Nv(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class db extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class pb{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new db("Invalid base64 string: "+e):e}}(e);return new pb(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new pb(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _v(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pb.EMPTY_BYTE_STRING=new pb("");const fb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mb(e){if(fv(!!e),"string"==typeof e){let t=0;const n=fb.exec(e);if(fv(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:gb(e.seconds),nanos:gb(e.nanos)}}function gb(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function yb(e){return"string"==typeof e?pb.fromBase64String(e):pb.fromUint8Array(e)}function vb(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function bb(e){const t=e.mapValue.fields.__previous_value__;return vb(t)?bb(t):t}function xb(e){const t=mb(e.mapValue.fields.__local_write_time__.timestampValue);return new Ov(t.seconds,t.nanos)}class wb{constructor(e,t,n,r,i,o,a,s,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=s,this.useFetchStreams=l}}class kb{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new kb("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof kb&&e.projectId===this.projectId&&e.database===this.database}}const Sb={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Eb(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?vb(e)?4:zb(e)?9007199254740991:Lb(e)?10:11:pv()}function Ib(e,t){if(e===t)return!0;const n=Eb(e);if(n!==Eb(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return xb(e).isEqual(xb(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=mb(e.timestampValue),r=mb(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return yb(e.bytesValue).isEqual(yb(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return gb(e.geoPointValue.latitude)===gb(t.geoPointValue.latitude)&&gb(e.geoPointValue.longitude)===gb(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return gb(e.integerValue)===gb(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=gb(e.doubleValue),r=gb(t.doubleValue);return n===r?Qv(n)===Qv(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Nv(e.arrayValue.values||[],t.arrayValue.values||[],Ib);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(rb(n)!==rb(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ib(n[i],r[i])))return!1;return!0}(e,t);default:return pv()}}function Tb(e,t){return void 0!==(e.values||[]).find((e=>Ib(e,t)))}function Cb(e,t){if(e===t)return 0;const n=Eb(e),r=Eb(t);if(n!==r)return _v(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _v(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=gb(e.integerValue||e.doubleValue),r=gb(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ab(e.timestampValue,t.timestampValue);case 4:return Ab(xb(e),xb(t));case 5:return _v(e.stringValue,t.stringValue);case 6:return function(e,t){const n=yb(e),r=yb(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=_v(n[i],r[i]);if(0!==e)return e}return _v(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=_v(gb(e.latitude),gb(t.latitude));return 0!==n?n:_v(gb(e.longitude),gb(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return _b(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,o;const a=e.fields||{},s=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,u=null===(r=s.value)||void 0===r?void 0:r.arrayValue,c=_v((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(o=null==u?void 0:u.values)||void 0===o?void 0:o.length)||0);return 0!==c?c:_b(l,u)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Sb.mapValue&&t===Sb.mapValue)return 0;if(e===Sb.mapValue)return 1;if(t===Sb.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let a=0;a<r.length&&a<o.length;++a){const e=_v(r[a],o[a]);if(0!==e)return e;const t=Cb(n[r[a]],i[o[a]]);if(0!==t)return t}return _v(r.length,o.length)}(e.mapValue,t.mapValue);default:throw pv()}}function Ab(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return _v(e,t);const n=mb(e),r=mb(t),i=_v(n.seconds,r.seconds);return 0!==i?i:_v(n.nanos,r.nanos)}function _b(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Cb(n[i],r[i]);if(e)return e}return _v(n.length,r.length)}function Nb(e){return Ob(e)}function Ob(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=mb(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return yb(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Fv.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ob(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Ob(e.fields[i])}`;return n+"}"}(e.mapValue):pv()}function Rb(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function $b(e){return!!e&&"integerValue"in e}function Db(e){return!!e&&"arrayValue"in e}function Pb(e){return!!e&&"nullValue"in e}function Mb(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Fb(e){return!!e&&"mapValue"in e}function Lb(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function jb(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ib(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=jb(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=jb(e.arrayValue.values[n]);return t}return Object.assign({},e)}function zb(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class Bb{constructor(e){this.value=e}static empty(){return new Bb({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Fb(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jb(t)}setAll(e){let t=Mv.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=jb(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Fb(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ib(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Fb(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ib(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Bb(jb(this.value))}}function Ub(e){const t=[];return ib(e.fields,((e,n)=>{const r=new Mv([e]);if(Fb(n)){const e=Ub(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new hb(t)}class Wb{constructor(e,t,n,r,i,o,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Wb(e,0,Rv.min(),Rv.min(),Rv.min(),Bb.empty(),0)}static newFoundDocument(e,t,n,r){return new Wb(e,1,t,Rv.min(),n,r,0)}static newNoDocument(e,t){return new Wb(e,2,t,Rv.min(),Rv.min(),Bb.empty(),0)}static newUnknownDocument(e,t){return new Wb(e,3,t,Rv.min(),Rv.min(),Bb.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Rv.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bb.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bb.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Rv.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Wb&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wb(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Vb{constructor(e,t){this.position=e,this.inclusive=t}}function Gb(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],a=e.position[i];if(r=o.field.isKeyField()?Fv.comparator(Fv.fromName(a.referenceValue),n.key):Cb(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function Hb(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ib(e.position[n],t.position[n]))return!1;return!0}class qb{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Kb(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Xb{}class Yb extends Xb{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new ix(e,t,n):"array-contains"===t?new lx(e,n):"in"===t?new ux(e,n):"not-in"===t?new cx(e,n):"array-contains-any"===t?new hx(e,n):new Yb(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new ox(e,n):new ax(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Cb(t,this.value)):null!==t&&Eb(this.value)===Eb(t)&&this.matchesComparison(Cb(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return pv()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qb extends Xb{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Qb(e,t)}matches(e){return Jb(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Jb(e){return"and"===e.op}function Zb(e){return ex(e)&&Jb(e)}function ex(e){for(const t of e.filters)if(t instanceof Qb)return!1;return!0}function tx(e){if(e instanceof Yb)return e.field.canonicalString()+e.op.toString()+Nb(e.value);if(Zb(e))return e.filters.map((e=>tx(e))).join(",");{const t=e.filters.map((e=>tx(e))).join(",");return`${e.op}(${t})`}}function nx(e,t){return e instanceof Yb?function(e,t){return t instanceof Yb&&e.op===t.op&&e.field.isEqual(t.field)&&Ib(e.value,t.value)}(e,t):e instanceof Qb?function(e,t){return t instanceof Qb&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&nx(n,t.filters[r])),!0)}(e,t):void pv()}function rx(e){return e instanceof Yb?function(e){return`${e.field.canonicalString()} ${e.op} ${Nb(e.value)}`}(e):e instanceof Qb?function(e){return e.op.toString()+" {"+e.getFilters().map(rx).join(" ,")+"}"}(e):"Filter"}class ix extends Yb{constructor(e,t,n){super(e,t,n),this.key=Fv.fromName(n.referenceValue)}matches(e){const t=Fv.comparator(e.key,this.key);return this.matchesComparison(t)}}class ox extends Yb{constructor(e,t){super(e,"in",t),this.keys=sx("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class ax extends Yb{constructor(e,t){super(e,"not-in",t),this.keys=sx("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function sx(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Fv.fromName(e.referenceValue)))}class lx extends Yb{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Db(t)&&Tb(t.arrayValue,this.value)}}class ux extends Yb{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Tb(this.value.arrayValue,t)}}class cx extends Yb{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Tb(this.value.arrayValue,t)}}class hx extends Yb{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Db(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Tb(this.value.arrayValue,e)))}}class dx{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function px(e){return new dx(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function fx(e){const t=mv(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>tx(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Yv(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Nb(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Nb(e))).join(",")),t.ue=e}return t.ue}function mx(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Kb(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!nx(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Hb(e.startAt,t.startAt)&&Hb(e.endAt,t.endAt)}function gx(e){return Fv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class yx{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function vx(e,t,n,r,i,o,a,s){return new yx(e,t,n,r,i,o,a,s)}function bx(e){return new yx(e)}function xx(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function wx(e){return null!==e.collectionGroup}function kx(e){const t=mv(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new ub(Mv.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new qb(r,n))})),e.has(Mv.keyField().canonicalString())||t.ce.push(new qb(Mv.keyField(),n))}return t.ce}function Sx(e){const t=mv(e);return t.le||(t.le=Ex(t,kx(e))),t.le}function Ex(e,t){if("F"===e.limitType)return px(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new qb(e.field,t)}));const n=e.endAt?new Vb(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Vb(e.startAt.position,e.startAt.inclusive):null;return px(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ix(e,t){const n=e.filters.concat([t]);return new yx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Tx(e,t,n){return new yx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Cx(e,t){return mx(Sx(e),Sx(t))&&e.limitType===t.limitType}function Ax(e){return`${fx(Sx(e))}|lt:${e.limitType}`}function _x(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>rx(e))).join(", ")}]`),Yv(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Nb(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Nb(e))).join(",")),`Target(${t})`}(Sx(e))}; limitType=${e.limitType})`}function Nx(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Fv.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of kx(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Gb(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,kx(e),t))&&!(e.endAt&&!function(e,t,n){const r=Gb(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,kx(e),t))}(e,t)}function Ox(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Rx(e){return(t,n)=>{let r=!1;for(const i of kx(e)){const e=$x(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function $x(e,t,n){const r=e.field.isKeyField()?Fv.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Cb(r,i):pv()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return pv()}}class Dx{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ib(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return ob(this.inner)}size(){return this.innerSize}}const Px=new ab(Fv.comparator);function Mx(){return Px}const Fx=new ab(Fv.comparator);function Lx(){let e=Fx;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function jx(e){let t=Fx;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function zx(){return Ux()}function Bx(){return Ux()}function Ux(){return new Dx((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Wx=new ab(Fv.comparator),Vx=new ub(Fv.comparator);function Gx(){let e=Vx;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Hx=new ub(_v);function qx(){return Hx}function Kx(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qv(t)?"-0":t}}function Xx(e){return{integerValue:""+e}}function Yx(e,t){return Jv(t)?Xx(t):Kx(e,t)}class Qx{constructor(){this._=void 0}}function Jx(e,t,n){return e instanceof tw?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&vb(t)&&(t=bb(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof nw?rw(e,t):e instanceof iw?ow(e,t):function(e,t){const n=ew(e,t),r=sw(n)+sw(e.Pe);return $b(n)&&$b(e.Pe)?Xx(r):Kx(e.serializer,r)}(e,t)}function Zx(e,t,n){return e instanceof nw?rw(e,t):e instanceof iw?ow(e,t):n}function ew(e,t){return e instanceof aw?function(e){return $b(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class tw extends Qx{}class nw extends Qx{constructor(e){super(),this.elements=e}}function rw(e,t){const n=lw(t);for(const r of e.elements)n.some((e=>Ib(e,r)))||n.push(r);return{arrayValue:{values:n}}}class iw extends Qx{constructor(e){super(),this.elements=e}}function ow(e,t){let n=lw(t);for(const r of e.elements)n=n.filter((e=>!Ib(e,r)));return{arrayValue:{values:n}}}class aw extends Qx{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function sw(e){return gb(e.integerValue||e.doubleValue)}function lw(e){return Db(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class uw{constructor(e,t){this.version=e,this.transformResults=t}}class cw{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cw}static exists(e){return new cw(void 0,e)}static updateTime(e){return new cw(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hw(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class dw{}function pw(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Sw(e.key,cw.none()):new vw(e.key,e.data,cw.none());{const n=e.data,r=Bb.empty();let i=new ub(Mv.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new bw(e.key,r,new hb(i.toArray()),cw.none())}}function fw(e,t,n){e instanceof vw?function(e,t,n){const r=e.value.clone(),i=ww(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof bw?function(e,t,n){if(!hw(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=ww(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(xw(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function mw(e,t,n,r){return e instanceof vw?function(e,t,n,r){if(!hw(e.precondition,t))return n;const i=e.value.clone(),o=kw(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof bw?function(e,t,n,r){if(!hw(e.precondition,t))return n;const i=kw(e.fieldTransforms,r,t),o=t.data;return o.setAll(xw(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return hw(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function gw(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=ew(r.transform,e||null);null!=i&&(null===n&&(n=Bb.empty()),n.set(r.field,i))}return n||null}function yw(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Nv(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof nw&&t instanceof nw||e instanceof iw&&t instanceof iw?Nv(e.elements,t.elements,Ib):e instanceof aw&&t instanceof aw?Ib(e.Pe,t.Pe):e instanceof tw&&t instanceof tw}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class vw extends dw{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class bw extends dw{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function xw(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function ww(e,t,n){const r=new Map;fv(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,Zx(a,s,n[i]))}return r}function kw(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,Jx(e,o,t))}return r}class Sw extends dw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ew extends dw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Iw{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&fw(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=mw(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=mw(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Bx();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(r.key)?null:a;const s=pw(o,a);null!==s&&n.set(r.key,s),o.isValidDocument()||o.convertToNoDocument(Rv.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Gx())}isEqual(e){return this.batchId===e.batchId&&Nv(this.mutations,e.mutations,((e,t)=>yw(e,t)))&&Nv(this.baseMutations,e.baseMutations,((e,t)=>yw(e,t)))}}class Tw{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){fv(e.mutations.length===n.length);let r=Wx;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new Tw(e,t,n,r)}}class Cw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Aw{constructor(e,t){this.count=e,this.unchangedNames=t}}var _w,Nw;function Ow(e){switch(e){default:return pv();case gv.CANCELLED:case gv.UNKNOWN:case gv.DEADLINE_EXCEEDED:case gv.RESOURCE_EXHAUSTED:case gv.INTERNAL:case gv.UNAVAILABLE:case gv.UNAUTHENTICATED:return!1;case gv.INVALID_ARGUMENT:case gv.NOT_FOUND:case gv.ALREADY_EXISTS:case gv.PERMISSION_DENIED:case gv.FAILED_PRECONDITION:case gv.ABORTED:case gv.OUT_OF_RANGE:case gv.UNIMPLEMENTED:case gv.DATA_LOSS:return!0}}function Rw(e){if(void 0===e)return cv("GRPC error has no .code"),gv.UNKNOWN;switch(e){case _w.OK:return gv.OK;case _w.CANCELLED:return gv.CANCELLED;case _w.UNKNOWN:return gv.UNKNOWN;case _w.DEADLINE_EXCEEDED:return gv.DEADLINE_EXCEEDED;case _w.RESOURCE_EXHAUSTED:return gv.RESOURCE_EXHAUSTED;case _w.INTERNAL:return gv.INTERNAL;case _w.UNAVAILABLE:return gv.UNAVAILABLE;case _w.UNAUTHENTICATED:return gv.UNAUTHENTICATED;case _w.INVALID_ARGUMENT:return gv.INVALID_ARGUMENT;case _w.NOT_FOUND:return gv.NOT_FOUND;case _w.ALREADY_EXISTS:return gv.ALREADY_EXISTS;case _w.PERMISSION_DENIED:return gv.PERMISSION_DENIED;case _w.FAILED_PRECONDITION:return gv.FAILED_PRECONDITION;case _w.ABORTED:return gv.ABORTED;case _w.OUT_OF_RANGE:return gv.OUT_OF_RANGE;case _w.UNIMPLEMENTED:return gv.UNIMPLEMENTED;case _w.DATA_LOSS:return gv.DATA_LOSS;default:return pv()}}(Nw=_w||(_w={}))[Nw.OK=0]="OK",Nw[Nw.CANCELLED=1]="CANCELLED",Nw[Nw.UNKNOWN=2]="UNKNOWN",Nw[Nw.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Nw[Nw.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Nw[Nw.NOT_FOUND=5]="NOT_FOUND",Nw[Nw.ALREADY_EXISTS=6]="ALREADY_EXISTS",Nw[Nw.PERMISSION_DENIED=7]="PERMISSION_DENIED",Nw[Nw.UNAUTHENTICATED=16]="UNAUTHENTICATED",Nw[Nw.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Nw[Nw.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Nw[Nw.ABORTED=10]="ABORTED",Nw[Nw.OUT_OF_RANGE=11]="OUT_OF_RANGE",Nw[Nw.UNIMPLEMENTED=12]="UNIMPLEMENTED",Nw[Nw.INTERNAL=13]="INTERNAL",Nw[Nw.UNAVAILABLE=14]="UNAVAILABLE",Nw[Nw.DATA_LOSS=15]="DATA_LOSS";let $w=null;function Dw(){return new TextEncoder}const Pw=new Vy([4294967295,4294967295],0);function Mw(e){const t=Dw().encode(e),n=new Gy;return n.update(t),new Uint8Array(n.digest())}function Fw(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Vy([n,r],0),new Vy([i,o],0)]}class Lw{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new jw(`Invalid padding: ${t}`);if(n<0)throw new jw(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new jw(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new jw(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Vy.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(Vy.fromNumber(n)));return 1===r.compare(Pw)&&(r=new Vy([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Mw(e),[n,r]=Fw(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Lw(i,r,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.Ie)return;const t=Mw(e),[n,r]=Fw(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class jw extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class zw{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Bw.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new zw(Rv.min(),r,new ab(_v),Mx(),Gx())}}class Bw{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Bw(n,t,Gx(),Gx(),Gx())}}class Uw{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class Ww{constructor(e,t){this.targetId=e,this.me=t}}class Vw{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pb.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Gw{constructor(){this.fe=0,this.ge=Kw(),this.pe=pb.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Gx(),t=Gx(),n=Gx();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:pv()}})),new Bw(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=Kw()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,fv(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Hw{constructor(e){this.Le=e,this.Be=new Map,this.ke=Mx(),this.qe=qw(),this.Qe=new ab(_v)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:pv()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(gx(i))if(0===n){const e=new Fv(i.path);this.Ue(t,e,Wb.newNoDocument(e,Rv.min()))}else fv(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==$w||$w.et(function(e,t,n,r,i){var o,a,s,l,u,c;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(o=null==d?void 0:d.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(l=null===(s=null===(a=null==d?void 0:d.bits)||void 0===a?void 0:a.bitmap)||void 0===s?void 0:s.length)&&void 0!==l?l:0,padding:null!==(c=null===(u=null==d?void 0:d.bits)||void 0===u?void 0:u.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,a;try{o=yb(n).toUint8Array()}catch(e){if(e instanceof db)return hv("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new Lw(o,r,i)}catch(e){return hv(e instanceof jw?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Ie?null:a}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),o=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(o)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&gx(i.target)){const t=new Fv(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,Wb.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}}));let n=Gx();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new zw(e,t,this.Qe,this.ke,n);return this.ke=Mx(),this.qe=qw(),this.Qe=new ab(_v),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Gw,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new ub(_v),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||uv("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Gw),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function qw(){return new ab(Fv.comparator)}function Kw(){return new ab(Fv.comparator)}const Xw={asc:"ASCENDING",desc:"DESCENDING"},Yw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qw={and:"AND",or:"OR"};class Jw{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Zw(e,t){return e.useProto3Json||Yv(t)?t:{value:t}}function ek(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function tk(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function nk(e,t){return ek(e,t.toTimestamp())}function rk(e){return fv(!!e),Rv.fromTimestamp(function(e){const t=mb(e);return new Ov(t.seconds,t.nanos)}(e))}function ik(e,t){return ok(e,t).canonicalString()}function ok(e,t){const n=function(e){return new Dv(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function ak(e){const t=Dv.fromString(e);return fv(Tk(t)),t}function sk(e,t){return ik(e.databaseId,t.path)}function lk(e,t){const n=ak(t);if(n.get(1)!==e.databaseId.projectId)throw new yv(gv.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new yv(gv.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Fv(dk(n))}function uk(e,t){return ik(e.databaseId,t)}function ck(e){const t=ak(e);return 4===t.length?Dv.emptyPath():dk(t)}function hk(e){return new Dv(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function dk(e){return fv(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function pk(e,t,n){return{name:sk(e,t),fields:n.value.mapValue.fields}}function fk(e,t){let n;if(t instanceof vw)n={update:pk(e,t.key,t.value)};else if(t instanceof Sw)n={delete:sk(e,t.key)};else if(t instanceof bw)n={update:pk(e,t.key,t.data),updateMask:Ik(t.fieldMask)};else{if(!(t instanceof Ew))return pv();n={verify:sk(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof tw)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof nw)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof iw)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof aw)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw pv()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:nk(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:pv()}(e,t.precondition)),n}function mk(e,t){return{documents:[uk(e,t.path)]}}function gk(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=uk(e,i);const o=function(e){if(0!==e.length)return Ek(Qb.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const a=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:kk(e.field),direction:bk(e.dir)}}(e)))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const s=Zw(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function yk(e){let t=ck(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){fv(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=vk(e);return t instanceof Qb&&Zb(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map((e=>function(e){return new qb(Sk(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t="object"==typeof e?e.value:e,Yv(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Vb(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new Vb(n,t)}(n.endAt)),vx(t,i,a,o,s,"F",l,u)}function vk(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Sk(e.unaryFilter.field);return Yb.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Sk(e.unaryFilter.field);return Yb.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Sk(e.unaryFilter.field);return Yb.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Sk(e.unaryFilter.field);return Yb.create(i,"!=",{nullValue:"NULL_VALUE"});default:return pv()}}(e):void 0!==e.fieldFilter?function(e){return Yb.create(Sk(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pv()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Qb.create(e.compositeFilter.filters.map((e=>vk(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return pv()}}(e.compositeFilter.op))}(e):pv()}function bk(e){return Xw[e]}function xk(e){return Yw[e]}function wk(e){return Qw[e]}function kk(e){return{fieldPath:e.canonicalString()}}function Sk(e){return Mv.fromServerFormat(e.fieldPath)}function Ek(e){return e instanceof Yb?function(e){if("=="===e.op){if(Mb(e.value))return{unaryFilter:{field:kk(e.field),op:"IS_NAN"}};if(Pb(e.value))return{unaryFilter:{field:kk(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Mb(e.value))return{unaryFilter:{field:kk(e.field),op:"IS_NOT_NAN"}};if(Pb(e.value))return{unaryFilter:{field:kk(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kk(e.field),op:xk(e.op),value:e.value}}}(e):e instanceof Qb?function(e){const t=e.getFilters().map((e=>Ek(e)));return 1===t.length?t[0]:{compositeFilter:{op:wk(e.op),filters:t}}}(e):pv()}function Ik(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Tk(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Ck{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Rv.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Rv.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:pb.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=s}withSequenceNumber(e){return new Ck(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ck(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ck(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ck(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ak{constructor(e){this.ct=e}}function _k(e){const t=yk({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Tx(t,t.limit,"L"):t}class Nk{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(gb(e.integerValue));else if("doubleValue"in e){const n=gb(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),Qv(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=mb(n)),t.Rt(`${n.seconds||""}`),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(yb(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?zb(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Lb(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):pv()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const i=e.fields||{};this.dt(t,53);const o="value",a=(null===(r=null===(n=i[o].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(gb(a)),this.Vt(o,t),this.Tt(i[o],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),Fv.fromName(e).path.forEach((e=>{this.dt(t,60),this.Dt(e,t)}))}dt(e,t){e.At(t)}ft(e){e.At(2)}}Nk.vt=new Nk;class Ok{constructor(){this.un=new Rk}addToCollectionParentIndex(e,t){return this.un.add(t),Hv.resolve()}getCollectionParents(e,t){return Hv.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Hv.resolve()}deleteFieldIndex(e,t){return Hv.resolve()}deleteAllFieldIndexes(e){return Hv.resolve()}createTargetIndexes(e,t){return Hv.resolve()}getDocumentsMatchingTarget(e,t){return Hv.resolve(null)}getIndexType(e,t){return Hv.resolve(0)}getFieldIndexes(e,t){return Hv.resolve([])}getNextCollectionGroupToUpdate(e){return Hv.resolve(null)}getMinOffset(e,t){return Hv.resolve(Bv.min())}getMinOffsetFromCollectionGroup(e,t){return Hv.resolve(Bv.min())}updateCollectionGroup(e,t,n){return Hv.resolve()}updateIndexEntries(e,t){return Hv.resolve()}}class Rk{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ub(Dv.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new ub(Dv.comparator)).toArray()}}new Uint8Array(0);class $k{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new $k(e,$k.DEFAULT_COLLECTION_PERCENTILE,$k.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}$k.DEFAULT_COLLECTION_PERCENTILE=10,$k.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$k.DEFAULT=new $k(41943040,$k.DEFAULT_COLLECTION_PERCENTILE,$k.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$k.DISABLED=new $k(-1,0,0);class Dk{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Dk(0)}static kn(){return new Dk(-1)}}class Pk{constructor(){this.changes=new Dx((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wb.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Hv.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Mk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Fk{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&mw(n.mutation,e,hb.empty(),Ov.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Gx()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gx();const r=zx();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Lx();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=zx();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Gx())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Mx();const o=Ux(),a=Ux();return t.forEach(((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof bw)?i=i.insert(t.key,t):void 0!==a?(o.set(t.key,a.mutation.getFieldMask()),mw(a.mutation,t,a.mutation.getFieldMask(),Ov.now())):o.set(t.key,hb.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return a.set(e,new Mk(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(e,t){const n=Ux();let r=new ab(((e,t)=>e-t)),i=Gx();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let a=n.get(e)||hb.empty();a=i.applyToLocalView(o,a),n.set(e,a);const s=(r.get(i.batchId)||Gx()).add(e);r=r.insert(i.batchId,s)}))})).next((()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),s=r.key,l=r.value,u=Bx();l.forEach((e=>{if(!i.has(e)){const r=pw(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,s,u))}return Hv.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Fv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):wx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Hv.resolve(zx());let a=-1,s=i;return o.next((t=>Hv.forEach(t,((t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?Hv.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{s=s.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,s,t,Gx()))).next((e=>({batchId:a,changes:jx(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Fv(t)).next((e=>{let t=Lx();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=Lx();return this.indexManager.getCollectionParents(e,i).next((a=>Hv.forEach(a,(a=>{const s=function(e,t){return new yx(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next((e=>{e.forEach(((e,t)=>{o=o.insert(e,t)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Wb.newInvalidDocument(r)))}));let n=Lx();return e.forEach(((e,r)=>{const o=i.get(e);void 0!==o&&mw(o.mutation,r,hb.empty(),Ov.now()),Nx(t,r)&&(n=n.insert(e,r))})),n}))}}class Lk{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Hv.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:rk(e.createTime)}}(t)),Hv.resolve()}getNamedQuery(e,t){return Hv.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:_k(e.bundledQuery),readTime:rk(e.readTime)}}(t)),Hv.resolve()}}class jk{constructor(){this.overlays=new ab(Fv.comparator),this.Ir=new Map}getOverlay(e,t){return Hv.resolve(this.overlays.get(t))}getOverlays(e,t){const n=zx();return Hv.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),Hv.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Ir.delete(n)),Hv.resolve()}getOverlaysForCollection(e,t,n){const r=zx(),i=t.length+1,o=new Fv(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const e=a.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Hv.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ab(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=zx(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=zx(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((e,t)=>a.set(e,t))),!(a.size()>=r)););return Hv.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Cw(t,n));let i=this.Ir.get(t);void 0===i&&(i=Gx(),this.Ir.set(t,i)),this.Ir.set(t,i.add(n.key))}}class zk{constructor(){this.sessionToken=pb.EMPTY_BYTE_STRING}getSessionToken(e){return Hv.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Hv.resolve()}}class Bk{constructor(){this.Tr=new ub(Uk.Er),this.dr=new ub(Uk.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new Uk(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Vr(new Uk(e,t))}mr(e,t){e.forEach((e=>this.removeReference(e,t)))}gr(e){const t=new Fv(new Dv([])),n=new Uk(t,e),r=new Uk(t,e+1),i=[];return this.dr.forEachInRange([n,r],(e=>{this.Vr(e),i.push(e.key)})),i}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Fv(new Dv([])),n=new Uk(t,e),r=new Uk(t,e+1);let i=Gx();return this.dr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Uk(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Uk{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Fv.comparator(e.key,t.key)||_v(e.wr,t.wr)}static Ar(e,t){return _v(e.wr,t.wr)||Fv.comparator(e.key,t.key)}}class Wk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new ub(Uk.Er)}checkEmpty(e){return Hv.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Iw(i,t,n,r);this.mutationQueue.push(o);for(const a of r)this.br=this.br.add(new Uk(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Hv.resolve(o)}lookupMutationBatch(e,t){return Hv.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),i=r<0?0:r;return Hv.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Hv.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return Hv.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Uk(t,0),r=new Uk(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,r],(e=>{const t=this.Dr(e.wr);i.push(t)})),Hv.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ub(_v);return t.forEach((e=>{const t=new Uk(e,0),r=new Uk(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],(e=>{n=n.add(e.wr)}))})),Hv.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Fv.isDocumentKey(i)||(i=i.child(""));const o=new Uk(new Fv(i),0);let a=new ub(_v);return this.br.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.wr)),!0)}),o),Hv.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach((e=>{const n=this.Dr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){fv(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return Hv.forEach(t.mutations,(r=>{const i=new Uk(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,t){const n=new Uk(t,0),r=this.br.firstAfterOrEqual(n);return Hv.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Hv.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Vk{constructor(e){this.Mr=e,this.docs=new ab(Fv.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Hv.resolve(n?n.document.mutableCopy():Wb.newInvalidDocument(t))}getEntries(e,t){let n=Mx();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Wb.newInvalidDocument(e))})),Hv.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Mx();const o=t.path,a=new Fv(o.child("")),s=this.docs.getIteratorFrom(a);for(;s.hasNext();){const{key:e,value:{document:a}}=s.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||Uv(zv(a),n)<=0||(r.has(a.key)||Nx(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return Hv.resolve(i)}getAllFromCollectionGroup(e,t,n,r){pv()}Or(e,t){return Hv.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Gk(this)}getSize(e){return Hv.resolve(this.size)}}class Gk extends Pk{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)})),Hv.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class Hk{constructor(e){this.persistence=e,this.Nr=new Dx((e=>fx(e)),mx),this.lastRemoteSnapshotVersion=Rv.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Bk,this.targetCount=0,this.kr=Dk.Bn()}forEachTarget(e,t){return this.Nr.forEach(((e,n)=>t(n))),Hv.resolve()}getLastRemoteSnapshotVersion(e){return Hv.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Hv.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Hv.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),Hv.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Dk(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Hv.resolve()}updateTargetData(e,t){return this.Kn(t),Hv.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Hv.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Nr.forEach(((o,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),Hv.waitFor(i).next((()=>r))}getTargetCount(e){return Hv.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return Hv.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),Hv.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Hv.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Hv.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return Hv.resolve(n)}containsKey(e,t){return Hv.resolve(this.Br.containsKey(t))}}class qk{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Xv(0),this.Kr=!1,this.Kr=!0,this.$r=new zk,this.referenceDelegate=e(this),this.Ur=new Hk(this),this.indexManager=new Ok,this.remoteDocumentCache=function(e){return new Vk(e)}((e=>this.referenceDelegate.Wr(e))),this.serializer=new Ak(t),this.Gr=new Lk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new Wk(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){uv("MemoryPersistence","Starting transaction:",e);const r=new Kk(this.Qr.next());return this.referenceDelegate.zr(),n(r).next((e=>this.referenceDelegate.jr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Hr(e,t){return Hv.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,t))))}}class Kk extends Vv{constructor(e){super(),this.currentSequenceNumber=e}}class Xk{constructor(e){this.persistence=e,this.Jr=new Bk,this.Yr=null}static Zr(e){return new Xk(e)}get Xr(){if(this.Yr)return this.Yr;throw pv()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),Hv.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),Hv.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Hv.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((e=>this.Xr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Xr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Hv.forEach(this.Xr,(n=>{const r=Fv.fromPath(n);return this.ei(e,r).next((e=>{e||t.removeEntry(r,Rv.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return Hv.or([()=>Hv.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Yk{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=Gx(),r=Gx();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Yk(e,t.fromCache,n,r)}}class Qk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Jk{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=Lc()?8:qv(Fc())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Yi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Zi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Qk;return this.Xi(e,t,n).next((r=>{if(i.result=r,this.zi)return this.es(e,t,n,r.size)}))})).next((()=>i.result))}es(e,t,n,r){return n.documentReadCount<this.ji?(lv()<=rh.DEBUG&&uv("QueryEngine","SDK will not create cache indexes for query:",_x(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Hv.resolve()):(lv()<=rh.DEBUG&&uv("QueryEngine","Query:",_x(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(lv()<=rh.DEBUG&&uv("QueryEngine","The SDK decides to create cache indexes for query:",_x(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sx(t))):Hv.resolve())}Yi(e,t){if(xx(t))return Hv.resolve(null);let n=Sx(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Tx(t,null,"F"),n=Sx(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Gx(...r);return this.Ji.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.ts(t,r);return this.ns(t,o,i,n.readTime)?this.Yi(e,Tx(t,null,"F")):this.rs(e,o,t,n)}))))})))))}Zi(e,t,n,r){return xx(t)||r.isEqual(Rv.min())?Hv.resolve(null):this.Ji.getDocuments(e,n).next((i=>{const o=this.ts(t,i);return this.ns(t,o,n,r)?Hv.resolve(null):(lv()<=rh.DEBUG&&uv("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),_x(t)),this.rs(e,o,t,jv(r,-1)).next((e=>e)))}))}ts(e,t){let n=new ub(Rx(e));return t.forEach(((t,r)=>{Nx(e,r)&&(n=n.add(r))})),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,t,n){return lv()<=rh.DEBUG&&uv("QueryEngine","Using full collection scan to execute query:",_x(t)),this.Ji.getDocumentsMatchingQuery(e,t,Bv.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Zk{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new ab(_v),this._s=new Dx((e=>fx(e)),mx),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Fk(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function eS(e,t,n,r){return new Zk(e,t,n,r)}async function tS(e,t){const n=mv(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.ls(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],o=[];let a=Gx();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next((e=>({hs:e,removedBatchIds:i,addedBatchIds:o})))}))}))}function nS(e){const t=mv(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Ur.getLastRemoteSnapshotVersion(e)))}function rS(e,t,n){let r=Gx(),i=Gx();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Mx();return n.forEach(((n,o)=>{const a=e.get(n);o.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(Rv.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):uv("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)})),{Ps:r,Is:i}}))}function iS(e,t){const n=mv(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function oS(e,t){const n=mv(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Ur.getTargetData(e,t).next((i=>i?(r=i,Hv.resolve(r)):n.Ur.allocateTargetId(e).next((i=>(r=new Ck(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e}))}async function aS(e,t,n){const r=mv(e),i=r.os.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Kv(e))throw e;uv("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.os=r.os.remove(t),r._s.delete(i.target)}function sS(e,t,n){const r=mv(e);let i=Rv.min(),o=Gx();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=mv(e),i=r._s.get(n);return void 0!==i?Hv.resolve(r.os.get(i)):r.Ur.getTargetData(t,n)}(r,e,Sx(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.ss.getDocumentsMatchingQuery(e,t,n?i:Rv.min(),n?o:Gx()))).next((e=>(lS(r,Ox(t),e),{documents:e,Ts:o})))))}function lS(e,t,n){let r=e.us.get(t)||Rv.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.us.set(t,r)}class uS{constructor(){this.activeTargetIds=qx()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cS{constructor(){this.so=new uS,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new uS,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class hS{_o(e){}shutdown(){}}class dS{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){uv("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){uv("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let pS=null;function fS(){return null===pS?pS=268435456+Math.round(2147483648*Math.random()):pS++,"0x"+pS.toString(16)}const mS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gS{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const yS="WebChannelConnection";class vS extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo=`projects/${n}/databases/${r}`,this.Co="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Fo(){return!1}Mo(e,t,n,r,i){const o=fS(),a=this.xo(e,t.toUriEncodedString());uv("RestConnection",`Sending RPC '${e}' ${o}:`,a,n);const s={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(s,r,i),this.No(e,a,s,n).then((t=>(uv("RestConnection",`Received RPC '${e}' ${o}: `,t),t)),(t=>{throw hv("RestConnection",`RPC '${e}' ${o} failed with error: `,t,"url: ",a,"request:",n),t}))}Lo(e,t,n,r,i,o){return this.Mo(e,t,n,r,i)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+av,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}xo(e,t){const n=mS[e];return`${this.Do}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const i=fS();return new Promise(((o,a)=>{const s=new Ky;s.setWithCredentials(!0),s.listenOnce(Yy.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case Qy.NO_ERROR:const t=s.getResponseJson();uv(yS,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),o(t);break;case Qy.TIMEOUT:uv(yS,`RPC '${e}' ${i} timed out`),a(new yv(gv.DEADLINE_EXCEEDED,"Request time out"));break;case Qy.HTTP_ERROR:const n=s.getStatus();if(uv(yS,`RPC '${e}' ${i} failed with status:`,n,"response text:",s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(gv).indexOf(t)>=0?t:gv.UNKNOWN}(t.status);a(new yv(e,t.message))}else a(new yv(gv.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new yv(gv.UNAVAILABLE,"Connection failed."));break;default:pv()}}finally{uv(yS,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);uv(yS,`RPC '${e}' ${i} sending request:`,r),s.send(t,"POST",l,n,15)}))}Bo(e,t,n){const r=fS(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=tv(),a=ev(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(s.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(s.useFetchStreams=!0),this.Oo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;const u=i.join("");uv(yS,`Creating RPC '${e}' stream ${r}: ${u}`,s);const c=o.createWebChannel(u,s);let h=!1,d=!1;const p=new gS({Io:t=>{d?uv(yS,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(uv(yS,`Opening RPC '${e}' stream ${r} transport.`),c.open(),h=!0),uv(yS,`RPC '${e}' stream ${r} sending:`,t),c.send(t))},To:()=>c.close()}),f=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return f(c,Xy.EventType.OPEN,(()=>{d||(uv(yS,`RPC '${e}' stream ${r} transport opened.`),p.yo())})),f(c,Xy.EventType.CLOSE,(()=>{d||(d=!0,uv(yS,`RPC '${e}' stream ${r} transport closed`),p.So())})),f(c,Xy.EventType.ERROR,(t=>{d||(d=!0,hv(yS,`RPC '${e}' stream ${r} transport errored:`,t),p.So(new yv(gv.UNAVAILABLE,"The operation could not be completed")))})),f(c,Xy.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];fv(!!i);const o=i,a=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(a){uv(yS,`RPC '${e}' stream ${r} received error:`,a);const t=a.status;let n=function(e){const t=_w[e];if(void 0!==t)return Rw(t)}(t),i=a.message;void 0===n&&(n=gv.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),d=!0,p.So(new yv(n,i)),c.close()}else uv(yS,`RPC '${e}' stream ${r} received:`,i),p.bo(i)}})),f(a,Zy.STAT_EVENT,(t=>{t.stat===Jy.PROXY?uv(yS,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Jy.NOPROXY&&uv(yS,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{p.wo()}),0),p}}function bS(){return"undefined"!=typeof document?document:null}function xS(e){return new Jw(e,!0)}class wS{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&uv("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class kS{constructor(e,t,n,r,i,o,a,s){this.ui=e,this.Ho=n,this.Jo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=s,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new wS(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===gv.RESOURCE_EXHAUSTED?(cv(t.toString()),cv("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===gv.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)}),(t=>{e((()=>{const e=new yv(gv.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)}))}))}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((e=>{n((()=>this.I_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.e_?this.E_(e):this.onNext(e)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return uv("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(uv("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class SS extends kS{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:pv()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(fv(void 0===t||"string"==typeof t),pb.fromBase64String(t||"")):(fv(void 0===t||t instanceof Buffer||t instanceof Uint8Array),pb.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,s=a&&function(e){const t=void 0===e.code?gv.UNKNOWN:Rw(e.code);return new yv(t,e.message||"")}(a);n=new Vw(r,i,o,s||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=lk(e,r.document.name),o=rk(r.document.updateTime),a=r.document.createTime?rk(r.document.createTime):Rv.min(),s=new Bb({mapValue:{fields:r.document.fields}}),l=Wb.newFoundDocument(i,o,a,s),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Uw(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=lk(e,r.document),o=r.readTime?rk(r.readTime):Rv.min(),a=Wb.newNoDocument(i,o),s=r.removedTargetIds||[];n=new Uw([],s,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=lk(e,r.document),o=r.removedTargetIds||[];n=new Uw([],o,i,null)}else{if(!("filter"in t))return pv();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new Aw(r,i),a=e.targetId;n=new Ww(a,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Rv.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Rv.min():t.readTime?rk(t.readTime):Rv.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=hk(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=gx(r)?{documents:mk(e,r)}:{query:gk(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=tk(e,t.resumeToken);const r=Zw(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Rv.min())>0){n.readTime=ek(e,t.snapshotVersion.toTimestamp());const r=Zw(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pv()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=hk(this.serializer),t.removeTarget=e,this.a_(t)}}class ES extends kS{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return fv(!!e.streamToken),this.lastStreamToken=e.streamToken,fv(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){fv(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(fv(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?rk(e.updateTime):rk(t);return n.isEqual(Rv.min())&&(n=rk(t)),new uw(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=rk(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=hk(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>fk(this.serializer,e)))};this.a_(t)}}class IS extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new yv(gv.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[o,a]=i;return this.connection.Mo(e,ok(t,n),r,o,a)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===gv.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new yv(gv.UNKNOWN,e.toString())}))}Lo(e,t,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((o=>{let[a,s]=o;return this.connection.Lo(e,ok(t,n),r,a,s,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===gv.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new yv(gv.UNKNOWN,e.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class TS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(cv(t),this.D_=!1):uv("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class CS{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((e=>{n.enqueueAndForget((async()=>{MS(this)&&(uv("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=mv(e);t.L_.add(4),await _S(t),t.q_.set("Unknown"),t.L_.delete(4),await AS(t)}(this))}))})),this.q_=new TS(n,r)}}async function AS(e){if(MS(e))for(const t of e.B_)await t(!0)}async function _S(e){for(const t of e.B_)await t(!1)}function NS(e,t){const n=mv(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),PS(n)?DS(n):tE(n).r_()&&RS(n,t))}function OS(e,t){const n=mv(e),r=tE(n);n.N_.delete(t),r.r_()&&$S(n,t),0===n.N_.size&&(r.r_()?r.o_():MS(n)&&n.q_.set("Unknown"))}function RS(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Rv.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}tE(e).A_(t)}function $S(e,t){e.Q_.xe(t),tE(e).R_(t)}function DS(e){e.Q_=new Hw({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),tE(e).start(),e.q_.v_()}function PS(e){return MS(e)&&!tE(e).n_()&&e.N_.size>0}function MS(e){return 0===mv(e).L_.size}function FS(e){e.Q_=void 0}async function LS(e){e.q_.set("Online")}async function jS(e){e.N_.forEach(((t,n)=>{RS(e,t)}))}async function zS(e,t){FS(e),PS(e)?(e.q_.M_(t),DS(e)):e.q_.set("Unknown")}async function BS(e,t,n){if(e.q_.set("Online"),t instanceof Vw&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){uv("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await US(e,n)}else if(t instanceof Uw?e.Q_.Ke(t):t instanceof Ww?e.Q_.He(t):e.Q_.We(t),!n.isEqual(Rv.min()))try{const t=await nS(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.N_.get(r);i&&e.N_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(pb.EMPTY_BYTE_STRING,r.snapshotVersion)),$S(e,t);const i=new Ck(r.target,t,n,r.sequenceNumber);RS(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){uv("RemoteStore","Failed to raise snapshot:",t),await US(e,t)}}async function US(e,t,n){if(!Kv(t))throw t;e.L_.add(1),await _S(e),e.q_.set("Offline"),n||(n=()=>nS(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{uv("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await AS(e)}))}function WS(e,t){return t().catch((n=>US(e,n,t)))}async function VS(e){const t=mv(e),n=nE(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;GS(t);)try{const e=await iS(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,HS(t,e)}catch(e){await US(t,e)}qS(t)&&KS(t)}function GS(e){return MS(e)&&e.O_.length<10}function HS(e,t){e.O_.push(t);const n=nE(e);n.r_()&&n.V_&&n.m_(t.mutations)}function qS(e){return MS(e)&&!nE(e).n_()&&e.O_.length>0}function KS(e){nE(e).start()}async function XS(e){nE(e).p_()}async function YS(e){const t=nE(e);for(const n of e.O_)t.m_(n.mutations)}async function QS(e,t,n){const r=e.O_.shift(),i=Tw.from(r,t,n);await WS(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await VS(e)}async function JS(e,t){t&&nE(e).V_&&await async function(e,t){if(function(e){return Ow(e)&&e!==gv.ABORTED}(t.code)){const n=e.O_.shift();nE(e).s_(),await WS(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await VS(e)}}(e,t),qS(e)&&KS(e)}async function ZS(e,t){const n=mv(e);n.asyncQueue.verifyOperationInProgress(),uv("RemoteStore","RemoteStore received new credentials");const r=MS(n);n.L_.add(3),await _S(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await AS(n)}async function eE(e,t){const n=mv(e);t?(n.L_.delete(2),await AS(n)):t||(n.L_.add(2),await _S(n),n.q_.set("Unknown"))}function tE(e){return e.K_||(e.K_=function(e,t,n){const r=mv(e);return r.w_(),new SS(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:LS.bind(null,e),Ro:jS.bind(null,e),mo:zS.bind(null,e),d_:BS.bind(null,e)}),e.B_.push((async t=>{t?(e.K_.s_(),PS(e)?DS(e):e.q_.set("Unknown")):(await e.K_.stop(),FS(e))}))),e.K_}function nE(e){return e.U_||(e.U_=function(e,t,n){const r=mv(e);return r.w_(),new ES(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:XS.bind(null,e),mo:JS.bind(null,e),f_:YS.bind(null,e),g_:QS.bind(null,e)}),e.B_.push((async t=>{t?(e.U_.s_(),await VS(e)):(await e.U_.stop(),e.O_.length>0&&(uv("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))}))),e.U_}class rE{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new vv,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,a=new rE(e,t,o,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new yv(gv.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function iE(e,t){if(cv("AsyncQueue",`${t}: ${e}`),Kv(e))return new yv(gv.UNAVAILABLE,`${t}: ${e}`);throw e}class oE{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Fv.comparator(t.key,n.key):(e,t)=>Fv.comparator(e.key,t.key),this.keyedMap=Lx(),this.sortedSet=new ab(this.comparator)}static emptySet(e){return new oE(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof oE))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new oE;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class aE{constructor(){this.W_=new ab(Fv.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):pv():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class sE{constructor(e,t,n,r,i,o,a,s,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new sE(e,t,oE.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class lE{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class uE{constructor(){this.queries=cE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=mv(e),r=n.queries;n.queries=cE(),r.forEach(((e,n)=>{for(const r of n.j_)r.onError(t)}))}(this,new yv(gv.ABORTED,"Firestore shutting down"))}}function cE(){return new Dx((e=>Ax(e)),Cx)}async function hE(e,t){const n=mv(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.H_()&&t.J_()&&(r=2):(o=new lE,r=t.J_()?0:1);try{switch(r){case 0:o.z_=await n.onListen(i,!0);break;case 1:o.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=iE(e,`Initialization of query '${_x(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,o),o.j_.push(t),t.Z_(n.onlineState),o.z_&&t.X_(o.z_)&&mE(n)}async function dE(e,t){const n=mv(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const e=o.j_.indexOf(t);e>=0&&(o.j_.splice(e,1),0===o.j_.length?i=t.J_()?0:1:!o.H_()&&t.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function pE(e,t){const n=mv(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(i)&&(r=!0);t.z_=i}}r&&mE(n)}function fE(e,t,n){const r=mv(e),i=r.queries.get(t);if(i)for(const o of i.j_)o.onError(n);r.queries.delete(t)}function mE(e){e.Y_.forEach((e=>{e.next()}))}var gE,yE;(yE=gE||(gE={})).ea="default",yE.Cache="cache";class vE{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new sE(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=sE.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==gE.Cache}}class bE{constructor(e){this.key=e}}class xE{constructor(e){this.key=e}}class wE{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Gx(),this.mutatedKeys=Gx(),this.Aa=Rx(e),this.Ra=new oE(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new aE,r=t?t.Ra:this.Ra;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const s="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),c=Nx(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let p=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),p=!0):this.ga(u,c)||(n.track({type:2,doc:c}),p=!0,(s&&this.Aa(c,s)>0||l&&this.Aa(c,l)<0)&&(a=!0)):!u&&c?(n.track({type:0,doc:c}),p=!0):u&&!c&&(n.track({type:1,doc:u}),p=!0,(s||l)&&(a=!0)),p&&(c?(o=o.add(c),i=d?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ra:o,fa:n,ns:a,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pv()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc))),this.pa(n),r=null!=r&&r;const a=t&&!r?this.ya():[],s=0===this.da.size&&this.current&&!r?1:0,l=s!==this.Ea;return this.Ea=s,0!==o.length||l?{snapshot:new sE(this.query,e.Ra,i,o,e.mutatedKeys,0===s,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new aE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((e=>this.Ta=this.Ta.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ta=this.Ta.delete(e))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Gx(),this.Ra.forEach((e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))}));const t=[];return e.forEach((e=>{this.da.has(e)||t.push(new xE(e))})),this.da.forEach((n=>{e.has(n)||t.push(new bE(n))})),t}ba(e){this.Ta=e.Ts,this.da=Gx();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return sE.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class kE{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class SE{constructor(e){this.key=e,this.va=!1}}class EE{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Dx((e=>Ax(e)),Cx),this.Ma=new Map,this.xa=new Set,this.Oa=new ab(Fv.comparator),this.Na=new Map,this.La=new Bk,this.Ba={},this.ka=new Map,this.qa=Dk.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function IE(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=HE(e);let i;const o=r.Fa.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await CE(r,t,n,!0),i}async function TE(e,t){const n=HE(e);await CE(n,t,!0,!1)}async function CE(e,t,n,r){const i=await oS(e.localStore,Sx(t)),o=i.targetId,a=e.sharedClientState.addLocalQueryTarget(o,n);let s;return r&&(s=await AE(e,t,o,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&NS(e.remoteStore,i),s}async function AE(e,t,n,r,i){e.Ka=(t,n,r)=>async function(e,t,n,r){let i=t.view.ma(n);i.ns&&(i=await sS(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ma(n,i)})));const o=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,o,a);return zE(e,t.targetId,s.wa),s.snapshot}(e,t,n,r);const o=await sS(e.localStore,t,!0),a=new wE(t,o.Ts),s=a.ma(o.documents),l=Bw.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=a.applyChanges(s,e.isPrimaryClient,l);zE(e,n,u.wa);const c=new kE(t,n,a);return e.Fa.set(t,c),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),u.snapshot}async function _E(e,t,n){const r=mv(e),i=r.Fa.get(t),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter((e=>!Cx(e,t)))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await aS(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&OS(r.remoteStore,i.targetId),LE(r,i.targetId)})).catch(Gv)):(LE(r,i.targetId),await aS(r.localStore,i.targetId,!0))}async function NE(e,t){const n=mv(e),r=n.Fa.get(t),i=n.Ma.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),OS(n.remoteStore,r.targetId))}async function OE(e,t){const n=mv(e);try{const e=await function(e,t){const n=mv(e),r=t.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];t.targetChanges.forEach(((o,s)=>{const l=i.get(s);if(!l)return;a.push(n.Ur.removeMatchingKeys(e,o.removedDocuments,s).next((()=>n.Ur.addMatchingKeys(e,o.addedDocuments,s))));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?u=u.withResumeToken(pb.EMPTY_BYTE_STRING,Rv.min()).withLastLimboFreeSnapshotVersion(Rv.min()):o.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(o.resumeToken,r)),i=i.insert(s,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,o)&&a.push(n.Ur.updateTargetData(e,u))}));let s=Mx(),l=Gx();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(rS(e,o,t.documentUpdates).next((e=>{s=e.Ps,l=e.Is}))),!r.isEqual(Rv.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next((t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r)));a.push(t)}return Hv.waitFor(a).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,s,l))).next((()=>s))})).then((e=>(n.os=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Na.get(t);r&&(fv(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?fv(r.va):e.removedDocuments.size>0&&(fv(r.va),r.va=!1))})),await WE(n,e,t)}catch(e){await Gv(e)}}function RE(e,t,n){const r=mv(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach(((n,r)=>{const i=r.view.Z_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=mv(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.j_)i.Z_(t)&&(r=!0)})),r&&mE(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function $E(e,t,n){const r=mv(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Na.get(t),o=i&&i.key;if(o){let e=new ab(Fv.comparator);e=e.insert(o,Wb.newNoDocument(o,Rv.min()));const n=Gx().add(o),i=new zw(Rv.min(),new Map,new ab(_v),e,n);await OE(r,i),r.Oa=r.Oa.remove(o),r.Na.delete(t),UE(r)}else await aS(r.localStore,t,!1).then((()=>LE(r,t,n))).catch(Gv)}async function DE(e,t){const n=mv(e),r=t.batch.batchId;try{const e=await function(e,t){const n=mv(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let a=Hv.resolve();return o.forEach((e=>{a=a.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);fv(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),a.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Gx();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);FE(n,r,null),ME(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await WE(n,e)}catch(e){await Gv(e)}}async function PE(e,t,n){const r=mv(e);try{const e=await function(e,t){const n=mv(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(fv(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);FE(r,t,n),ME(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await WE(r,e)}catch(n){await Gv(n)}}function ME(e,t){(e.ka.get(t)||[]).forEach((e=>{e.resolve()})),e.ka.delete(t)}function FE(e,t,n){const r=mv(e);let i=r.Ba[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ba[r.currentUser.toKey()]=i}}function LE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach((t=>{e.La.containsKey(t)||jE(e,t)}))}function jE(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(OS(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),UE(e))}function zE(e,t,n){for(const r of n)r instanceof bE?(e.La.addReference(r.key,t),BE(e,r)):r instanceof xE?(uv("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||jE(e,r.key)):pv()}function BE(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(uv("SyncEngine","New document in limbo: "+n),e.xa.add(r),UE(e))}function UE(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new Fv(Dv.fromString(t)),r=e.qa.next();e.Na.set(r,new SE(n)),e.Oa=e.Oa.insert(n,r),NS(e.remoteStore,new Ck(Sx(bx(n.path)),r,"TargetPurposeLimboResolution",Xv.oe))}}async function WE(e,t,n){const r=mv(e),i=[],o=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach(((e,s)=>{a.push(r.Ka(s,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(s.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(s.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Yk.Wi(s.targetId,e);o.push(t)}})))})),await Promise.all(a),r.Ca.d_(i),await async function(e,t){const n=mv(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Hv.forEach(t,(t=>Hv.forEach(t.$i,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Hv.forEach(t.Ui,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Kv(e))throw e;uv("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,i)}}}(r.localStore,o))}async function VE(e,t){const n=mv(e);if(!n.currentUser.isEqual(t)){uv("SyncEngine","User change. New user:",t.toKey());const e=await tS(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach((e=>{e.forEach((e=>{e.reject(new yv(gv.CANCELLED,t))}))})),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await WE(n,e.hs)}}function GE(e,t){const n=mv(e),r=n.Na.get(t);if(r&&r.va)return Gx().add(r.key);{let e=Gx();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function HE(e){const t=mv(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=OE.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=GE.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=$E.bind(null,t),t.Ca.d_=pE.bind(null,t.eventManager),t.Ca.$a=fE.bind(null,t.eventManager),t}function qE(e){const t=mv(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=DE.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=PE.bind(null,t),t}class KE{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xS(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return eS(this.persistence,new Jk,e.initialUser,this.serializer)}Ga(e){return new qk(Xk.Zr,this.serializer)}Wa(e){return new cS}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}KE.provider={build:()=>new KE};class XE{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>RE(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=VE.bind(null,this.syncEngine),await eE(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new uE}createDatastore(e){const t=xS(e.databaseInfo.databaseId),n=function(e){return new vS(e)}(e.databaseInfo);return function(e,t,n,r){return new IS(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new CS(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>RE(this.syncEngine,e,0)),dS.D()?new dS:new hS)}createSyncEngine(e,t){return function(e,t,n,r,i,o,a){const s=new EE(e,t,n,r,i,o);return a&&(s.Qa=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=mv(e);uv("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await _S(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}XE.provider={build:()=>new XE};class YE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):cv("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class QE{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ov.UNAUTHENTICATED,this.clientId=Av.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{uv("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(uv("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vv;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=iE(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function JE(e,t){e.asyncQueue.verifyOperationInProgress(),uv("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await tS(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function ZE(e,t){e.asyncQueue.verifyOperationInProgress();const n=await eI(e);uv("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>ZS(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>ZS(t.remoteStore,n))),e._onlineComponents=t}async function eI(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){uv("FirestoreClient","Using user provided OfflineComponentProvider");try{await JE(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===gv.FAILED_PRECONDITION||e.code===gv.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;hv("Error using user provided cache. Falling back to memory cache: "+n),await JE(e,new KE)}}else uv("FirestoreClient","Using default OfflineComponentProvider"),await JE(e,new KE);return e._offlineComponents}async function tI(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(uv("FirestoreClient","Using user provided OnlineComponentProvider"),await ZE(e,e._uninitializedComponentsProvider._online)):(uv("FirestoreClient","Using default OnlineComponentProvider"),await ZE(e,new XE))),e._onlineComponents}function nI(e){return tI(e).then((e=>e.syncEngine))}async function rI(e){const t=await tI(e),n=t.eventManager;return n.onListen=IE.bind(null,t.syncEngine),n.onUnlisten=_E.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=TE.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=NE.bind(null,t.syncEngine),n}function iI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new vv;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new YE({next:s=>{o.Za(),t.enqueueAndForget((()=>dE(e,a)));const l=s.docs.has(n);!l&&s.fromCache?i.reject(new yv(gv.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&s.fromCache&&r&&"server"===r.source?i.reject(new yv(gv.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),a=new vE(bx(n.path),o,{includeMetadataChanges:!0,_a:!0});return hE(e,a)}(await rI(e),e.asyncQueue,t,n,r))),r.promise}function oI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new vv;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new YE({next:n=>{o.Za(),t.enqueueAndForget((()=>dE(e,a))),n.fromCache&&"server"===r.source?i.reject(new yv(gv.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new vE(n,o,{includeMetadataChanges:!0,_a:!0});return hE(e,a)}(await rI(e),e.asyncQueue,t,n,r))),r.promise}function aI(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const sI=new Map;function lI(e,t,n){if(!n)throw new yv(gv.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function uI(e){if(!Fv.isDocumentKey(e))throw new yv(gv.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function cI(e){if(Fv.isDocumentKey(e))throw new yv(gv.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function hI(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":pv()}function dI(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new yv(gv.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=hI(e);throw new yv(gv.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class pI{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new yv(gv.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new yv(gv.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new yv(gv.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aI(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new yv(gv.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new yv(gv.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new yv(gv.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fI{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pI({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new yv(gv.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new yv(gv.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pI(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new xv;switch(e.type){case"firstParty":return new Ev(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new yv(gv.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=sI.get(e);t&&(uv("ComponentProvider","Removing Datastore"),sI.delete(e),t.terminate())}(this),Promise.resolve()}}function mI(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=dI(e,fI))._getSettings(),a=`${t}:${n}`;if("firestore.googleapis.com"!==o.host&&o.host!==a&&hv("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=ov.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[_c(JSON.stringify({alg:"none",type:"JWT"})),_c(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new yv(gv.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ov(o)}e._authCredentials=new wv(new bv(t,n))}}class gI{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new gI(this.firestore,e,this._query)}}class yI{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vI(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yI(this.firestore,e,this._key)}}class vI extends gI{constructor(e,t,n){super(e,t,bx(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yI(this.firestore,null,new Fv(e))}withConverter(e){return new vI(this.firestore,e,this._path)}}function bI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Yc(e),lI("collection","path",t),e instanceof fI){const n=Dv.fromString(t,...r);return cI(n),new vI(e,null,n)}{if(!(e instanceof yI||e instanceof vI))throw new yv(gv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Dv.fromString(t,...r));return cI(n),new vI(e.firestore,null,n)}}function xI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Yc(e),1===arguments.length&&(t=Av.newId()),lI("doc","path",t),e instanceof fI){const n=Dv.fromString(t,...r);return uI(n),new yI(e,null,new Fv(n))}{if(!(e instanceof yI||e instanceof vI))throw new yv(gv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Dv.fromString(t,...r));return uI(n),new yI(e.firestore,e instanceof vI?e.converter:null,new Fv(n))}}class wI{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new wS(this,"async_queue_retry"),this.Vu=()=>{const e=bS();e&&uv("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=bS();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=bS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new vv;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Kv(e))throw e;uv("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw cv("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.du=!1,e))))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=rE.createAndSchedule(this,e,t,n,(e=>this.yu(e)));return this.Tu.push(r),r}fu(){this.Eu&&pv()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class kI extends fI{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new wI,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new wI(e),this._firestoreClient=void 0,await e}}}function SI(e){if(e._terminated)throw new yv(gv.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||EI(e),e._firestoreClient}function EI(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new wb(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,aI(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new QE(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class II{constructor(e){this._byteString=e}static fromBase64String(e){try{return new II(pb.fromBase64String(e))}catch(e){throw new yv(gv.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new II(pb.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class TI{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new yv(gv.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mv(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class CI{constructor(e){this._methodName=e}}class AI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new yv(gv.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new yv(gv.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _v(this._lat,e._lat)||_v(this._long,e._long)}}class _I{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const NI=/^__.*__$/;class OI{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new bw(e,this.data,this.fieldMask,t,this.fieldTransforms):new vw(e,this.data,t,this.fieldTransforms)}}function RI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pv()}}class $I{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new $I(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return GI(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(RI(this.Cu)&&NI.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class DI{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||xS(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new $I({Cu:e,methodName:t,qu:n,path:Mv.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function PI(e){const t=e._freezeSettings(),n=xS(e._databaseId);return new DI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function MI(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Qu(o.merge||o.mergeFields?2:0,t,n,i);BI("Data must be an object, but it was:",a,r);const s=jI(r,a);let l,u;if(o.merge)l=new hb(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=UI(t,r,n);if(!a.contains(i))throw new yv(gv.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);HI(e,i)||e.push(i)}l=new hb(e),u=a.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=a.fieldTransforms;return new OI(new Bb(s),l,u)}function FI(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return LI(n,e.Qu(r?4:3,t))}function LI(e,t){if(zI(e=Yc(e)))return BI("Unsupported field value:",t,e),jI(e,t);if(e instanceof CI)return function(e,t){if(!RI(t.Cu))throw t.Bu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Bu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=LI(i,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Yc(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Yx(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Ov.fromDate(e);return{timestampValue:ek(t.serializer,n)}}if(e instanceof Ov){const n=new Ov(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ek(t.serializer,n)}}if(e instanceof AI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof II)return{bytesValue:tk(t.serializer,e._byteString)};if(e instanceof yI){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:ik(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof _I)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return Kx(t.serializer,e)}))}}}}}}(e,t);throw t.Bu(`Unsupported field value: ${hI(e)}`)}(e,t)}function jI(e,t){const n={};return ob(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ib(e,((e,r)=>{const i=LI(r,t.Mu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function zI(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ov||e instanceof AI||e instanceof II||e instanceof yI||e instanceof CI||e instanceof _I)}function BI(e,t,n){if(!zI(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=hI(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function UI(e,t,n){if((t=Yc(t))instanceof TI)return t._internalPath;if("string"==typeof t)return VI(e,t);throw GI("Field path arguments must be of type string or ",e,!1,void 0,n)}const WI=new RegExp("[~\\*/\\[\\]]");function VI(e,t,n){if(t.search(WI)>=0)throw GI(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new TI(...t.split("."))._internalPath}catch(ke){throw GI(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function GI(e,t,n,r,i){const o=r&&!r.isEmpty(),a=void 0!==i;let s=`Function ${t}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(o||a)&&(l+=" (found",o&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new yv(gv.INVALID_ARGUMENT,s+e+l)}function HI(e,t){return e.some((e=>e.isEqual(t)))}class qI{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new yI(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new KI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(XI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class KI extends qI{data(){return super.data()}}function XI(e,t){return"string"==typeof t?VI(e,t):t instanceof TI?t._internalPath:t._delegate._internalPath}function YI(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new yv(gv.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class QI{}class JI extends QI{}class ZI extends JI{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new ZI(e,t,n)}_apply(e){const t=this._parse(e);return iT(e._query,t),new gI(e.firestore,e.converter,Ix(e._query,t))}_parse(e){const t=PI(e.firestore),n=function(e,t,n,r,i,o,a){let s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new yv(gv.INVALID_ARGUMENT,`Invalid Query. You can't perform '${o}' queries on documentId().`);if("in"===o||"not-in"===o){rT(a,o);const t=[];for(const n of a)t.push(nT(r,e,n));s={arrayValue:{values:t}}}else s=nT(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||rT(a,o),s=FI(n,t,a,"in"===o||"not-in"===o);return Yb.create(i,o,s)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class eT extends QI{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new eT(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Qb.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)iT(n,i),n=Ix(n,i)}(e._query,t),new gI(e.firestore,e.converter,Ix(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class tT extends JI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new tT(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new yv(gv.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new yv(gv.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qb(t,n)}(e._query,this._field,this._direction);return new gI(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new yx(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function nT(e,t,n){if("string"==typeof(n=Yc(n))){if(""===n)throw new yv(gv.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wx(t)&&-1!==n.indexOf("/"))throw new yv(gv.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Dv.fromString(n));if(!Fv.isDocumentKey(r))throw new yv(gv.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Rb(e,new Fv(r))}if(n instanceof yI)return Rb(e,n._key);throw new yv(gv.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hI(n)}.`)}function rT(e,t){if(!Array.isArray(e)||0===e.length)throw new yv(gv.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function iT(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new yv(gv.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new yv(gv.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class oT{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Eb(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gb(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yb(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw pv()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return ib(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>gb(e.doubleValue)));return new _I(i)}convertGeoPoint(e){return new AI(gb(e.latitude),gb(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=bb(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(xb(e));default:return null}}convertTimestamp(e){const t=mb(e);return new Ov(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Dv.fromString(e);fv(Tk(n));const r=new kb(n.get(1),n.get(3)),i=new Fv(n.popFirst(5));return r.isEqual(t)||cv(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function aT(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class sT{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lT extends qI{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new uT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(XI("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class uT extends lT{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class cT{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new sT(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new uT(this._firestore,this._userDataWriter,n.key,n,new sT(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new yv(gv.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new uT(e._firestore,e._userDataWriter,n.doc.key,n.doc,new sT(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new uT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new sT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:hT(t.type),doc:r,oldIndex:i,newIndex:o}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function hT(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pv()}}class dT extends oT{constructor(e){super(),this.firestore=e}convertBytes(e){return new II(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yI(this.firestore,null,t)}}function pT(e,t,n){e=dI(e,yI);const r=dI(e.firestore,kI),i=aT(e.converter,t,n);return fT(r,[MI(PI(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,cw.none())])}function fT(e,t){return function(e,t){const n=new vv;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=qE(e);try{const e=await function(e,t){const n=mv(e),r=Ov.now(),i=t.reduce(((e,t)=>e.add(t.key)),Gx());let o,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let s=Mx(),l=Gx();return n.cs.getEntries(e,i).next((e=>{s=e,s.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,s))).next((i=>{o=i;const a=[];for(const e of t){const t=gw(e,o.get(e.key).overlayedDocument);null!=t&&a.push(new bw(e.key,t,Ub(t.value.mapValue),cw.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)})).next((t=>{a=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:a.batchId,changes:jx(o)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new ab(_v)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await WE(r,e.changes),await VS(r.remoteStore)}catch(e){const t=iE(e,"Failed to persist write");n.reject(t)}}(await nI(e),t,n))),n.promise}(SI(e),t)}function mT(e,t,n){const r=n.docs.get(t._key),i=new dT(e);return new lT(e,i,t._key,r,new sT(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){av=e}(dd),sd(new Qc("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),a=new kI(new kv(e.getProvider("auth-internal")),new Tv(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new yv(gv.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kb(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),md(iv,"4.7.3",e),md(iv,"4.7.3","esm2017")}();const gT=pd({apiKey:"AIzaSyDZlPTNtWbRsCxS1b9zj8eVP_Zp7K9U3YU",authDomain:"dailyexpensetracker-b5a15.firebaseapp.com",projectId:"dailyexpensetracker-b5a15",storageBucket:"dailyexpensetracker-b5a15.appspot.com",messagingSenderId:"1044139199411",appId:"1:1044139199411:web:4cbc608d956463281799c6",measurementId:"G-9B1RV5SGFY"}),yT=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fd();const t=ld(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=ld(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Wc(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Rd(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Dm,persistence:[Gf,Af,Nf]}),r=Pc("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Lm)return;const r=null===t||void 0===t?void 0:t.token;jm!==r&&(jm=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){Yc(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){Yc(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var i;const o=$c("auth");return o&&Xp(n,`http://${o}`),n}(gT),vT=new df,bT=function(e,t){const n="string"==typeof e?e:t||"(default)",r=ld("object"==typeof e?e:fd(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=$c(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&mI(r,...e)}return r}(gT);var xT=function(e){return function(e){return!!e&&"object"===typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===wT}(e)}(e)};var wT="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function kT(e,t){return!1!==t.clone&&t.isMergeableObject(e)?ET((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function ST(e,t,n){return e.concat(t).map((function(e){return kT(e,n)}))}function ET(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||ST,n.isMergeableObject=n.isMergeableObject||xT;var r=Array.isArray(t);return r===Array.isArray(e)?r?n.arrayMerge(e,t,n):function(e,t,n){var r={};return n.isMergeableObject(e)&&Object.keys(e).forEach((function(t){r[t]=kT(e[t],n)})),Object.keys(t).forEach((function(i){n.isMergeableObject(t[i])&&e[i]?r[i]=ET(e[i],t[i],n):r[i]=kT(t[i],n)})),r}(e,t,n):kT(t,n)}ET.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return ET(e,n,t)}),{})};const IT=ET;const TT="object"==typeof global&&global&&global.Object===Object&&global;var CT="object"==typeof self&&self&&self.Object===Object&&self;const AT=TT||CT||Function("return this")();const _T=AT.Symbol;var NT=Object.prototype,OT=NT.hasOwnProperty,RT=NT.toString,$T=_T?_T.toStringTag:void 0;const DT=function(e){var t=OT.call(e,$T),n=e[$T];try{e[$T]=void 0;var r=!0}catch(o){}var i=RT.call(e);return r&&(t?e[$T]=n:delete e[$T]),i};var PT=Object.prototype.toString;const MT=function(e){return PT.call(e)};var FT=_T?_T.toStringTag:void 0;const LT=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":FT&&FT in Object(e)?DT(e):MT(e)};const jT=function(e,t){return function(n){return e(t(n))}};const zT=jT(Object.getPrototypeOf,Object);const BT=function(e){return null!=e&&"object"==typeof e};var UT=Function.prototype,WT=Object.prototype,VT=UT.toString,GT=WT.hasOwnProperty,HT=VT.call(Object);const qT=function(e){if(!BT(e)||"[object Object]"!=LT(e))return!1;var t=zT(e);if(null===t)return!0;var n=GT.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&VT.call(n)==HT};const KT=function(){this.__data__=[],this.size=0};const XT=function(e,t){return e===t||e!==e&&t!==t};const YT=function(e,t){for(var n=e.length;n--;)if(XT(e[n][0],t))return n;return-1};var QT=Array.prototype.splice;const JT=function(e){var t=this.__data__,n=YT(t,e);return!(n<0)&&(n==t.length-1?t.pop():QT.call(t,n,1),--this.size,!0)};const ZT=function(e){var t=this.__data__,n=YT(t,e);return n<0?void 0:t[n][1]};const eC=function(e){return YT(this.__data__,e)>-1};const tC=function(e,t){var n=this.__data__,r=YT(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function nC(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}nC.prototype.clear=KT,nC.prototype.delete=JT,nC.prototype.get=ZT,nC.prototype.has=eC,nC.prototype.set=tC;const rC=nC;const iC=function(){this.__data__=new rC,this.size=0};const oC=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};const aC=function(e){return this.__data__.get(e)};const sC=function(e){return this.__data__.has(e)};const lC=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const uC=function(e){if(!lC(e))return!1;var t=LT(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};const cC=AT["__core-js_shared__"];var hC=function(){var e=/[^.]+$/.exec(cC&&cC.keys&&cC.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();const dC=function(e){return!!hC&&hC in e};var pC=Function.prototype.toString;const fC=function(e){if(null!=e){try{return pC.call(e)}catch(t){}try{return e+""}catch(t){}}return""};var mC=/^\[object .+?Constructor\]$/,gC=Function.prototype,yC=Object.prototype,vC=gC.toString,bC=yC.hasOwnProperty,xC=RegExp("^"+vC.call(bC).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const wC=function(e){return!(!lC(e)||dC(e))&&(uC(e)?xC:mC).test(fC(e))};const kC=function(e,t){return null==e?void 0:e[t]};const SC=function(e,t){var n=kC(e,t);return wC(n)?n:void 0};const EC=SC(AT,"Map");const IC=SC(Object,"create");const TC=function(){this.__data__=IC?IC(null):{},this.size=0};const CC=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t};var AC=Object.prototype.hasOwnProperty;const _C=function(e){var t=this.__data__;if(IC){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return AC.call(t,e)?t[e]:void 0};var NC=Object.prototype.hasOwnProperty;const OC=function(e){var t=this.__data__;return IC?void 0!==t[e]:NC.call(t,e)};const RC=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=IC&&void 0===t?"__lodash_hash_undefined__":t,this};function $C(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}$C.prototype.clear=TC,$C.prototype.delete=CC,$C.prototype.get=_C,$C.prototype.has=OC,$C.prototype.set=RC;const DC=$C;const PC=function(){this.size=0,this.__data__={hash:new DC,map:new(EC||rC),string:new DC}};const MC=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};const FC=function(e,t){var n=e.__data__;return MC(t)?n["string"==typeof t?"string":"hash"]:n.map};const LC=function(e){var t=FC(this,e).delete(e);return this.size-=t?1:0,t};const jC=function(e){return FC(this,e).get(e)};const zC=function(e){return FC(this,e).has(e)};const BC=function(e,t){var n=FC(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function UC(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}UC.prototype.clear=PC,UC.prototype.delete=LC,UC.prototype.get=jC,UC.prototype.has=zC,UC.prototype.set=BC;const WC=UC;const VC=function(e,t){var n=this.__data__;if(n instanceof rC){var r=n.__data__;if(!EC||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new WC(r)}return n.set(e,t),this.size=n.size,this};function GC(e){var t=this.__data__=new rC(e);this.size=t.size}GC.prototype.clear=iC,GC.prototype.delete=oC,GC.prototype.get=aC,GC.prototype.has=sC,GC.prototype.set=VC;const HC=GC;const qC=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e};var KC=function(){try{var e=SC(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();const XC=KC;const YC=function(e,t,n){"__proto__"==t&&XC?XC(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};var QC=Object.prototype.hasOwnProperty;const JC=function(e,t,n){var r=e[t];QC.call(e,t)&&XT(r,n)&&(void 0!==n||t in e)||YC(e,t,n)};const ZC=function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),i?YC(n,s,l):JC(n,s,l)}return n};const eA=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};const tA=function(e){return BT(e)&&"[object Arguments]"==LT(e)};var nA=Object.prototype,rA=nA.hasOwnProperty,iA=nA.propertyIsEnumerable,oA=tA(function(){return arguments}())?tA:function(e){return BT(e)&&rA.call(e,"callee")&&!iA.call(e,"callee")};const aA=oA;const sA=Array.isArray;const lA=function(){return!1};var uA="object"==typeof exports&&exports&&!exports.nodeType&&exports,cA=uA&&"object"==typeof module&&module&&!module.nodeType&&module,hA=cA&&cA.exports===uA?AT.Buffer:void 0;const dA=(hA?hA.isBuffer:void 0)||lA;var pA=/^(?:0|[1-9]\d*)$/;const fA=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&pA.test(e))&&e>-1&&e%1==0&&e<t};const mA=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var gA={};gA["[object Float32Array]"]=gA["[object Float64Array]"]=gA["[object Int8Array]"]=gA["[object Int16Array]"]=gA["[object Int32Array]"]=gA["[object Uint8Array]"]=gA["[object Uint8ClampedArray]"]=gA["[object Uint16Array]"]=gA["[object Uint32Array]"]=!0,gA["[object Arguments]"]=gA["[object Array]"]=gA["[object ArrayBuffer]"]=gA["[object Boolean]"]=gA["[object DataView]"]=gA["[object Date]"]=gA["[object Error]"]=gA["[object Function]"]=gA["[object Map]"]=gA["[object Number]"]=gA["[object Object]"]=gA["[object RegExp]"]=gA["[object Set]"]=gA["[object String]"]=gA["[object WeakMap]"]=!1;const yA=function(e){return BT(e)&&mA(e.length)&&!!gA[LT(e)]};const vA=function(e){return function(t){return e(t)}};var bA="object"==typeof exports&&exports&&!exports.nodeType&&exports,xA=bA&&"object"==typeof module&&module&&!module.nodeType&&module,wA=xA&&xA.exports===bA&&TT.process;const kA=function(){try{var e=xA&&xA.require&&xA.require("util").types;return e||wA&&wA.binding&&wA.binding("util")}catch(t){}}();var SA=kA&&kA.isTypedArray;const EA=SA?vA(SA):yA;var IA=Object.prototype.hasOwnProperty;const TA=function(e,t){var n=sA(e),r=!n&&aA(e),i=!n&&!r&&dA(e),o=!n&&!r&&!i&&EA(e),a=n||r||i||o,s=a?eA(e.length,String):[],l=s.length;for(var u in e)!t&&!IA.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||fA(u,l))||s.push(u);return s};var CA=Object.prototype;const AA=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||CA)};const _A=jT(Object.keys,Object);var NA=Object.prototype.hasOwnProperty;const OA=function(e){if(!AA(e))return _A(e);var t=[];for(var n in Object(e))NA.call(e,n)&&"constructor"!=n&&t.push(n);return t};const RA=function(e){return null!=e&&mA(e.length)&&!uC(e)};const $A=function(e){return RA(e)?TA(e):OA(e)};const DA=function(e,t){return e&&ZC(t,$A(t),e)};const PA=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t};var MA=Object.prototype.hasOwnProperty;const FA=function(e){if(!lC(e))return PA(e);var t=AA(e),n=[];for(var r in e)("constructor"!=r||!t&&MA.call(e,r))&&n.push(r);return n};const LA=function(e){return RA(e)?TA(e,!0):FA(e)};const jA=function(e,t){return e&&ZC(t,LA(t),e)};var zA="object"==typeof exports&&exports&&!exports.nodeType&&exports,BA=zA&&"object"==typeof module&&module&&!module.nodeType&&module,UA=BA&&BA.exports===zA?AT.Buffer:void 0,WA=UA?UA.allocUnsafe:void 0;const VA=function(e,t){if(t)return e.slice();var n=e.length,r=WA?WA(n):new e.constructor(n);return e.copy(r),r};const GA=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};const HA=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o};const qA=function(){return[]};var KA=Object.prototype.propertyIsEnumerable,XA=Object.getOwnPropertySymbols,YA=XA?function(e){return null==e?[]:(e=Object(e),HA(XA(e),(function(t){return KA.call(e,t)})))}:qA;const QA=YA;const JA=function(e,t){return ZC(e,QA(e),t)};const ZA=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e};var e_=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)ZA(t,QA(e)),e=zT(e);return t}:qA;const t_=e_;const n_=function(e,t){return ZC(e,t_(e),t)};const r_=function(e,t,n){var r=t(e);return sA(e)?r:ZA(r,n(e))};const i_=function(e){return r_(e,$A,QA)};const o_=function(e){return r_(e,LA,t_)};const a_=SC(AT,"DataView");const s_=SC(AT,"Promise");const l_=SC(AT,"Set");const u_=SC(AT,"WeakMap");var c_="[object Map]",h_="[object Promise]",d_="[object Set]",p_="[object WeakMap]",f_="[object DataView]",m_=fC(a_),g_=fC(EC),y_=fC(s_),v_=fC(l_),b_=fC(u_),x_=LT;(a_&&x_(new a_(new ArrayBuffer(1)))!=f_||EC&&x_(new EC)!=c_||s_&&x_(s_.resolve())!=h_||l_&&x_(new l_)!=d_||u_&&x_(new u_)!=p_)&&(x_=function(e){var t=LT(e),n="[object Object]"==t?e.constructor:void 0,r=n?fC(n):"";if(r)switch(r){case m_:return f_;case g_:return c_;case y_:return h_;case v_:return d_;case b_:return p_}return t});const w_=x_;var k_=Object.prototype.hasOwnProperty;const S_=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&k_.call(e,"index")&&(n.index=e.index,n.input=e.input),n};const E_=AT.Uint8Array;const I_=function(e){var t=new e.constructor(e.byteLength);return new E_(t).set(new E_(e)),t};const T_=function(e,t){var n=t?I_(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)};var C_=/\w*$/;const A_=function(e){var t=new e.constructor(e.source,C_.exec(e));return t.lastIndex=e.lastIndex,t};var __=_T?_T.prototype:void 0,N_=__?__.valueOf:void 0;const O_=function(e){return N_?Object(N_.call(e)):{}};const R_=function(e,t){var n=t?I_(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};const $_=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return I_(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return T_(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return R_(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return A_(e);case"[object Symbol]":return O_(e)}};var D_=Object.create,P_=function(){function e(){}return function(t){if(!lC(t))return{};if(D_)return D_(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const M_=P_;const F_=function(e){return"function"!=typeof e.constructor||AA(e)?{}:M_(zT(e))};const L_=function(e){return BT(e)&&"[object Map]"==w_(e)};var j_=kA&&kA.isMap;const z_=j_?vA(j_):L_;const B_=function(e){return BT(e)&&"[object Set]"==w_(e)};var U_=kA&&kA.isSet;const W_=U_?vA(U_):B_;var V_="[object Arguments]",G_="[object Function]",H_="[object Object]",q_={};q_[V_]=q_["[object Array]"]=q_["[object ArrayBuffer]"]=q_["[object DataView]"]=q_["[object Boolean]"]=q_["[object Date]"]=q_["[object Float32Array]"]=q_["[object Float64Array]"]=q_["[object Int8Array]"]=q_["[object Int16Array]"]=q_["[object Int32Array]"]=q_["[object Map]"]=q_["[object Number]"]=q_[H_]=q_["[object RegExp]"]=q_["[object Set]"]=q_["[object String]"]=q_["[object Symbol]"]=q_["[object Uint8Array]"]=q_["[object Uint8ClampedArray]"]=q_["[object Uint16Array]"]=q_["[object Uint32Array]"]=!0,q_["[object Error]"]=q_[G_]=q_["[object WeakMap]"]=!1;const K_=function e(t,n,r,i,o,a){var s,l=1&n,u=2&n,c=4&n;if(r&&(s=o?r(t,i,o,a):r(t)),void 0!==s)return s;if(!lC(t))return t;var h=sA(t);if(h){if(s=S_(t),!l)return GA(t,s)}else{var d=w_(t),p=d==G_||"[object GeneratorFunction]"==d;if(dA(t))return VA(t,l);if(d==H_||d==V_||p&&!o){if(s=u||p?{}:F_(t),!l)return u?n_(t,jA(s,t)):JA(t,DA(s,t))}else{if(!q_[d])return o?t:{};s=$_(t,d,l)}}a||(a=new HC);var f=a.get(t);if(f)return f;a.set(t,s),W_(t)?t.forEach((function(i){s.add(e(i,n,r,i,t,a))})):z_(t)&&t.forEach((function(i,o){s.set(o,e(i,n,r,o,t,a))}));var m=h?void 0:(c?u?o_:i_:u?LA:$A)(t);return qC(m||t,(function(i,o){m&&(i=t[o=i]),JC(s,o,e(i,n,r,o,t,a))})),s};const X_=function(e){return K_(e,5)};var Y_=n(6366),Q_=n.n(Y_);const J_=function(e,t){};const Z_=function(e){return K_(e,4)};const eN=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i};const tN=function(e){return"symbol"==typeof e||BT(e)&&"[object Symbol]"==LT(e)};function nN(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(nN.Cache||WC),n}nN.Cache=WC;const rN=nN;const iN=function(e){var t=rN(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t};var oN=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,aN=/\\(\\)?/g;const sN=iN((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(oN,(function(e,n,r,i){t.push(r?i.replace(aN,"$1"):n||e)})),t}));const lN=function(e){if("string"==typeof e||tN(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t};var uN=_T?_T.prototype:void 0,cN=uN?uN.toString:void 0;const hN=function e(t){if("string"==typeof t)return t;if(sA(t))return eN(t,e)+"";if(tN(t))return cN?cN.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n};const dN=function(e){return null==e?"":hN(e)};const pN=function(e){return sA(e)?eN(e,lN):tN(e)?[e]:GA(sN(dN(e)))};function fN(){return fN=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fN.apply(this,arguments)}function mN(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function gN(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function yN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var vN=(0,l.createContext)(void 0);vN.displayName="FormikContext";var bN=vN.Provider,xN=vN.Consumer;function wN(){var e=(0,l.useContext)(vN);return e||J_(!1),e}var kN=function(e){return Array.isArray(e)&&0===e.length},SN=function(e){return"function"===typeof e},EN=function(e){return null!==e&&"object"===typeof e},IN=function(e){return String(Math.floor(Number(e)))===e},TN=function(e){return"[object String]"===Object.prototype.toString.call(e)},CN=function(e){return 0===l.Children.count(e)},AN=function(e){return EN(e)&&SN(e.then)};function _N(e,t,n,r){void 0===r&&(r=0);for(var i=pN(t);e&&r<i.length;)e=e[i[r++]];return r===i.length||e?void 0===e?n:e:n}function NN(e,t,n){for(var r=Z_(e),i=r,o=0,a=pN(t);o<a.length-1;o++){var s=a[o],l=_N(e,a.slice(0,o+1));if(l&&(EN(l)||Array.isArray(l)))i=i[s]=Z_(l);else{var u=a[o+1];i=i[s]=IN(u)&&Number(u)>=0?[]:{}}}return(0===o?e:i)[a[o]]===n?e:(void 0===n?delete i[a[o]]:i[a[o]]=n,0===o&&void 0===n&&delete r[a[o]],r)}function ON(e,t,n,r){void 0===n&&(n=new WeakMap),void 0===r&&(r={});for(var i=0,o=Object.keys(e);i<o.length;i++){var a=o[i],s=e[a];EN(s)?n.get(s)||(n.set(s,!0),r[a]=Array.isArray(s)?[]:{},ON(s,t,n,r[a])):r[a]=t}return r}var RN={},$N={};function DN(e){var t=e.validateOnChange,n=void 0===t||t,r=e.validateOnBlur,i=void 0===r||r,o=e.validateOnMount,a=void 0!==o&&o,s=e.isInitialValid,u=e.enableReinitialize,c=void 0!==u&&u,h=e.onSubmit,d=gN(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),p=fN({validateOnChange:n,validateOnBlur:i,validateOnMount:a,onSubmit:h},d),f=(0,l.useRef)(p.initialValues),m=(0,l.useRef)(p.initialErrors||RN),g=(0,l.useRef)(p.initialTouched||$N),y=(0,l.useRef)(p.initialStatus),v=(0,l.useRef)(!1),b=(0,l.useRef)({});(0,l.useEffect)((function(){return v.current=!0,function(){v.current=!1}}),[]);var x=(0,l.useState)(0)[1],w=(0,l.useRef)({values:X_(p.initialValues),errors:X_(p.initialErrors)||RN,touched:X_(p.initialTouched)||$N,status:X_(p.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),k=w.current,S=(0,l.useCallback)((function(e){var t=w.current;w.current=function(e,t){switch(t.type){case"SET_VALUES":return fN({},e,{values:t.payload});case"SET_TOUCHED":return fN({},e,{touched:t.payload});case"SET_ERRORS":return Q_()(e.errors,t.payload)?e:fN({},e,{errors:t.payload});case"SET_STATUS":return fN({},e,{status:t.payload});case"SET_ISSUBMITTING":return fN({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return fN({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return fN({},e,{values:NN(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return fN({},e,{touched:NN(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return fN({},e,{errors:NN(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return fN({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return fN({},e,{touched:ON(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":case"SUBMIT_SUCCESS":return fN({},e,{isSubmitting:!1});default:return e}}(t,e),t!==w.current&&x((function(e){return e+1}))}),[]),E=(0,l.useCallback)((function(e,t){return new Promise((function(n,r){var i=p.validate(e,t);null==i?n(RN):AN(i)?i.then((function(e){n(e||RN)}),(function(e){r(e)})):n(i)}))}),[p.validate]),I=(0,l.useCallback)((function(e,t){var n=p.validationSchema,r=SN(n)?n(t):n,i=t&&r.validateAt?r.validateAt(t,e):function(e,t,n,r){void 0===n&&(n=!1);var i=MN(e);return t[n?"validateSync":"validate"](i,{abortEarly:!1,context:r||i})}(e,r);return new Promise((function(e,t){i.then((function(){e(RN)}),(function(n){"ValidationError"===n.name?e(function(e){var t={};if(e.inner){if(0===e.inner.length)return NN(t,e.path,e.message);var n=e.inner,r=Array.isArray(n),i=0;for(n=r?n:n[Symbol.iterator]();;){var o;if(r){if(i>=n.length)break;o=n[i++]}else{if((i=n.next()).done)break;o=i.value}var a=o;_N(t,a.path)||(t=NN(t,a.path,a.message))}}return t}(n)):t(n)}))}))}),[p.validationSchema]),T=(0,l.useCallback)((function(e,t){return new Promise((function(n){return n(b.current[e].validate(t))}))}),[]),C=(0,l.useCallback)((function(e){var t=Object.keys(b.current).filter((function(e){return SN(b.current[e].validate)})),n=t.length>0?t.map((function(t){return T(t,_N(e,t))})):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(n).then((function(e){return e.reduce((function(e,n,r){return"DO_NOT_DELETE_YOU_WILL_BE_FIRED"===n||n&&(e=NN(e,t[r],n)),e}),{})}))}),[T]),A=(0,l.useCallback)((function(e){return Promise.all([C(e),p.validationSchema?I(e):{},p.validate?E(e):{}]).then((function(e){var t=e[0],n=e[1],r=e[2];return IT.all([t,n,r],{arrayMerge:FN})}))}),[p.validate,p.validationSchema,C,E,I]),_=jN((function(e){return void 0===e&&(e=k.values),S({type:"SET_ISVALIDATING",payload:!0}),A(e).then((function(e){return v.current&&(S({type:"SET_ISVALIDATING",payload:!1}),S({type:"SET_ERRORS",payload:e})),e}))}));(0,l.useEffect)((function(){a&&!0===v.current&&Q_()(f.current,p.initialValues)&&_(f.current)}),[a,_]);var N=(0,l.useCallback)((function(e){var t=e&&e.values?e.values:f.current,n=e&&e.errors?e.errors:m.current?m.current:p.initialErrors||{},r=e&&e.touched?e.touched:g.current?g.current:p.initialTouched||{},i=e&&e.status?e.status:y.current?y.current:p.initialStatus;f.current=t,m.current=n,g.current=r,y.current=i;var o=function(){S({type:"RESET_FORM",payload:{isSubmitting:!!e&&!!e.isSubmitting,errors:n,touched:r,status:i,values:t,isValidating:!!e&&!!e.isValidating,submitCount:e&&e.submitCount&&"number"===typeof e.submitCount?e.submitCount:0}})};if(p.onReset){var a=p.onReset(k.values,X);AN(a)?a.then(o):o()}else o()}),[p.initialErrors,p.initialStatus,p.initialTouched,p.onReset]);(0,l.useEffect)((function(){!0!==v.current||Q_()(f.current,p.initialValues)||c&&(f.current=p.initialValues,N(),a&&_(f.current))}),[c,p.initialValues,N,a,_]),(0,l.useEffect)((function(){c&&!0===v.current&&!Q_()(m.current,p.initialErrors)&&(m.current=p.initialErrors||RN,S({type:"SET_ERRORS",payload:p.initialErrors||RN}))}),[c,p.initialErrors]),(0,l.useEffect)((function(){c&&!0===v.current&&!Q_()(g.current,p.initialTouched)&&(g.current=p.initialTouched||$N,S({type:"SET_TOUCHED",payload:p.initialTouched||$N}))}),[c,p.initialTouched]),(0,l.useEffect)((function(){c&&!0===v.current&&!Q_()(y.current,p.initialStatus)&&(y.current=p.initialStatus,S({type:"SET_STATUS",payload:p.initialStatus}))}),[c,p.initialStatus,p.initialTouched]);var O=jN((function(e){if(b.current[e]&&SN(b.current[e].validate)){var t=_N(k.values,e),n=b.current[e].validate(t);return AN(n)?(S({type:"SET_ISVALIDATING",payload:!0}),n.then((function(e){return e})).then((function(t){S({type:"SET_FIELD_ERROR",payload:{field:e,value:t}}),S({type:"SET_ISVALIDATING",payload:!1})}))):(S({type:"SET_FIELD_ERROR",payload:{field:e,value:n}}),Promise.resolve(n))}return p.validationSchema?(S({type:"SET_ISVALIDATING",payload:!0}),I(k.values,e).then((function(e){return e})).then((function(t){S({type:"SET_FIELD_ERROR",payload:{field:e,value:_N(t,e)}}),S({type:"SET_ISVALIDATING",payload:!1})}))):Promise.resolve()})),R=(0,l.useCallback)((function(e,t){var n=t.validate;b.current[e]={validate:n}}),[]),$=(0,l.useCallback)((function(e){delete b.current[e]}),[]),D=jN((function(e,t){return S({type:"SET_TOUCHED",payload:e}),(void 0===t?i:t)?_(k.values):Promise.resolve()})),P=(0,l.useCallback)((function(e){S({type:"SET_ERRORS",payload:e})}),[]),M=jN((function(e,t){var r=SN(e)?e(k.values):e;return S({type:"SET_VALUES",payload:r}),(void 0===t?n:t)?_(r):Promise.resolve()})),F=(0,l.useCallback)((function(e,t){S({type:"SET_FIELD_ERROR",payload:{field:e,value:t}})}),[]),L=jN((function(e,t,r){return S({type:"SET_FIELD_VALUE",payload:{field:e,value:t}}),(void 0===r?n:r)?_(NN(k.values,e,t)):Promise.resolve()})),j=(0,l.useCallback)((function(e,t){var n,r=t,i=e;if(!TN(e)){e.persist&&e.persist();var o=e.target?e.target:e.currentTarget,a=o.type,s=o.name,l=o.id,u=o.value,c=o.checked,h=(o.outerHTML,o.options),d=o.multiple;r=t||(s||l),i=/number|range/.test(a)?(n=parseFloat(u),isNaN(n)?"":n):/checkbox/.test(a)?function(e,t,n){if("boolean"===typeof e)return Boolean(t);var r=[],i=!1,o=-1;if(Array.isArray(e))r=e,i=(o=e.indexOf(n))>=0;else if(!n||"true"==n||"false"==n)return Boolean(t);if(t&&n&&!i)return r.concat(n);if(!i)return r;return r.slice(0,o).concat(r.slice(o+1))}(_N(k.values,r),c,u):h&&d?function(e){return Array.from(e).filter((function(e){return e.selected})).map((function(e){return e.value}))}(h):u}r&&L(r,i)}),[L,k.values]),z=jN((function(e){if(TN(e))return function(t){return j(t,e)};j(e)})),B=jN((function(e,t,n){return void 0===t&&(t=!0),S({type:"SET_FIELD_TOUCHED",payload:{field:e,value:t}}),(void 0===n?i:n)?_(k.values):Promise.resolve()})),U=(0,l.useCallback)((function(e,t){e.persist&&e.persist();var n=e.target,r=n.name,i=n.id,o=(n.outerHTML,t||(r||i));B(o,!0)}),[B]),W=jN((function(e){if(TN(e))return function(t){return U(t,e)};U(e)})),V=(0,l.useCallback)((function(e){SN(e)?S({type:"SET_FORMIK_STATE",payload:e}):S({type:"SET_FORMIK_STATE",payload:function(){return e}})}),[]),G=(0,l.useCallback)((function(e){S({type:"SET_STATUS",payload:e})}),[]),H=(0,l.useCallback)((function(e){S({type:"SET_ISSUBMITTING",payload:e})}),[]),q=jN((function(){return S({type:"SUBMIT_ATTEMPT"}),_().then((function(e){var t=e instanceof Error;if(!t&&0===Object.keys(e).length){var n;try{if(void 0===(n=Y()))return}catch(r){throw r}return Promise.resolve(n).then((function(e){return v.current&&S({type:"SUBMIT_SUCCESS"}),e})).catch((function(e){if(v.current)throw S({type:"SUBMIT_FAILURE"}),e}))}if(v.current&&(S({type:"SUBMIT_FAILURE"}),t))throw e}))})),K=jN((function(e){e&&e.preventDefault&&SN(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&SN(e.stopPropagation)&&e.stopPropagation(),q().catch((function(e){console.warn("Warning: An unhandled error was caught from submitForm()",e)}))})),X={resetForm:N,validateForm:_,validateField:O,setErrors:P,setFieldError:F,setFieldTouched:B,setFieldValue:L,setStatus:G,setSubmitting:H,setTouched:D,setValues:M,setFormikState:V,submitForm:q},Y=jN((function(){return h(k.values,X)})),Q=jN((function(e){e&&e.preventDefault&&SN(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&SN(e.stopPropagation)&&e.stopPropagation(),N()})),J=(0,l.useCallback)((function(e){return{value:_N(k.values,e),error:_N(k.errors,e),touched:!!_N(k.touched,e),initialValue:_N(f.current,e),initialTouched:!!_N(g.current,e),initialError:_N(m.current,e)}}),[k.errors,k.touched,k.values]),Z=(0,l.useCallback)((function(e){return{setValue:function(t,n){return L(e,t,n)},setTouched:function(t,n){return B(e,t,n)},setError:function(t){return F(e,t)}}}),[L,B,F]),ee=(0,l.useCallback)((function(e){var t=EN(e),n=t?e.name:e,r=_N(k.values,n),i={name:n,value:r,onChange:z,onBlur:W};if(t){var o=e.type,a=e.value,s=e.as,l=e.multiple;"checkbox"===o?void 0===a?i.checked=!!r:(i.checked=!(!Array.isArray(r)||!~r.indexOf(a)),i.value=a):"radio"===o?(i.checked=r===a,i.value=a):"select"===s&&l&&(i.value=i.value||[],i.multiple=!0)}return i}),[W,z,k.values]),te=(0,l.useMemo)((function(){return!Q_()(f.current,k.values)}),[f.current,k.values]),ne=(0,l.useMemo)((function(){return"undefined"!==typeof s?te?k.errors&&0===Object.keys(k.errors).length:!1!==s&&SN(s)?s(p):s:k.errors&&0===Object.keys(k.errors).length}),[s,te,k.errors,p]);return fN({},k,{initialValues:f.current,initialErrors:m.current,initialTouched:g.current,initialStatus:y.current,handleBlur:W,handleChange:z,handleReset:Q,handleSubmit:K,resetForm:N,setErrors:P,setFormikState:V,setFieldTouched:B,setFieldValue:L,setFieldError:F,setStatus:G,setSubmitting:H,setTouched:D,setValues:M,submitForm:q,validateForm:_,validateField:O,isValid:ne,dirty:te,unregisterField:$,registerField:R,getFieldProps:ee,getFieldMeta:J,getFieldHelpers:Z,validateOnBlur:i,validateOnChange:n,validateOnMount:a})}function PN(e){var t=DN(e),n=e.component,r=e.children,i=e.render,o=e.innerRef;return(0,l.useImperativeHandle)(o,(function(){return t})),(0,l.createElement)(bN,{value:t},n?(0,l.createElement)(n,t):i?i(t):r?SN(r)?r(t):CN(r)?null:l.Children.only(r):null)}function MN(e){var t=Array.isArray(e)?[]:{};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=String(n);!0===Array.isArray(e[r])?t[r]=e[r].map((function(e){return!0===Array.isArray(e)||qT(e)?MN(e):""!==e?e:void 0})):qT(e[r])?t[r]=MN(e[r]):t[r]=""!==e[r]?e[r]:void 0}return t}function FN(e,t,n){var r=e.slice();return t.forEach((function(t,i){if("undefined"===typeof r[i]){var o=!1!==n.clone&&n.isMergeableObject(t);r[i]=o?IT(Array.isArray(t)?[]:{},t,n):t}else n.isMergeableObject(t)?r[i]=IT(e[i],t,n):-1===e.indexOf(t)&&r.push(t)})),r}var LN="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?l.useLayoutEffect:l.useEffect;function jN(e){var t=(0,l.useRef)(e);return LN((function(){t.current=e})),(0,l.useCallback)((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.current.apply(void 0,n)}),[])}function zN(e){var t=e.validate,n=e.name,r=e.render,i=e.children,o=e.as,a=e.component,s=e.className,u=gN(e,["validate","name","render","children","as","component","className"]),c=gN(wN(),["validate","validationSchema"]);var h=c.registerField,d=c.unregisterField;(0,l.useEffect)((function(){return h(n,{validate:t}),function(){d(n)}}),[h,d,n,t]);var p=c.getFieldProps(fN({name:n},u)),f=c.getFieldMeta(n),m={field:p,form:c};if(r)return r(fN({},m,{meta:f}));if(SN(i))return i(fN({},m,{meta:f}));if(a){if("string"===typeof a){var g=u.innerRef,y=gN(u,["innerRef"]);return(0,l.createElement)(a,fN({ref:g},p,y,{className:s}),i)}return(0,l.createElement)(a,fN({field:p,form:c},u,{className:s}),i)}var v=o||"input";if("string"===typeof v){var b=u.innerRef,x=gN(u,["innerRef"]);return(0,l.createElement)(v,fN({ref:b},p,x,{className:s}),i)}return(0,l.createElement)(v,fN({},p,u,{className:s}),i)}var BN=(0,l.forwardRef)((function(e,t){var n=e.action,r=gN(e,["action"]),i=null!=n?n:"#",o=wN(),a=o.handleReset,s=o.handleSubmit;return(0,l.createElement)("form",fN({onSubmit:s,ref:t,onReset:a,action:i},r))}));function UN(e){var t=function(t){return(0,l.createElement)(xN,null,(function(n){return n||J_(!1),(0,l.createElement)(e,fN({},t,{formik:n}))}))},n=e.displayName||e.name||e.constructor&&e.constructor.name||"Component";return t.WrappedComponent=e,t.displayName="FormikConnect("+n+")",po()(t,e)}BN.displayName="Form";var WN=function(e,t,n){var r=VN(e);return r.splice(t,0,n),r},VN=function(e){if(e){if(Array.isArray(e))return[].concat(e);var t=Object.keys(e).map((function(e){return parseInt(e)})).reduce((function(e,t){return t>e?t:e}),0);return Array.from(fN({},e,{length:t+1}))}return[]},GN=function(e,t){var n="function"===typeof e?e:t;return function(e){if(Array.isArray(e)||EN(e)){var t=VN(e);return n(t)}return e}},HN=function(e){function t(t){var n;return(n=e.call(this,t)||this).updateArrayField=function(e,t,r){var i=n.props,o=i.name;(0,i.formik.setFormikState)((function(n){var i=GN(r,e),a=GN(t,e),s=NN(n.values,o,e(_N(n.values,o))),l=r?i(_N(n.errors,o)):void 0,u=t?a(_N(n.touched,o)):void 0;return kN(l)&&(l=void 0),kN(u)&&(u=void 0),fN({},n,{values:s,errors:r?NN(n.errors,o,l):n.errors,touched:t?NN(n.touched,o,u):n.touched})}))},n.push=function(e){return n.updateArrayField((function(t){return[].concat(VN(t),[X_(e)])}),!1,!1)},n.handlePush=function(e){return function(){return n.push(e)}},n.swap=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var r=VN(e),i=r[t];return r[t]=r[n],r[n]=i,r}(n,e,t)}),!0,!0)},n.handleSwap=function(e,t){return function(){return n.swap(e,t)}},n.move=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var r=VN(e),i=r[t];return r.splice(t,1),r.splice(n,0,i),r}(n,e,t)}),!0,!0)},n.handleMove=function(e,t){return function(){return n.move(e,t)}},n.insert=function(e,t){return n.updateArrayField((function(n){return WN(n,e,t)}),(function(t){return WN(t,e,null)}),(function(t){return WN(t,e,null)}))},n.handleInsert=function(e,t){return function(){return n.insert(e,t)}},n.replace=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var r=VN(e);return r[t]=n,r}(n,e,t)}),!1,!1)},n.handleReplace=function(e,t){return function(){return n.replace(e,t)}},n.unshift=function(e){var t=-1;return n.updateArrayField((function(n){var r=n?[e].concat(n):[e];return t=r.length,r}),(function(e){return e?[null].concat(e):[null]}),(function(e){return e?[null].concat(e):[null]})),t},n.handleUnshift=function(e){return function(){return n.unshift(e)}},n.handleRemove=function(e){return function(){return n.remove(e)}},n.handlePop=function(){return function(){return n.pop()}},n.remove=n.remove.bind(yN(n)),n.pop=n.pop.bind(yN(n)),n}mN(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){this.props.validateOnChange&&this.props.formik.validateOnChange&&!Q_()(_N(e.formik.values,e.name),_N(this.props.formik.values,this.props.name))&&this.props.formik.validateForm(this.props.formik.values)},n.remove=function(e){var t;return this.updateArrayField((function(n){var r=n?VN(n):[];return t||(t=r[e]),SN(r.splice)&&r.splice(e,1),SN(r.every)&&r.every((function(e){return void 0===e}))?[]:r}),!0,!0),t},n.pop=function(){var e;return this.updateArrayField((function(t){var n=t.slice();return e||(e=n&&n.pop&&n.pop()),n}),!0,!0),e},n.render=function(){var e={push:this.push,pop:this.pop,swap:this.swap,move:this.move,insert:this.insert,replace:this.replace,unshift:this.unshift,remove:this.remove,handlePush:this.handlePush,handlePop:this.handlePop,handleSwap:this.handleSwap,handleMove:this.handleMove,handleInsert:this.handleInsert,handleReplace:this.handleReplace,handleUnshift:this.handleUnshift,handleRemove:this.handleRemove},t=this.props,n=t.component,r=t.render,i=t.children,o=t.name,a=fN({},e,{form:gN(t.formik,["validate","validationSchema"]),name:o});return n?(0,l.createElement)(n,a):r?r(a):i?"function"===typeof i?i(a):CN(i)?null:l.Children.only(i):null},t}(l.Component);HN.defaultProps={validateOnChange:!0};var qN=UN(function(e){function t(){return e.apply(this,arguments)||this}mN(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(e){return _N(this.props.formik.errors,this.props.name)!==_N(e.formik.errors,this.props.name)||_N(this.props.formik.touched,this.props.name)!==_N(e.formik.touched,this.props.name)||Object.keys(this.props).length!==Object.keys(e).length},n.render=function(){var e=this.props,t=e.component,n=e.formik,r=e.render,i=e.children,o=e.name,a=gN(e,["component","formik","render","children","name"]),s=_N(n.touched,o),u=_N(n.errors,o);return s&&u?r?SN(r)?r(u):null:i?SN(i)?i(u):null:t?(0,l.createElement)(t,a,u):u:null},t}(l.Component)),KN=n(4575),XN=n(1517),YN=n(8704),QN=n.n(YN);const JN=Object.prototype.toString,ZN=Error.prototype.toString,eO=RegExp.prototype.toString,tO="undefined"!==typeof Symbol?Symbol.prototype.toString:()=>"",nO=/^Symbol\((.*)\)(.*)$/;function rO(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e||!0===e||!1===e)return""+e;const n=typeof e;if("number"===n)return function(e){return e!=+e?"NaN":0===e&&1/e<0?"-0":""+e}(e);if("string"===n)return t?`"${e}"`:e;if("function"===n)return"[Function "+(e.name||"anonymous")+"]";if("symbol"===n)return tO.call(e).replace(nO,"Symbol($1)");const r=JN.call(e).slice(8,-1);return"Date"===r?isNaN(e.getTime())?""+e:e.toISOString(e):"Error"===r||e instanceof Error?"["+ZN.call(e)+"]":"RegExp"===r?eO.call(e):null}function iO(e,t){let n=rO(e,t);return null!==n?n:JSON.stringify(e,(function(e,n){let r=rO(this[e],t);return null!==r?r:n}),2)}function oO(e){return null==e?[]:[].concat(e)}let aO,sO,lO,uO=/\$\{\s*(\w+)\s*\}/g;aO=Symbol.toStringTag;class cO{constructor(e,t,n,r){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[aO]="Error",this.name="ValidationError",this.value=t,this.path=n,this.type=r,this.errors=[],this.inner=[],oO(e).forEach((e=>{if(hO.isError(e)){this.errors.push(...e.errors);const t=e.inner.length?e.inner:[e];this.inner.push(...t)}else this.errors.push(e)})),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}sO=Symbol.hasInstance,lO=Symbol.toStringTag;class hO extends Error{static formatError(e,t){const n=t.label||t.path||"this";return n!==t.path&&(t=Object.assign({},t,{path:n})),"string"===typeof e?e.replace(uO,((e,n)=>iO(t[n]))):"function"===typeof e?e(t):e}static isError(e){return e&&"ValidationError"===e.name}constructor(e,t,n,r,i){const o=new cO(e,t,n,r);if(i)return o;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[lO]="Error",this.name=o.name,this.message=o.message,this.type=o.type,this.value=o.value,this.path=o.path,this.errors=o.errors,this.inner=o.inner,Error.captureStackTrace&&Error.captureStackTrace(this,hO)}static[sO](e){return cO[Symbol.hasInstance](e)||super[Symbol.hasInstance](e)}}let dO={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:e=>{let{path:t,type:n,value:r,originalValue:i}=e;const o=null!=i&&i!==r?` (cast from the value \`${iO(i,!0)}\`).`:".";return"mixed"!==n?`${t} must be a \`${n}\` type, but the final value was: \`${iO(r,!0)}\``+o:`${t} must match the configured type. The validated value was: \`${iO(r,!0)}\``+o}},pO={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},fO={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},mO={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},gO={isValue:"${path} field must be ${value}"},yO={noUnknown:"${path} field has unspecified keys: ${unknown}"},vO={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},bO={notType:e=>{const{path:t,value:n,spec:r}=e,i=r.types.length;if(Array.isArray(n)){if(n.length<i)return`${t} tuple value has too few items, expected a length of ${i} but got ${n.length} for value: \`${iO(n,!0)}\``;if(n.length>i)return`${t} tuple value has too many items, expected a length of ${i} but got ${n.length} for value: \`${iO(n,!0)}\``}return hO.formatError(dO.notType,e)}};Object.assign(Object.create(null),{mixed:dO,string:pO,number:fO,date:mO,object:yO,array:vO,boolean:gO,tuple:bO});const xO=e=>e&&e.__isYupSchema__;class wO{static fromOptions(e,t){if(!t.then&&!t.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:n,then:r,otherwise:i}=t,o="function"===typeof n?n:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.every((e=>e===n))};return new wO(e,((e,t)=>{var n;let a=o(...e)?r:i;return null!=(n=null==a?void 0:a(t))?n:t}))}constructor(e,t){this.fn=void 0,this.refs=e,this.refs=e,this.fn=t}resolve(e,t){let n=this.refs.map((e=>e.getValue(null==t?void 0:t.value,null==t?void 0:t.parent,null==t?void 0:t.context))),r=this.fn(n,e,t);if(void 0===r||r===e)return e;if(!xO(r))throw new TypeError("conditions must return a schema object");return r.resolve(t)}}const kO="$",SO=".";class EO{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,"string"!==typeof e)throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),""===e)throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===kO,this.isValue=this.key[0]===SO,this.isSibling=!this.isContext&&!this.isValue;let n=this.isContext?kO:this.isValue?SO:"";this.path=this.key.slice(n.length),this.getter=this.path&&(0,KN.getter)(this.path,!0),this.map=t.map}getValue(e,t,n){let r=this.isContext?n:this.isValue?e:t;return this.getter&&(r=this.getter(r||{})),this.map&&(r=this.map(r)),r}cast(e,t){return this.getValue(e,null==t?void 0:t.parent,null==t?void 0:t.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}EO.prototype.__isYupRef=!0;const IO=e=>null==e;function TO(e){function t(t,n,r){let{value:i,path:o="",options:a,originalValue:s,schema:l}=t;const{name:u,test:c,params:h,message:d,skipAbsent:p}=e;let{parent:f,context:m,abortEarly:g=l.spec.abortEarly,disableStackTrace:y=l.spec.disableStackTrace}=a;function v(e){return EO.isRef(e)?e.getValue(i,f,m):e}function b(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.assign({value:i,originalValue:s,label:l.spec.label,path:e.path||o,spec:l.spec,disableStackTrace:e.disableStackTrace||y},h,e.params);for(const r of Object.keys(t))t[r]=v(t[r]);const n=new hO(hO.formatError(e.message||d,t),i,t.path,e.type||u,t.disableStackTrace);return n.params=t,n}const x=g?n:r;let w={path:o,parent:f,type:u,from:a.from,createError:b,resolve:v,options:a,originalValue:s,schema:l};const k=e=>{hO.isError(e)?x(e):e?r(null):x(b())},S=e=>{hO.isError(e)?x(e):n(e)};if(p&&IO(i))return k(!0);let E;try{var I;if(E=c.call(w,i,w),"function"===typeof(null==(I=E)?void 0:I.then)){if(a.sync)throw new Error(`Validation test of type: "${w.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(E).then(k,S)}}catch(T){return void S(T)}k(E)}return t.OPTIONS=e,t}function CO(e,t,n){let r,i,o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return t?((0,KN.forEach)(t,((s,l,u)=>{let c=l?s.slice(1,s.length-1):s,h="tuple"===(e=e.resolve({context:a,parent:r,value:n})).type,d=u?parseInt(c,10):0;if(e.innerType||h){if(h&&!u)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${o}" must contain an index to the tuple element, e.g. "${o}[0]"`);if(n&&d>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${s}, in the path: ${t}. because there is no value at that index. `);r=n,n=n&&n[d],e=h?e.spec.types[d]:e.innerType}if(!u){if(!e.fields||!e.fields[c])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${o} which is a type: "${e.type}")`);r=n,n=n&&n[c],e=e.fields[c]}i=c,o=l?"["+s+"]":"."+s})),{schema:e,parent:r,parentPath:i}):{parent:r,parentPath:t,schema:e}}class AO extends Set{describe(){const e=[];for(const t of this.values())e.push(EO.isRef(t)?t.describe():t);return e}resolveAll(e){let t=[];for(const n of this.values())t.push(e(n));return t}clone(){return new AO(this.values())}merge(e,t){const n=this.clone();return e.forEach((e=>n.add(e))),t.forEach((e=>n.delete(e))),n}}function _O(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;if(xO(e)||!e||"object"!==typeof e)return e;if(n.has(e))return n.get(e);if(e instanceof Date)t=new Date(e.getTime()),n.set(e,t);else if(e instanceof RegExp)t=new RegExp(e),n.set(e,t);else if(Array.isArray(e)){t=new Array(e.length),n.set(e,t);for(let r=0;r<e.length;r++)t[r]=_O(e[r],n)}else if(e instanceof Map){t=new Map,n.set(e,t);for(const[r,i]of e.entries())t.set(r,_O(i,n))}else if(e instanceof Set){t=new Set,n.set(e,t);for(const r of e)t.add(_O(r,n))}else{if(!(e instanceof Object))throw Error(`Unable to clone ${e}`);t={},n.set(e,t);for(const[r,i]of Object.entries(e))t[r]=_O(i,n)}return t}class NO{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new AO,this._blacklist=new AO,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation((()=>{this.typeError(dO.notType)})),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},null==e?void 0:e.spec),this.withMutation((e=>{e.nonNullable()}))}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeCheck=this._typeCheck,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.internalTests=Object.assign({},this.internalTests),t.exclusiveTests=Object.assign({},this.exclusiveTests),t.deps=[...this.deps],t.conditions=[...this.conditions],t.tests=[...this.tests],t.transforms=[...this.transforms],t.spec=_O(Object.assign({},this.spec,e)),t}label(e){let t=this.clone();return t.spec.label=e,t}meta(){if(0===arguments.length)return this.spec.meta;let e=this.clone();return e.spec.meta=Object.assign(e.spec.meta||{},arguments.length<=0?void 0:arguments[0]),e}withMutation(e){let t=this._mutate;this._mutate=!0;let n=e(this);return this._mutate=t,n}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&"mixed"!==this.type)throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let t=this,n=e.clone();const r=Object.assign({},t.spec,n.spec);return n.spec=r,n.internalTests=Object.assign({},t.internalTests,n.internalTests),n._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),n._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),n.tests=t.tests,n.exclusiveTests=t.exclusiveTests,n.withMutation((t=>{e.tests.forEach((e=>{t.test(e.OPTIONS)}))})),n.transforms=[...t.transforms,...n.transforms],n}isType(e){return null==e?!(!this.spec.nullable||null!==e)||!(!this.spec.optional||void 0!==e):this._typeCheck(e)}resolve(e){let t=this;if(t.conditions.length){let n=t.conditions;t=t.clone(),t.conditions=[],t=n.reduce(((t,n)=>n.resolve(t,e)),t),t=t.resolve(e)}return t}resolveOptions(e){var t,n,r,i;return Object.assign({},e,{from:e.from||[],strict:null!=(t=e.strict)?t:this.spec.strict,abortEarly:null!=(n=e.abortEarly)?n:this.spec.abortEarly,recursive:null!=(r=e.recursive)?r:this.spec.recursive,disableStackTrace:null!=(i=e.disableStackTrace)?i:this.spec.disableStackTrace})}cast(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.resolve(Object.assign({value:e},t)),r="ignore-optionality"===t.assert,i=n._cast(e,t);if(!1!==t.assert&&!n.isType(i)){if(r&&IO(i))return i;let o=iO(e),a=iO(i);throw new TypeError(`The value of ${t.path||"field"} could not be cast to a value that satisfies the schema type: "${n.type}". \n\nattempted value: ${o} \n`+(a!==o?`result of cast: ${a}`:""))}return i}_cast(e,t){let n=void 0===e?e:this.transforms.reduce(((t,n)=>n.call(this,t,e,this)),e);return void 0===n&&(n=this.getDefault(t)),n}_validate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,{path:i,originalValue:o=e,strict:a=this.spec.strict}=t,s=e;a||(s=this._cast(s,Object.assign({assert:!1},t)));let l=[];for(let u of Object.values(this.internalTests))u&&l.push(u);this.runTests({path:i,value:s,originalValue:o,options:t,tests:l},n,(e=>{if(e.length)return r(e,s);this.runTests({path:i,value:s,originalValue:o,options:t,tests:this.tests},n,r)}))}runTests(e,t,n){let r=!1,{tests:i,value:o,originalValue:a,path:s,options:l}=e,u=e=>{r||(r=!0,t(e,o))},c=e=>{r||(r=!0,n(e,o))},h=i.length,d=[];if(!h)return c([]);let p={value:o,originalValue:a,path:s,options:l,schema:this};for(let f=0;f<i.length;f++){(0,i[f])(p,u,(function(e){e&&(Array.isArray(e)?d.push(...e):d.push(e)),--h<=0&&c(d)}))}}asNestedTest(e){let{key:t,index:n,parent:r,parentPath:i,originalParent:o,options:a}=e;const s=null!=t?t:n;if(null==s)throw TypeError("Must include `key` or `index` for nested validations");const l="number"===typeof s;let u=r[s];const c=Object.assign({},a,{strict:!0,parent:r,value:u,originalValue:o[s],key:void 0,[l?"index":"key"]:s,path:l||s.includes(".")?`${i||""}[${l?s:`"${s}"`}]`:(i?`${i}.`:"")+t});return(e,t,n)=>this.resolve(c)._validate(u,c,t,n)}validate(e,t){var n;let r=this.resolve(Object.assign({},t,{value:e})),i=null!=(n=null==t?void 0:t.disableStackTrace)?n:r.spec.disableStackTrace;return new Promise(((n,o)=>r._validate(e,t,((e,t)=>{hO.isError(e)&&(e.value=t),o(e)}),((e,t)=>{e.length?o(new hO(e,t,void 0,void 0,i)):n(t)}))))}validateSync(e,t){var n;let r,i=this.resolve(Object.assign({},t,{value:e})),o=null!=(n=null==t?void 0:t.disableStackTrace)?n:i.spec.disableStackTrace;return i._validate(e,Object.assign({},t,{sync:!0}),((e,t)=>{throw hO.isError(e)&&(e.value=t),e}),((t,n)=>{if(t.length)throw new hO(t,e,void 0,void 0,o);r=n})),r}isValid(e,t){return this.validate(e,t).then((()=>!0),(e=>{if(hO.isError(e))return!1;throw e}))}isValidSync(e,t){try{return this.validateSync(e,t),!0}catch(n){if(hO.isError(n))return!1;throw n}}_getDefault(e){let t=this.spec.default;return null==t?t:"function"===typeof t?t.call(this,e):_O(t)}getDefault(e){return this.resolve(e||{})._getDefault(e)}default(e){if(0===arguments.length)return this._getDefault();return this.clone({default:e})}strict(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.clone({strict:e})}nullability(e,t){const n=this.clone({nullable:e});return n.internalTests.nullable=TO({message:t,name:"nullable",test(e){return null!==e||this.schema.spec.nullable}}),n}optionality(e,t){const n=this.clone({optional:e});return n.internalTests.optionality=TO({message:t,name:"optionality",test(e){return void 0!==e||this.schema.spec.optional}}),n}optional(){return this.optionality(!0)}defined(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dO.defined;return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dO.notNull;return this.nullability(!1,e)}required(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dO.required;return this.clone().withMutation((t=>t.nonNullable(e).defined(e)))}notRequired(){return this.clone().withMutation((e=>e.nullable().optional()))}transform(e){let t=this.clone();return t.transforms.push(e),t}test(){let e;if(e=1===arguments.length?"function"===typeof(arguments.length<=0?void 0:arguments[0])?{test:arguments.length<=0?void 0:arguments[0]}:arguments.length<=0?void 0:arguments[0]:2===arguments.length?{name:arguments.length<=0?void 0:arguments[0],test:arguments.length<=1?void 0:arguments[1]}:{name:arguments.length<=0?void 0:arguments[0],message:arguments.length<=1?void 0:arguments[1],test:arguments.length<=2?void 0:arguments[2]},void 0===e.message&&(e.message=dO.default),"function"!==typeof e.test)throw new TypeError("`test` is a required parameters");let t=this.clone(),n=TO(e),r=e.exclusive||e.name&&!0===t.exclusiveTests[e.name];if(e.exclusive&&!e.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return e.name&&(t.exclusiveTests[e.name]=!!e.exclusive),t.tests=t.tests.filter((t=>{if(t.OPTIONS.name===e.name){if(r)return!1;if(t.OPTIONS.test===n.OPTIONS.test)return!1}return!0})),t.tests.push(n),t}when(e,t){Array.isArray(e)||"string"===typeof e||(t=e,e=".");let n=this.clone(),r=oO(e).map((e=>new EO(e)));return r.forEach((e=>{e.isSibling&&n.deps.push(e.key)})),n.conditions.push("function"===typeof t?new wO(r,t):wO.fromOptions(r,t)),n}typeError(e){let t=this.clone();return t.internalTests.typeError=TO({message:e,name:"typeError",skipAbsent:!0,test(e){return!!this.schema._typeCheck(e)||this.createError({params:{type:this.schema.type}})}}),t}oneOf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dO.oneOf,n=this.clone();return e.forEach((e=>{n._whitelist.add(e),n._blacklist.delete(e)})),n.internalTests.whiteList=TO({message:t,name:"oneOf",skipAbsent:!0,test(e){let t=this.schema._whitelist,n=t.resolveAll(this.resolve);return!!n.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:n}})}}),n}notOneOf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dO.notOneOf,n=this.clone();return e.forEach((e=>{n._blacklist.add(e),n._whitelist.delete(e)})),n.internalTests.blacklist=TO({message:t,name:"notOneOf",test(e){let t=this.schema._blacklist,n=t.resolveAll(this.resolve);return!n.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:n}})}}),n}strip(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.clone();return t.spec.strip=e,t}describe(e){const t=(e?this.resolve(e):this).clone(),{label:n,meta:r,optional:i,nullable:o}=t.spec,a={meta:r,label:n,optional:i,nullable:o,default:t.getDefault(e),type:t.type,oneOf:t._whitelist.describe(),notOneOf:t._blacklist.describe(),tests:t.tests.map((e=>({name:e.OPTIONS.name,params:e.OPTIONS.params}))).filter(((e,t,n)=>n.findIndex((t=>t.name===e.name))===t))};return a}}NO.prototype.__isYupSchema__=!0;for(const n of["validate","validateSync"])NO.prototype[`${n}At`]=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{parent:i,parentPath:o,schema:a}=CO(this,e,t,r.context);return a[n](i&&i[o],Object.assign({},r,{parent:i,path:e}))};for(const n of["equals","is"])NO.prototype[n]=NO.prototype.oneOf;for(const n of["not","nope"])NO.prototype[n]=NO.prototype.notOneOf;const OO=()=>!0;class RO extends NO{constructor(e){super("function"===typeof e?{type:"mixed",check:e}:Object.assign({type:"mixed",check:OO},e))}}RO.prototype;class $O extends NO{constructor(){super({type:"boolean",check:e=>(e instanceof Boolean&&(e=e.valueOf()),"boolean"===typeof e)}),this.withMutation((()=>{this.transform(((e,t,n)=>{if(n.spec.coerce&&!n.isType(e)){if(/^(true|1)$/i.test(String(e)))return!0;if(/^(false|0)$/i.test(String(e)))return!1}return e}))}))}isTrue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gO.isValue;return this.test({message:e,name:"is-value",exclusive:!0,params:{value:"true"},test:e=>IO(e)||!0===e})}isFalse(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gO.isValue;return this.test({message:e,name:"is-value",exclusive:!0,params:{value:"false"},test:e=>IO(e)||!1===e})}default(e){return super.default(e)}defined(e){return super.defined(e)}optional(){return super.optional()}required(e){return super.required(e)}notRequired(){return super.notRequired()}nullable(){return super.nullable()}nonNullable(e){return super.nonNullable(e)}strip(e){return super.strip(e)}}$O.prototype;const DO=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function PO(e){var t,n;const r=DO.exec(e);return r?{year:MO(r[1]),month:MO(r[2],1)-1,day:MO(r[3],1),hour:MO(r[4]),minute:MO(r[5]),second:MO(r[6]),millisecond:r[7]?MO(r[7].substring(0,3)):0,precision:null!=(t=null==(n=r[7])?void 0:n.length)?t:void 0,z:r[8]||void 0,plusMinus:r[9]||void 0,hourOffset:MO(r[10]),minuteOffset:MO(r[11])}:null}function MO(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Number(e)||t}let FO=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,LO=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,jO=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,zO=new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"),BO=e=>IO(e)||e===e.trim(),UO={}.toString();function WO(){return new VO}class VO extends NO{constructor(){super({type:"string",check:e=>(e instanceof String&&(e=e.valueOf()),"string"===typeof e)}),this.withMutation((()=>{this.transform(((e,t,n)=>{if(!n.spec.coerce||n.isType(e))return e;if(Array.isArray(e))return e;const r=null!=e&&e.toString?e.toString():e;return r===UO?e:r}))}))}required(e){return super.required(e).withMutation((t=>t.test({message:e||dO.required,name:"required",skipAbsent:!0,test:e=>!!e.length})))}notRequired(){return super.notRequired().withMutation((e=>(e.tests=e.tests.filter((e=>"required"!==e.OPTIONS.name)),e)))}length(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pO.length;return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(t){return t.length===this.resolve(e)}})}min(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pO.min;return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(t){return t.length>=this.resolve(e)}})}max(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pO.max;return this.test({name:"max",exclusive:!0,message:t,params:{max:e},skipAbsent:!0,test(t){return t.length<=this.resolve(e)}})}matches(e,t){let n,r,i=!1;return t&&("object"===typeof t?({excludeEmptyString:i=!1,message:n,name:r}=t):n=t),this.test({name:r||"matches",message:n||pO.matches,params:{regex:e},skipAbsent:!0,test:t=>""===t&&i||-1!==t.search(e)})}email(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pO.email;return this.matches(FO,{name:"email",message:e,excludeEmptyString:!0})}url(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pO.url;return this.matches(LO,{name:"url",message:e,excludeEmptyString:!0})}uuid(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pO.uuid;return this.matches(jO,{name:"uuid",message:e,excludeEmptyString:!1})}datetime(e){let t,n,r="";return e&&("object"===typeof e?({message:r="",allowOffset:t=!1,precision:n}=e):r=e),this.matches(zO,{name:"datetime",message:r||pO.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:r||pO.datetime_offset,params:{allowOffset:t},skipAbsent:!0,test:e=>{if(!e||t)return!0;const n=PO(e);return!!n&&!!n.z}}).test({name:"datetime_precision",message:r||pO.datetime_precision,params:{precision:n},skipAbsent:!0,test:e=>{if(!e||void 0==n)return!0;const t=PO(e);return!!t&&t.precision===n}})}ensure(){return this.default("").transform((e=>null===e?"":e))}trim(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pO.trim;return this.transform((e=>null!=e?e.trim():e)).test({message:e,name:"trim",test:BO})}lowercase(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pO.lowercase;return this.transform((e=>IO(e)?e:e.toLowerCase())).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:e=>IO(e)||e===e.toLowerCase()})}uppercase(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pO.uppercase;return this.transform((e=>IO(e)?e:e.toUpperCase())).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:e=>IO(e)||e===e.toUpperCase()})}}WO.prototype=VO.prototype;function GO(){return new HO}class HO extends NO{constructor(){super({type:"number",check:e=>(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&!(e=>e!=+e)(e))}),this.withMutation((()=>{this.transform(((e,t,n)=>{if(!n.spec.coerce)return e;let r=e;if("string"===typeof r){if(r=r.replace(/\s/g,""),""===r)return NaN;r=+r}return n.isType(r)||null===r?r:parseFloat(r)}))}))}min(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fO.min;return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(t){return t>=this.resolve(e)}})}max(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fO.max;return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(t){return t<=this.resolve(e)}})}lessThan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fO.lessThan;return this.test({message:t,name:"max",exclusive:!0,params:{less:e},skipAbsent:!0,test(t){return t<this.resolve(e)}})}moreThan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fO.moreThan;return this.test({message:t,name:"min",exclusive:!0,params:{more:e},skipAbsent:!0,test(t){return t>this.resolve(e)}})}positive(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fO.positive;return this.moreThan(0,e)}negative(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fO.negative;return this.lessThan(0,e)}integer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fO.integer;return this.test({name:"integer",message:e,skipAbsent:!0,test:e=>Number.isInteger(e)})}truncate(){return this.transform((e=>IO(e)?e:0|e))}round(e){var t;let n=["ceil","floor","round","trunc"];if("trunc"===(e=(null==(t=e)?void 0:t.toLowerCase())||"round"))return this.truncate();if(-1===n.indexOf(e.toLowerCase()))throw new TypeError("Only valid options for round() are: "+n.join(", "));return this.transform((t=>IO(t)?t:Math[e](t)))}}GO.prototype=HO.prototype;let qO=new Date("");function KO(){return new XO}class XO extends NO{constructor(){super({type:"date",check(e){return t=e,"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(e.getTime());var t}}),this.withMutation((()=>{this.transform(((e,t,n)=>!n.spec.coerce||n.isType(e)||null===e?e:(e=function(e){const t=PO(e);if(!t)return Date.parse?Date.parse(e):Number.NaN;if(void 0===t.z&&void 0===t.plusMinus)return new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond).valueOf();let n=0;return"Z"!==t.z&&void 0!==t.plusMinus&&(n=60*t.hourOffset+t.minuteOffset,"+"===t.plusMinus&&(n=0-n)),Date.UTC(t.year,t.month,t.day,t.hour,t.minute+n,t.second,t.millisecond)}(e),isNaN(e)?XO.INVALID_DATE:new Date(e))))}))}prepareParam(e,t){let n;if(EO.isRef(e))n=e;else{let r=this.cast(e);if(!this._typeCheck(r))throw new TypeError(`\`${t}\` must be a Date or a value that can be \`cast()\` to a Date`);n=r}return n}min(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mO.min,n=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(e){return e>=this.resolve(n)}})}max(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mO.max,n=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(e){return e<=this.resolve(n)}})}}function YO(e,t){let n=1/0;return e.some(((e,r)=>{var i;if(null!=(i=t.path)&&i.includes(e))return n=r,!0})),n}function QO(e){return(t,n)=>YO(e,t)-YO(e,n)}XO.INVALID_DATE=qO,KO.prototype=XO.prototype,KO.INVALID_DATE=qO;const JO=(e,t,n)=>{if("string"!==typeof e)return e;let r=e;try{r=JSON.parse(e)}catch(i){}return n.isType(r)?r:e};function ZO(e){if("fields"in e){const t={};for(const[n,r]of Object.entries(e.fields))t[n]=ZO(r);return e.setFields(t)}if("array"===e.type){const t=e.optional();return t.innerType&&(t.innerType=ZO(t.innerType)),t}return"tuple"===e.type?e.optional().clone({types:e.spec.types.map(ZO)}):"optional"in e?e.optional():e}let eR=e=>"[object Object]"===Object.prototype.toString.call(e);const tR=QO([]);function nR(e){return new rR(e)}class rR extends NO{constructor(e){super({type:"object",check:e=>eR(e)||"function"===typeof e}),this.fields=Object.create(null),this._sortErrors=tR,this._nodes=[],this._excludedEdges=[],this.withMutation((()=>{e&&this.shape(e)}))}_cast(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;let r=super._cast(e,t);if(void 0===r)return this.getDefault(t);if(!this._typeCheck(r))return r;let i=this.fields,o=null!=(n=t.stripUnknown)?n:this.spec.noUnknown,a=[].concat(this._nodes,Object.keys(r).filter((e=>!this._nodes.includes(e)))),s={},l=Object.assign({},t,{parent:s,__validating:t.__validating||!1}),u=!1;for(const c of a){let e=i[c],n=c in r;if(e){let n,i=r[c];l.path=(t.path?`${t.path}.`:"")+c,e=e.resolve({value:i,context:t.context,parent:s});let o=e instanceof NO?e.spec:void 0,a=null==o?void 0:o.strict;if(null!=o&&o.strip){u=u||c in r;continue}n=t.__validating&&a?r[c]:e.cast(r[c],l),void 0!==n&&(s[c]=n)}else n&&!o&&(s[c]=r[c]);n===c in s&&s[c]===r[c]||(u=!0)}return u?s:r}_validate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,{from:i=[],originalValue:o=e,recursive:a=this.spec.recursive}=t;t.from=[{schema:this,value:o},...i],t.__validating=!0,t.originalValue=o,super._validate(e,t,n,((e,i)=>{if(!a||!eR(i))return void r(e,i);o=o||i;let s=[];for(let n of this._nodes){let e=this.fields[n];e&&!EO.isRef(e)&&s.push(e.asNestedTest({options:t,key:n,parent:i,parentPath:t.path,originalParent:o}))}this.runTests({tests:s,value:i,originalValue:o,options:t},n,(t=>{r(t.sort(this._sortErrors).concat(e),i)}))}))}clone(e){const t=super.clone(e);return t.fields=Object.assign({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}concat(e){let t=super.concat(e),n=t.fields;for(let[r,i]of Object.entries(this.fields)){const e=n[r];n[r]=void 0===e?i:e}return t.withMutation((t=>t.setFields(n,[...this._excludedEdges,...e._excludedEdges])))}_getDefault(e){if("default"in this.spec)return super._getDefault(e);if(!this._nodes.length)return;let t={};return this._nodes.forEach((n=>{var r;const i=this.fields[n];let o=e;null!=(r=o)&&r.value&&(o=Object.assign({},o,{parent:o.value,value:o.value[n]})),t[n]=i&&"getDefault"in i?i.getDefault(o):void 0})),t}setFields(e,t){let n=this.clone();return n.fields=e,n._nodes=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=new Set,i=new Set(t.map((e=>{let[t,n]=e;return`${t}-${n}`})));function o(e,t){let o=(0,KN.split)(e)[0];r.add(o),i.has(`${t}-${o}`)||n.push([t,o])}for(const a of Object.keys(e)){let t=e[a];r.add(a),EO.isRef(t)&&t.isSibling?o(t.path,a):xO(t)&&"deps"in t&&t.deps.forEach((e=>o(e,a)))}return QN().array(Array.from(r),n).reverse()}(e,t),n._sortErrors=QO(Object.keys(e)),t&&(n._excludedEdges=t),n}shape(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.clone().withMutation((n=>{let r=n._excludedEdges;return t.length&&(Array.isArray(t[0])||(t=[t]),r=[...n._excludedEdges,...t]),n.setFields(Object.assign(n.fields,e),r)}))}partial(){const e={};for(const[t,n]of Object.entries(this.fields))e[t]="optional"in n&&n.optional instanceof Function?n.optional():n;return this.setFields(e)}deepPartial(){return ZO(this)}pick(e){const t={};for(const n of e)this.fields[n]&&(t[n]=this.fields[n]);return this.setFields(t,this._excludedEdges.filter((t=>{let[n,r]=t;return e.includes(n)&&e.includes(r)})))}omit(e){const t=[];for(const n of Object.keys(this.fields))e.includes(n)||t.push(n);return this.pick(t)}from(e,t,n){let r=(0,KN.getter)(e,!0);return this.transform((i=>{if(!i)return i;let o=i;return((e,t)=>{const n=[...(0,KN.normalizePath)(t)];if(1===n.length)return n[0]in e;let r=n.pop(),i=(0,KN.getter)((0,KN.join)(n),!0)(e);return!(!i||!(r in i))})(i,e)&&(o=Object.assign({},i),n||delete o[e],o[t]=r(i)),o}))}json(){return this.transform(JO)}noUnknown(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yO.noUnknown;"boolean"!==typeof e&&(t=e,e=!0);let n=this.test({name:"noUnknown",exclusive:!0,message:t,test(t){if(null==t)return!0;const n=function(e,t){let n=Object.keys(e.fields);return Object.keys(t).filter((e=>-1===n.indexOf(e)))}(this.schema,t);return!e||0===n.length||this.createError({params:{unknown:n.join(", ")}})}});return n.spec.noUnknown=e,n}unknown(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yO.noUnknown;return this.noUnknown(!e,t)}transformKeys(e){return this.transform((t=>{if(!t)return t;const n={};for(const r of Object.keys(t))n[e(r)]=t[r];return n}))}camelCase(){return this.transformKeys(XN.camelCase)}snakeCase(){return this.transformKeys(XN.snakeCase)}constantCase(){return this.transformKeys((e=>(0,XN.snakeCase)(e).toUpperCase()))}describe(e){const t=(e?this.resolve(e):this).clone(),n=super.describe(e);n.fields={};for(const[i,o]of Object.entries(t.fields)){var r;let t=e;null!=(r=t)&&r.value&&(t=Object.assign({},t,{parent:t.value,value:t.value[i]})),n.fields[i]=o.describe(t)}return n}}nR.prototype=rR.prototype;class iR extends NO{constructor(e){super({type:"array",spec:{types:e},check:e=>Array.isArray(e)}),this.innerType=void 0,this.innerType=e}_cast(e,t){const n=super._cast(e,t);if(!this._typeCheck(n)||!this.innerType)return n;let r=!1;const i=n.map(((e,n)=>{const i=this.innerType.cast(e,Object.assign({},t,{path:`${t.path||""}[${n}]`}));return i!==e&&(r=!0),i}));return r?i:n}_validate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;var i;let o=this.innerType,a=null!=(i=t.recursive)?i:this.spec.recursive;null!=t.originalValue&&t.originalValue,super._validate(e,t,n,((i,s)=>{var l;if(!a||!o||!this._typeCheck(s))return void r(i,s);let u=new Array(s.length);for(let n=0;n<s.length;n++){var c;u[n]=o.asNestedTest({options:t,index:n,parent:s,parentPath:t.path,originalParent:null!=(c=t.originalValue)?c:e})}this.runTests({value:s,tests:u,originalValue:null!=(l=t.originalValue)?l:e,options:t},n,(e=>r(e.concat(i),s)))}))}clone(e){const t=super.clone(e);return t.innerType=this.innerType,t}json(){return this.transform(JO)}concat(e){let t=super.concat(e);return t.innerType=this.innerType,e.innerType&&(t.innerType=t.innerType?t.innerType.concat(e.innerType):e.innerType),t}of(e){let t=this.clone();if(!xO(e))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+iO(e));return t.innerType=e,t.spec=Object.assign({},t.spec,{types:e}),t}length(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vO.length;return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(t){return t.length===this.resolve(e)}})}min(e,t){return t=t||vO.min,this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(t){return t.length>=this.resolve(e)}})}max(e,t){return t=t||vO.max,this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(t){return t.length<=this.resolve(e)}})}ensure(){return this.default((()=>[])).transform(((e,t)=>this._typeCheck(e)?e:null==t?[]:[].concat(t)))}compact(e){let t=e?(t,n,r)=>!e(t,n,r):e=>!!e;return this.transform((e=>null!=e?e.filter(t):e))}describe(e){const t=(e?this.resolve(e):this).clone(),n=super.describe(e);if(t.innerType){var r;let i=e;null!=(r=i)&&r.value&&(i=Object.assign({},i,{parent:i.value,value:i.value[0]})),n.innerType=t.innerType.describe(i)}return n}}iR.prototype;class oR extends NO{constructor(e){super({type:"tuple",spec:{types:e},check(e){const t=this.spec.types;return Array.isArray(e)&&e.length===t.length}}),this.withMutation((()=>{this.typeError(bO.notType)}))}_cast(e,t){const{types:n}=this.spec,r=super._cast(e,t);if(!this._typeCheck(r))return r;let i=!1;const o=n.map(((e,n)=>{const o=e.cast(r[n],Object.assign({},t,{path:`${t.path||""}[${n}]`}));return o!==r[n]&&(i=!0),o}));return i?o:r}_validate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=this.spec.types;super._validate(e,t,n,((o,a)=>{var s;if(!this._typeCheck(a))return void r(o,a);let l=[];for(let[n,r]of i.entries()){var u;l[n]=r.asNestedTest({options:t,index:n,parent:a,parentPath:t.path,originalParent:null!=(u=t.originalValue)?u:e})}this.runTests({value:a,tests:l,originalValue:null!=(s=t.originalValue)?s:e,options:t},n,(e=>r(e.concat(o),a)))}))}describe(e){const t=(e?this.resolve(e):this).clone(),n=super.describe(e);return n.innerType=t.spec.types.map(((t,n)=>{var r;let i=e;return null!=(r=i)&&r.value&&(i=Object.assign({},i,{parent:i.value,value:i.value[n]})),t.describe(i)})),n}}oR.prototype;const aR=fu((0,Lr.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff"),sR=fu((0,Lr.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility"),lR=()=>{const[e,t]=(0,l.useState)(!1),[n,r]=(0,l.useState)(!1),i=ie(),o=hg(),a=nR().shape({email:WO().email("Invalid email").required("Email is required"),password:WO().required("Password is required").min(6,"Password must be at least 6 characters")});return(0,Lr.jsx)(io,{maxWidth:"sm",style:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,Lr.jsxs)(co,{sx:{backgroundColor:"#f0f0f0",padding:"30px",borderRadius:"10px",boxShadow:"0px 4px 10px rgba(0, 0, 0, 0.1)",textAlign:"center",width:"100%",maxWidth:"400px"},children:[(0,Lr.jsx)($o,{variant:"h4",gutterBottom:!0,children:"Welcome to Daily Expense Tracker"}),(0,Lr.jsx)(PN,{initialValues:{email:"",password:""},validationSchema:a,onSubmit:async(e,t)=>{let{setSubmitting:n,setErrors:a}=t;r(!0);try{const t=await function(e,t,n){return ud(e.app)?Promise.reject(Pd(e)):Sf(Yc(e),lf.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Ef(e),t}))}(yT,e.email,e.password),n=t.user,r=xI(bT,"users",n.uid),a=await function(e){e=dI(e,yI);const t=dI(e.firestore,kI);return iI(SI(t),e._key).then((n=>mT(t,e,n)))}(r);if(a.exists()){const e=a.data();o(By({uid:n.uid,fullName:e.fullName||"Unknown",email:n.email,profession:e.profession||"Unknown"})),i("/dashboard")}else console.error("No such user document!"),alert("User document not found.")}catch(s){console.error("Error signing in: ",s),a({email:s.message})}finally{r(!1),n(!1)}},children:r=>{let{handleSubmit:i,handleChange:o,handleBlur:a,values:s,errors:l,touched:u,isSubmitting:c}=r;return(0,Lr.jsxs)("form",{onSubmit:i,children:[(0,Lr.jsx)(Tu,{label:"Email",type:"email",name:"email",value:s.email,onChange:o,onBlur:a,fullWidth:!0,margin:"normal",required:!0,error:u.email&&Boolean(l.email),helperText:u.email&&l.email}),(0,Lr.jsx)(Tu,{label:"Password",type:e?"text":"password",name:"password",value:s.password,onChange:o,onBlur:a,fullWidth:!0,margin:"normal",required:!0,error:u.password&&Boolean(l.password),helperText:u.password&&l.password,InputProps:{endAdornment:(0,Lr.jsx)(Ru,{position:"end",children:(0,Lr.jsx)(ic,{onClick:()=>t((e=>!e)),edge:"end",children:e?(0,Lr.jsx)(aR,{}):(0,Lr.jsx)(sR,{})})})}}),(0,Lr.jsx)(fc,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,sx:{marginBottom:"20px"},disabled:n||c,children:n?(0,Lr.jsx)(Ic,{size:24,color:"inherit"}):"Login"})]})}}),(0,Lr.jsx)(fc,{variant:"contained",color:"secondary",onClick:async()=>{try{const e=await nm(yT,vT),{displayName:t,email:n,uid:r}=e.user;o(By({uid:r,fullName:t,email:n,profession:"Unknown"})),i("/dashboard")}catch(e){console.error("Error signing in: ",e)}},fullWidth:!0,children:"Sign in with Google"}),(0,Lr.jsx)(fc,{variant:"text",color:"primary",onClick:()=>{i("/signup")},fullWidth:!0,sx:{marginTop:"10px"},children:"Sign Up"})]})})},uR=fu((0,Lr.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack"),cR=nR({fullName:WO().matches(/^[A-Za-z\s'-]+$/,"Full Name can only contain letters, spaces, hyphens, and apostrophes").required("Full Name is required"),email:WO().email("Invalid email address").required("Email is required"),profession:WO().matches(/^[A-Za-z\s'-]+$/,"Profession can only contain letters, spaces, hyphens, and apostrophes").required("Profession is required"),password:WO().min(6,"Password must be at least 6 characters").required("Password is required")}),hR=()=>{const[e,t]=(0,l.useState)(!1),n=ie();return(0,Lr.jsxs)(io,{maxWidth:"sm",children:[(0,Lr.jsxs)(co,{sx:{mt:2,display:"flex",alignItems:"center"},children:[(0,Lr.jsx)(ic,{onClick:()=>n(-1),edge:"start",children:(0,Lr.jsx)(uR,{})}),(0,Lr.jsx)($o,{variant:"h4",sx:{flexGrow:1,textAlign:"center"},children:"Register"})]}),(0,Lr.jsxs)(co,{sx:{mt:2},children:[(0,Lr.jsx)(PN,{initialValues:{fullName:"",email:"",profession:"",password:""},validationSchema:cR,onSubmit:async(e,n)=>{let{resetForm:r}=n;const{fullName:i,email:o,profession:a,password:s}=e;t(!0);try{const e=await async function(e,t,n){if(ud(e.app))return Promise.reject(Pd(e));const r=Bp(e),i=Kp(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",mf),o=await i.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Ef(e),t})),a=await gf._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}(yT,o,s),t=e.user;await pT(xI(bT,"users",t.uid),{fullName:i,email:o,profession:a}),r(),alert("User registered successfully!")}catch(l){console.error("Error registering user:",l),alert(l.message)}finally{t(!1)}},children:t=>{let{handleSubmit:n,handleChange:r,values:i}=t;return(0,Lr.jsxs)(BN,{onSubmit:n,children:[(0,Lr.jsxs)(co,{sx:{mb:2},children:[(0,Lr.jsx)(Tu,{label:"Full Name",name:"fullName",fullWidth:!0,value:i.fullName,onChange:r,error:!!i.fullName&&!cR.isValidSync({fullName:i.fullName})}),(0,Lr.jsx)(qN,{name:"fullName",component:"div",style:{color:"red"}})]}),(0,Lr.jsxs)(co,{sx:{mb:2},children:[(0,Lr.jsx)(Tu,{label:"Email",name:"email",fullWidth:!0,value:i.email,onChange:r,error:!!i.email&&!cR.isValidSync({email:i.email})}),(0,Lr.jsx)(qN,{name:"email",component:"div",style:{color:"red"}})]}),(0,Lr.jsxs)(co,{sx:{mb:2},children:[(0,Lr.jsx)(Tu,{label:"Profession",name:"profession",fullWidth:!0,value:i.profession,onChange:r,error:!!i.profession&&!cR.isValidSync({profession:i.profession})}),(0,Lr.jsx)(qN,{name:"profession",component:"div",style:{color:"red"}})]}),(0,Lr.jsxs)(co,{sx:{mb:2},children:[(0,Lr.jsx)(Tu,{label:"Password",name:"password",type:"password",fullWidth:!0,value:i.password,onChange:r,error:!!i.password&&!cR.isValidSync({password:i.password})}),(0,Lr.jsx)(qN,{name:"password",component:"div",style:{color:"red"}})]}),(0,Lr.jsx)(fc,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,disabled:e,children:e?(0,Lr.jsx)(Ic,{size:24}):"Register"})]})}}),(0,Lr.jsx)(co,{sx:{mt:2},children:(0,Lr.jsx)(fc,{variant:"outlined",color:"secondary",fullWidth:!0,onClick:async()=>{const e=new df;t(!0);try{const t=(await nm(yT,e)).user;await pT(xI(bT,"users",t.uid),{fullName:t.displayName,email:t.email,profession:"Not specified"},{merge:!0}),alert("User signed in with Google!")}catch(n){console.error("Error during Google sign-in:",n),alert(n.message)}finally{t(!1)}},disabled:e,children:"Sign in with Google"})})]})]})};const dR=l.createContext();function pR(e){return Ae("MuiGrid",e)}const fR=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],mR=ao("MuiGrid",["root","container","item","zeroMinWidth",...[0,1,2,3,4,5,6,7,8,9,10].map((e=>`spacing-xs-${e}`)),...["column-reverse","column","row-reverse","row"].map((e=>`direction-xs-${e}`)),...["nowrap","wrap-reverse","wrap"].map((e=>`wrap-xs-${e}`)),...fR.map((e=>`grid-xs-${e}`)),...fR.map((e=>`grid-sm-${e}`)),...fR.map((e=>`grid-md-${e}`)),...fR.map((e=>`grid-lg-${e}`)),...fR.map((e=>`grid-xl-${e}`))]),gR=mR;function yR(e){let{breakpoints:t,values:n}=e,r="";Object.keys(n).forEach((e=>{""===r&&0!==n[e]&&(r=e)}));const i=Object.keys(t).sort(((e,n)=>t[e]-t[n]));return i.slice(0,i.indexOf(r))}const vR=to("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{container:r,direction:i,item:o,spacing:a,wrap:s,zeroMinWidth:l,breakpoints:u}=n;let c=[];r&&(c=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[n[`spacing-xs-${String(e)}`]];const r=[];return t.forEach((t=>{const i=e[t];Number(i)>0&&r.push(n[`spacing-${t}-${String(i)}`])})),r}(a,u,t));const h=[];return u.forEach((e=>{const r=n[e];r&&h.push(t[`grid-${e}-${String(r)}`])})),[t.root,r&&t.container,o&&t.item,l&&t.zeroMinWidth,...c,"row"!==i&&t[`direction-xs-${String(i)}`],"wrap"!==s&&t[`wrap-xs-${String(s)}`],...h]}})((e=>{let{ownerState:t}=e;return{boxSizing:"border-box",...t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},...t.item&&{margin:0},...t.zeroMinWidth&&{minWidth:0},..."wrap"!==t.wrap&&{flexWrap:t.wrap}}}),(function(e){let{theme:t,ownerState:n}=e;return Be({theme:t},Ve({values:n.direction,breakpoints:t.breakpoints.values}),(e=>{const t={flexDirection:e};return e.startsWith("column")&&(t[`& > .${gR.item}`]={maxWidth:"none"}),t}))}),(function(e){let{theme:t,ownerState:n}=e;const{container:r,rowSpacing:i}=n;let o={};if(r&&0!==i){const e=Ve({values:i,breakpoints:t.breakpoints.values});let n;"object"===typeof e&&(n=yR({breakpoints:t.breakpoints.values,values:e})),o=Be({theme:t},e,((e,r)=>{const i=t.spacing(e);return"0px"!==i?{marginTop:t.spacing(-e),[`& > .${gR.item}`]:{paddingTop:i}}:n?.includes(r)?{}:{marginTop:0,[`& > .${gR.item}`]:{paddingTop:0}}}))}return o}),(function(e){let{theme:t,ownerState:n}=e;const{container:r,columnSpacing:i}=n;let o={};if(r&&0!==i){const e=Ve({values:i,breakpoints:t.breakpoints.values});let n;"object"===typeof e&&(n=yR({breakpoints:t.breakpoints.values,values:e})),o=Be({theme:t},e,((e,r)=>{const i=t.spacing(e);if("0px"!==i){return{width:`calc(100% + ${i})`,marginLeft:t.spacing(-e),[`& > .${gR.item}`]:{paddingLeft:i}}}return n?.includes(r)?{}:{width:"100%",marginLeft:0,[`& > .${gR.item}`]:{paddingLeft:0}}}))}return o}),(function(e){let t,{theme:n,ownerState:r}=e;return n.breakpoints.keys.reduce(((e,i)=>{let o={};if(r[i]&&(t=r[i]),!t)return e;if(!0===t)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===t)o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const a=Ve({values:r.columns,breakpoints:n.breakpoints.values}),s="object"===typeof a?a[i]:a;if(void 0===s||null===s)return e;const l=Math.round(t/s*1e8)/1e6+"%";let u={};if(r.container&&r.item&&0!==r.columnSpacing){const e=n.spacing(r.columnSpacing);if("0px"!==e){const t=`calc(${l} + ${e})`;u={flexBasis:t,maxWidth:t}}}o={flexBasis:l,flexGrow:0,maxWidth:l,...u}}return 0===n.breakpoints.values[i]?Object.assign(e,o):e[n.breakpoints.up(i)]=o,e}),{})}));const bR=e=>{const{classes:t,container:n,direction:r,item:i,spacing:o,wrap:a,zeroMinWidth:s,breakpoints:l}=e;let u=[];n&&(u=function(e,t){if(!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[`spacing-xs-${String(e)}`];const n=[];return t.forEach((t=>{const r=e[t];if(Number(r)>0){const e=`spacing-${t}-${String(r)}`;n.push(e)}})),n}(o,l));const c=[];l.forEach((t=>{const n=e[t];n&&c.push(`grid-${t}-${String(n)}`)}));return _e({root:["root",n&&"container",i&&"item",s&&"zeroMinWidth",...u,"row"!==r&&`direction-xs-${String(r)}`,"wrap"!==a&&`wrap-xs-${String(a)}`,...c]},pR,t)},xR=l.forwardRef((function(e,t){const n=no({props:e,name:"MuiGrid"}),{breakpoints:r}=Gs(),i=oo(n),{className:o,columns:a,columnSpacing:s,component:u="div",container:c=!1,direction:h="row",item:d=!1,rowSpacing:p,spacing:f=0,wrap:m="wrap",zeroMinWidth:g=!1,...y}=i,v=p||f,b=s||f,x=l.useContext(dR),w=c?a||12:x,k={},S={...y};r.keys.forEach((e=>{null!=y[e]&&(k[e]=y[e],delete S[e])}));const E={...i,columns:w,container:c,direction:h,item:d,rowSpacing:v,columnSpacing:b,wrap:m,zeroMinWidth:g,spacing:f,...k,breakpoints:r.keys},I=bR(E);return(0,Lr.jsx)(dR.Provider,{value:w,children:(0,Lr.jsx)(vR,{ownerState:E,className:Se(I.root,o),as:u,ref:t,...S})})}));const wR=xR;const kR=ao("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const SR=ao("MuiListItemIcon",["root","alignItemsFlexStart"]);const ER=ao("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function IR(e){return Ae("MuiMenuItem",e)}const TR=ao("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),CR=to(Zu,{shouldForwardProp:e=>eo(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})(ko((e=>{let{theme:t}=e;return{...t.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${TR.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Yr(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${TR.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:Yr(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${TR.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Yr(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Yr(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${TR.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${TR.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${kR.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${kR.inset}`]:{marginLeft:52},[`& .${ER.root}`]:{marginTop:0,marginBottom:0},[`& .${ER.inset}`]:{paddingLeft:36},[`& .${SR.root}`]:{minWidth:36},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:e=>{let{ownerState:t}=e;return!t.dense},style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:e=>{let{ownerState:t}=e;return t.dense},style:{minHeight:32,paddingTop:4,paddingBottom:4,...t.typography.body2,[`& .${SR.root} svg`]:{fontSize:"1.25rem"}}}]}}))),AR=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiMenuItem"}),{autoFocus:r=!1,component:i="li",dense:o=!1,divider:a=!1,disableGutters:s=!1,focusVisibleClassName:u,role:c="menuitem",tabIndex:h,className:d,...p}=n,f=l.useContext(cs),m=l.useMemo((()=>({dense:o||f.dense||!1,disableGutters:s})),[f.dense,o,s]),g=l.useRef(null);Jo((()=>{r&&g.current&&g.current.focus()}),[r]);const y={...n,dense:m.dense,divider:a,disableGutters:s},v=(e=>{const{disabled:t,dense:n,divider:r,disableGutters:i,selected:o,classes:a}=e,s=_e({root:["root",n&&"dense",t&&"disabled",!i&&"gutters",r&&"divider",o&&"selected"]},IR,a);return{...a,...s}})(n),b=Qo(g,t);let x;return n.disabled||(x=void 0!==h?h:-1),(0,Lr.jsx)(cs.Provider,{value:m,children:(0,Lr.jsx)(CR,{ref:b,role:c,tabIndex:x,component:i,focusVisibleClassName:Se(v.focusVisible,u),className:Se(v.root,d),...p,ownerState:y,classes:v})})})),_R=AR;function NR(e){return Ae("MuiTableContainer",e)}ao("MuiTableContainer",["root"]);const OR=to("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,t)=>t.root})({width:"100%",overflowX:"auto"}),RR=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiTableContainer"}),{className:r,component:i="div",...o}=n,a={...n,component:i},s=(e=>{const{classes:t}=e;return _e({root:["root"]},NR,t)})(a);return(0,Lr.jsx)(OR,{ref:t,as:i,className:Se(s.root,r),ownerState:a,...o})}));const $R=l.createContext();function DR(e){return Ae("MuiTable",e)}ao("MuiTable",["root","stickyHeader"]);const PR=to("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.stickyHeader&&t.stickyHeader]}})(ko((e=>{let{theme:t}=e;return{display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...t.typography.body2,padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:e=>{let{ownerState:t}=e;return t.stickyHeader},style:{borderCollapse:"separate"}}]}}))),MR="table",FR=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiTable"}),{className:r,component:i=MR,padding:o="normal",size:a="medium",stickyHeader:s=!1,...u}=n,c={...n,component:i,padding:o,size:a,stickyHeader:s},h=(e=>{const{classes:t,stickyHeader:n}=e;return _e({root:["root",n&&"stickyHeader"]},DR,t)})(c),d=l.useMemo((()=>({padding:o,size:a,stickyHeader:s})),[o,a,s]);return(0,Lr.jsx)($R.Provider,{value:d,children:(0,Lr.jsx)(PR,{as:i,role:i===MR?null:"table",ref:t,className:Se(h.root,r),ownerState:c,...u})})})),LR=FR;const jR=l.createContext();function zR(e){return Ae("MuiTableHead",e)}ao("MuiTableHead",["root"]);const BR=to("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),UR={variant:"head"},WR="thead",VR=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiTableHead"}),{className:r,component:i=WR,...o}=n,a={...n,component:i},s=(e=>{const{classes:t}=e;return _e({root:["root"]},zR,t)})(a);return(0,Lr.jsx)(jR.Provider,{value:UR,children:(0,Lr.jsx)(BR,{as:i,className:Se(s.root,r),ref:t,role:i===WR?null:"rowgroup",ownerState:a,...o})})}));function GR(e){return Ae("MuiTableRow",e)}const HR=ao("MuiTableRow",["root","selected","hover","head","footer"]),qR=to("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.head&&t.head,n.footer&&t.footer]}})(ko((e=>{let{theme:t}=e;return{color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${HR.hover}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${HR.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Yr(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Yr(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)}}}}))),KR="tr",XR=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiTableRow"}),{className:r,component:i=KR,hover:o=!1,selected:a=!1,...s}=n,u=l.useContext(jR),c={...n,component:i,hover:o,selected:a,head:u&&"head"===u.variant,footer:u&&"footer"===u.variant},h=(e=>{const{classes:t,selected:n,hover:r,head:i,footer:o}=e;return _e({root:["root",n&&"selected",r&&"hover",i&&"head",o&&"footer"]},GR,t)})(c);return(0,Lr.jsx)(qR,{as:i,ref:t,className:Se(h.root,r),role:i===KR?null:"row",ownerState:c,...s})})),YR=XR;function QR(e){return Ae("MuiTableCell",e)}const JR=ao("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),ZR=to("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${Ur(n.size)}`],"normal"!==n.padding&&t[`padding${Ur(n.padding)}`],"inherit"!==n.align&&t[`align${Ur(n.align)}`],n.stickyHeader&&t.stickyHeader]}})(ko((e=>{let{theme:t}=e;return{...t.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?`1px solid ${t.vars.palette.TableCell.border}`:`1px solid\n    ${"light"===t.palette.mode?ei(Yr(t.palette.divider,1),.88):Jr(Yr(t.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(t.vars||t).palette.text.primary}},{props:{variant:"footer"},style:{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${JR.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:e=>{let{ownerState:t}=e;return t.stickyHeader},style:{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default}}]}}))),e$=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiTableCell"}),{align:r="inherit",className:i,component:o,padding:a,scope:s,size:u,sortDirection:c,variant:h,...d}=n,p=l.useContext($R),f=l.useContext(jR),m=f&&"head"===f.variant;let g;g=o||(m?"th":"td");let y=s;"td"===g?y=void 0:!y&&m&&(y="col");const v=h||f&&f.variant,b={...n,align:r,component:g,padding:a||(p&&p.padding?p.padding:"normal"),size:u||(p&&p.size?p.size:"medium"),sortDirection:c,stickyHeader:"head"===v&&p&&p.stickyHeader,variant:v},x=(e=>{const{classes:t,variant:n,align:r,padding:i,size:o,stickyHeader:a}=e;return _e({root:["root",n,a&&"stickyHeader","inherit"!==r&&`align${Ur(r)}`,"normal"!==i&&`padding${Ur(i)}`,`size${Ur(o)}`]},QR,t)})(b);let w=null;return c&&(w="asc"===c?"ascending":"descending"),(0,Lr.jsx)(ZR,{as:g,ref:t,className:Se(x.root,i),"aria-sort":w,scope:y,ownerState:b,...d})})),t$=e$;function n$(e){return Ae("MuiTableBody",e)}ao("MuiTableBody",["root"]);const r$=to("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-row-group"}),i$={variant:"body"},o$="tbody",a$=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiTableBody"}),{className:r,component:i=o$,...o}=n,a={...n,component:i},s=(e=>{const{classes:t}=e;return _e({root:["root"]},n$,t)})(a);return(0,Lr.jsx)(jR.Provider,{value:i$,children:(0,Lr.jsx)(r$,{className:Se(s.root,r),as:i,ref:t,role:i===o$?null:"rowgroup",ownerState:a,...o})})}));var s$=n(446),l$=n.n(s$);const u$=e=>{let{filter:t}=e;const{items:n,status:r}=Zm((e=>e.expenses)),[i,o]=(0,l.useState)(n);return(0,l.useEffect)((()=>{const e=l$()();let r=n;"day"===t?r=n.filter((t=>{const n=t.date?t.date.toDate?t.date.toDate():new Date(t.date):null;return n&&l$()(n).isSame(e,"day")})):"week"===t?r=n.filter((t=>{const n=t.date?t.date.toDate?t.date.toDate():new Date(t.date):null;return n&&l$()(n).isSame(e,"week")})):"month"===t&&(r=n.filter((t=>{const n=t.date?t.date.toDate?t.date.toDate():new Date(t.date):null;return n&&l$()(n).isSame(e,"month")}))),o(r)}),[t,n]),"loading"===r?(0,Lr.jsx)($o,{children:"Loading..."}):(0,Lr.jsx)(RR,{component:Al,style:{marginTop:"20px"},children:(0,Lr.jsxs)(LR,{children:[(0,Lr.jsx)(VR,{children:(0,Lr.jsxs)(YR,{children:[(0,Lr.jsx)(t$,{children:"Date (MM-DD-YY)"}),(0,Lr.jsx)(t$,{children:"Income Type"}),(0,Lr.jsx)(t$,{children:"Income Amount"}),(0,Lr.jsx)(t$,{children:"Expense Type"}),(0,Lr.jsx)(t$,{children:"Expense Amount"})]})}),(0,Lr.jsxs)(a$,{children:[i.map((e=>(0,Lr.jsxs)(YR,{children:[(0,Lr.jsx)(t$,{children:l$()(e.date.toDate?e.date.toDate():new Date(e.date)).format("MM/DD/YYYY")}),(0,Lr.jsx)(t$,{children:e.incomeType||"-"}),(0,Lr.jsx)(t$,{children:e.incomeAmount||"-"}),(0,Lr.jsx)(t$,{children:e.expenseType||"-"}),(0,Lr.jsx)(t$,{children:e.expenseAmount||"-"})]},e.id))),0===i.length&&(0,Lr.jsx)(YR,{children:(0,Lr.jsx)(t$,{colSpan:5,align:"center",children:"No records found."})})]})]})})};function c$(e){return Ae("MuiDialog",e)}const h$=ao("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);const d$=l.createContext({}),p$=to(cl,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),f$=to(El,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),m$=to("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t[`scroll${Ur(n.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),g$=to(Al,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`scrollPaper${Ur(n.scroll)}`],t[`paperWidth${Ur(String(n.maxWidth))}`],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})(ko((e=>{let{theme:t}=e;return{margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:e=>{let{ownerState:t}=e;return!t.maxWidth},style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:"px"===t.breakpoints.unit?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${h$.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(t.breakpoints.values).filter((e=>"xs"!==e)).map((e=>({props:{maxWidth:e},style:{maxWidth:`${t.breakpoints.values[e]}${t.breakpoints.unit}`,[`&.${h$.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[e]+64)]:{maxWidth:"calc(100% - 64px)"}}}}))),{props:e=>{let{ownerState:t}=e;return t.fullWidth},style:{width:"calc(100% - 64px)"}},{props:e=>{let{ownerState:t}=e;return t.fullScreen},style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${h$.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}}))),y$=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiDialog"}),r=Gs(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{"aria-describedby":o,"aria-labelledby":a,BackdropComponent:s,BackdropProps:u,children:c,className:h,disableEscapeKeyDown:d=!1,fullScreen:p=!1,fullWidth:f=!1,maxWidth:m="sm",onBackdropClick:g,onClick:y,onClose:v,open:b,PaperComponent:x=Al,PaperProps:w={},scroll:k="paper",TransitionComponent:S=sl,transitionDuration:E=i,TransitionProps:I,...T}=n,C={...n,disableEscapeKeyDown:d,fullScreen:p,fullWidth:f,maxWidth:m,scroll:k},A=(e=>{const{classes:t,scroll:n,maxWidth:r,fullWidth:i,fullScreen:o}=e;return _e({root:["root"],container:["container",`scroll${Ur(n)}`],paper:["paper",`paperScroll${Ur(n)}`,`paperWidth${Ur(String(r))}`,i&&"paperFullWidth",o&&"paperFullScreen"]},c$,t)})(C),_=l.useRef(),N=Mo(a),O=l.useMemo((()=>({titleId:N})),[N]);return(0,Lr.jsx)(f$,{className:Se(A.root,h),closeAfterTransition:!0,components:{Backdrop:p$},componentsProps:{backdrop:{transitionDuration:E,as:s,...u}},disableEscapeKeyDown:d,onClose:v,open:b,ref:t,onClick:e=>{y&&y(e),_.current&&(_.current=null,g&&g(e),v&&v(e,"backdropClick"))},ownerState:C,...T,children:(0,Lr.jsx)(S,{appear:!0,in:b,timeout:E,role:"presentation",...I,children:(0,Lr.jsx)(m$,{className:Se(A.container),onMouseDown:e=>{_.current=e.target===e.currentTarget},ownerState:C,children:(0,Lr.jsx)(g$,{as:x,elevation:24,role:"dialog","aria-describedby":o,"aria-labelledby":N,...w,className:Se(A.paper,w.className),ownerState:C,children:(0,Lr.jsx)(d$.Provider,{value:O,children:c})})})})})})),v$=y$;function b$(e){return Ae("MuiDialogTitle",e)}const x$=ao("MuiDialogTitle",["root"]),w$=to($o,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),k$=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiDialogTitle"}),{className:r,id:i,...o}=n,a=n,s=(e=>{const{classes:t}=e;return _e({root:["root"]},b$,t)})(a),{titleId:u=i}=l.useContext(d$);return(0,Lr.jsx)(w$,{component:"h2",className:Se(s.root,r),ownerState:a,ref:t,variant:"h6",id:i??u,...o})}));function S$(e){return Ae("MuiDialogContent",e)}ao("MuiDialogContent",["root","dividers"]);const E$=to("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dividers&&t.dividers]}})(ko((e=>{let{theme:t}=e;return{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:e=>{let{ownerState:t}=e;return t.dividers},style:{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}},{props:e=>{let{ownerState:t}=e;return!t.dividers},style:{[`.${x$.root} + &`]:{paddingTop:0}}}]}}))),I$=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiDialogContent"}),{className:r,dividers:i=!1,...o}=n,a={...n,dividers:i},s=(e=>{const{classes:t,dividers:n}=e;return _e({root:["root",n&&"dividers"]},S$,t)})(a);return(0,Lr.jsx)(E$,{className:Se(s.root,r),ownerState:a,ref:t,...o})}));function T$(e){return Ae("MuiDialogActions",e)}ao("MuiDialogActions",["root","spacing"]);const C$=to("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:e=>{let{ownerState:t}=e;return!t.disableSpacing},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),A$=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiDialogActions"}),{className:r,disableSpacing:i=!1,...o}=n,a={...n,disableSpacing:i},s=(e=>{const{classes:t,disableSpacing:n}=e;return _e({root:["root",!n&&"spacing"]},T$,t)})(a);return(0,Lr.jsx)(C$,{className:Se(s.root,r),ownerState:a,ref:t,...o})})),_$=Ny("expenses/fetchExpenses",(async e=>{const t=function(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof QI&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof eT)).length,n=e.filter((e=>e instanceof ZI)).length;if(t>1||t>0&&n>0)throw new yv(gv.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}(bI(bT,"expenses"),function(e,t,n){const r=t,i=XI("where",e);return ZI._create(i,r,n)}("userId","==",e),function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=XI("orderBy",e);return tT._create(n,t)}("date","desc")),n=await function(e){e=dI(e,gI);const t=dI(e.firestore,kI),n=SI(t),r=new dT(t);return YI(e._query),oI(n,e._query).then((n=>new cT(t,r,e,n)))}(t),r=n.docs.map((e=>{const t=e.data(),n=new Date(1e3*t.date.seconds);return{id:e.id,...t,date:n}}));return r})),N$=Ny("expenses/addExpense",(async e=>{try{const t=await function(e,t){const n=dI(e.firestore,kI),r=xI(e),i=aT(e.converter,t);return fT(n,[MI(PI(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,cw.exists(!1))]).then((()=>r))}(bI(bT,"expenses"),e);return{id:t.id,...e}}catch(t){console.log("Eror on add expense",t)}})),O$=My({name:"expenses",initialState:{items:[],status:"idle",error:null},reducers:{},extraReducers:e=>{e.addCase(_$.pending,(e=>{e.status="loading"})).addCase(_$.fulfilled,((e,t)=>{e.status="succeeded",e.items=t.payload})).addCase(_$.rejected,((e,t)=>{e.status="failed",e.error=t.error.message})).addCase(N$.fulfilled,((e,t)=>{e.items.unshift(t.payload)}))}}).reducer,R$=["Salary","Bonus","Investment","Rental Income","Other"],$$=["Rent","Food","Travel","Cosmetics","Bills","Other"],D$=e=>{let{open:t,handleClose:n}=e;const r=hg(),{user:i}=Zm((e=>e.auth)),o=nR().shape({date:KO().required("Date is required."),incomeType:WO().required("Income type is required."),incomeAmount:GO().required().typeError("Must be a number.").positive("Amount must be positive.").max(999999999,"Amount too large."),expenseType:WO().nullable(),expenseAmount:GO().nullable().typeError("Must be a number.").positive("Amount must be positive.").max(999999999,"Amount too large.")}),a={date:l$()().format("YYYY-MM-DD"),incomeType:"",incomeAmount:"",expenseType:"",expenseAmount:""};return(0,Lr.jsxs)(v$,{open:t,onClose:n,children:[(0,Lr.jsx)(k$,{children:"Add Income/Expense"}),(0,Lr.jsx)(I$,{children:(0,Lr.jsx)(PN,{initialValues:a,validationSchema:o,onSubmit:(e,t)=>{let{resetForm:o}=t;const a={userId:i.uid,date:new Date(e.date),incomeType:e.incomeType,incomeAmount:e.incomeAmount?parseFloat(e.incomeAmount):0,expenseType:e.expenseType||null,expenseAmount:e.expenseAmount?parseFloat(e.expenseAmount):0};r(N$(a)),n(),o()},children:e=>{let{handleChange:t,setFieldValue:r,values:i,errors:o,touched:a}=e;return(0,Lr.jsxs)(BN,{children:[(0,Lr.jsxs)(wR,{container:!0,spacing:2,style:{marginTop:"10px"},children:[(0,Lr.jsx)(wR,{item:!0,xs:12,children:(0,Lr.jsx)(zN,{as:Tu,label:"Date",type:"date",name:"date",fullWidth:!0,InputLabelProps:{shrink:!0},error:a.date&&!!o.date,helperText:a.date&&(0,Lr.jsx)(qN,{name:"date"})})}),(0,Lr.jsx)(wR,{item:!0,xs:6,children:(0,Lr.jsx)(zN,{as:Tu,select:!0,label:"Income Type",name:"incomeType",fullWidth:!0,onChange:t,helperText:a.incomeType&&(0,Lr.jsx)(qN,{name:"incomeType"}),children:R$.map((e=>(0,Lr.jsx)(_R,{value:e,children:e},e)))})}),(0,Lr.jsx)(wR,{item:!0,xs:6,children:(0,Lr.jsx)(zN,{as:Tu,label:"Income Amount",name:"incomeAmount",fullWidth:!0,error:a.incomeAmount&&!!o.incomeAmount,helperText:a.incomeAmount&&(0,Lr.jsx)(qN,{name:"incomeAmount"}),disabled:!i.incomeType,title:i.incomeType?"":"Select any Income Type"})}),(0,Lr.jsx)(wR,{item:!0,xs:6,children:(0,Lr.jsx)(zN,{as:Tu,select:!0,label:"Expense Type",name:"expenseType",fullWidth:!0,onChange:t,helperText:a.expenseType&&(0,Lr.jsx)(qN,{name:"expenseType"}),children:$$.map((e=>(0,Lr.jsx)(_R,{value:e,children:e},e)))})}),(0,Lr.jsx)(wR,{item:!0,xs:6,children:(0,Lr.jsx)(zN,{as:Tu,label:"Expense Amount",name:"expenseAmount",fullWidth:!0,error:a.expenseAmount&&!!o.expenseAmount,helperText:a.expenseAmount&&(0,Lr.jsx)(qN,{name:"expenseAmount"}),disabled:!i.expenseType,title:i.expenseType?"":"Select any Expense Type"})})]}),(0,Lr.jsxs)(A$,{children:[(0,Lr.jsx)(fc,{onClick:n,color:"secondary",children:"Cancel"}),(0,Lr.jsx)(fc,{type:"submit",color:"primary",variant:"contained",children:"Add"})]})]})}})})]})};var P$=n(9889),M$=n.n(P$),F$=n(9062),L$=n(620),j$=n.n(L$),z$=n(5268),B$=n.n(z$),U$=n(3097),W$=n.n(U$),V$=n(9160),G$=n.n(V$),H$=function(e){return 0===e?0:e>0?1:-1},q$=function(e){return j$()(e)&&e.indexOf("%")===e.length-1},K$=function(e){return G$()(e)&&!B$()(e)},X$=function(e){return K$(e)||j$()(e)},Y$=0,Q$=function(e){var t=++Y$;return"".concat(e||"").concat(t)},J$=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!K$(e)&&!j$()(e))return r;if(q$(e)){var o=e.indexOf("%");n=t*parseFloat(e.slice(0,o))/100}else n=+e;return B$()(n)&&(n=r),i&&n>t&&(n=t),n},Z$=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},eD=function(e,t){return K$(e)&&K$(t)?function(n){return e+n*(t-e)}:function(){return t}};function tD(e,t,n){return e&&e.length?e.find((function(e){return e&&("function"===typeof t?t(e):W$()(e,t))===n})):null}var nD=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i]},rD=n(9686),iD=n.n(rD),oD=n(1629),aD=n.n(oD),sD=n(6686),lD=n.n(sD);function uD(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function cD(e){return cD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cD(e)}var hD=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],dD=["points","pathLength"],pD={svg:["viewBox","children"],polygon:dD,polyline:dD},fD=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],mD=function(e,t){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var n=e;if((0,l.isValidElement)(e)&&(n=e.props),!lD()(n))return null;var r={};return Object.keys(n).forEach((function(e){fD.includes(e)&&(r[e]=t||function(t){return n[e](n,t)})})),r},gD=function(e,t,n){if(!lD()(e)||"object"!==cD(e))return null;var r=null;return Object.keys(e).forEach((function(i){var o=e[i];fD.includes(i)&&"function"===typeof o&&(r||(r={}),r[i]=function(e,t,n){return function(r){return e(t,n,r),null}}(o,t,n))})),r},yD=["children"],vD=["children"];function bD(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var xD={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},wD=function(e){return"string"===typeof e?e:e?e.displayName||e.name||"Component":""},kD=null,SD=null,ED=function e(t){if(t===kD&&Array.isArray(SD))return SD;var n=[];return l.Children.forEach(t,(function(t){iD()(t)||((0,F$.isFragment)(t)?n=n.concat(e(t.props.children)):n.push(t))})),SD=n,kD=t,n};function ID(e,t){var n=[],r=[];return r=Array.isArray(t)?t.map((function(e){return wD(e)})):[wD(t)],ED(e).forEach((function(e){var t=W$()(e,"type.displayName")||W$()(e,"type.name");-1!==r.indexOf(t)&&n.push(e)})),n}function TD(e,t){var n=ID(e,t);return n&&n[0]}var CD=function(e){if(!e||!e.props)return!1;var t=e.props,n=t.width,r=t.height;return!(!K$(n)||n<=0||!K$(r)||r<=0)},AD=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],_D=function(e){return e&&e.type&&j$()(e.type)&&AD.indexOf(e.type)>=0},ND=function(e,t,n){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var r=e;if((0,l.isValidElement)(e)&&(r=e.props),!lD()(r))return null;var i={};return Object.keys(r).forEach((function(e){var o;(function(e,t,n,r){var i,o=null!==(i=null===pD||void 0===pD?void 0:pD[r])&&void 0!==i?i:[];return!aD()(e)&&(r&&o.includes(t)||hD.includes(t))||n&&fD.includes(t)})(null===(o=r)||void 0===o?void 0:o[e],e,t,n)&&(i[e]=r[e])})),i},OD=function e(t,n){if(t===n)return!0;var r=l.Children.count(t);if(r!==l.Children.count(n))return!1;if(0===r)return!0;if(1===r)return RD(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var o=t[i],a=n[i];if(Array.isArray(o)||Array.isArray(a)){if(!e(o,a))return!1}else if(!RD(o,a))return!1}return!0},RD=function(e,t){if(iD()(e)&&iD()(t))return!0;if(!iD()(e)&&!iD()(t)){var n=e.props||{},r=n.children,i=bD(n,yD),o=t.props||{},a=o.children,s=bD(o,vD);return r&&a?uD(i,s)&&OD(r,a):!r&&!a&&uD(i,s)}return!1},$D=function(e,t){var n=[],r={};return ED(e).forEach((function(e,i){if(_D(e))n.push(e);else if(e){var o=wD(e.type),a=t[o]||{},s=a.handler,l=a.once;if(s&&(!l||!r[o])){var u=s(e,o,i);n.push(u),r[o]=!0}}})),n};function DD(e){return DD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DD(e)}function PD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PD(Object(n),!0).forEach((function(t){FD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function FD(e,t,n){return t=function(e){var t=function(e,t){if("object"!=DD(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=DD(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==DD(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return jD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jD(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zD=(0,l.forwardRef)((function(e,t){var n=e.aspect,r=e.initialDimension,i=void 0===r?{width:-1,height:-1}:r,o=e.width,a=void 0===o?"100%":o,s=e.height,u=void 0===s?"100%":s,c=e.minWidth,h=void 0===c?0:c,d=e.minHeight,p=e.maxHeight,f=e.children,m=e.debounce,g=void 0===m?0:m,y=e.id,v=e.className,b=e.onResize,x=e.style,w=void 0===x?{}:x,k=(0,l.useRef)(null),S=(0,l.useRef)();S.current=b,(0,l.useImperativeHandle)(t,(function(){return Object.defineProperty(k.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),k.current},configurable:!0})}));var E=LD((0,l.useState)({containerWidth:i.width,containerHeight:i.height}),2),I=E[0],T=E[1],C=(0,l.useCallback)((function(e,t){T((function(n){var r=Math.round(e),i=Math.round(t);return n.containerWidth===r&&n.containerHeight===i?n:{containerWidth:r,containerHeight:i}}))}),[]);(0,l.useEffect)((function(){var e=function(e){var t,n=e[0].contentRect,r=n.width,i=n.height;C(r,i),null===(t=S.current)||void 0===t||t.call(S,r,i)};g>0&&(e=M$()(e,g,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),n=k.current.getBoundingClientRect(),r=n.width,i=n.height;return C(r,i),t.observe(k.current),function(){t.disconnect()}}),[C,g]);var A=(0,l.useMemo)((function(){var e=I.containerWidth,t=I.containerHeight;if(e<0||t<0)return null;nD(q$(a)||q$(u),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",a,u),nD(!n||n>0,"The aspect(%s) must be greater than zero.",n);var r=q$(a)?e:a,i=q$(u)?t:u;n&&n>0&&(r?i=r/n:i&&(r=i*n),p&&i>p&&(i=p)),nD(r>0||i>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",r,i,a,u,h,d,n);var o=!Array.isArray(f)&&(0,F$.isElement)(f)&&wD(f.type).endsWith("Chart");return l.Children.map(f,(function(e){return(0,F$.isElement)(e)?(0,l.cloneElement)(e,MD({width:r,height:i},o?{style:MD({height:"100%",width:"100%",maxHeight:i,maxWidth:r},e.props.style)}:{})):e}))}),[n,f,u,p,d,h,I,a]);return l.createElement("div",{id:y?"".concat(y):void 0,className:Se("recharts-responsive-container",v),style:MD(MD({},w),{},{width:a,height:u,minWidth:h,minHeight:d,maxHeight:p}),ref:k},A)})),BD=n(6604),UD=n.n(BD),WD=n(7424),VD=n.n(WD),GD="Invariant failed";function HD(e,t){if(!e)throw new Error(GD)}var qD=["children","width","height","viewBox","className","style","title","desc"];function KD(){return KD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KD.apply(this,arguments)}function XD(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function YD(e){var t=e.children,n=e.width,r=e.height,i=e.viewBox,o=e.className,a=e.style,s=e.title,u=e.desc,c=XD(e,qD),h=i||{width:n,height:r,x:0,y:0},d=Se("recharts-surface",o);return l.createElement("svg",KD({},ND(c,!0,"svg"),{className:d,width:n,height:r,style:a,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height)}),l.createElement("title",null,s),l.createElement("desc",null,u),t)}var QD=["children","className"];function JD(){return JD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},JD.apply(this,arguments)}function ZD(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var eP=l.forwardRef((function(e,t){var n=e.children,r=e.className,i=ZD(e,QD),o=Se("recharts-layer",r);return l.createElement("g",JD({className:o},ND(i,!0),{ref:t}),n)}));function tP(e){return tP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tP(e)}function nP(){return nP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nP.apply(this,arguments)}function rP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return iP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iP(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function aP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oP(Object(n),!0).forEach((function(t){sP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sP(e,t,n){return t=function(e){var t=function(e,t){if("object"!=tP(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tP(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lP(e){return Array.isArray(e)&&X$(e[0])&&X$(e[1])?e.join(" ~ "):e}var uP=function(e){var t=e.separator,n=void 0===t?" : ":t,r=e.contentStyle,i=void 0===r?{}:r,o=e.itemStyle,a=void 0===o?{}:o,s=e.labelStyle,u=void 0===s?{}:s,c=e.payload,h=e.formatter,d=e.itemSorter,p=e.wrapperClassName,f=e.labelClassName,m=e.label,g=e.labelFormatter,y=e.accessibilityLayer,v=void 0!==y&&y,b=aP({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),x=aP({margin:0},u),w=!iD()(m),k=w?m:"",S=Se("recharts-default-tooltip",p),E=Se("recharts-tooltip-label",f);w&&g&&void 0!==c&&null!==c&&(k=g(m,c));var I=v?{role:"status","aria-live":"assertive"}:{};return l.createElement("div",nP({className:S,style:b},I),l.createElement("p",{className:E,style:x},l.isValidElement(k)?k:"".concat(k)),function(){if(c&&c.length){var e=(d?VD()(c,d):c).map((function(e,t){if("none"===e.type)return null;var r=aP({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},a),i=e.formatter||h||lP,o=e.value,s=e.name,u=o,d=s;if(i&&null!=u&&null!=d){var p=i(o,s,e,t,c);if(Array.isArray(p)){var f=rP(p,2);u=f[0],d=f[1]}else u=p}return l.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(t),style:r},X$(d)?l.createElement("span",{className:"recharts-tooltip-item-name"},d):null,X$(d)?l.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,l.createElement("span",{className:"recharts-tooltip-item-value"},u),l.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))}));return l.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null}())};function cP(e){return cP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cP(e)}function hP(e,t,n){return t=function(e){var t=function(e,t){if("object"!=cP(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=cP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cP(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dP="recharts-tooltip-wrapper",pP={visibility:"hidden"};function fP(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return Se(dP,hP(hP(hP(hP({},"".concat(dP,"-right"),K$(n)&&t&&K$(t.x)&&n>=t.x),"".concat(dP,"-left"),K$(n)&&t&&K$(t.x)&&n<t.x),"".concat(dP,"-bottom"),K$(r)&&t&&K$(t.y)&&r>=t.y),"".concat(dP,"-top"),K$(r)&&t&&K$(t.y)&&r<t.y))}function mP(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,i=e.offsetTopLeft,o=e.position,a=e.reverseDirection,s=e.tooltipDimension,l=e.viewBox,u=e.viewBoxDimension;if(o&&K$(o[r]))return o[r];var c=n[r]-s-i,h=n[r]+i;return t[r]?a[r]?c:h:a[r]?c<l[r]?Math.max(h,l[r]):Math.max(c,l[r]):h+s>l[r]+u?Math.max(c,l[r]):Math.max(h,l[r])}function gP(e){return gP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gP(e)}function yP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yP(Object(n),!0).forEach((function(t){IP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,TP(r.key),r)}}function xP(e,t,n){return t=kP(t),function(e,t){if(t&&("object"===gP(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return SP(e)}(e,wP()?Reflect.construct(t,n||[],kP(e).constructor):t.apply(e,n))}function wP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wP=function(){return!!e})()}function kP(e){return kP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kP(e)}function SP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EP(e,t){return EP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},EP(e,t)}function IP(e,t,n){return(t=TP(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TP(e){var t=function(e,t){if("object"!=gP(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=gP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gP(t)?t:String(t)}var CP=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return IP(SP(e=xP(this,t,[].concat(r))),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),IP(SP(e),"handleKeyDown",(function(t){var n,r,i,o;"Escape"===t.key&&e.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(n=null===(r=e.props.coordinate)||void 0===r?void 0:r.x)&&void 0!==n?n:0,y:null!==(i=null===(o=e.props.coordinate)||void 0===o?void 0:o.y)&&void 0!==i?i:0}})})),e}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&EP(e,t)}(t,e),n=t,r=[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();(Math.abs(e.width-this.state.lastBoundingBox.width)>1||Math.abs(e.height-this.state.lastBoundingBox.height)>1)&&this.setState({lastBoundingBox:{width:e.width,height:e.height}})}else-1===this.state.lastBoundingBox.width&&-1===this.state.lastBoundingBox.height||this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var e,t;this.props.active&&this.updateBBox(),this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}},{key:"render",value:function(){var e=this,t=this.props,n=t.active,r=t.allowEscapeViewBox,i=t.animationDuration,o=t.animationEasing,a=t.children,s=t.coordinate,u=t.hasPayload,c=t.isAnimationActive,h=t.offset,d=t.position,p=t.reverseDirection,f=t.useTranslate3d,m=t.viewBox,g=t.wrapperStyle,y=function(e){var t,n,r=e.allowEscapeViewBox,i=e.coordinate,o=e.offsetTopLeft,a=e.position,s=e.reverseDirection,l=e.tooltipBox,u=e.useTranslate3d,c=e.viewBox;return{cssProperties:l.height>0&&l.width>0&&i?function(e){var t=e.translateX,n=e.translateY;return{transform:e.useTranslate3d?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}({translateX:t=mP({allowEscapeViewBox:r,coordinate:i,key:"x",offsetTopLeft:o,position:a,reverseDirection:s,tooltipDimension:l.width,viewBox:c,viewBoxDimension:c.width}),translateY:n=mP({allowEscapeViewBox:r,coordinate:i,key:"y",offsetTopLeft:o,position:a,reverseDirection:s,tooltipDimension:l.height,viewBox:c,viewBoxDimension:c.height}),useTranslate3d:u}):pP,cssClasses:fP({translateX:t,translateY:n,coordinate:i})}}({allowEscapeViewBox:r,coordinate:s,offsetTopLeft:h,position:d,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:f,viewBox:m}),v=y.cssClasses,b=y.cssProperties,x=vP(vP({transition:c&&n?"transform ".concat(i,"ms ").concat(o):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&n&&u?"visible":"hidden",position:"absolute",top:0,left:0},g);return l.createElement("div",{tabIndex:-1,className:v,style:x,ref:function(t){e.wrapperNode=t}},a)}}],r&&bP(n.prototype,r),i&&bP(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}(l.PureComponent),AP={isSsr:!("undefined"!==typeof window&&window.document&&window.document.createElement&&window.setTimeout),get:function(e){return AP[e]},set:function(e,t){if("string"===typeof e)AP[e]=t;else{var n=Object.keys(e);n&&n.length&&n.forEach((function(t){AP[t]=e[t]}))}}},_P=n(977),NP=n.n(_P);function OP(e,t,n){return!0===t?NP()(e,n):aD()(t)?NP()(e,t):e}function RP(e){return RP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RP(e)}function $P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$P(Object(n),!0).forEach((function(t){zP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function PP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,BP(r.key),r)}}function MP(e,t,n){return t=LP(t),function(e,t){if(t&&("object"===RP(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,FP()?Reflect.construct(t,n||[],LP(e).constructor):t.apply(e,n))}function FP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(FP=function(){return!!e})()}function LP(e){return LP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},LP(e)}function jP(e,t){return jP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jP(e,t)}function zP(e,t,n){return(t=BP(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BP(e){var t=function(e,t){if("object"!=RP(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=RP(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==RP(t)?t:String(t)}function UP(e){return e.dataKey}var WP=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),MP(this,t,arguments)}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jP(e,t)}(t,e),n=t,r=[{key:"render",value:function(){var e=this,t=this.props,n=t.active,r=t.allowEscapeViewBox,i=t.animationDuration,o=t.animationEasing,a=t.content,s=t.coordinate,u=t.filterNull,c=t.isAnimationActive,h=t.offset,d=t.payload,p=t.payloadUniqBy,f=t.position,m=t.reverseDirection,g=t.useTranslate3d,y=t.viewBox,v=t.wrapperStyle,b=null!==d&&void 0!==d?d:[];u&&b.length&&(b=OP(d.filter((function(t){return null!=t.value&&(!0!==t.hide||e.props.includeHidden)})),p,UP));var x=b.length>0;return l.createElement(CP,{allowEscapeViewBox:r,animationDuration:i,animationEasing:o,isAnimationActive:c,active:n,coordinate:s,hasPayload:x,offset:h,position:f,reverseDirection:m,useTranslate3d:g,viewBox:y,wrapperStyle:v},function(e,t){return l.isValidElement(e)?l.cloneElement(e,t):"function"===typeof e?l.createElement(e,t):l.createElement(uP,t)}(a,DP(DP({},this.props),{},{payload:b})))}}],r&&PP(n.prototype,r),i&&PP(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}(l.PureComponent);zP(WP,"displayName","Tooltip"),zP(WP,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!AP.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var VP=n(643),GP=n.n(VP);Math.abs,Math.atan2;const HP=Math.cos,qP=(Math.max,Math.min,Math.sin),KP=Math.sqrt,XP=Math.PI,YP=2*XP;const QP={draw(e,t){const n=KP(t/XP);e.moveTo(n,0),e.arc(0,0,n,0,YP)}},JP={draw(e,t){const n=KP(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},ZP=KP(1/3),eM=2*ZP,tM={draw(e,t){const n=KP(t/eM),r=n*ZP;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},nM={draw(e,t){const n=KP(t),r=-n/2;e.rect(r,r,n,n)}},rM=qP(XP/10)/qP(7*XP/10),iM=qP(YP/10)*rM,oM=-HP(YP/10)*rM,aM={draw(e,t){const n=KP(.8908130915292852*t),r=iM*n,i=oM*n;e.moveTo(0,-n),e.lineTo(r,i);for(let o=1;o<5;++o){const t=YP*o/5,a=HP(t),s=qP(t);e.lineTo(s*n,-a*n),e.lineTo(a*r-s*i,s*r+a*i)}e.closePath()}},sM=KP(3),lM={draw(e,t){const n=-KP(t/(3*sM));e.moveTo(0,2*n),e.lineTo(-sM*n,-n),e.lineTo(sM*n,-n),e.closePath()}},uM=-.5,cM=KP(3)/2,hM=1/KP(12),dM=3*(hM/2+1),pM={draw(e,t){const n=KP(t/dM),r=n/2,i=n*hM,o=r,a=n*hM+n,s=-o,l=a;e.moveTo(r,i),e.lineTo(o,a),e.lineTo(s,l),e.lineTo(uM*r-cM*i,cM*r+uM*i),e.lineTo(uM*o-cM*a,cM*o+uM*a),e.lineTo(uM*s-cM*l,cM*s+uM*l),e.lineTo(uM*r+cM*i,uM*i-cM*r),e.lineTo(uM*o+cM*a,uM*a-cM*o),e.lineTo(uM*s+cM*l,uM*l-cM*s),e.closePath()}};function fM(e){return function(){return e}}const mM=Math.PI,gM=2*mM,yM=1e-6,vM=gM-yM;function bM(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class xM{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?bM:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return bM;const n=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,r){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(e,t,n,r,i,o){this._append`C${+e},${+t},${+n},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(e,t,n,r,i){if(e=+e,t=+t,n=+n,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let o=this._x1,a=this._y1,s=n-e,l=r-t,u=o-e,c=a-t,h=u*u+c*c;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(h>yM)if(Math.abs(c*s-l*u)>yM&&i){let d=n-o,p=r-a,f=s*s+l*l,m=d*d+p*p,g=Math.sqrt(f),y=Math.sqrt(h),v=i*Math.tan((mM-Math.acos((f+h-m)/(2*g*y)))/2),b=v/y,x=v/g;Math.abs(b-1)>yM&&this._append`L${e+b*u},${t+b*c}`,this._append`A${i},${i},0,0,${+(c*d>u*p)},${this._x1=e+x*s},${this._y1=t+x*l}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,n,r,i,o){if(e=+e,t=+t,o=!!o,(n=+n)<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(r),s=n*Math.sin(r),l=e+a,u=t+s,c=1^o,h=o?r-i:i-r;null===this._x1?this._append`M${l},${u}`:(Math.abs(this._x1-l)>yM||Math.abs(this._y1-u)>yM)&&this._append`L${l},${u}`,n&&(h<0&&(h=h%gM+gM),h>vM?this._append`A${n},${n},0,1,${c},${e-a},${t-s}A${n},${n},0,1,${c},${this._x1=l},${this._y1=u}`:h>yM&&this._append`A${n},${n},0,${+(h>=mM)},${c},${this._x1=e+n*Math.cos(i)},${this._y1=t+n*Math.sin(i)}`)}rect(e,t,n,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function wM(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);t=e}return e},()=>new xM(t)}KP(3),KP(3);function kM(e){return kM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kM(e)}var SM=["type","size","sizeType"];function EM(){return EM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EM.apply(this,arguments)}function IM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IM(Object(n),!0).forEach((function(t){CM(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function CM(e,t,n){return t=function(e){var t=function(e,t){if("object"!=kM(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=kM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kM(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AM(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var _M={symbolCircle:QP,symbolCross:JP,symbolDiamond:tM,symbolSquare:nM,symbolStar:aM,symbolTriangle:lM,symbolWye:pM},NM=Math.PI/180,OM=function(e){var t=e.type,n=void 0===t?"circle":t,r=e.size,i=void 0===r?64:r,o=e.sizeType,a=void 0===o?"area":o,s=TM(TM({},AM(e,SM)),{},{type:n,size:i,sizeType:a}),u=s.className,c=s.cx,h=s.cy,d=ND(s,!0);return c===+c&&h===+h&&i===+i?l.createElement("path",EM({},d,{className:Se("recharts-symbols",u),transform:"translate(".concat(c,", ").concat(h,")"),d:function(){var e=function(e){var t="symbol".concat(GP()(e));return _M[t]||QP}(n),t=function(e,t){let n=null,r=wM(i);function i(){let i;if(n||(n=i=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return e="function"===typeof e?e:fM(e||QP),t="function"===typeof t?t:fM(void 0===t?64:+t),i.type=function(t){return arguments.length?(e="function"===typeof t?t:fM(t),i):e},i.size=function(e){return arguments.length?(t="function"===typeof e?e:fM(+e),i):t},i.context=function(e){return arguments.length?(n=null==e?null:e,i):n},i}().type(e).size(function(e,t,n){if("area"===t)return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var r=18*NM;return 1.25*e*e*(Math.tan(r)-Math.tan(2*r)*Math.pow(Math.tan(r),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}}(i,a,n));return t()}()})):null};function RM(e){return RM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RM(e)}function $M(){return $M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$M.apply(this,arguments)}function DM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,BM(r.key),r)}}function MM(e,t,n){return t=LM(t),function(e,t){if(t&&("object"===RM(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,FM()?Reflect.construct(t,n||[],LM(e).constructor):t.apply(e,n))}function FM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(FM=function(){return!!e})()}function LM(e){return LM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},LM(e)}function jM(e,t){return jM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jM(e,t)}function zM(e,t,n){return(t=BM(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BM(e){var t=function(e,t){if("object"!=RM(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=RM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==RM(t)?t:String(t)}OM.registerSymbol=function(e,t){_M["symbol".concat(GP()(e))]=t};var UM=32,WM=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),MM(this,t,arguments)}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jM(e,t)}(t,e),n=t,r=[{key:"renderIcon",value:function(e){var t=this.props.inactiveColor,n=16,r=5.333333333333333,i=10.666666666666666,o=e.inactive?t:e.color;if("plainline"===e.type)return l.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:n,x2:UM,y2:n,className:"recharts-legend-icon"});if("line"===e.type)return l.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(n,"h").concat(i,"\n            A").concat(r,",").concat(r,",0,1,1,").concat(2*i,",").concat(n,"\n            H").concat(UM,"M").concat(2*i,",").concat(n,"\n            A").concat(r,",").concat(r,",0,1,1,").concat(i,",").concat(n),className:"recharts-legend-icon"});if("rect"===e.type)return l.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(4,"h").concat(UM,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(l.isValidElement(e.legendIcon)){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DM(Object(n),!0).forEach((function(t){zM(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return delete a.legendIcon,l.cloneElement(e.legendIcon,a)}return l.createElement(OM,{fill:o,cx:n,cy:n,size:UM,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,t=this.props,n=t.payload,r=t.iconSize,i=t.layout,o=t.formatter,a=t.inactiveColor,s={x:0,y:0,width:UM,height:UM},u={display:"horizontal"===i?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return n.map((function(t,n){var i=t.formatter||o,h=Se(zM(zM({"recharts-legend-item":!0},"legend-item-".concat(n),!0),"inactive",t.inactive));if("none"===t.type)return null;var d=aD()(t.value)?null:t.value;nD(!aD()(t.value),'The name property is also required when using a function for the dataKey of a chart\'s cartesian components. Ex: <Bar name="Name of my Data"/>');var p=t.inactive?a:t.color;return l.createElement("li",$M({className:h,style:u,key:"legend-item-".concat(n)},gD(e.props,t,n)),l.createElement(YD,{width:r,height:r,viewBox:s,style:c},e.renderIcon(t)),l.createElement("span",{className:"recharts-legend-item-text",style:{color:p}},i?i(d,t,n):d))}))}},{key:"render",value:function(){var e=this.props,t=e.payload,n=e.layout,r=e.align;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:"horizontal"===n?r:"left"};return l.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}],r&&PM(n.prototype,r),i&&PM(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}(l.PureComponent);function VM(e){return VM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VM(e)}zM(WM,"displayName","Legend"),zM(WM,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var GM=["ref"];function HM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HM(Object(n),!0).forEach((function(t){eF(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function KM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tF(r.key),r)}}function XM(e,t,n){return t=QM(t),function(e,t){if(t&&("object"===VM(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return JM(e)}(e,YM()?Reflect.construct(t,n||[],QM(e).constructor):t.apply(e,n))}function YM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(YM=function(){return!!e})()}function QM(e){return QM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},QM(e)}function JM(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZM(e,t){return ZM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ZM(e,t)}function eF(e,t,n){return(t=tF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tF(e){var t=function(e,t){if("object"!=VM(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=VM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==VM(t)?t:String(t)}function nF(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function rF(e){return e.value}var iF=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return eF(JM(e=XM(this,t,[].concat(r))),"lastBoundingBox",{width:-1,height:-1}),e}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZM(e,t)}(t,e),n=t,r=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();return e.height=this.wrapperNode.offsetHeight,e.width=this.wrapperNode.offsetWidth,e}return null}},{key:"updateBBox",value:function(){var e=this.props.onBBoxUpdate,t=this.getBBox();t?(Math.abs(t.width-this.lastBoundingBox.width)>1||Math.abs(t.height-this.lastBoundingBox.height)>1)&&(this.lastBoundingBox.width=t.width,this.lastBoundingBox.height=t.height,e&&e(t)):-1===this.lastBoundingBox.width&&-1===this.lastBoundingBox.height||(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,e&&e(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?qM({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(e){var t,n,r=this.props,i=r.layout,o=r.align,a=r.verticalAlign,s=r.margin,l=r.chartWidth,u=r.chartHeight;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(t="center"===o&&"vertical"===i?{left:((l||0)-this.getBBoxSnapshot().width)/2}:"right"===o?{right:s&&s.right||0}:{left:s&&s.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(n="middle"===a?{top:((u||0)-this.getBBoxSnapshot().height)/2}:"bottom"===a?{bottom:s&&s.bottom||0}:{top:s&&s.top||0}),qM(qM({},t),n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.content,r=t.width,i=t.height,o=t.wrapperStyle,a=t.payloadUniqBy,s=t.payload,u=qM(qM({position:"absolute",width:r||"auto",height:i||"auto"},this.getDefaultPosition(o)),o);return l.createElement("div",{className:"recharts-legend-wrapper",style:u,ref:function(t){e.wrapperNode=t}},function(e,t){if(l.isValidElement(e))return l.cloneElement(e,t);if("function"===typeof e)return l.createElement(e,t);t.ref;var n=nF(t,GM);return l.createElement(WM,n)}(n,qM(qM({},this.props),{},{payload:OP(s,a,rF)})))}}],i=[{key:"getWithHeight",value:function(e,t){var n=e.props.layout;return"vertical"===n&&K$(e.props.height)?{height:e.props.height}:"horizontal"===n?{width:e.props.width||t}:null}}],r&&KM(n.prototype,r),i&&KM(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}(l.PureComponent);function oF(){return oF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oF.apply(this,arguments)}eF(iF,"displayName","Legend"),eF(iF,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var aF=function(e){var t=e.cx,n=e.cy,r=e.r,i=e.className,o=Se("recharts-dot",i);return t===+t&&n===+n&&r===+r?l.createElement("circle",oF({},ND(e,!1),mD(e),{className:o,cx:t,cy:n,r:r})):null},sF=n(5173),lF=n.n(sF),uF=Object.getOwnPropertyNames,cF=Object.getOwnPropertySymbols,hF=Object.prototype.hasOwnProperty;function dF(e,t){return function(n,r,i){return e(n,r,i)&&t(n,r,i)}}function pF(e){return function(t,n,r){if(!t||!n||"object"!==typeof t||"object"!==typeof n)return e(t,n,r);var i=r.cache,o=i.get(t),a=i.get(n);if(o&&a)return o===n&&a===t;i.set(t,n),i.set(n,t);var s=e(t,n,r);return i.delete(t),i.delete(n),s}}function fF(e){return uF(e).concat(cF(e))}var mF=Object.hasOwn||function(e,t){return hF.call(e,t)};function gF(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var yF="_owner",vF=Object.getOwnPropertyDescriptor,bF=Object.keys;function xF(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function wF(e,t){return gF(e.getTime(),t.getTime())}function kF(e,t,n){if(e.size!==t.size)return!1;for(var r,i,o={},a=e.entries(),s=0;(r=a.next())&&!r.done;){for(var l=t.entries(),u=!1,c=0;(i=l.next())&&!i.done;){var h=r.value,d=h[0],p=h[1],f=i.value,m=f[0],g=f[1];u||o[c]||!(u=n.equals(d,m,s,c,e,t,n)&&n.equals(p,g,d,m,e,t,n))||(o[c]=!0),c++}if(!u)return!1;s++}return!0}function SF(e,t,n){var r,i=bF(e),o=i.length;if(bF(t).length!==o)return!1;for(;o-- >0;){if((r=i[o])===yF&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof)return!1;if(!mF(t,r)||!n.equals(e[r],t[r],r,r,e,t,n))return!1}return!0}function EF(e,t,n){var r,i,o,a=fF(e),s=a.length;if(fF(t).length!==s)return!1;for(;s-- >0;){if((r=a[s])===yF&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof)return!1;if(!mF(t,r))return!1;if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;if(i=vF(e,r),o=vF(t,r),(i||o)&&(!i||!o||i.configurable!==o.configurable||i.enumerable!==o.enumerable||i.writable!==o.writable))return!1}return!0}function IF(e,t){return gF(e.valueOf(),t.valueOf())}function TF(e,t){return e.source===t.source&&e.flags===t.flags}function CF(e,t,n){if(e.size!==t.size)return!1;for(var r,i,o={},a=e.values();(r=a.next())&&!r.done;){for(var s=t.values(),l=!1,u=0;(i=s.next())&&!i.done;)l||o[u]||!(l=n.equals(r.value,i.value,r.value,i.value,e,t,n))||(o[u]=!0),u++;if(!l)return!1}return!0}function AF(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}var _F=Array.isArray,NF="function"===typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,OF=Object.assign,RF=Object.prototype.toString.call.bind(Object.prototype.toString);var $F=DF();DF({strict:!0}),DF({circular:!0}),DF({circular:!0,strict:!0}),DF({createInternalComparator:function(){return gF}}),DF({strict:!0,createInternalComparator:function(){return gF}}),DF({circular:!0,createInternalComparator:function(){return gF}}),DF({circular:!0,createInternalComparator:function(){return gF},strict:!0});function DF(e){void 0===e&&(e={});var t,n=e.circular,r=void 0!==n&&n,i=e.createInternalComparator,o=e.createState,a=e.strict,s=void 0!==a&&a,l=function(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,i={areArraysEqual:r?EF:xF,areDatesEqual:wF,areMapsEqual:r?dF(kF,EF):kF,areObjectsEqual:r?EF:SF,arePrimitiveWrappersEqual:IF,areRegExpsEqual:TF,areSetsEqual:r?dF(CF,EF):CF,areTypedArraysEqual:r?EF:AF};if(n&&(i=OF({},i,n(i))),t){var o=pF(i.areArraysEqual),a=pF(i.areMapsEqual),s=pF(i.areObjectsEqual),l=pF(i.areSetsEqual);i=OF({},i,{areArraysEqual:o,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:l})}return i}(e),u=function(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areMapsEqual,i=e.areObjectsEqual,o=e.arePrimitiveWrappersEqual,a=e.areRegExpsEqual,s=e.areSetsEqual,l=e.areTypedArraysEqual;return function(e,u,c){if(e===u)return!0;if(null==e||null==u||"object"!==typeof e||"object"!==typeof u)return e!==e&&u!==u;var h=e.constructor;if(h!==u.constructor)return!1;if(h===Object)return i(e,u,c);if(_F(e))return t(e,u,c);if(null!=NF&&NF(e))return l(e,u,c);if(h===Date)return n(e,u,c);if(h===RegExp)return a(e,u,c);if(h===Map)return r(e,u,c);if(h===Set)return s(e,u,c);var d=RF(e);return"[object Date]"===d?n(e,u,c):"[object RegExp]"===d?a(e,u,c):"[object Map]"===d?r(e,u,c):"[object Set]"===d?s(e,u,c):"[object Object]"===d?"function"!==typeof e.then&&"function"!==typeof u.then&&i(e,u,c):"[object Arguments]"===d?i(e,u,c):("[object Boolean]"===d||"[object Number]"===d||"[object String]"===d)&&o(e,u,c)}}(l),c=i?i(u):(t=u,function(e,n,r,i,o,a,s){return t(e,n,s)});return function(e){var t=e.circular,n=e.comparator,r=e.createState,i=e.equals,o=e.strict;if(r)return function(e,a){var s=r(),l=s.cache,u=void 0===l?t?new WeakMap:void 0:l,c=s.meta;return n(e,a,{cache:u,equals:i,meta:c,strict:o})};if(t)return function(e,t){return n(e,t,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var a={cache:void 0,equals:i,meta:void 0,strict:o};return function(e,t){return n(e,t,a)}}({circular:r,comparator:u,createState:o,equals:c,strict:s})}function PF(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=-1;requestAnimationFrame((function r(i){n<0&&(n=i),i-n>t?(e(i),n=-1):function(e){"undefined"!==typeof requestAnimationFrame&&requestAnimationFrame(e)}(r)}))}function MF(e){return MF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},MF(e)}function FF(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return LF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LF(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jF(){var e=function(){return null},t=!1,n=function n(r){if(!t){if(Array.isArray(r)){if(!r.length)return;var i=FF(r),o=i[0],a=i.slice(1);return"number"===typeof o?void PF(n.bind(null,a),o):(n(o),void PF(n.bind(null,a)))}"object"===MF(r)&&e(r),"function"===typeof r&&r()}};return{stop:function(){t=!0},start:function(e){t=!1,n(e)},subscribe:function(t){return e=t,function(){e=function(){return null}}}}}function zF(e){return zF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zF(e)}function BF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function UF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BF(Object(n),!0).forEach((function(t){WF(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function WF(e,t,n){return t=function(e){var t=function(e,t){if("object"!==zF(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==zF(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===zF(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var VF=function(e){return e},GF=function(e,t){return Object.keys(t).reduce((function(n,r){return UF(UF({},n),{},WF({},r,e(r,t[r])))}),{})},HF=function(e,t,n){return e.map((function(e){return"".concat((r=e,r.replace(/([A-Z])/g,(function(e){return"-".concat(e.toLowerCase())})))," ").concat(t,"ms ").concat(n);var r})).join(",")};function qF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||XF(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KF(e){return function(e){if(Array.isArray(e))return YF(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||XF(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XF(e,t){if(e){if("string"===typeof e)return YF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?YF(e,t):void 0}}function YF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var QF=1e-4,JF=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},ZF=function(e,t){return e.map((function(e,n){return e*Math.pow(t,n)})).reduce((function(e,t){return e+t}))},eL=function(e,t){return function(n){var r=JF(e,t);return ZF(r,n)}},tL=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],o=t[2],a=t[3];if(1===t.length)switch(t[0]){case"linear":r=0,i=0,o=1,a=1;break;case"ease":r=.25,i=.1,o=.25,a=1;break;case"ease-in":r=.42,i=0,o=1,a=1;break;case"ease-out":r=.42,i=0,o=.58,a=1;break;case"ease-in-out":r=0,i=0,o=.58,a=1;break;default:var s=t[0].split("(");if("cubic-bezier"===s[0]&&4===s[1].split(")")[0].split(",").length){var l=s[1].split(")")[0].split(",").map((function(e){return parseFloat(e)})),u=qF(l,4);r=u[0],i=u[1],o=u[2],a=u[3]}}[r,o,i,a].every((function(e){return"number"===typeof e&&e>=0&&e<=1}));var c,h,d=eL(r,o),p=eL(i,a),f=(c=r,h=o,function(e){var t=JF(c,h),n=[].concat(KF(t.map((function(e,t){return e*t})).slice(1)),[0]);return ZF(n,e)}),m=function(e){return e>1?1:e<0?0:e},g=function(e){for(var t=e>1?1:e,n=t,r=0;r<8;++r){var i=d(n)-t,o=f(n);if(Math.abs(i-t)<QF||o<QF)return p(n);n=m(n-i/o)}return p(n)};return g.isStepper=!1,g},nL=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];if("string"===typeof r)switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return tL(r);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiff,n=void 0===t?100:t,r=e.damping,i=void 0===r?8:r,o=e.dt,a=void 0===o?17:o,s=function(e,t,r){var o=r+(-(e-t)*n-r*i)*a/1e3,s=r*a/1e3+e;return Math.abs(s-t)<QF&&Math.abs(o)<QF?[t,0]:[s,o]};return s.isStepper=!0,s.dt=a,s}();default:if("cubic-bezier"===r.split("(")[0])return tL(r)}return"function"===typeof r?r:null};function rL(e){return rL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rL(e)}function iL(e){return function(e){if(Array.isArray(e))return cL(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||uL(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function aL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oL(Object(n),!0).forEach((function(t){sL(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oL(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sL(e,t,n){return t=function(e){var t=function(e,t){if("object"!==rL(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==rL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===rL(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||uL(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uL(e,t){if(e){if("string"===typeof e)return cL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cL(e,t):void 0}}function cL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hL=function(e,t,n){return e+(t-e)*n},dL=function(e){return e.from!==e.to},pL=function e(t,n,r){var i=GF((function(e,n){if(dL(n)){var r=lL(t(n.from,n.to,n.velocity),2),i=r[0],o=r[1];return aL(aL({},n),{},{from:i,velocity:o})}return n}),n);return r<1?GF((function(e,t){return dL(t)?aL(aL({},t),{},{velocity:hL(t.velocity,i[e].velocity,r),from:hL(t.from,i[e].from,r)}):t}),n):e(t,i,r-1)};const fL=function(e,t,n,r,i){var o,a,s,l,u=(o=e,a=t,[Object.keys(o),Object.keys(a)].reduce((function(e,t){return e.filter((function(e){return t.includes(e)}))}))),c=u.reduce((function(n,r){return aL(aL({},n),{},sL({},r,[e[r],t[r]]))}),{}),h=u.reduce((function(n,r){return aL(aL({},n),{},sL({},r,{from:e[r],velocity:0,to:t[r]}))}),{}),d=-1,p=function(){return null};return p=n.isStepper?function(r){s||(s=r);var o=(r-s)/n.dt;h=pL(n,h,o),i(aL(aL(aL({},e),t),GF((function(e,t){return t.from}),h))),s=r,Object.values(h).filter(dL).length&&(d=requestAnimationFrame(p))}:function(o){l||(l=o);var a=(o-l)/r,s=GF((function(e,t){return hL.apply(void 0,iL(t).concat([n(a)]))}),c);if(i(aL(aL(aL({},e),t),s)),a<1)d=requestAnimationFrame(p);else{var u=GF((function(e,t){return hL.apply(void 0,iL(t).concat([n(1)]))}),c);i(aL(aL(aL({},e),t),u))}},function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(d)}}};function mL(e){return mL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mL(e)}var gL=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function yL(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function vL(e){return function(e){if(Array.isArray(e))return bL(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return bL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bL(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xL(Object(n),!0).forEach((function(t){kL(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xL(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kL(e,t,n){return(t=EL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,EL(r.key),r)}}function EL(e){var t=function(e,t){if("object"!==mL(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==mL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===mL(t)?t:String(t)}function IL(e,t){return IL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},IL(e,t)}function TL(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_L(e);if(t){var i=_L(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return CL(this,n)}}function CL(e,t){if(t&&("object"===mL(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return AL(e)}function AL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _L(e){return _L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_L(e)}var NL=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IL(e,t)}(o,e);var t,n,r,i=TL(o);function o(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var r=(n=i.call(this,e,t)).props,a=r.isActive,s=r.attributeName,l=r.from,u=r.to,c=r.steps,h=r.children,d=r.duration;if(n.handleStyleChange=n.handleStyleChange.bind(AL(n)),n.changeStyle=n.changeStyle.bind(AL(n)),!a||d<=0)return n.state={style:{}},"function"===typeof h&&(n.state={style:u}),CL(n);if(c&&c.length)n.state={style:c[0].style};else if(l){if("function"===typeof h)return n.state={style:l},CL(n);n.state={style:s?kL({},s,l):l}}else n.state={style:{}};return n}return t=o,n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.isActive,n=e.canBegin;this.mounted=!0,t&&n&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isActive,r=t.canBegin,i=t.attributeName,o=t.shouldReAnimate,a=t.to,s=t.from,l=this.state.style;if(r)if(n){if(!($F(e.to,a)&&e.canBegin&&e.isActive)){var u=!e.canBegin||!e.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var c=u||o?s:e.to;if(this.state&&l){var h={style:i?kL({},i,c):c};(i&&l[i]!==c||!i&&l!==c)&&this.setState(h)}this.runAnimation(wL(wL({},this.props),{},{from:c,begin:0}))}}else{var d={style:i?kL({},i,a):a};this.state&&l&&(i&&l[i]!==a||!i&&l!==a)&&this.setState(d)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}},{key:"handleStyleChange",value:function(e){this.changeStyle(e)}},{key:"changeStyle",value:function(e){this.mounted&&this.setState({style:e})}},{key:"runJSAnimation",value:function(e){var t=this,n=e.from,r=e.to,i=e.duration,o=e.easing,a=e.begin,s=e.onAnimationEnd,l=e.onAnimationStart,u=fL(n,r,nL(o),i,this.changeStyle);this.manager.start([l,a,function(){t.stopJSAnimation=u()},i,s])}},{key:"runStepAnimation",value:function(e){var t=this,n=e.steps,r=e.begin,i=e.onAnimationStart,o=n[0],a=o.style,s=o.duration,l=void 0===s?0:s;return this.manager.start([i].concat(vL(n.reduce((function(e,r,i){if(0===i)return e;var o=r.duration,a=r.easing,s=void 0===a?"ease":a,l=r.style,u=r.properties,c=r.onAnimationEnd,h=i>0?n[i-1]:r,d=u||Object.keys(l);if("function"===typeof s||"spring"===s)return[].concat(vL(e),[t.runJSAnimation.bind(t,{from:h.style,to:l,duration:o,easing:s}),o]);var p=HF(d,o,s),f=wL(wL(wL({},h.style),l),{},{transition:p});return[].concat(vL(e),[f,o,c]).filter(VF)}),[a,Math.max(l,r)])),[e.onAnimationEnd]))}},{key:"runAnimation",value:function(e){this.manager||(this.manager=jF());var t=e.begin,n=e.duration,r=e.attributeName,i=e.to,o=e.easing,a=e.onAnimationStart,s=e.onAnimationEnd,l=e.steps,u=e.children,c=this.manager;if(this.unSubscribe=c.subscribe(this.handleStyleChange),"function"!==typeof o&&"function"!==typeof u&&"spring"!==o)if(l.length>1)this.runStepAnimation(e);else{var h=r?kL({},r,i):i,d=HF(Object.keys(h),n,o);c.start([a,t,wL(wL({},h),{},{transition:d}),n,s])}else this.runJSAnimation(e)}},{key:"render",value:function(){var e=this.props,t=e.children,n=(e.begin,e.duration),r=(e.attributeName,e.easing,e.isActive),i=(e.steps,e.from,e.to,e.canBegin,e.onAnimationEnd,e.shouldReAnimate,e.onAnimationReStart,yL(e,gL)),o=l.Children.count(t),a=this.state.style;if("function"===typeof t)return t(a);if(!r||0===o||n<=0)return t;var s=function(e){var t=e.props,n=t.style,r=void 0===n?{}:n,o=t.className;return(0,l.cloneElement)(e,wL(wL({},i),{},{style:wL(wL({},r),a),className:o}))};return 1===o?s(l.Children.only(t)):l.createElement("div",null,l.Children.map(t,(function(e){return s(e)})))}}],n&&SL(t.prototype,n),r&&SL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(l.PureComponent);NL.displayName="Animate",NL.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},NL.propTypes={from:lF().oneOfType([lF().object,lF().string]),to:lF().oneOfType([lF().object,lF().string]),attributeName:lF().string,duration:lF().number,begin:lF().number,easing:lF().oneOfType([lF().string,lF().func]),steps:lF().arrayOf(lF().shape({duration:lF().number.isRequired,style:lF().object.isRequired,easing:lF().oneOfType([lF().oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),lF().func]),properties:lF().arrayOf("string"),onAnimationEnd:lF().func})),children:lF().oneOfType([lF().node,lF().func]),isActive:lF().bool,canBegin:lF().bool,onAnimationEnd:lF().func,shouldReAnimate:lF().bool,onAnimationStart:lF().func,onAnimationReStart:lF().func};const OL=NL;var RL=["children","appearOptions","enterOptions","leaveOptions"];function $L(e){return $L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$L(e)}function DL(){return DL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DL.apply(this,arguments)}function PL(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ML(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ML(Object(n),!0).forEach((function(t){WL(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ML(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function LL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,VL(r.key),r)}}function jL(e,t){return jL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jL(e,t)}function zL(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=UL(e);if(t){var i=UL(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===$L(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return BL(e)}(this,n)}}function BL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UL(e){return UL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},UL(e)}function WL(e,t,n){return(t=VL(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VL(e){var t=function(e,t){if("object"!==$L(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==$L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===$L(t)?t:String(t)}var GL=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.steps,n=e.duration;return t&&t.length?t.reduce((function(e,t){return e+(Number.isFinite(t.duration)&&t.duration>0?t.duration:0)}),0):Number.isFinite(n)?n:0},HL=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jL(e,t)}(o,e);var t,n,r,i=zL(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),WL(BL(e=i.call(this)),"handleEnter",(function(t,n){var r=e.props,i=r.appearOptions,o=r.enterOptions;e.handleStyleActive(n?i:o)})),WL(BL(e),"handleExit",(function(){var t=e.props.leaveOptions;e.handleStyleActive(t)})),e.state={isActive:!1},e}return t=o,n=[{key:"handleStyleActive",value:function(e){if(e){var t=e.onAnimationEnd?function(){e.onAnimationEnd()}:null;this.setState(FL(FL({},e),{},{onAnimationEnd:t,isActive:!0}))}}},{key:"parseTimeout",value:function(){var e=this.props,t=e.appearOptions,n=e.enterOptions,r=e.leaveOptions;return GL(t)+GL(n)+GL(r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=(t.appearOptions,t.enterOptions,t.leaveOptions,PL(t,RL));return l.createElement(Vs,DL({},r,{onEnter:this.handleEnter,onExit:this.handleExit,timeout:this.parseTimeout()}),(function(){return l.createElement(OL,e.state,l.Children.only(n))}))}}],n&&LL(t.prototype,n),r&&LL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(l.Component);HL.propTypes={appearOptions:lF().object,enterOptions:lF().object,leaveOptions:lF().object,children:lF().element};const qL=HL;function KL(e){var t=e.component,n=e.children,r=e.appear,i=e.enter,o=e.leave;return l.createElement(Bu,{component:t},l.Children.map(n,(function(e,t){return l.createElement(qL,{appearOptions:r,enterOptions:i,leaveOptions:o,key:"child-".concat(t)},e)})))}KL.propTypes={appear:lF().object,enter:lF().object,leave:lF().object,children:lF().oneOfType([lF().array,lF().element]),component:lF().any},KL.defaultProps={component:"span"};const XL=OL;function YL(e){return YL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},YL(e)}function QL(){return QL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},QL.apply(this,arguments)}function JL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ZL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZL(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ej(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ej(Object(n),!0).forEach((function(t){nj(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ej(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nj(e,t,n){return t=function(e){var t=function(e,t){if("object"!=YL(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=YL(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==YL(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rj=function(e,t,n,r,i){var o,a=Math.min(Math.abs(n)/2,Math.abs(r)/2),s=r>=0?1:-1,l=n>=0?1:-1,u=r>=0&&n>=0||r<0&&n<0?1:0;if(a>0&&i instanceof Array){for(var c=[0,0,0,0],h=0;h<4;h++)c[h]=i[h]>a?a:i[h];o="M".concat(e,",").concat(t+s*c[0]),c[0]>0&&(o+="A ".concat(c[0],",").concat(c[0],",0,0,").concat(u,",").concat(e+l*c[0],",").concat(t)),o+="L ".concat(e+n-l*c[1],",").concat(t),c[1]>0&&(o+="A ".concat(c[1],",").concat(c[1],",0,0,").concat(u,",\n        ").concat(e+n,",").concat(t+s*c[1])),o+="L ".concat(e+n,",").concat(t+r-s*c[2]),c[2]>0&&(o+="A ".concat(c[2],",").concat(c[2],",0,0,").concat(u,",\n        ").concat(e+n-l*c[2],",").concat(t+r)),o+="L ".concat(e+l*c[3],",").concat(t+r),c[3]>0&&(o+="A ".concat(c[3],",").concat(c[3],",0,0,").concat(u,",\n        ").concat(e,",").concat(t+r-s*c[3])),o+="Z"}else if(a>0&&i===+i&&i>0){var d=Math.min(a,i);o="M ".concat(e,",").concat(t+s*d,"\n            A ").concat(d,",").concat(d,",0,0,").concat(u,",").concat(e+l*d,",").concat(t,"\n            L ").concat(e+n-l*d,",").concat(t,"\n            A ").concat(d,",").concat(d,",0,0,").concat(u,",").concat(e+n,",").concat(t+s*d,"\n            L ").concat(e+n,",").concat(t+r-s*d,"\n            A ").concat(d,",").concat(d,",0,0,").concat(u,",").concat(e+n-l*d,",").concat(t+r,"\n            L ").concat(e+l*d,",").concat(t+r,"\n            A ").concat(d,",").concat(d,",0,0,").concat(u,",").concat(e,",").concat(t+r-s*d," Z")}else o="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return o},ij=function(e,t){if(!e||!t)return!1;var n=e.x,r=e.y,i=t.x,o=t.y,a=t.width,s=t.height;if(Math.abs(a)>0&&Math.abs(s)>0){var l=Math.min(i,i+a),u=Math.max(i,i+a),c=Math.min(o,o+s),h=Math.max(o,o+s);return n>=l&&n<=u&&r>=c&&r<=h}return!1},oj={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},aj=function(e){var t=tj(tj({},oj),e),n=(0,l.useRef)(),r=JL((0,l.useState)(-1),2),i=r[0],o=r[1];(0,l.useEffect)((function(){if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&o(e)}catch(t){}}),[]);var a=t.x,s=t.y,u=t.width,c=t.height,h=t.radius,d=t.className,p=t.animationEasing,f=t.animationDuration,m=t.animationBegin,g=t.isAnimationActive,y=t.isUpdateAnimationActive;if(a!==+a||s!==+s||u!==+u||c!==+c||0===u||0===c)return null;var v=Se("recharts-rectangle",d);return y?l.createElement(XL,{canBegin:i>0,from:{width:u,height:c,x:a,y:s},to:{width:u,height:c,x:a,y:s},duration:f,animationEasing:p,isActive:y},(function(e){var r=e.width,o=e.height,a=e.x,s=e.y;return l.createElement(XL,{canBegin:i>0,from:"0px ".concat(-1===i?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:f,isActive:g,easing:p},l.createElement("path",QL({},ND(t,!0),{className:v,d:rj(a,s,r,o,h),ref:n})))})):l.createElement("path",QL({},ND(t,!0),{className:v,d:rj(a,s,u,c,h)}))};function sj(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function lj(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}class uj extends Map{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pj;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(cj(this,e))}has(e){return super.has(cj(this,e))}set(e,t){return super.set(hj(this,e),t)}delete(e){return super.delete(dj(this,e))}}Set;function cj(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)?n.get(i):t}function hj(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)?n.get(i):(n.set(i,t),t)}function dj(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)&&(t=n.get(i),n.delete(i)),t}function pj(e){return null!==e&&"object"===typeof e?e.valueOf():e}const fj=Symbol("implicit");function mj(){var e=new uj,t=[],n=[],r=fj;function i(i){let o=e.get(i);if(void 0===o){if(r!==fj)return r;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new uj;for(const r of n)e.has(r)||e.set(r,t.push(r)-1);return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return mj(t,n).unknown(r)},sj.apply(i,arguments),i}function gj(){var e,t,n=mj().unknown(void 0),r=n.domain,i=n.range,o=0,a=1,s=!1,l=0,u=0,c=.5;function h(){var n=r().length,h=a<o,d=h?a:o,p=h?o:a;e=(p-d)/Math.max(1,n-l+2*u),s&&(e=Math.floor(e)),d+=(p-d-e*(n-l))*c,t=e*(1-l),s&&(d=Math.round(d),t=Math.round(t));var f=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o}(n).map((function(t){return d+e*t}));return i(h?f.reverse():f)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),h()):r()},n.range=function(e){return arguments.length?([o,a]=e,o=+o,a=+a,h()):[o,a]},n.rangeRound=function(e){return[o,a]=e,o=+o,a=+a,s=!0,h()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(s=!!e,h()):s},n.padding=function(e){return arguments.length?(l=Math.min(1,u=+e),h()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),h()):l},n.paddingOuter=function(e){return arguments.length?(u=+e,h()):u},n.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),h()):c},n.copy=function(){return gj(r(),[o,a]).round(s).paddingInner(l).paddingOuter(u).align(c)},sj.apply(h(),arguments)}function yj(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return yj(t())},e}function vj(){return yj(gj.apply(null,arguments).paddingInner(1))}function bj(e){return bj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bj(e)}function xj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xj(Object(n),!0).forEach((function(t){kj(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kj(e,t,n){return t=function(e){var t=function(e,t){if("object"!=bj(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=bj(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bj(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Sj={widthCache:{},cacheCount:0},Ej={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Ij="recharts_measurement_span";var Tj=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e||null===e||AP.isSsr)return{width:0,height:0};var n=function(e){var t=wj({},e);return Object.keys(t).forEach((function(e){t[e]||delete t[e]})),t}(t),r=JSON.stringify({text:e,copyStyle:n});if(Sj.widthCache[r])return Sj.widthCache[r];try{var i=document.getElementById(Ij);i||((i=document.createElement("span")).setAttribute("id",Ij),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=wj(wj({},Ej),n);Object.assign(i.style,o),i.textContent="".concat(e);var a=i.getBoundingClientRect(),s={width:a.width,height:a.height};return Sj.widthCache[r]=s,++Sj.cacheCount>2e3&&(Sj.cacheCount=0,Sj.widthCache={}),s}catch(l){return{width:0,height:0}}};function Cj(e){return Cj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cj(e)}function Aj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Oj(r.key),r)}}function Oj(e){var t=function(e,t){if("object"!=Cj(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Cj(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Cj(t)?t:String(t)}var Rj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,$j=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Dj=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Pj=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Mj={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},Fj=Object.keys(Mj),Lj="NaN";var jj=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),""===n||Dj.test(n)||(this.num=NaN,this.unit=""),Fj.includes(n)&&(this.num=function(e,t){return e*Mj[t]}(t,n),this.unit="px")}var t,n,r;return t=e,r=[{key:"parse",value:function(t){var n,r=Aj(null!==(n=Pj.exec(t))&&void 0!==n?n:[],3),i=r[1],o=r[2];return new e(parseFloat(i),null!==o&&void 0!==o?o:"")}}],(n=[{key:"add",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}])&&Nj(t.prototype,n),r&&Nj(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function zj(e){if(e.includes(Lj))return Lj;for(var t=e;t.includes("*")||t.includes("/");){var n,r=Aj(null!==(n=Rj.exec(t))&&void 0!==n?n:[],4),i=r[1],o=r[2],a=r[3],s=jj.parse(null!==i&&void 0!==i?i:""),l=jj.parse(null!==a&&void 0!==a?a:""),u="*"===o?s.multiply(l):s.divide(l);if(u.isNaN())return Lj;t=t.replace(Rj,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,h=Aj(null!==(c=$j.exec(t))&&void 0!==c?c:[],4),d=h[1],p=h[2],f=h[3],m=jj.parse(null!==d&&void 0!==d?d:""),g=jj.parse(null!==f&&void 0!==f?f:""),y="+"===p?m.add(g):m.subtract(g);if(y.isNaN())return Lj;t=t.replace($j,y.toString())}return t}var Bj=/\(([^()]*)\)/;function Uj(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t=e;t.includes("(");){var n=Aj(Bj.exec(t),2)[1];t=t.replace(Bj,zj(n))}return t}(t),t=zj(t)}function Wj(e){var t=function(e){try{return Uj(e)}catch(t){return Lj}}(e.slice(5,-1));return t===Lj?"":t}var Vj=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Gj=["dx","dy","angle","className","breakAll"];function Hj(){return Hj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hj.apply(this,arguments)}function qj(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Kj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Xj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Yj=/[ \f\n\r\t\v\u2028\u2029]+/,Qj=function(e){var t=e.children,n=e.breakAll,r=e.style;try{var i=[];return iD()(t)||(i=n?t.toString().split(""):t.toString().split(Yj)),{wordsWithComputedWidth:i.map((function(e){return{word:e,width:Tj(e,r).width}})),spaceWidth:n?0:Tj("\xa0",r).width}}catch(o){return null}},Jj=function(e){return[{words:iD()(e)?[]:e.toString().split(Yj)}]},Zj=function(e){var t=e.width,n=e.scaleToFit,r=e.children,i=e.style,o=e.breakAll,a=e.maxLines;if((t||n)&&!AP.isSsr){var s=Qj({breakAll:o,children:r,style:i});return s?function(e,t,n,r,i){var o=e.maxLines,a=e.children,s=e.style,l=e.breakAll,u=K$(o),c=a,h=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(e,t){var o=t.word,a=t.width,s=e[e.length-1];if(s&&(null==r||i||s.width+a+n<Number(r)))s.words.push(o),s.width+=a+n;else{var l={words:[o],width:a};e.push(l)}return e}),[])},d=h(t);if(!u)return d;for(var p,f=function(e){var t=c.slice(0,e),n=Qj({breakAll:l,style:s,children:t+"\u2026"}).wordsWithComputedWidth,i=h(n),a=i.length>o||function(e){return e.reduce((function(e,t){return e.width>t.width?e:t}))}(i).width>Number(r);return[a,i]},m=0,g=c.length-1,y=0;m<=g&&y<=c.length-1;){var v=Math.floor((m+g)/2),b=Kj(f(v-1),2),x=b[0],w=b[1],k=Kj(f(v),1)[0];if(x||k||(m=v+1),x&&k&&(g=v-1),!x&&k){p=w;break}y++}return p||d}({breakAll:o,children:r,maxLines:a,style:i},s.wordsWithComputedWidth,s.spaceWidth,t,n):Jj(r)}return Jj(r)},ez="#808080",tz=function(e){var t=e.x,n=void 0===t?0:t,r=e.y,i=void 0===r?0:r,o=e.lineHeight,a=void 0===o?"1em":o,s=e.capHeight,u=void 0===s?"0.71em":s,c=e.scaleToFit,h=void 0!==c&&c,d=e.textAnchor,p=void 0===d?"start":d,f=e.verticalAnchor,m=void 0===f?"end":f,g=e.fill,y=void 0===g?ez:g,v=qj(e,Vj),b=(0,l.useMemo)((function(){return Zj({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:h,style:v.style,width:v.width})}),[v.breakAll,v.children,v.maxLines,h,v.style,v.width]),x=v.dx,w=v.dy,k=v.angle,S=v.className,E=v.breakAll,I=qj(v,Gj);if(!X$(n)||!X$(i))return null;var T,C=n+(K$(x)?x:0),A=i+(K$(w)?w:0);switch(m){case"start":T=Wj("calc(".concat(u,")"));break;case"middle":T=Wj("calc(".concat((b.length-1)/2," * -").concat(a," + (").concat(u," / 2))"));break;default:T=Wj("calc(".concat(b.length-1," * -").concat(a,")"))}var _=[];if(h){var N=b[0].width,O=v.width;_.push("scale(".concat((K$(O)?O/N:1)/N,")"))}return k&&_.push("rotate(".concat(k,", ").concat(C,", ").concat(A,")")),_.length&&(I.transform=_.join(" ")),l.createElement("text",Hj({},ND(I,!0),{x:C,y:A,className:Se("recharts-text",S),textAnchor:p,fill:y.includes("url")?ez:y}),b.map((function(e,t){var n=e.words.join(E?"":" ");return l.createElement("tspan",{x:C,dy:0===t?T:a,key:n},n)})))};const nz=Math.sqrt(50),rz=Math.sqrt(10),iz=Math.sqrt(2);function oz(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=nz?10:o>=rz?5:o>=iz?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/a,s=Math.round(e*u),l=Math.round(t*u),s/u<e&&++s,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*a,s=Math.round(e/u),l=Math.round(t/u),s*u<e&&++s,l*u>t&&--l),l<s&&.5<=n&&n<2?oz(e,t,2*n):[s,l,u]}function az(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const r=t<e,[i,o,a]=r?oz(t,e,n):oz(e,t,n);if(!(o>=i))return[];const s=o-i+1,l=new Array(s);if(r)if(a<0)for(let u=0;u<s;++u)l[u]=(o-u)/-a;else for(let u=0;u<s;++u)l[u]=(o-u)*a;else if(a<0)for(let u=0;u<s;++u)l[u]=(i+u)/-a;else for(let u=0;u<s;++u)l[u]=(i+u)*a;return l}function sz(e,t,n){return oz(e=+e,t=+t,n=+n)[2]}function lz(e,t,n){n=+n;const r=(t=+t)<(e=+e),i=r?sz(t,e,n):sz(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function uz(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function cz(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function hz(e){let t,n,r;function i(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(i<o){if(0!==t(r,r))return o;do{const t=i+o>>>1;n(e[t],r)<0?i=t+1:o=t}while(i<o)}return i}return 2!==e.length?(t=uz,n=(t,n)=>uz(e(t),n),r=(t,n)=>e(t)-n):(t=e===uz||e===cz?e:dz,n=e,r=e),{left:i,center:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const o=i(e,t,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return o>n&&r(e[o-1],t)>-r(e[o],t)?o-1:o},right:function(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(i<o){if(0!==t(r,r))return o;do{const t=i+o>>>1;n(e[t],r)<=0?i=t+1:o=t}while(i<o)}return i}}}function dz(){return 0}function pz(e){return null===e?NaN:+e}const fz=hz(uz),mz=fz.right,gz=(fz.left,hz(pz).center,mz);function yz(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function vz(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function bz(){}var xz=.7,wz=1/xz,kz="\\s*([+-]?\\d+)\\s*",Sz="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ez="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Iz=/^#([0-9a-f]{3,8})$/,Tz=new RegExp(`^rgb\\(${kz},${kz},${kz}\\)$`),Cz=new RegExp(`^rgb\\(${Ez},${Ez},${Ez}\\)$`),Az=new RegExp(`^rgba\\(${kz},${kz},${kz},${Sz}\\)$`),_z=new RegExp(`^rgba\\(${Ez},${Ez},${Ez},${Sz}\\)$`),Nz=new RegExp(`^hsl\\(${Sz},${Ez},${Ez}\\)$`),Oz=new RegExp(`^hsla\\(${Sz},${Ez},${Ez},${Sz}\\)$`),Rz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function $z(){return this.rgb().formatHex()}function Dz(){return this.rgb().formatRgb()}function Pz(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Iz.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Mz(t):3===n?new jz(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Fz(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Fz(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Tz.exec(e))?new jz(t[1],t[2],t[3],1):(t=Cz.exec(e))?new jz(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Az.exec(e))?Fz(t[1],t[2],t[3],t[4]):(t=_z.exec(e))?Fz(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Nz.exec(e))?Gz(t[1],t[2]/100,t[3]/100,1):(t=Oz.exec(e))?Gz(t[1],t[2]/100,t[3]/100,t[4]):Rz.hasOwnProperty(e)?Mz(Rz[e]):"transparent"===e?new jz(NaN,NaN,NaN,0):null}function Mz(e){return new jz(e>>16&255,e>>8&255,255&e,1)}function Fz(e,t,n,r){return r<=0&&(e=t=n=NaN),new jz(e,t,n,r)}function Lz(e,t,n,r){return 1===arguments.length?((i=e)instanceof bz||(i=Pz(i)),i?new jz((i=i.rgb()).r,i.g,i.b,i.opacity):new jz):new jz(e,t,n,null==r?1:r);var i}function jz(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function zz(){return`#${Vz(this.r)}${Vz(this.g)}${Vz(this.b)}`}function Bz(){const e=Uz(this.opacity);return`${1===e?"rgb(":"rgba("}${Wz(this.r)}, ${Wz(this.g)}, ${Wz(this.b)}${1===e?")":`, ${e})`}`}function Uz(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Wz(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Vz(e){return((e=Wz(e))<16?"0":"")+e.toString(16)}function Gz(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new qz(e,t,n,r)}function Hz(e){if(e instanceof qz)return new qz(e.h,e.s,e.l,e.opacity);if(e instanceof bz||(e=Pz(e)),!e)return new qz;if(e instanceof qz)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new qz(a,s,l,e.opacity)}function qz(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Kz(e){return(e=(e||0)%360)<0?e+360:e}function Xz(e){return Math.max(0,Math.min(1,e||0))}function Yz(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Qz(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}yz(bz,Pz,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:$z,formatHex:$z,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Hz(this).formatHsl()},formatRgb:Dz,toString:Dz}),yz(jz,Lz,vz(bz,{brighter(e){return e=null==e?wz:Math.pow(wz,e),new jz(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?xz:Math.pow(xz,e),new jz(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new jz(Wz(this.r),Wz(this.g),Wz(this.b),Uz(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zz,formatHex:zz,formatHex8:function(){return`#${Vz(this.r)}${Vz(this.g)}${Vz(this.b)}${Vz(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Bz,toString:Bz})),yz(qz,(function(e,t,n,r){return 1===arguments.length?Hz(e):new qz(e,t,n,null==r?1:r)}),vz(bz,{brighter(e){return e=null==e?wz:Math.pow(wz,e),new qz(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?xz:Math.pow(xz,e),new qz(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new jz(Yz(e>=240?e-240:e+120,i,r),Yz(e,i,r),Yz(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new qz(Kz(this.h),Xz(this.s),Xz(this.l),Uz(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Uz(this.opacity);return`${1===e?"hsl(":"hsla("}${Kz(this.h)}, ${100*Xz(this.s)}%, ${100*Xz(this.l)}%${1===e?")":`, ${e})`}`}}));const Jz=e=>()=>e;function Zz(e,t){return function(n){return e+n*t}}function eB(e){return 1===(e=+e)?tB:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Jz(isNaN(t)?n:t)}}function tB(e,t){var n=t-e;return n?Zz(e,n):Jz(isNaN(e)?t:e)}const nB=function e(t){var n=eB(t);function r(e,t){var r=n((e=Lz(e)).r,(t=Lz(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=tB(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function rB(e){return function(t){var n,r,i=t.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Lz(t[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=e(o),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=s(e),r+""}}}rB((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return Qz((n-r/t)*t,a,i,o,s)}})),rB((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return Qz((n-r/t)*t,i,o,a,s)}}));function iB(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=dB(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}function oB(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function aB(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function sB(e,t){var n,r={},i={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=dB(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var lB=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,uB=new RegExp(lB.source,"g");function cB(e,t){var n,r,i,o=lB.lastIndex=uB.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=lB.exec(e))&&(r=uB.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:aB(n,r)})),o=uB.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function hB(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}}function dB(e,t){var n,r=typeof t;return null==t||"boolean"===r?Jz(t):("number"===r?aB:"string"===r?(n=Pz(t))?(t=n,nB):cB:t instanceof Pz?nB:t instanceof Date?oB:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?hB:Array.isArray(t)?iB:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?sB:aB)(e,t)}function pB(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function fB(e){return+e}var mB=[0,1];function gB(e){return e}function yB(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function vB(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=yB(i,r),o=n(a,o)):(r=yB(r,i),o=n(o,a)),function(e){return o(r(e))}}function bB(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=yB(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(t){var n=gz(e,t,1,r)-1;return o[n](i[n](t))}}function xB(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function wB(){var e,t,n,r,i,o,a=mB,s=mB,l=dB,u=gB;function c(){var e=Math.min(a.length,s.length);return u!==gB&&(u=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(a[0],a[e-1])),r=e>2?bB:vB,i=o=null,h}function h(t){return null==t||isNaN(t=+t)?n:(i||(i=r(a.map(e),s,l)))(e(u(t)))}return h.invert=function(n){return u(t((o||(o=r(s,a.map(e),aB)))(n)))},h.domain=function(e){return arguments.length?(a=Array.from(e,fB),c()):a.slice()},h.range=function(e){return arguments.length?(s=Array.from(e),c()):s.slice()},h.rangeRound=function(e){return s=Array.from(e),l=pB,c()},h.clamp=function(e){return arguments.length?(u=!!e||gB,c()):u!==gB},h.interpolate=function(e){return arguments.length?(l=e,c()):l},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,r){return e=n,t=r,c()}}function kB(){return wB()(gB,gB)}var SB,EB=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function IB(e){if(!(t=EB.exec(e)))throw new Error("invalid format: "+e);var t;return new TB({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function TB(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function CB(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function AB(e){return(e=CB(Math.abs(e)))?e[1]:NaN}function _B(e,t){var n=CB(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}IB.prototype=TB.prototype,TB.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const NB={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>_B(100*e,t),r:_B,s:function(e,t){var n=CB(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(SB=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+CB(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function OB(e){return e}var RB,$B,DB,PB=Array.prototype.map,MB=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function FB(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?OB:(t=PB.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(e.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?OB:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(PB.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",u=void 0===e.minus?"\u2212":e.minus+"",c=void 0===e.nan?"NaN":e.nan+"";function h(e){var t=(e=IB(e)).fill,n=e.align,h=e.sign,d=e.symbol,p=e.zero,f=e.width,m=e.comma,g=e.precision,y=e.trim,v=e.type;"n"===v?(m=!0,v="g"):NB[v]||(void 0===g&&(g=12),y=!0,v="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var b="$"===d?i:"#"===d&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",x="$"===d?o:/[%p]/.test(v)?l:"",w=NB[v],k=/[defgprs%]/.test(v);function S(e){var i,o,l,d=b,S=x;if("c"===v)S=w(e)+S,e="";else{var E=(e=+e)<0||1/e<0;if(e=isNaN(e)?c:w(Math.abs(e),g),y&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),E&&0===+e&&"+"!==h&&(E=!1),d=(E?"("===h?h:u:"-"===h||"("===h?"":h)+d,S=("s"===v?MB[8+SB/3]:"")+S+(E&&"("===h?")":""),k)for(i=-1,o=e.length;++i<o;)if(48>(l=e.charCodeAt(i))||l>57){S=(46===l?a+e.slice(i+1):e.slice(i))+S,e=e.slice(0,i);break}}m&&!p&&(e=r(e,1/0));var I=d.length+e.length+S.length,T=I<f?new Array(f-I+1).join(t):"";switch(m&&p&&(e=r(T+e,T.length?f-S.length:1/0),T=""),n){case"<":e=d+e+S+T;break;case"=":e=d+T+e+S;break;case"^":e=T.slice(0,I=T.length>>1)+d+e+S+T.slice(I);break;default:e=T+d+e+S}return s(e)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),S.toString=function(){return e+""},S}return{format:h,formatPrefix:function(e,t){var n=h(((e=IB(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(AB(t)/3))),i=Math.pow(10,-r),o=MB[8+r/3];return function(e){return n(i*e)+o}}}}function LB(e,t,n,r){var i,o=lz(e,t,n);switch((r=IB(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(AB(t)/3)))-AB(Math.abs(e)))}(o,a))||(r.precision=i),DB(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,AB(t)-AB(e))+1}(o,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-AB(Math.abs(e)))}(o))||(r.precision=i-2*("%"===r.type))}return $B(r)}function jB(e){var t=e.domain;return e.ticks=function(e){var n=t();return az(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return LB(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,o=t(),a=0,s=o.length-1,l=o[a],u=o[s],c=10;for(u<l&&(i=l,l=u,u=i,i=a,a=s,s=i);c-- >0;){if((i=sz(l,u,n))===r)return o[a]=l,o[s]=u,t(o);if(i>0)l=Math.floor(l/i)*i,u=Math.ceil(u/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,u=Math.floor(u*i)/i}r=i}return e},e}function zB(){var e=kB();return e.copy=function(){return xB(e,zB())},sj.apply(e,arguments),jB(e)}function BB(e){var t;function n(e){return null==e||isNaN(e=+e)?t:e}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=Array.from(t,fB),n):e.slice()},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return BB(e).unknown(t)},e=arguments.length?Array.from(e,fB):[0,1],jB(n)}function UB(e,t){var n,r=0,i=(e=e.slice()).length-1,o=e[r],a=e[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e}function WB(e){return Math.log(e)}function VB(e){return Math.exp(e)}function GB(e){return-Math.log(-e)}function HB(e){return-Math.exp(-e)}function qB(e){return isFinite(e)?+("1e"+e):e<0?0:e}function KB(e){return(t,n)=>-e(-t,n)}function XB(e){const t=e(WB,VB),n=t.domain;let r,i,o=10;function a(){return r=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(o),i=function(e){return 10===e?qB:e===Math.E?Math.exp:t=>Math.pow(e,t)}(o),n()[0]<0?(r=KB(r),i=KB(i),e(GB,HB)):e(WB,VB),t}return t.base=function(e){return arguments.length?(o=+e,a()):o},t.domain=function(e){return arguments.length?(n(e),a()):n()},t.ticks=e=>{const t=n();let a=t[0],s=t[t.length-1];const l=s<a;l&&([a,s]=[s,a]);let u,c,h=r(a),d=r(s);const p=null==e?10:+e;let f=[];if(!(o%1)&&d-h<p){if(h=Math.floor(h),d=Math.ceil(d),a>0){for(;h<=d;++h)for(u=1;u<o;++u)if(c=h<0?u/i(-h):u*i(h),!(c<a)){if(c>s)break;f.push(c)}}else for(;h<=d;++h)for(u=o-1;u>=1;--u)if(c=h>0?u/i(-h):u*i(h),!(c<a)){if(c>s)break;f.push(c)}2*f.length<p&&(f=az(a,s,p))}else f=az(h,d,Math.min(d-h,p)).map(i);return l?f.reverse():f},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===o?"s":","),"function"!==typeof n&&(o%1||null!=(n=IB(n)).precision||(n.trim=!0),n=$B(n)),e===1/0)return n;const a=Math.max(1,o*e/t.ticks().length);return e=>{let t=e/i(Math.round(r(e)));return t*o<o-.5&&(t*=o),t<=a?n(e):""}},t.nice=()=>n(UB(n(),{floor:e=>i(Math.floor(r(e))),ceil:e=>i(Math.ceil(r(e)))})),t}function YB(){const e=XB(wB()).domain([1,10]);return e.copy=()=>xB(e,YB()).base(e.base()),sj.apply(e,arguments),e}function QB(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function JB(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function ZB(e){var t=1,n=e(QB(t),JB(t));return n.constant=function(n){return arguments.length?e(QB(t=+n),JB(t)):t},jB(n)}function eU(){var e=ZB(wB());return e.copy=function(){return xB(e,eU()).constant(e.constant())},sj.apply(e,arguments)}function tU(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function nU(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function rU(e){return e<0?-e*e:e*e}function iU(e){var t=e(gB,gB),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(gB,gB):.5===n?e(nU,rU):e(tU(n),tU(1/n)):n},jB(t)}function oU(){var e=iU(wB());return e.copy=function(){return xB(e,oU()).exponent(e.exponent())},sj.apply(e,arguments),e}function aU(){return oU.apply(null,arguments).exponent(.5)}function sU(e){return Math.sign(e)*e*e}function lU(){var e,t=kB(),n=[0,1],r=!1;function i(n){var i=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(n));return isNaN(i)?e:r?Math.round(i):i}return i.invert=function(e){return t.invert(sU(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain()},i.range=function(e){return arguments.length?(t.range((n=Array.from(e,fB)).map(sU)),i):n.slice()},i.rangeRound=function(e){return i.range(e).round(!0)},i.round=function(e){return arguments.length?(r=!!e,i):r},i.clamp=function(e){return arguments.length?(t.clamp(e),i):t.clamp()},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return lU(t.domain(),n).round(r).clamp(t.clamp()).unknown(e)},sj.apply(i,arguments),jB(i)}function uU(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function cU(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function hU(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uz;if(e===uz)return dU;if("function"!==typeof e)throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||0===r?r:(0===e(n,n))-(0===e(t,t))}}function dU(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function pU(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,i=arguments.length>4?arguments[4]:void 0;if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=void 0===i?dU:hU(i);r>n;){if(r-n>600){const o=r-n+1,a=t-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);pU(e,t,Math.max(n,Math.floor(t-a*l/o+u)),Math.min(r,Math.floor(t+(o-a)*l/o+u)),i)}const o=e[t];let a=n,s=r;for(fU(e,n,t),i(e[r],o)>0&&fU(e,n,r);a<s;){for(fU(e,a,s),++a,--s;i(e[a],o)<0;)++a;for(;i(e[s],o)>0;)--s}0===i(e[n],o)?fU(e,n,s):(++s,fU(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function fU(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function mU(e,t,n){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let n of e)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,n)),(r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return cU(e);if(t>=1)return uU(e);var r,i=(r-1)*t,o=Math.floor(i),a=uU(pU(e,o).subarray(0,o+1));return a+(cU(e.subarray(o+1))-a)*(i-o)}}function gU(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pz;if((r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e);return a+(+n(e[o+1],o+1,e)-a)*(i-o)}}function yU(){var e,t=[],n=[],r=[];function i(){var e=0,i=Math.max(1,n.length);for(r=new Array(i-1);++e<i;)r[e-1]=gU(t,e/i);return o}function o(t){return null==t||isNaN(t=+t)?e:n[gz(r,t)]}return o.invertExtent=function(e){var i=n.indexOf(e);return i<0?[NaN,NaN]:[i>0?r[i-1]:t[0],i<r.length?r[i]:t[t.length-1]]},o.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(uz),i()},o.range=function(e){return arguments.length?(n=Array.from(e),i()):n.slice()},o.unknown=function(t){return arguments.length?(e=t,o):e},o.quantiles=function(){return r.slice()},o.copy=function(){return yU().domain(t).range(n).unknown(e)},sj.apply(o,arguments)}function vU(){var e,t=0,n=1,r=1,i=[.5],o=[0,1];function a(t){return null!=t&&t<=t?o[gz(i,t,0,r)]:e}function s(){var e=-1;for(i=new Array(r);++e<r;)i[e]=((e+1)*n-(e-r)*t)/(r+1);return a}return a.domain=function(e){return arguments.length?([t,n]=e,t=+t,n=+n,s()):[t,n]},a.range=function(e){return arguments.length?(r=(o=Array.from(e)).length-1,s()):o.slice()},a.invertExtent=function(e){var a=o.indexOf(e);return a<0?[NaN,NaN]:a<1?[t,i[0]]:a>=r?[i[r-1],n]:[i[a-1],i[a]]},a.unknown=function(t){return arguments.length?(e=t,a):a},a.thresholds=function(){return i.slice()},a.copy=function(){return vU().domain([t,n]).range(o).unknown(e)},sj.apply(jB(a),arguments)}function bU(){var e,t=[.5],n=[0,1],r=1;function i(i){return null!=i&&i<=i?n[gz(t,i,0,r)]:e}return i.domain=function(e){return arguments.length?(t=Array.from(e),r=Math.min(t.length,n.length-1),i):t.slice()},i.range=function(e){return arguments.length?(n=Array.from(e),r=Math.min(t.length,n.length-1),i):n.slice()},i.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return bU().domain(t).range(n).unknown(e)},sj.apply(i,arguments)}RB=FB({thousands:",",grouping:[3],currency:["$",""]}),$B=RB.format,DB=RB.formatPrefix;const xU=1e3,wU=6e4,kU=36e5,SU=864e5,EU=6048e5,IU=2592e6,TU=31536e6,CU=new Date,AU=new Date;function _U(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=t=>(e(t=new Date(+t)),t),i.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),i.round=e=>{const t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),i.range=(n,r,o)=>{const a=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r)||!(o>0))return a;let s;do{a.push(s=new Date(+n)),t(n,o),e(n)}while(s<n&&n<r);return a},i.filter=n=>_U((t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),((e,r)=>{if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););})),n&&(i.count=(t,r)=>(CU.setTime(+t),AU.setTime(+r),e(CU),e(AU),Math.floor(n(CU,AU))),i.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?t=>r(t)%e===0:t=>i.count(0,t)%e===0):i:null)),i}const NU=_U((()=>{}),((e,t)=>{e.setTime(+e+t)}),((e,t)=>t-e));NU.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?_U((t=>{t.setTime(Math.floor(t/e)*e)}),((t,n)=>{t.setTime(+t+n*e)}),((t,n)=>(n-t)/e)):NU:null);NU.range;const OU=_U((e=>{e.setTime(e-e.getMilliseconds())}),((e,t)=>{e.setTime(+e+t*xU)}),((e,t)=>(t-e)/xU),(e=>e.getUTCSeconds())),RU=(OU.range,_U((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*xU)}),((e,t)=>{e.setTime(+e+t*wU)}),((e,t)=>(t-e)/wU),(e=>e.getMinutes()))),$U=(RU.range,_U((e=>{e.setUTCSeconds(0,0)}),((e,t)=>{e.setTime(+e+t*wU)}),((e,t)=>(t-e)/wU),(e=>e.getUTCMinutes()))),DU=($U.range,_U((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*xU-e.getMinutes()*wU)}),((e,t)=>{e.setTime(+e+t*kU)}),((e,t)=>(t-e)/kU),(e=>e.getHours()))),PU=(DU.range,_U((e=>{e.setUTCMinutes(0,0,0)}),((e,t)=>{e.setTime(+e+t*kU)}),((e,t)=>(t-e)/kU),(e=>e.getUTCHours()))),MU=(PU.range,_U((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*wU)/SU),(e=>e.getDate()-1))),FU=(MU.range,_U((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/SU),(e=>e.getUTCDate()-1))),LU=(FU.range,_U((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/SU),(e=>Math.floor(e/SU))));LU.range;function jU(e){return _U((t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),((e,t)=>{e.setDate(e.getDate()+7*t)}),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*wU)/EU))}const zU=jU(0),BU=jU(1),UU=jU(2),WU=jU(3),VU=jU(4),GU=jU(5),HU=jU(6);zU.range,BU.range,UU.range,WU.range,VU.range,GU.range,HU.range;function qU(e){return _U((t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)}),((e,t)=>(t-e)/EU))}const KU=qU(0),XU=qU(1),YU=qU(2),QU=qU(3),JU=qU(4),ZU=qU(5),eW=qU(6),tW=(KU.range,XU.range,YU.range,QU.range,JU.range,ZU.range,eW.range,_U((e=>{e.setDate(1),e.setHours(0,0,0,0)}),((e,t)=>{e.setMonth(e.getMonth()+t)}),((e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())),(e=>e.getMonth()))),nW=(tW.range,_U((e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)}),((e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())),(e=>e.getUTCMonth()))),rW=(nW.range,_U((e=>{e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,t)=>{e.setFullYear(e.getFullYear()+t)}),((e,t)=>t.getFullYear()-e.getFullYear()),(e=>e.getFullYear())));rW.every=e=>isFinite(e=Math.floor(e))&&e>0?_U((t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,n)=>{t.setFullYear(t.getFullYear()+n*e)})):null;rW.range;const iW=_U((e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)}),((e,t)=>t.getUTCFullYear()-e.getUTCFullYear()),(e=>e.getUTCFullYear()));iW.every=e=>isFinite(e=Math.floor(e))&&e>0?_U((t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null;iW.range;function oW(e,t,n,r,i,o){const a=[[OU,1,xU],[OU,5,5e3],[OU,15,15e3],[OU,30,3e4],[o,1,wU],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,kU],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,SU],[r,2,1728e5],[n,1,EU],[t,1,IU],[t,3,7776e6],[e,1,TU]];function s(t,n,r){const i=Math.abs(n-t)/r,o=hz((e=>{let[,,t]=e;return t})).right(a,i);if(o===a.length)return e.every(lz(t/TU,n/TU,r));if(0===o)return NU.every(Math.max(lz(t,n,r),1));const[s,l]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return s.every(l)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const i=n&&"function"===typeof n.range?n:s(e,t,n),o=i?i.range(e,+t+1):[];return r?o.reverse():o},s]}const[aW,sW]=oW(iW,nW,KU,LU,PU,$U),[lW,uW]=oW(rW,tW,zU,MU,DU,RU);function cW(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function hW(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function dW(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var pW,fW,mW,gW={"-":"",_:" ",0:"0"},yW=/^\s*\d+/,vW=/^%/,bW=/[\\^$*+?|[\]().{}]/g;function xW(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function wW(e){return e.replace(bW,"\\$&")}function kW(e){return new RegExp("^(?:"+e.map(wW).join("|")+")","i")}function SW(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function EW(e,t,n){var r=yW.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function IW(e,t,n){var r=yW.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function TW(e,t,n){var r=yW.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function CW(e,t,n){var r=yW.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function AW(e,t,n){var r=yW.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function _W(e,t,n){var r=yW.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function NW(e,t,n){var r=yW.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function OW(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function RW(e,t,n){var r=yW.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function $W(e,t,n){var r=yW.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function DW(e,t,n){var r=yW.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function PW(e,t,n){var r=yW.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function MW(e,t,n){var r=yW.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function FW(e,t,n){var r=yW.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function LW(e,t,n){var r=yW.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function jW(e,t,n){var r=yW.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function zW(e,t,n){var r=yW.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function BW(e,t,n){var r=vW.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function UW(e,t,n){var r=yW.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function WW(e,t,n){var r=yW.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function VW(e,t){return xW(e.getDate(),t,2)}function GW(e,t){return xW(e.getHours(),t,2)}function HW(e,t){return xW(e.getHours()%12||12,t,2)}function qW(e,t){return xW(1+MU.count(rW(e),e),t,3)}function KW(e,t){return xW(e.getMilliseconds(),t,3)}function XW(e,t){return KW(e,t)+"000"}function YW(e,t){return xW(e.getMonth()+1,t,2)}function QW(e,t){return xW(e.getMinutes(),t,2)}function JW(e,t){return xW(e.getSeconds(),t,2)}function ZW(e){var t=e.getDay();return 0===t?7:t}function eV(e,t){return xW(zU.count(rW(e)-1,e),t,2)}function tV(e){var t=e.getDay();return t>=4||0===t?VU(e):VU.ceil(e)}function nV(e,t){return e=tV(e),xW(VU.count(rW(e),e)+(4===rW(e).getDay()),t,2)}function rV(e){return e.getDay()}function iV(e,t){return xW(BU.count(rW(e)-1,e),t,2)}function oV(e,t){return xW(e.getFullYear()%100,t,2)}function aV(e,t){return xW((e=tV(e)).getFullYear()%100,t,2)}function sV(e,t){return xW(e.getFullYear()%1e4,t,4)}function lV(e,t){var n=e.getDay();return xW((e=n>=4||0===n?VU(e):VU.ceil(e)).getFullYear()%1e4,t,4)}function uV(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+xW(t/60|0,"0",2)+xW(t%60,"0",2)}function cV(e,t){return xW(e.getUTCDate(),t,2)}function hV(e,t){return xW(e.getUTCHours(),t,2)}function dV(e,t){return xW(e.getUTCHours()%12||12,t,2)}function pV(e,t){return xW(1+FU.count(iW(e),e),t,3)}function fV(e,t){return xW(e.getUTCMilliseconds(),t,3)}function mV(e,t){return fV(e,t)+"000"}function gV(e,t){return xW(e.getUTCMonth()+1,t,2)}function yV(e,t){return xW(e.getUTCMinutes(),t,2)}function vV(e,t){return xW(e.getUTCSeconds(),t,2)}function bV(e){var t=e.getUTCDay();return 0===t?7:t}function xV(e,t){return xW(KU.count(iW(e)-1,e),t,2)}function wV(e){var t=e.getUTCDay();return t>=4||0===t?JU(e):JU.ceil(e)}function kV(e,t){return e=wV(e),xW(JU.count(iW(e),e)+(4===iW(e).getUTCDay()),t,2)}function SV(e){return e.getUTCDay()}function EV(e,t){return xW(XU.count(iW(e)-1,e),t,2)}function IV(e,t){return xW(e.getUTCFullYear()%100,t,2)}function TV(e,t){return xW((e=wV(e)).getUTCFullYear()%100,t,2)}function CV(e,t){return xW(e.getUTCFullYear()%1e4,t,4)}function AV(e,t){var n=e.getUTCDay();return xW((e=n>=4||0===n?JU(e):JU.ceil(e)).getUTCFullYear()%1e4,t,4)}function _V(){return"+0000"}function NV(){return"%"}function OV(e){return+e}function RV(e){return Math.floor(+e/1e3)}function $V(e){return new Date(e)}function DV(e){return e instanceof Date?+e:+new Date(+e)}function PV(e,t,n,r,i,o,a,s,l,u){var c=kB(),h=c.invert,d=c.domain,p=u(".%L"),f=u(":%S"),m=u("%I:%M"),g=u("%I %p"),y=u("%a %d"),v=u("%b %d"),b=u("%B"),x=u("%Y");function w(e){return(l(e)<e?p:s(e)<e?f:a(e)<e?m:o(e)<e?g:r(e)<e?i(e)<e?y:v:n(e)<e?b:x)(e)}return c.invert=function(e){return new Date(h(e))},c.domain=function(e){return arguments.length?d(Array.from(e,DV)):d().map($V)},c.ticks=function(t){var n=d();return e(n[0],n[n.length-1],null==t?10:t)},c.tickFormat=function(e,t){return null==t?w:u(t)},c.nice=function(e){var n=d();return e&&"function"===typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?d(UB(n,e)):c},c.copy=function(){return xB(c,PV(e,t,n,r,i,o,a,s,l,u))},c}function MV(){return sj.apply(PV(lW,uW,rW,tW,zU,MU,DU,RU,OU,fW).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function FV(){return sj.apply(PV(aW,sW,iW,nW,KU,FU,PU,$U,OU,mW).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function LV(){var e,t,n,r,i,o=0,a=1,s=gB,l=!1;function u(t){return null==t||isNaN(t=+t)?i:s(0===n?.5:(t=(r(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function c(e){return function(t){var n,r;return arguments.length?([n,r]=t,s=e(n,r),u):[s(0),s(1)]}}return u.domain=function(i){return arguments.length?([o,a]=i,e=r(o=+o),t=r(a=+a),n=e===t?0:1/(t-e),u):[o,a]},u.clamp=function(e){return arguments.length?(l=!!e,u):l},u.interpolator=function(e){return arguments.length?(s=e,u):s},u.range=c(dB),u.rangeRound=c(pB),u.unknown=function(e){return arguments.length?(i=e,u):i},function(i){return r=i,e=i(o),t=i(a),n=e===t?0:1/(t-e),u}}function jV(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function zV(){var e=jB(LV()(gB));return e.copy=function(){return jV(e,zV())},lj.apply(e,arguments)}function BV(){var e=XB(LV()).domain([1,10]);return e.copy=function(){return jV(e,BV()).base(e.base())},lj.apply(e,arguments)}function UV(){var e=ZB(LV());return e.copy=function(){return jV(e,UV()).constant(e.constant())},lj.apply(e,arguments)}function WV(){var e=iU(LV());return e.copy=function(){return jV(e,WV()).exponent(e.exponent())},lj.apply(e,arguments)}function VV(){return WV.apply(null,arguments).exponent(.5)}function GV(){var e=[],t=gB;function n(n){if(null!=n&&!isNaN(n=+n))return t((gz(e,n,1)-1)/(e.length-1))}return n.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(uz),n},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.range=function(){return e.map(((n,r)=>t(r/(e.length-1))))},n.quantiles=function(t){return Array.from({length:t+1},((n,r)=>mU(e,r/t)))},n.copy=function(){return GV(t).domain(e)},lj.apply(n,arguments)}function HV(){var e,t,n,r,i,o,a,s=0,l=.5,u=1,c=1,h=gB,d=!1;function p(e){return isNaN(e=+e)?a:(e=.5+((e=+o(e))-t)*(c*e<c*t?r:i),h(d?Math.max(0,Math.min(1,e)):e))}function f(e){return function(t){var n,r,i;return arguments.length?([n,r,i]=t,h=function(e,t){void 0===t&&(t=e,e=dB);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return o[t](e-t)}}(e,[n,r,i]),p):[h(0),h(.5),h(1)]}}return p.domain=function(a){return arguments.length?([s,l,u]=a,e=o(s=+s),t=o(l=+l),n=o(u=+u),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),c=t<e?-1:1,p):[s,l,u]},p.clamp=function(e){return arguments.length?(d=!!e,p):d},p.interpolator=function(e){return arguments.length?(h=e,p):h},p.range=f(dB),p.rangeRound=f(pB),p.unknown=function(e){return arguments.length?(a=e,p):a},function(a){return o=a,e=a(s),t=a(l),n=a(u),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),c=t<e?-1:1,p}}function qV(){var e=jB(HV()(gB));return e.copy=function(){return jV(e,qV())},lj.apply(e,arguments)}function KV(){var e=XB(HV()).domain([.1,1,10]);return e.copy=function(){return jV(e,KV()).base(e.base())},lj.apply(e,arguments)}function XV(){var e=ZB(HV());return e.copy=function(){return jV(e,XV()).constant(e.constant())},lj.apply(e,arguments)}function YV(){var e=iU(HV());return e.copy=function(){return jV(e,YV()).exponent(e.exponent())},lj.apply(e,arguments)}function QV(){return YV.apply(null,arguments).exponent(.5)}function JV(e,t){if((i=e.length)>1)for(var n,r,i,o=1,a=e[t[0]],s=a.length;o<i;++o)for(r=a,a=e[t[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}!function(e){pW=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,l=e.shortMonths,u=kW(i),c=SW(i),h=kW(o),d=SW(o),p=kW(a),f=SW(a),m=kW(s),g=SW(s),y=kW(l),v=SW(l),b={a:function(e){return a[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:VW,e:VW,f:XW,g:aV,G:lV,H:GW,I:HW,j:qW,L:KW,m:YW,M:QW,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:OV,s:RV,S:JW,u:ZW,U:eV,V:nV,w:rV,W:iV,x:null,X:null,y:oV,Y:sV,Z:uV,"%":NV},x={a:function(e){return a[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:cV,e:cV,f:mV,g:TV,G:AV,H:hV,I:dV,j:pV,L:fV,m:gV,M:yV,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:OV,s:RV,S:vV,u:bV,U:xV,V:kV,w:SV,W:EV,x:null,X:null,y:IV,Y:CV,Z:_V,"%":NV},w={a:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=f.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=h.exec(t.slice(n));return r?(e.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=y.exec(t.slice(n));return r?(e.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return E(e,t,n,r)},d:DW,e:DW,f:zW,g:NW,G:_W,H:MW,I:MW,j:PW,L:jW,m:$W,M:FW,p:function(e,t,n){var r=u.exec(t.slice(n));return r?(e.p=c.get(r[0].toLowerCase()),n+r[0].length):-1},q:RW,Q:UW,s:WW,S:LW,u:IW,U:TW,V:CW,w:EW,W:AW,x:function(e,t,r){return E(e,n,t,r)},X:function(e,t,n){return E(e,r,t,n)},y:NW,Y:_W,Z:OW,"%":BW};function k(e,t){return function(n){var r,i,o,a=[],s=-1,l=0,u=e.length;for(n instanceof Date||(n=new Date(+n));++s<u;)37===e.charCodeAt(s)&&(a.push(e.slice(l,s)),null!=(i=gW[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(o=t[r])&&(r=o(n,i)),a.push(r),l=s+1);return a.push(e.slice(l,s)),a.join("")}}function S(e,t){return function(n){var r,i,o=dW(1900,void 0,1);if(E(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=hW(dW(o.y,0,1))).getUTCDay(),r=i>4||0===i?XU.ceil(r):XU(r),r=FU.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=cW(dW(o.y,0,1))).getDay(),r=i>4||0===i?BU.ceil(r):BU(r),r=MU.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?hW(dW(o.y,0,1)).getUTCDay():cW(dW(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,hW(o)):cW(o)}}function E(e,t,n,r){for(var i,o,a=0,s=t.length,l=n.length;a<s;){if(r>=l)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=w[i in gW?t.charAt(a++):i])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=k(n,b),b.X=k(r,b),b.c=k(t,b),x.x=k(n,x),x.X=k(r,x),x.c=k(t,x),{format:function(e){var t=k(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=S(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=k(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=S(e+="",!0);return t.toString=function(){return e},t}}}(e),fW=pW.format,pW.parse,mW=pW.utcFormat,pW.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Array.prototype.slice;function ZV(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function eG(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function tG(e,t){return e[t]}function nG(e){const t=[];return t.key=e,t}var rG=n(539),iG=n.n(rG),oG=n(6745),aG=n.n(oG),sG=n(3538),lG=n.n(sG),uG=n(9853),cG=n.n(uG),hG=n(8210),dG=n.n(hG);function pG(e){return function(e){if(Array.isArray(e))return fG(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return fG(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fG(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fG(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var mG=function(e){return e},gG={"@@functional/placeholder":!0},yG=function(e){return e===gG},vG=function(e){return function t(){return 0===arguments.length||1===arguments.length&&yG(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},bG=function e(t,n){return 1===t?n:vG((function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.filter((function(e){return e!==gG})).length;return a>=t?n.apply(void 0,i):e(t-a,vG((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o=i.map((function(e){return yG(e)?t.shift():e}));return n.apply(void 0,pG(o).concat(t))})))}))},xG=function(e){return bG(e.length,e)},wG=function(e,t){for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},kG=xG((function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map((function(e){return t[e]})).map(e)})),SG=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return mG;var r=t.reverse(),i=r[0],o=r.slice(1);return function(){return o.reduce((function(e,t){return t(e)}),i.apply(void 0,arguments))}},EG=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},IG=function(e){var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t&&i.every((function(e,n){return e===t[n]}))?n:(t=i,n=e.apply(void 0,i))}};var TG=xG((function(e,t,n){var r=+e;return r+n*(+t-r)})),CG=xG((function(e,t,n){var r=t-+e;return(n-e)/(r=r||1/0)})),AG=xG((function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))}));const _G={rangeStep:function(e,t,n){for(var r=new(dG())(e),i=0,o=[];r.lt(t)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o},getDigitCount:function(e){return 0===e?1:Math.floor(new(dG())(e).abs().log(10).toNumber())+1},interpolateNumber:TG,uninterpolateNumber:CG,uninterpolateTruncation:AG};function NG(e){return function(e){if(Array.isArray(e))return $G(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||RG(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OG(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||RG(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RG(e,t){if(e){if("string"===typeof e)return $G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$G(e,t):void 0}}function $G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function DG(e){var t=OG(e,2),n=t[0],r=t[1],i=n,o=r;return n>r&&(i=r,o=n),[i,o]}function PG(e,t,n){if(e.lte(0))return new(dG())(0);var r=_G.getDigitCount(e.toNumber()),i=new(dG())(10).pow(r),o=e.div(i),a=1!==r?.05:.1,s=new(dG())(Math.ceil(o.div(a).toNumber())).add(n).mul(a).mul(i);return t?s:new(dG())(Math.ceil(s))}function MG(e,t,n){var r=1,i=new(dG())(e);if(!i.isint()&&n){var o=Math.abs(e);o<1?(r=new(dG())(10).pow(_G.getDigitCount(e)-1),i=new(dG())(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new(dG())(Math.floor(e)))}else 0===e?i=new(dG())(Math.floor((t-1)/2)):n||(i=new(dG())(Math.floor(e)));var a=Math.floor((t-1)/2);return SG(kG((function(e){return i.add(new(dG())(e-a).mul(r)).toNumber()})),wG)(0,t)}function FG(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new(dG())(0),tickMin:new(dG())(0),tickMax:new(dG())(0)};var o,a=PG(new(dG())(t).sub(e).div(n-1),r,i);o=e<=0&&t>=0?new(dG())(0):(o=new(dG())(e).add(t).div(2)).sub(new(dG())(o).mod(a));var s=Math.ceil(o.sub(e).div(a).toNumber()),l=Math.ceil(new(dG())(t).sub(o).div(a).toNumber()),u=s+l+1;return u>n?FG(e,t,n,r,i+1):(u<n&&(l=t>0?l+(n-u):l,s=t>0?s:s+(n-u)),{step:a,tickMin:o.sub(new(dG())(s).mul(a)),tickMax:o.add(new(dG())(l).mul(a))})}var LG=IG((function(e){var t=OG(e,2),n=t[0],r=t[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Math.max(i,2),s=OG(DG([n,r]),2),l=s[0],u=s[1];if(l===-1/0||u===1/0){var c=u===1/0?[l].concat(NG(wG(0,i-1).map((function(){return 1/0})))):[].concat(NG(wG(0,i-1).map((function(){return-1/0}))),[u]);return n>r?EG(c):c}if(l===u)return MG(l,i,o);var h=FG(l,u,a,o),d=h.step,p=h.tickMin,f=h.tickMax,m=_G.rangeStep(p,f.add(new(dG())(.1).mul(d)),d);return n>r?EG(m):m})),jG=(IG((function(e){var t=OG(e,2),n=t[0],r=t[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Math.max(i,2),s=OG(DG([n,r]),2),l=s[0],u=s[1];if(l===-1/0||u===1/0)return[n,r];if(l===u)return MG(l,i,o);var c=PG(new(dG())(u).sub(l).div(a-1),o,0),h=SG(kG((function(e){return new(dG())(l).add(new(dG())(e).mul(c)).toNumber()})),wG)(0,a).filter((function(e){return e>=l&&e<=u}));return n>r?EG(h):h})),IG((function(e,t){var n=OG(e,2),r=n[0],i=n[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=OG(DG([r,i]),2),s=a[0],l=a[1];if(s===-1/0||l===1/0)return[r,i];if(s===l)return[s];var u=Math.max(t,2),c=PG(new(dG())(l).sub(s).div(u-1),o,0),h=[].concat(NG(_G.rangeStep(new(dG())(s),new(dG())(l).sub(new(dG())(.99).mul(c)),c)),[l]);return r>i?EG(h):h}))),zG=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function BG(){return BG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BG.apply(this,arguments)}function UG(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return WG(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WG(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WG(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function VG(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function GG(e){var t=e.offset,n=e.layout,r=e.width,i=e.dataKey,o=e.data,a=e.dataPointFormatter,s=e.xAxis,u=e.yAxis,c=VG(e,zG),h=ND(c,!1);"x"===e.direction&&"number"!==s.type&&HD(!1);var d=o.map((function(e){var o=a(e,i),c=o.x,d=o.y,p=o.value,f=o.errorVal;if(!f)return null;var m,g,y=[];if(Array.isArray(f)){var v=UG(f,2);m=v[0],g=v[1]}else m=g=f;if("vertical"===n){var b=s.scale,x=d+t,w=x+r,k=x-r,S=b(p-m),E=b(p+g);y.push({x1:E,y1:w,x2:E,y2:k}),y.push({x1:S,y1:x,x2:E,y2:x}),y.push({x1:S,y1:w,x2:S,y2:k})}else if("horizontal"===n){var I=u.scale,T=c+t,C=T-r,A=T+r,_=I(p-m),N=I(p+g);y.push({x1:C,y1:N,x2:A,y2:N}),y.push({x1:T,y1:_,x2:T,y2:N}),y.push({x1:C,y1:_,x2:A,y2:_})}return l.createElement(eP,BG({className:"recharts-errorBar",key:"bar-".concat(y.map((function(e){return"".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)})))},h),y.map((function(e){return l.createElement("line",BG({},e,{key:"line-".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))})))}));return l.createElement(eP,{className:"recharts-errorBars"},d)}function HG(e){return HG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HG(e)}function qG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function KG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qG(Object(n),!0).forEach((function(t){XG(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qG(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function XG(e,t,n){return t=function(e){var t=function(e,t){if("object"!=HG(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=HG(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==HG(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}GG.defaultProps={stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"},GG.displayName="ErrorBar";var YG=function(e){var t,n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,o=e.legendContent,a=TD(n,iF);return a?(t=a.props&&a.props.payload?a.props&&a.props.payload:"children"===o?(r||[]).reduce((function(e,t){var n=t.item,r=t.props,i=r.sectors||r.data||[];return e.concat(i.map((function(e){return{type:a.props.iconType||n.props.legendType,value:e.name,color:e.fill,payload:e}})))}),[]):(r||[]).map((function(e){var t=e.item,n=t.props,r=n.dataKey,i=n.name,o=n.legendType;return{inactive:n.hide,dataKey:r,type:a.props.iconType||o||"square",color:oH(t),value:i||r,payload:t.props}})),KG(KG(KG({},a.props),iF.getWithHeight(a,i)),{},{payload:t,item:a})):null};function QG(e){return QG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QG(e)}function JG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ZG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JG(Object(n),!0).forEach((function(t){eH(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JG(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function eH(e,t,n){return t=function(e){var t=function(e,t){if("object"!=QG(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=QG(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==QG(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tH(e){return function(e){if(Array.isArray(e))return nH(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return nH(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nH(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nH(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rH(e,t,n){return iD()(e)||iD()(t)?n:X$(t)?W$()(e,t,n):aD()(t)?t(e):n}function iH(e,t,n,r){var i=lG()(e,(function(e){return rH(e,t)}));if("number"===n){var o=i.filter((function(e){return K$(e)||parseFloat(e)}));return o.length?[aG()(o),iG()(o)]:[1/0,-1/0]}return(r?i.filter((function(e){return!iD()(e)})):i).map((function(e){return X$(e)||e instanceof Date?e:""}))}var oH=function(e){var t,n=e.type.displayName,r=e.props,i=r.stroke,o=r.fill;switch(n){case"Line":t=i;break;case"Area":case"Radar":t=i&&"none"!==i?i:o;break;default:t=o}return t},aH=function(e,t,n,r,i){var o=ID(t.props.children,GG).filter((function(e){return function(e,t,n){return!!iD()(t)||("horizontal"===e?"yAxis"===t:"vertical"===e||"x"===n?"xAxis"===t:"y"!==n||"yAxis"===t)}(r,i,e.props.direction)}));if(o&&o.length){var a=o.map((function(e){return e.props.dataKey}));return e.reduce((function(e,t){var r=rH(t,n);if(iD()(r))return e;var i=Array.isArray(r)?[aG()(r),iG()(r)]:[r,r],o=a.reduce((function(e,n){var r=rH(t,n,0),o=i[0]-Math.abs(Array.isArray(r)?r[0]:r),a=i[1]+Math.abs(Array.isArray(r)?r[1]:r);return[Math.min(o,e[0]),Math.max(a,e[1])]}),[1/0,-1/0]);return[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}),[1/0,-1/0])}return null},sH=function(e,t,n,r,i){var o=t.map((function(t){var o=t.props.dataKey;return"number"===n&&o&&aH(e,t,o,r)||iH(e,o,n,i)}));if("number"===n)return o.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[1/0,-1/0]);var a={};return o.reduce((function(e,t){for(var n=0,r=t.length;n<r;n++)a[t[n]]||(a[t[n]]=!0,e.push(t[n]));return e}),[])},lH=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},uH=function(e,t,n){if(!e)return null;var r=e.scale,i=e.duplicateDomain,o=e.type,a=e.range,s="scaleBand"===e.realScaleType?r.bandwidth()/2:2,l=(t||n)&&"category"===o&&r.bandwidth?r.bandwidth()/s:0;return l="angleAxis"===e.axisType&&(null===a||void 0===a?void 0:a.length)>=2?2*H$(a[0]-a[1])*l:l,t&&(e.ticks||e.niceTicks)?(e.ticks||e.niceTicks).map((function(e){var t=i?i.indexOf(e):e;return{coordinate:r(t)+l,value:e,offset:l}})).filter((function(e){return!B$()(e.coordinate)})):e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map((function(e,t){return{coordinate:r(e)+l,value:e,index:t,offset:l}})):r.ticks&&!n?r.ticks(e.tickCount).map((function(e){return{coordinate:r(e)+l,value:e,offset:l}})):r.domain().map((function(e,t){return{coordinate:r(e)+l,value:i?i[e]:e,index:t,offset:l}}))},cH=new WeakMap,hH=function(e,t){if("function"!==typeof t)return e;cH.has(e)||cH.set(e,new WeakMap);var n=cH.get(e);if(n.has(t))return n.get(t);var r=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return n.set(t,r),r},dH=function(t,n,r){var i=t.scale,o=t.type,a=t.layout,s=t.axisType;if("auto"===i)return"radial"===a&&"radiusAxis"===s?{scale:gj(),realScaleType:"band"}:"radial"===a&&"angleAxis"===s?{scale:zB(),realScaleType:"linear"}:"category"===o&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:vj(),realScaleType:"point"}:"category"===o?{scale:gj(),realScaleType:"band"}:{scale:zB(),realScaleType:"linear"};if(j$()(i)){var l="scale".concat(GP()(i));return{scale:(e[l]||vj)(),realScaleType:e[l]?l:"point"}}return aD()(i)?{scale:i}:{scale:vj(),realScaleType:"point"}},pH=1e-4,fH=function(e){var t=e.domain();if(t&&!(t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-pH,o=Math.max(r[0],r[1])+pH,a=e(t[0]),s=e(t[n-1]);(a<i||a>o||s<i||s>o)&&e.domain([t[0],t[n-1]])}},mH={sign:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,o=0,a=0;a<t;++a){var s=B$()(e[a][n][1])?e[a][n][0]:e[a][n][1];s>=0?(e[a][n][0]=i,e[a][n][1]=i+s,i=e[a][n][1]):(e[a][n][0]=o,e[a][n][1]=o+s,o=e[a][n][1])}},expand:function(e,t){if((r=e.length)>0){for(var n,r,i,o=0,a=e[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=e[n][o][1]||0;if(i)for(n=0;n<r;++n)e[n][o][1]/=i}JV(e,t)}},none:JV,silhouette:function(e,t){if((n=e.length)>0){for(var n,r=0,i=e[t[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=e[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}JV(e,t)}},wiggle:function(e,t){if((i=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,l=0,u=0;s<i;++s){for(var c=e[t[s]],h=c[a][1]||0,d=(h-(c[a-1][1]||0))/2,p=0;p<s;++p){var f=e[t[p]];d+=(f[a][1]||0)-(f[a-1][1]||0)}l+=h,u+=d*h}n[a-1][1]+=n[a-1][0]=o,l&&(o-=u/l)}n[a-1][1]+=n[a-1][0]=o,JV(e,t)}},positive:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,o=0;o<t;++o){var a=B$()(e[o][n][1])?e[o][n][0]:e[o][n][1];a>=0?(e[o][n][0]=i,e[o][n][1]=i+a,i=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}}},gH=function(e,t,n){var r=t.map((function(e){return e.props.dataKey})),i=mH[n],o=function(){var e=fM([]),t=eG,n=JV,r=tG;function i(i){var o,a,s=Array.from(e.apply(this,arguments),nG),l=s.length,u=-1;for(const e of i)for(o=0,++u;o<l;++o)(s[o][u]=[0,+r(e,s[o].key,u,i)]).data=e;for(o=0,a=ZV(t(s));o<l;++o)s[a[o]].index=o;return n(s,a),s}return i.keys=function(t){return arguments.length?(e="function"===typeof t?t:fM(Array.from(t)),i):e},i.value=function(e){return arguments.length?(r="function"===typeof e?e:fM(+e),i):r},i.order=function(e){return arguments.length?(t=null==e?eG:"function"===typeof e?e:fM(Array.from(e)),i):t},i.offset=function(e){return arguments.length?(n=null==e?JV:e,i):n},i}().keys(r).value((function(e,t){return+rH(e,t,0)})).order(eG).offset(i);return o(e)},yH=function(e,t){var n=t.realScaleType,r=t.type,i=t.tickCount,o=t.originalDomain,a=t.allowDecimals,s=n||t.scale;if("auto"!==s&&"linear"!==s)return null;if(i&&"number"===r&&o&&("auto"===o[0]||"auto"===o[1])){var l=e.domain();if(!l.length)return null;var u=LG(l,i,a);return e.domain([aG()(u),iG()(u)]),{niceTicks:u}}if(i&&"number"===r){var c=e.domain();return{niceTicks:jG(c,i,a)}}return null};var vH=function(e){var t=e.axis,n=e.ticks,r=e.offset,i=e.bandSize,o=e.entry,a=e.index;if("category"===t.type)return n[a]?n[a].coordinate+r:null;var s=rH(o,t.dataKey,t.domain[a]);return iD()(s)?null:t.scale(s)-i/2+r},bH=function(e,t,n){return Object.keys(e).reduce((function(r,i){var o=e[i].stackedData.reduce((function(e,r){var i=function(e){return e.reduce((function(e,t){return[aG()(t.concat([e[0]]).filter(K$)),iG()(t.concat([e[1]]).filter(K$))]}),[1/0,-1/0])}(r.slice(t,n+1));return[Math.min(e[0],i[0]),Math.max(e[1],i[1])]}),[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]}),[1/0,-1/0]).map((function(e){return e===1/0||e===-1/0?0:e}))},xH=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,wH=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,kH=function(e,t,n){if(aD()(e))return e(t,n);if(!Array.isArray(e))return t;var r=[];if(K$(e[0]))r[0]=n?e[0]:Math.min(e[0],t[0]);else if(xH.test(e[0])){var i=+xH.exec(e[0])[1];r[0]=t[0]-i}else aD()(e[0])?r[0]=e[0](t[0]):r[0]=t[0];if(K$(e[1]))r[1]=n?e[1]:Math.max(e[1],t[1]);else if(wH.test(e[1])){var o=+wH.exec(e[1])[1];r[1]=t[1]+o}else aD()(e[1])?r[1]=e[1](t[1]):r[1]=t[1];return r},SH=function(e,t,n){if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=VD()(t,(function(e){return e.coordinate})),o=1/0,a=1,s=i.length;a<s;a++){var l=i[a],u=i[a-1];o=Math.min((l.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},EH=function(e,t,n){return e&&e.length?cG()(e,W$()(n,"type.defaultProps.domain"))?t:e:t},IH=function(e,t){var n=e.props,r=n.dataKey,i=n.name,o=n.unit,a=n.formatter,s=n.tooltipType,l=n.chartType,u=n.hide;return ZG(ZG({},ND(e,!1)),{},{dataKey:r,unit:o,formatter:a,name:i||r,color:oH(e),value:rH(t,r),type:s,payload:t,chartType:l,hide:u})};function TH(e){return TH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},TH(e)}function CH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function AH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CH(Object(n),!0).forEach((function(t){_H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CH(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _H(e,t,n){return t=function(e){var t=function(e,t){if("object"!=TH(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=TH(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==TH(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var NH=["Webkit","Moz","O","ms"];function OH(e){return OH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OH(e)}function RH(){return RH=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RH.apply(this,arguments)}function $H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$H(Object(n),!0).forEach((function(t){BH(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function PH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,UH(r.key),r)}}function MH(e,t,n){return t=LH(t),function(e,t){if(t&&("object"===OH(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return jH(e)}(e,FH()?Reflect.construct(t,n||[],LH(e).constructor):t.apply(e,n))}function FH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(FH=function(){return!!e})()}function LH(e){return LH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},LH(e)}function jH(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zH(e,t){return zH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zH(e,t)}function BH(e,t,n){return(t=UH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UH(e){var t=function(e,t){if("object"!=OH(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=OH(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==OH(t)?t:String(t)}var WH=function(e){return e.changedTouches&&!!e.changedTouches.length},VH=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),BH(jH(n=MH(this,t,[e])),"handleDrag",(function(e){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(e):n.state.isSlideMoving&&n.handleSlideDrag(e)})),BH(jH(n),"handleTouchMove",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&n.handleDrag(e.changedTouches[0])})),BH(jH(n),"handleDragEnd",(function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},(function(){var e=n.props,t=e.endIndex,r=e.onDragEnd,i=e.startIndex;null===r||void 0===r||r({endIndex:t,startIndex:i})})),n.detachDragEndListener()})),BH(jH(n),"handleLeaveWrapper",(function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))})),BH(jH(n),"handleEnterSlideOrTraveller",(function(){n.setState({isTextActive:!0})})),BH(jH(n),"handleLeaveSlideOrTraveller",(function(){n.setState({isTextActive:!1})})),BH(jH(n),"handleSlideDragStart",(function(e){var t=WH(e)?e.changedTouches[0]:e;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:t.pageX}),n.attachDragEndListener()})),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(jH(n),"startX"),endX:n.handleTravellerDragStart.bind(jH(n),"endX")},n.state={},n}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zH(e,t)}(t,e),n=t,r=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(e){var n=e.startX,r=e.endX,i=this.state.scaleValues,o=this.props,a=o.gap,s=o.data.length-1,l=Math.min(n,r),u=Math.max(n,r),c=t.getIndexInRange(i,l),h=t.getIndexInRange(i,u);return{startIndex:c-c%a,endIndex:h===s?s:h-h%a}}},{key:"getTextOfTick",value:function(e){var t=this.props,n=t.data,r=t.tickFormatter,i=t.dataKey,o=rH(n[e],i,e);return aD()(r)?r(o,e):o}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(e){var t=this.state,n=t.slideMoveStartX,r=t.startX,i=t.endX,o=this.props,a=o.x,s=o.width,l=o.travellerWidth,u=o.startIndex,c=o.endIndex,h=o.onChange,d=e.pageX-n;d>0?d=Math.min(d,a+s-l-i,a+s-l-r):d<0&&(d=Math.max(d,a-r,a-i));var p=this.getIndex({startX:r+d,endX:i+d});p.startIndex===u&&p.endIndex===c||!h||h(p),this.setState({startX:r+d,endX:i+d,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var n=WH(t)?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:n.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(e){var t=this.state,n=t.brushMoveStartX,r=t.movingTravellerId,i=t.endX,o=t.startX,a=this.state[r],s=this.props,l=s.x,u=s.width,c=s.travellerWidth,h=s.onChange,d=s.gap,p=s.data,f={startX:this.state.startX,endX:this.state.endX},m=e.pageX-n;m>0?m=Math.min(m,l+u-c-a):m<0&&(m=Math.max(m,l-a)),f[r]=a+m;var g=this.getIndex(f),y=g.startIndex,v=g.endIndex;this.setState(BH(BH({},r,a+m),"brushMoveStartX",e.pageX),(function(){h&&function(){var e=p.length-1;return"startX"===r&&(i>o?y%d===0:v%d===0)||i<o&&v===e||"endX"===r&&(i>o?v%d===0:y%d===0)||i>o&&v===e}()&&h(g)}))}},{key:"handleTravellerMoveKeyboard",value:function(e,t){var n=this,r=this.state,i=r.scaleValues,o=r.startX,a=r.endX,s=this.state[t],l=i.indexOf(s);if(-1!==l){var u=l+e;if(!(-1===u||u>=i.length)){var c=i[u];"startX"===t&&c>=a||"endX"===t&&c<=o||this.setState(BH({},t,c),(function(){n.props.onChange(n.getIndex({startX:n.state.startX,endX:n.state.endX}))}))}}}},{key:"renderBackground",value:function(){var e=this.props,t=e.x,n=e.y,r=e.width,i=e.height,o=e.fill,a=e.stroke;return l.createElement("rect",{stroke:a,fill:o,x:t,y:n,width:r,height:i})}},{key:"renderPanorama",value:function(){var e=this.props,t=e.x,n=e.y,r=e.width,i=e.height,o=e.data,a=e.children,s=e.padding,u=l.Children.only(a);return u?l.cloneElement(u,{x:t,y:n,width:r,height:i,margin:s,compact:!0,data:o}):null}},{key:"renderTravellerLayer",value:function(e,n){var r,i,o=this,a=this.props,s=a.y,u=a.travellerWidth,c=a.height,h=a.traveller,d=a.ariaLabel,p=a.data,f=a.startIndex,m=a.endIndex,g=Math.max(e,this.props.x),y=DH(DH({},ND(this.props,!1)),{},{x:g,y:s,width:u,height:c}),v=d||"Min value: ".concat(null===(r=p[f])||void 0===r?void 0:r.name,", Max value: ").concat(null===(i=p[m])||void 0===i?void 0:i.name);return l.createElement(eP,{tabIndex:0,role:"slider","aria-label":v,"aria-valuenow":e,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[n],onTouchStart:this.travellerDragStartHandlers[n],onKeyDown:function(e){["ArrowLeft","ArrowRight"].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),o.handleTravellerMoveKeyboard("ArrowRight"===e.key?1:-1,n))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,y))}},{key:"renderSlide",value:function(e,t){var n=this.props,r=n.y,i=n.height,o=n.stroke,a=n.travellerWidth,s=Math.min(e,t)+a,u=Math.max(Math.abs(t-e)-a,0);return l.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:o,fillOpacity:.2,x:s,y:r,width:u,height:i})}},{key:"renderText",value:function(){var e=this.props,t=e.startIndex,n=e.endIndex,r=e.y,i=e.height,o=e.travellerWidth,a=e.stroke,s=this.state,u=s.startX,c=s.endX,h={pointerEvents:"none",fill:a};return l.createElement(eP,{className:"recharts-brush-texts"},l.createElement(tz,RH({textAnchor:"end",verticalAnchor:"middle",x:Math.min(u,c)-5,y:r+i/2},h),this.getTextOfTick(t)),l.createElement(tz,RH({textAnchor:"start",verticalAnchor:"middle",x:Math.max(u,c)+o+5,y:r+i/2},h),this.getTextOfTick(n)))}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.className,r=e.children,i=e.x,o=e.y,a=e.width,s=e.height,u=e.alwaysShowText,c=this.state,h=c.startX,d=c.endX,p=c.isTextActive,f=c.isSlideMoving,m=c.isTravellerMoving,g=c.isTravellerFocused;if(!t||!t.length||!K$(i)||!K$(o)||!K$(a)||!K$(s)||a<=0||s<=0)return null;var y=Se("recharts-brush",n),v=1===l.Children.count(r),b=function(e,t){if(!e)return null;var n=e.replace(/(\w)/,(function(e){return e.toUpperCase()})),r=NH.reduce((function(e,r){return AH(AH({},e),{},_H({},r+n,t))}),{});return r[e]=t,r}("userSelect","none");return l.createElement(eP,{className:y,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:b},this.renderBackground(),v&&this.renderPanorama(),this.renderSlide(h,d),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(d,"endX"),(p||f||m||g||u)&&this.renderText())}}],i=[{key:"renderDefaultTraveller",value:function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=e.stroke,a=Math.floor(n+i/2)-1;return l.createElement(l.Fragment,null,l.createElement("rect",{x:t,y:n,width:r,height:i,fill:o,stroke:"none"}),l.createElement("line",{x1:t+1,y1:a,x2:t+r-1,y2:a,fill:"none",stroke:"#fff"}),l.createElement("line",{x1:t+1,y1:a+2,x2:t+r-1,y2:a+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(e,n){return l.isValidElement(e)?l.cloneElement(e,n):aD()(e)?e(n):t.renderDefaultTraveller(n)}},{key:"getDerivedStateFromProps",value:function(e,t){var n=e.data,r=e.width,i=e.x,o=e.travellerWidth,a=e.updateId,s=e.startIndex,l=e.endIndex;if(n!==t.prevData||a!==t.prevUpdateId)return DH({prevData:n,prevTravellerWidth:o,prevUpdateId:a,prevX:i,prevWidth:r},n&&n.length?function(e){var t=e.data,n=e.startIndex,r=e.endIndex,i=e.x,o=e.width,a=e.travellerWidth;if(!t||!t.length)return{};var s=t.length,l=vj().domain(UD()(0,s)).range([i,i+o-a]),u=l.domain().map((function(e){return l(e)}));return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:l(n),endX:l(r),scale:l,scaleValues:u}}({data:n,width:r,x:i,travellerWidth:o,startIndex:s,endIndex:l}):{scale:null,scaleValues:null});if(t.scale&&(r!==t.prevWidth||i!==t.prevX||o!==t.prevTravellerWidth)){t.scale.range([i,i+r-o]);var u=t.scale.domain().map((function(e){return t.scale(e)}));return{prevData:n,prevTravellerWidth:o,prevUpdateId:a,prevX:i,prevWidth:r,startX:t.scale(e.startIndex),endX:t.scale(e.endIndex),scaleValues:u}}return null}},{key:"getIndexInRange",value:function(e,t){for(var n=0,r=e.length-1;r-n>1;){var i=Math.floor((n+r)/2);e[i]>t?r=i:n=i}return t>=e[r]?r:n}}],r&&PH(n.prototype,r),i&&PH(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}(l.PureComponent);function GH(e){return GH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GH(e)}function HH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HH(Object(n),!0).forEach((function(t){KH(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HH(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function KH(e,t,n){return t=function(e){var t=function(e,t){if("object"!=GH(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=GH(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==GH(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XH(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return YH(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YH(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YH(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}BH(VH,"displayName","Brush"),BH(VH,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var QH=Math.PI/180,JH=function(e){return 180*e/Math.PI},ZH=function(e,t,n,r){return{x:e+Math.cos(-QH*r)*n,y:t+Math.sin(-QH*r)*n}},eq=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(t-(n.top||0)-(n.bottom||0)))/2},tq=function(e,t){var n=e.x,r=e.y,i=t.cx,o=t.cy,a=function(e,t){var n=e.x,r=e.y,i=t.x,o=t.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(r-o,2))}({x:n,y:r},{x:i,y:o});if(a<=0)return{radius:a};var s=(n-i)/a,l=Math.acos(s);return r>o&&(l=2*Math.PI-l),{radius:a,angle:JH(l),angleInRadian:l}},nq=function(e,t){var n=t.startAngle,r=t.endAngle,i=Math.floor(n/360),o=Math.floor(r/360);return e+360*Math.min(i,o)},rq=function(e,t){var n=e.x,r=e.y,i=tq({x:n,y:r},t),o=i.radius,a=i.angle,s=t.innerRadius,l=t.outerRadius;if(o<s||o>l)return!1;if(0===o)return!0;var u,c=function(e){var t=e.startAngle,n=e.endAngle,r=Math.floor(t/360),i=Math.floor(n/360),o=Math.min(r,i);return{startAngle:t-360*o,endAngle:n-360*o}}(t),h=c.startAngle,d=c.endAngle,p=a;if(h<=d){for(;p>d;)p-=360;for(;p<h;)p+=360;u=p>=h&&p<=d}else{for(;p>h;)p-=360;for(;p<d;)p+=360;u=p>=d&&p<=h}return u?qH(qH({},t),{},{radius:o,angle:nq(p,t)}):null},iq=function(e){return(0,l.isValidElement)(e)||aD()(e)||"boolean"===typeof e?"":e.className};function oq(e){return oq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oq(e)}var aq=["offset"];function sq(e){return function(e){if(Array.isArray(e))return lq(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return lq(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lq(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uq(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function cq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cq(Object(n),!0).forEach((function(t){dq(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cq(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dq(e,t,n){return t=function(e){var t=function(e,t){if("object"!=oq(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=oq(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==oq(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pq(){return pq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pq.apply(this,arguments)}var fq=function(e,t,n){var r,i,o=e.position,a=e.viewBox,s=e.offset,u=e.className,c=a,h=c.cx,d=c.cy,p=c.innerRadius,f=c.outerRadius,m=c.startAngle,g=c.endAngle,y=c.clockWise,v=(p+f)/2,b=function(e,t){return H$(t-e)*Math.min(Math.abs(t-e),360)}(m,g),x=b>=0?1:-1;"insideStart"===o?(r=m+x*s,i=y):"insideEnd"===o?(r=g-x*s,i=!y):"end"===o&&(r=g+x*s,i=y),i=b<=0?i:!i;var w=ZH(h,d,v,r),k=ZH(h,d,v,r+359*(i?1:-1)),S="M".concat(w.x,",").concat(w.y,"\n    A").concat(v,",").concat(v,",0,1,").concat(i?0:1,",\n    ").concat(k.x,",").concat(k.y),E=iD()(e.id)?Q$("recharts-radial-line-"):e.id;return l.createElement("text",pq({},n,{dominantBaseline:"central",className:Se("recharts-radial-bar-label",u)}),l.createElement("defs",null,l.createElement("path",{id:E,d:S})),l.createElement("textPath",{xlinkHref:"#".concat(E)},t))};function mq(e){var t,n=e.offset,r=hq({offset:void 0===n?5:n},uq(e,aq)),i=r.viewBox,o=r.position,a=r.value,s=r.children,u=r.content,c=r.className,h=void 0===c?"":c,d=r.textBreakAll;if(!i||iD()(a)&&iD()(s)&&!(0,l.isValidElement)(u)&&!aD()(u))return null;if((0,l.isValidElement)(u))return(0,l.cloneElement)(u,r);if(aD()(u)){if(t=(0,l.createElement)(u,r),(0,l.isValidElement)(t))return t}else t=function(e){var t=e.value,n=e.formatter,r=iD()(e.children)?t:e.children;return aD()(n)?n(r):r}(r);var p=function(e){return"cx"in e&&K$(e.cx)}(i),f=ND(r,!0);if(p&&("insideStart"===o||"insideEnd"===o||"end"===o))return fq(r,t,f);var m=p?function(e){var t=e.viewBox,n=e.offset,r=e.position,i=t,o=i.cx,a=i.cy,s=i.innerRadius,l=i.outerRadius,u=(i.startAngle+i.endAngle)/2;if("outside"===r){var c=ZH(o,a,l+n,u),h=c.x;return{x:h,y:c.y,textAnchor:h>=o?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:o,y:a,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:o,y:a,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:o,y:a,textAnchor:"middle",verticalAnchor:"end"};var d=ZH(o,a,(s+l)/2,u);return{x:d.x,y:d.y,textAnchor:"middle",verticalAnchor:"middle"}}(r):function(e){var t=e.viewBox,n=e.parentViewBox,r=e.offset,i=e.position,o=t,a=o.x,s=o.y,l=o.width,u=o.height,c=u>=0?1:-1,h=c*r,d=c>0?"end":"start",p=c>0?"start":"end",f=l>=0?1:-1,m=f*r,g=f>0?"end":"start",y=f>0?"start":"end";if("top"===i)return hq(hq({},{x:a+l/2,y:s-c*r,textAnchor:"middle",verticalAnchor:d}),n?{height:Math.max(s-n.y,0),width:l}:{});if("bottom"===i)return hq(hq({},{x:a+l/2,y:s+u+h,textAnchor:"middle",verticalAnchor:p}),n?{height:Math.max(n.y+n.height-(s+u),0),width:l}:{});if("left"===i){var v={x:a-m,y:s+u/2,textAnchor:g,verticalAnchor:"middle"};return hq(hq({},v),n?{width:Math.max(v.x-n.x,0),height:u}:{})}if("right"===i){var b={x:a+l+m,y:s+u/2,textAnchor:y,verticalAnchor:"middle"};return hq(hq({},b),n?{width:Math.max(n.x+n.width-b.x,0),height:u}:{})}var x=n?{width:l,height:u}:{};return"insideLeft"===i?hq({x:a+m,y:s+u/2,textAnchor:y,verticalAnchor:"middle"},x):"insideRight"===i?hq({x:a+l-m,y:s+u/2,textAnchor:g,verticalAnchor:"middle"},x):"insideTop"===i?hq({x:a+l/2,y:s+h,textAnchor:"middle",verticalAnchor:p},x):"insideBottom"===i?hq({x:a+l/2,y:s+u-h,textAnchor:"middle",verticalAnchor:d},x):"insideTopLeft"===i?hq({x:a+m,y:s+h,textAnchor:y,verticalAnchor:p},x):"insideTopRight"===i?hq({x:a+l-m,y:s+h,textAnchor:g,verticalAnchor:p},x):"insideBottomLeft"===i?hq({x:a+m,y:s+u-h,textAnchor:y,verticalAnchor:d},x):"insideBottomRight"===i?hq({x:a+l-m,y:s+u-h,textAnchor:g,verticalAnchor:d},x):lD()(i)&&(K$(i.x)||q$(i.x))&&(K$(i.y)||q$(i.y))?hq({x:a+J$(i.x,l),y:s+J$(i.y,u),textAnchor:"end",verticalAnchor:"end"},x):hq({x:a+l/2,y:s+u/2,textAnchor:"middle",verticalAnchor:"middle"},x)}(r);return l.createElement(tz,pq({className:Se("recharts-label",h)},f,m,{breakAll:d}),t)}mq.displayName="Label";var gq=function(e){var t=e.cx,n=e.cy,r=e.angle,i=e.startAngle,o=e.endAngle,a=e.r,s=e.radius,l=e.innerRadius,u=e.outerRadius,c=e.x,h=e.y,d=e.top,p=e.left,f=e.width,m=e.height,g=e.clockWise,y=e.labelViewBox;if(y)return y;if(K$(f)&&K$(m)){if(K$(c)&&K$(h))return{x:c,y:h,width:f,height:m};if(K$(d)&&K$(p))return{x:d,y:p,width:f,height:m}}return K$(c)&&K$(h)?{x:c,y:h,width:0,height:0}:K$(t)&&K$(n)?{cx:t,cy:n,startAngle:i||r||0,endAngle:o||r||0,innerRadius:l||0,outerRadius:u||s||a||0,clockWise:g}:e.viewBox?e.viewBox:{}};mq.parseViewBox=gq,mq.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var r=e.children,i=gq(e),o=ID(r,mq).map((function(e,n){return(0,l.cloneElement)(e,{viewBox:t||i,key:"label-".concat(n)})}));if(!n)return o;var a=function(e,t){return e?!0===e?l.createElement(mq,{key:"label-implicit",viewBox:t}):X$(e)?l.createElement(mq,{key:"label-implicit",viewBox:t,value:e}):(0,l.isValidElement)(e)?e.type===mq?(0,l.cloneElement)(e,{key:"label-implicit",viewBox:t}):l.createElement(mq,{key:"label-implicit",content:e,viewBox:t}):aD()(e)?l.createElement(mq,{key:"label-implicit",content:e,viewBox:t}):lD()(e)?l.createElement(mq,pq({viewBox:t},e,{key:"label-implicit"})):null:null}(e.label,t||i);return[a].concat(sq(o))};var yq=function(e,t){var n=e.alwaysShow,r=e.ifOverflow;return n&&(r="extendDomain"),r===t},vq=n(1733),bq=n.n(vq),xq=n(7002),wq=n.n(xq),kq=function(e){return null};kq.displayName="Cell";var Sq=n(4065),Eq=n.n(Sq);function Iq(e){return Iq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iq(e)}var Tq=["valueAccessor"],Cq=["data","dataKey","clockWise","id","textBreakAll"];function Aq(e){return function(e){if(Array.isArray(e))return _q(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return _q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _q(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nq(){return Nq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nq.apply(this,arguments)}function Oq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oq(Object(n),!0).forEach((function(t){$q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oq(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $q(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Iq(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Iq(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Iq(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dq(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Pq=function(e){return Array.isArray(e.value)?Eq()(e.value):e.value};function Mq(e){var t=e.valueAccessor,n=void 0===t?Pq:t,r=Dq(e,Tq),i=r.data,o=r.dataKey,a=r.clockWise,s=r.id,u=r.textBreakAll,c=Dq(r,Cq);return i&&i.length?l.createElement(eP,{className:"recharts-label-list"},i.map((function(e,t){var r=iD()(o)?n(e,t):rH(e&&e.payload,o),i=iD()(s)?{}:{id:"".concat(s,"-").concat(t)};return l.createElement(mq,Nq({},ND(e,!0),c,i,{parentViewBox:e.parentViewBox,value:r,textBreakAll:u,viewBox:mq.parseViewBox(iD()(a)?e:Rq(Rq({},e),{},{clockWise:a})),key:"label-".concat(t),index:t}))}))):null}Mq.displayName="LabelList",Mq.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var r=ID(e.children,Mq).map((function(e,n){return(0,l.cloneElement)(e,{data:t,key:"labelList-".concat(n)})}));if(!n)return r;var i=function(e,t){return e?!0===e?l.createElement(Mq,{key:"labelList-implicit",data:t}):l.isValidElement(e)||aD()(e)?l.createElement(Mq,{key:"labelList-implicit",data:t,content:e}):lD()(e)?l.createElement(Mq,Nq({data:t},e,{key:"labelList-implicit"})):null:null}(e.label,t);return[i].concat(Aq(r))};var Fq=n(2322),Lq=n.n(Fq),jq=n(6361),zq=n.n(jq);function Bq(e){return Bq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bq(e)}function Uq(){return Uq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uq.apply(this,arguments)}function Wq(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Vq(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vq(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gq(Object(n),!0).forEach((function(t){qq(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gq(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qq(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Bq(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Bq(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Bq(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Kq=function(e,t,n,r,i){var o,a=n-r;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+n,",").concat(t),o+="L ".concat(e+n-a/2,",").concat(t+i),o+="L ".concat(e+n-a/2-r,",").concat(t+i),o+="L ".concat(e,",").concat(t," Z")},Xq={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Yq=function(e){var t=Hq(Hq({},Xq),e),n=(0,l.useRef)(),r=Wq((0,l.useState)(-1),2),i=r[0],o=r[1];(0,l.useEffect)((function(){if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&o(e)}catch(t){}}),[]);var a=t.x,s=t.y,u=t.upperWidth,c=t.lowerWidth,h=t.height,d=t.className,p=t.animationEasing,f=t.animationDuration,m=t.animationBegin,g=t.isUpdateAnimationActive;if(a!==+a||s!==+s||u!==+u||c!==+c||h!==+h||0===u&&0===c||0===h)return null;var y=Se("recharts-trapezoid",d);return g?l.createElement(XL,{canBegin:i>0,from:{upperWidth:0,lowerWidth:0,height:h,x:a,y:s},to:{upperWidth:u,lowerWidth:c,height:h,x:a,y:s},duration:f,animationEasing:p,isActive:g},(function(e){var r=e.upperWidth,o=e.lowerWidth,a=e.height,s=e.x,u=e.y;return l.createElement(XL,{canBegin:i>0,from:"0px ".concat(-1===i?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:f,easing:p},l.createElement("path",Uq({},ND(t,!0),{className:y,d:Kq(s,u,r,o,a),ref:n})))})):l.createElement("g",null,l.createElement("path",Uq({},ND(t,!0),{className:y,d:Kq(a,s,u,c,h)})))};function Qq(e){return Qq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qq(e)}function Jq(){return Jq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jq.apply(this,arguments)}function Zq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function eK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zq(Object(n),!0).forEach((function(t){tK(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zq(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tK(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Qq(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Qq(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Qq(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nK=function(e){var t=e.cx,n=e.cy,r=e.radius,i=e.angle,o=e.sign,a=e.isExternal,s=e.cornerRadius,l=e.cornerIsExternal,u=s*(a?1:-1)+r,c=Math.asin(s/u)/QH,h=l?i:i+o*c,d=l?i-o*c:i;return{center:ZH(t,n,u,h),circleTangency:ZH(t,n,r,h),lineTangency:ZH(t,n,u*Math.cos(c*QH),d),theta:c}},rK=function(e){var t=e.cx,n=e.cy,r=e.innerRadius,i=e.outerRadius,o=e.startAngle,a=function(e,t){return H$(t-e)*Math.min(Math.abs(t-e),359.999)}(o,e.endAngle),s=o+a,l=ZH(t,n,i,o),u=ZH(t,n,i,s),c="M ".concat(l.x,",").concat(l.y,"\n    A ").concat(i,",").concat(i,",0,\n    ").concat(+(Math.abs(a)>180),",").concat(+(o>s),",\n    ").concat(u.x,",").concat(u.y,"\n  ");if(r>0){var h=ZH(t,n,r,o),d=ZH(t,n,r,s);c+="L ".concat(d.x,",").concat(d.y,"\n            A ").concat(r,",").concat(r,",0,\n            ").concat(+(Math.abs(a)>180),",").concat(+(o<=s),",\n            ").concat(h.x,",").concat(h.y," Z")}else c+="L ".concat(t,",").concat(n," Z");return c},iK={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},oK=function(e){var t=eK(eK({},iK),e),n=t.cx,r=t.cy,i=t.innerRadius,o=t.outerRadius,a=t.cornerRadius,s=t.forceCornerRadius,u=t.cornerIsExternal,c=t.startAngle,h=t.endAngle,d=t.className;if(o<i||c===h)return null;var p,f=Se("recharts-sector",d),m=o-i,g=J$(a,m,0,!0);return p=g>0&&Math.abs(c-h)<360?function(e){var t=e.cx,n=e.cy,r=e.innerRadius,i=e.outerRadius,o=e.cornerRadius,a=e.forceCornerRadius,s=e.cornerIsExternal,l=e.startAngle,u=e.endAngle,c=H$(u-l),h=nK({cx:t,cy:n,radius:i,angle:l,sign:c,cornerRadius:o,cornerIsExternal:s}),d=h.circleTangency,p=h.lineTangency,f=h.theta,m=nK({cx:t,cy:n,radius:i,angle:u,sign:-c,cornerRadius:o,cornerIsExternal:s}),g=m.circleTangency,y=m.lineTangency,v=m.theta,b=s?Math.abs(l-u):Math.abs(l-u)-f-v;if(b<0)return a?"M ".concat(p.x,",").concat(p.y,"\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*o,",0\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*-o,",0\n      "):rK({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:u});var x="M ".concat(p.x,",").concat(p.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(c<0),",").concat(d.x,",").concat(d.y,"\n    A").concat(i,",").concat(i,",0,").concat(+(b>180),",").concat(+(c<0),",").concat(g.x,",").concat(g.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(c<0),",").concat(y.x,",").concat(y.y,"\n  ");if(r>0){var w=nK({cx:t,cy:n,radius:r,angle:l,sign:c,isExternal:!0,cornerRadius:o,cornerIsExternal:s}),k=w.circleTangency,S=w.lineTangency,E=w.theta,I=nK({cx:t,cy:n,radius:r,angle:u,sign:-c,isExternal:!0,cornerRadius:o,cornerIsExternal:s}),T=I.circleTangency,C=I.lineTangency,A=I.theta,_=s?Math.abs(l-u):Math.abs(l-u)-E-A;if(_<0&&0===o)return"".concat(x,"L").concat(t,",").concat(n,"Z");x+="L".concat(C.x,",").concat(C.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(c<0),",").concat(T.x,",").concat(T.y,"\n      A").concat(r,",").concat(r,",0,").concat(+(_>180),",").concat(+(c>0),",").concat(k.x,",").concat(k.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(c<0),",").concat(S.x,",").concat(S.y,"Z")}else x+="L".concat(t,",").concat(n,"Z");return x}({cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:Math.min(g,m/2),forceCornerRadius:s,cornerIsExternal:u,startAngle:c,endAngle:h}):rK({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:c,endAngle:h}),l.createElement("path",Jq({},ND(t,!0),{className:f,d:p,role:"img"}))},aK=["option","shapeType","propTransformer","activeClassName","isActive"];function sK(e){return sK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sK(e)}function lK(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function uK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uK(Object(n),!0).forEach((function(t){hK(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hK(e,t,n){return t=function(e){var t=function(e,t){if("object"!=sK(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=sK(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==sK(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dK(e,t){return cK(cK({},t),e)}function pK(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return l.createElement(aj,n);case"trapezoid":return l.createElement(Yq,n);case"sector":return l.createElement(oK,n);case"symbols":if(function(e){return"symbols"===e}(t))return l.createElement(OM,n);break;default:return null}}function fK(e){var t,n=e.option,r=e.shapeType,i=e.propTransformer,o=void 0===i?dK:i,a=e.activeClassName,s=void 0===a?"recharts-active-shape":a,u=e.isActive,c=lK(e,aK);if((0,l.isValidElement)(n))t=(0,l.cloneElement)(n,cK(cK({},c),function(e){return(0,l.isValidElement)(e)?e.props:e}(n)));else if(aD()(n))t=n(c);else if(Lq()(n)&&!zq()(n)){var h=o(n,c);t=l.createElement(pK,{shapeType:r,elementProps:h})}else{var d=c;t=l.createElement(pK,{shapeType:r,elementProps:d})}return u?l.createElement(eP,{className:s},t):t}function mK(e,t){return null!=t&&"trapezoids"in e.props}function gK(e,t){return null!=t&&"sectors"in e.props}function yK(e,t){return null!=t&&"points"in e.props}function vK(e,t){var n,r,i=e.x===(null===t||void 0===t||null===(n=t.labelViewBox)||void 0===n?void 0:n.x)||e.x===t.x,o=e.y===(null===t||void 0===t||null===(r=t.labelViewBox)||void 0===r?void 0:r.y)||e.y===t.y;return i&&o}function bK(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function xK(e,t){var n=e.x===t.x,r=e.y===t.y,i=e.z===t.z;return n&&r&&i}function wK(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,i=function(e,t){var n;return mK(e,t)?n="trapezoids":gK(e,t)?n="sectors":yK(e,t)&&(n="points"),n}(n,t),o=function(e,t){var n,r;return mK(e,t)?null===(n=t.tooltipPayload)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.payload)||void 0===n?void 0:n.payload:gK(e,t)?null===(r=t.tooltipPayload)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.payload)||void 0===r?void 0:r.payload:yK(e,t)?t.payload:{}}(n,t),a=r.filter((function(e,r){var a=cG()(o,e),s=n.props[i].filter((function(e){var r=function(e,t){var n;return mK(e,t)?n=vK:gK(e,t)?n=bK:yK(e,t)&&(n=xK),n}(n,t);return r(e,t)})),l=n.props[i].indexOf(s[s.length-1]);return a&&r===l}));return r.indexOf(a[a.length-1])}var kK=["x","y"];function SK(e){return SK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},SK(e)}function EK(){return EK=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EK.apply(this,arguments)}function IK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IK(Object(n),!0).forEach((function(t){CK(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function CK(e,t,n){return t=function(e){var t=function(e,t){if("object"!=SK(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=SK(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==SK(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AK(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function _K(e,t){var n=e.x,r=e.y,i=AK(e,kK),o="".concat(n),a=parseInt(o,10),s="".concat(r),l=parseInt(s,10),u="".concat(t.height||i.height),c=parseInt(u,10),h="".concat(t.width||i.width),d=parseInt(h,10);return TK(TK(TK(TK(TK({},t),i),a?{x:a}:{}),l?{y:l}:{}),{},{height:c,width:d,name:t.name,radius:t.radius})}function NK(e){return l.createElement(fK,EK({shapeType:"rectangle",propTransformer:_K,activeClassName:"recharts-active-bar"},e))}var OK,RK=["value","background"];function $K(e){return $K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$K(e)}function DK(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function PK(){return PK=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PK.apply(this,arguments)}function MK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MK(Object(n),!0).forEach((function(t){VK(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function LK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,GK(r.key),r)}}function jK(e,t,n){return t=BK(t),function(e,t){if(t&&("object"===$K(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return UK(e)}(e,zK()?Reflect.construct(t,n||[],BK(e).constructor):t.apply(e,n))}function zK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(zK=function(){return!!e})()}function BK(e){return BK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},BK(e)}function UK(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WK(e,t){return WK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},WK(e,t)}function VK(e,t,n){return(t=GK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GK(e){var t=function(e,t){if("object"!=$K(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$K(t)?t:String(t)}var HK=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return VK(UK(e=jK(this,t,[].concat(r))),"state",{isAnimationFinished:!1}),VK(UK(e),"id",Q$("recharts-bar-")),VK(UK(e),"handleAnimationEnd",(function(){var t=e.props.onAnimationEnd;e.setState({isAnimationFinished:!0}),t&&t()})),VK(UK(e),"handleAnimationStart",(function(){var t=e.props.onAnimationStart;e.setState({isAnimationFinished:!1}),t&&t()})),e}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WK(e,t)}(t,e),n=t,r=[{key:"renderRectanglesStatically",value:function(e){var t=this,n=this.props,r=n.shape,i=n.dataKey,o=n.activeIndex,a=n.activeBar,s=ND(this.props,!1);return e&&e.map((function(e,n){var u=n===o,c=u?a:r,h=FK(FK(FK({},s),e),{},{isActive:u,option:c,index:n,dataKey:i,onAnimationStart:t.handleAnimationStart,onAnimationEnd:t.handleAnimationEnd});return l.createElement(eP,PK({className:"recharts-bar-rectangle"},gD(t.props,e,n),{key:"rectangle-".concat(null===e||void 0===e?void 0:e.x,"-").concat(null===e||void 0===e?void 0:e.y,"-").concat(null===e||void 0===e?void 0:e.value)}),l.createElement(NK,h))}))}},{key:"renderRectanglesWithAnimation",value:function(){var e=this,t=this.props,n=t.data,r=t.layout,i=t.isAnimationActive,o=t.animationBegin,a=t.animationDuration,s=t.animationEasing,u=t.animationId,c=this.state.prevData;return l.createElement(XL,{begin:o,duration:a,isActive:i,easing:s,from:{t:0},to:{t:1},key:"bar-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},(function(t){var i=t.t,o=n.map((function(e,t){var n=c&&c[t];if(n){var o=eD(n.x,e.x),a=eD(n.y,e.y),s=eD(n.width,e.width),l=eD(n.height,e.height);return FK(FK({},e),{},{x:o(i),y:a(i),width:s(i),height:l(i)})}if("horizontal"===r){var u=eD(0,e.height)(i);return FK(FK({},e),{},{y:e.y+e.height-u,height:u})}var h=eD(0,e.width)(i);return FK(FK({},e),{},{width:h})}));return l.createElement(eP,null,e.renderRectanglesStatically(o))}))}},{key:"renderRectangles",value:function(){var e=this.props,t=e.data,n=e.isAnimationActive,r=this.state.prevData;return!(n&&t&&t.length)||r&&cG()(r,t)?this.renderRectanglesStatically(t):this.renderRectanglesWithAnimation()}},{key:"renderBackground",value:function(){var e=this,t=this.props,n=t.data,r=t.dataKey,i=t.activeIndex,o=ND(this.props.background,!1);return n.map((function(t,n){t.value;var a=t.background,s=DK(t,RK);if(!a)return null;var u=FK(FK(FK(FK(FK({},s),{},{fill:"#eee"},a),o),gD(e.props,t,n)),{},{onAnimationStart:e.handleAnimationStart,onAnimationEnd:e.handleAnimationEnd,dataKey:r,index:n,key:"background-bar-".concat(n),className:"recharts-bar-background-rectangle"});return l.createElement(NK,PK({option:e.props.background,isActive:n===i},u))}))}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var n=this.props,r=n.data,i=n.xAxis,o=n.yAxis,a=n.layout,s=ID(n.children,GG);if(!s)return null;var u="vertical"===a?r[0].height/2:r[0].width/2,c=function(e,t){var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:rH(e,t)}},h={clipPath:e?"url(#clipPath-".concat(t,")"):null};return l.createElement(eP,h,s.map((function(e){return l.cloneElement(e,{key:"error-bar-".concat(t,"-").concat(e.props.dataKey),data:r,xAxis:i,yAxis:o,layout:a,offset:u,dataPointFormatter:c})})))}},{key:"render",value:function(){var e=this.props,t=e.hide,n=e.data,r=e.className,i=e.xAxis,o=e.yAxis,a=e.left,s=e.top,u=e.width,c=e.height,h=e.isAnimationActive,d=e.background,p=e.id;if(t||!n||!n.length)return null;var f=this.state.isAnimationFinished,m=Se("recharts-bar",r),g=i&&i.allowDataOverflow,y=o&&o.allowDataOverflow,v=g||y,b=iD()(p)?this.id:p;return l.createElement(eP,{className:m},g||y?l.createElement("defs",null,l.createElement("clipPath",{id:"clipPath-".concat(b)},l.createElement("rect",{x:g?a:a-u/2,y:y?s:s-c/2,width:g?u:2*u,height:y?c:2*c}))):null,l.createElement(eP,{className:"recharts-bar-rectangles",clipPath:v?"url(#clipPath-".concat(b,")"):null},d?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(v,b),(!h||f)&&Mq.renderCallByParent(this.props,n))}}],i=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curData:e.data,prevData:t.curData}:e.data!==t.curData?{curData:e.data}:null}}],r&&LK(n.prototype,r),i&&LK(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}(l.PureComponent);function qK(e){return qK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qK(e)}function KK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,JK(r.key),r)}}function XK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function YK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XK(Object(n),!0).forEach((function(t){QK(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function QK(e,t,n){return(t=JK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JK(e){var t=function(e,t){if("object"!=qK(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qK(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qK(t)?t:String(t)}OK=HK,VK(HK,"displayName","Bar"),VK(HK,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!AP.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"}),VK(HK,"getComposedData",(function(e){var t=e.props,n=e.item,r=e.barPosition,i=e.bandSize,o=e.xAxis,a=e.yAxis,s=e.xAxisTicks,l=e.yAxisTicks,u=e.stackedData,c=e.dataStartIndex,h=e.displayedData,d=e.offset,p=function(e,t){if(!e)return null;for(var n=0,r=e.length;n<r;n++)if(e[n].item===t)return e[n].position;return null}(r,n);if(!p)return null;var f=t.layout,m=n.props,g=m.dataKey,y=m.children,v=m.minPointSize,b="horizontal"===f?a:o,x=u?b.scale.domain():null,w=function(e){var t=e.numericAxis,n=t.scale.domain();if("number"===t.type){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]}({numericAxis:b}),k=ID(y,kq),S=h.map((function(e,t){var r,h,d,m,y,b;u?r=function(e,t){if(!t||2!==t.length||!K$(t[0])||!K$(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!K$(e[0])||e[0]<n)&&(i[0]=n),(!K$(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i}(u[c+t],x):(r=rH(e,g),Array.isArray(r)||(r=[w,r]));var S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n,r){if("number"===typeof e)return e;var i="number"===typeof n;return i?e(n,r):(i||HD(!1),t)}}(v,OK.defaultProps.minPointSize)(r[1],t);if("horizontal"===f){var E,I=[a.scale(r[0]),a.scale(r[1])],T=I[0],C=I[1];h=vH({axis:o,ticks:s,bandSize:i,offset:p.offset,entry:e,index:t}),d=null!==(E=null!==C&&void 0!==C?C:T)&&void 0!==E?E:void 0,m=p.size;var A=T-C;if(y=Number.isNaN(A)?0:A,b={x:h,y:a.y,width:m,height:a.height},Math.abs(S)>0&&Math.abs(y)<Math.abs(S)){var _=H$(y||S)*(Math.abs(S)-Math.abs(y));d-=_,y+=_}}else{var N=[o.scale(r[0]),o.scale(r[1])],O=N[0],R=N[1];if(h=O,d=vH({axis:a,ticks:l,bandSize:i,offset:p.offset,entry:e,index:t}),m=R-O,y=p.size,b={x:o.x,y:d,width:o.width,height:y},Math.abs(S)>0&&Math.abs(m)<Math.abs(S))m+=H$(m||S)*(Math.abs(S)-Math.abs(m))}return FK(FK(FK({},e),{},{x:h,y:d,width:m,height:y,value:u?r:r[1],payload:e,background:b},k&&k[t]&&k[t].props),{},{tooltipPayload:[IH(n,e)],tooltipPosition:{x:h+m/2,y:d+y/2}})}));return FK({data:S,layout:f},d)}));var ZK=function(e,t){var n=e.x,r=e.y,i=t.x,o=t.y;return{x:Math.min(n,i),y:Math.min(r,o),width:Math.abs(i-n),height:Math.abs(o-r)}},eX=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scale=t}var t,n,r;return t=e,n=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.bandAware,r=t.position;if(void 0!==e){if(r)switch(r){case"start":default:return this.scale(e);case"middle":var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i;case"end":var o=this.bandwidth?this.bandwidth():0;return this.scale(e)+o}if(n){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}},{key:"isInRange",value:function(e){var t=this.range(),n=t[0],r=t[t.length-1];return n<=r?e>=n&&e<=r:e>=r&&e<=n}}],r=[{key:"create",value:function(t){return new e(t)}}],n&&KK(t.prototype,n),r&&KK(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();QK(eX,"EPS",1e-4);var tX=function(e){var t=Object.keys(e).reduce((function(t,n){return YK(YK({},t),{},QK({},n,eX.create(e[n])))}),{});return YK(YK({},t),{},{apply:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.bandAware,i=n.position;return bq()(e,(function(e,n){return t[n].apply(e,{bandAware:r,position:i})}))},isInRange:function(e){return wq()(e,(function(e,n){return t[n].isInRange(e)}))}})};function nX(e){return nX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nX(e)}function rX(){return rX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rX.apply(this,arguments)}function iX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iX(Object(n),!0).forEach((function(t){aX(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iX(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function aX(e,t,n){return t=function(e){var t=function(e,t){if("object"!=nX(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nX(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nX(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sX(e){var t=e.x,n=e.y,r=e.r,i=e.alwaysShow,o=e.clipPathId,a=X$(t),s=X$(n);if(nD(void 0===i,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!a||!s)return null;var u=function(e){var t=e.x,n=e.y,r=e.xAxis,i=e.yAxis,o=tX({x:r.scale,y:i.scale}),a=o.apply({x:t,y:n},{bandAware:!0});return yq(e,"discard")&&!o.isInRange(a)?null:a}(e);if(!u)return null;var c=u.x,h=u.y,d=e.shape,p=e.className,f=oX(oX({clipPath:yq(e,"hidden")?"url(#".concat(o,")"):void 0},ND(e,!0)),{},{cx:c,cy:h});return l.createElement(eP,{className:Se("recharts-reference-dot",p)},sX.renderDot(d,f),mq.renderCallByParent(e,{x:c-r,y:h-r,width:2*r,height:2*r}))}sX.displayName="ReferenceDot",sX.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1},sX.renderDot=function(e,t){return l.isValidElement(e)?l.cloneElement(e,t):aD()(e)?e(t):l.createElement(aF,rX({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"}))};var lX=n(4597),uX=n.n(lX),cX=(n(8990),n(5797)),hX=n.n(cX)()((function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}}),(function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}));var dX=(0,l.createContext)(void 0),pX=(0,l.createContext)(void 0),fX=(0,l.createContext)(void 0),mX=(0,l.createContext)({}),gX=(0,l.createContext)(void 0),yX=(0,l.createContext)(0),vX=(0,l.createContext)(0),bX=function(e){var t=e.state,n=t.xAxisMap,r=t.yAxisMap,i=t.offset,o=e.clipPathId,a=e.children,s=e.width,u=e.height,c=hX(i);return l.createElement(dX.Provider,{value:n},l.createElement(pX.Provider,{value:r},l.createElement(mX.Provider,{value:i},l.createElement(fX.Provider,{value:c},l.createElement(gX.Provider,{value:o},l.createElement(yX.Provider,{value:u},l.createElement(vX.Provider,{value:s},a)))))))};var xX=function(e){var t=(0,l.useContext)(dX);null==t&&HD(!1);var n=t[e];return null==n&&HD(!1),n},wX=function(e){var t=(0,l.useContext)(pX);null==t&&HD(!1);var n=t[e];return null==n&&HD(!1),n},kX=function(){return(0,l.useContext)(vX)},SX=function(){return(0,l.useContext)(yX)};function EX(e){return EX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},EX(e)}function IX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IX(Object(n),!0).forEach((function(t){CX(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IX(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function CX(e,t,n){return t=function(e){var t=function(e,t){if("object"!=EX(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=EX(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==EX(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AX(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _X(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function NX(){return NX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NX.apply(this,arguments)}function OX(e){var t=e.x,n=e.y,r=e.segment,i=e.xAxisId,o=e.yAxisId,a=e.shape,s=e.className,u=e.alwaysShow,c=(0,l.useContext)(gX),h=xX(i),d=wX(o),p=(0,l.useContext)(fX);if(!c||!p)return null;nD(void 0===u,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=function(e,t,n,r,i,o,a,s,l){var u=i.x,c=i.y,h=i.width,d=i.height;if(n){var p=l.y,f=e.y.apply(p,{position:o});if(yq(l,"discard")&&!e.y.isInRange(f))return null;var m=[{x:u+h,y:f},{x:u,y:f}];return"left"===s?m.reverse():m}if(t){var g=l.x,y=e.x.apply(g,{position:o});if(yq(l,"discard")&&!e.x.isInRange(y))return null;var v=[{x:y,y:c+d},{x:y,y:c}];return"top"===a?v.reverse():v}if(r){var b=l.segment.map((function(t){return e.apply(t,{position:o})}));return yq(l,"discard")&&uX()(b,(function(t){return!e.isInRange(t)}))?null:b}return null}(tX({x:h.scale,y:d.scale}),X$(t),X$(n),r&&2===r.length,p,e.position,h.orientation,d.orientation,e);if(!f)return null;var m=AX(f,2),g=m[0],y=g.x,v=g.y,b=m[1],x=b.x,w=b.y,k=TX(TX({clipPath:yq(e,"hidden")?"url(#".concat(c,")"):void 0},ND(e,!0)),{},{x1:y,y1:v,x2:x,y2:w});return l.createElement(eP,{className:Se("recharts-reference-line",s)},function(e,t){return l.isValidElement(e)?l.cloneElement(e,t):aD()(e)?e(t):l.createElement("line",NX({},t,{className:"recharts-reference-line-line"}))}(a,k),mq.renderCallByParent(e,function(e){var t=e.x1,n=e.y1,r=e.x2,i=e.y2;return ZK({x:t,y:n},{x:r,y:i})}({x1:y,y1:v,x2:x,y2:w})))}function RX(e){return RX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RX(e)}function $X(){return $X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$X.apply(this,arguments)}function DX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DX(Object(n),!0).forEach((function(t){MX(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DX(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function MX(e,t,n){return t=function(e){var t=function(e,t){if("object"!=RX(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=RX(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==RX(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}OX.displayName="ReferenceLine",OX.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"};function FX(e){var t=e.x1,n=e.x2,r=e.y1,i=e.y2,o=e.className,a=e.alwaysShow,s=e.clipPathId;nD(void 0===a,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var u=X$(t),c=X$(n),h=X$(r),d=X$(i),p=e.shape;if(!u&&!c&&!h&&!d&&!p)return null;var f=function(e,t,n,r,i){var o=i.x1,a=i.x2,s=i.y1,l=i.y2,u=i.xAxis,c=i.yAxis;if(!u||!c)return null;var h=tX({x:u.scale,y:c.scale}),d={x:e?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(s,{position:"start"}):h.y.rangeMin},p={x:t?h.x.apply(a,{position:"end"}):h.x.rangeMax,y:r?h.y.apply(l,{position:"end"}):h.y.rangeMax};return!yq(i,"discard")||h.isInRange(d)&&h.isInRange(p)?ZK(d,p):null}(u,c,h,d,e);if(!f&&!p)return null;var m=yq(e,"hidden")?"url(#".concat(s,")"):void 0;return l.createElement(eP,{className:Se("recharts-reference-area",o)},FX.renderRect(p,PX(PX({clipPath:m},ND(e,!0)),f)),mq.renderCallByParent(e,f))}function LX(e){return function(e){if(Array.isArray(e))return jX(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return jX(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jX(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jX(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}FX.displayName="ReferenceArea",FX.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1},FX.renderRect=function(e,t){return l.isValidElement(e)?l.cloneElement(e,t):aD()(e)?e(t):l.createElement(aj,$X({},t,{className:"recharts-reference-area-rect"}))};var zX=function(e,t,n,r,i){var o=ID(e,OX),a=ID(e,sX),s=[].concat(LX(o),LX(a)),l=ID(e,FX),u="".concat(r,"Id"),c=r[0],h=t;if(s.length&&(h=s.reduce((function(e,t){if(t.props[u]===n&&yq(t.props,"extendDomain")&&K$(t.props[c])){var r=t.props[c];return[Math.min(e[0],r),Math.max(e[1],r)]}return e}),h)),l.length){var d="".concat(c,"1"),p="".concat(c,"2");h=l.reduce((function(e,t){if(t.props[u]===n&&yq(t.props,"extendDomain")&&K$(t.props[d])&&K$(t.props[p])){var r=t.props[d],i=t.props[p];return[Math.min(e[0],r,i),Math.max(e[1],r,i)]}return e}),h)}return i&&i.length&&(h=i.reduce((function(e,t){return K$(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e}),h)),h},BX=n(7283),UX=new(n.n(BX)()),WX="recharts.syncMouseEvents";function VX(e){return VX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VX(e)}function GX(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qX(r.key),r)}}function HX(e,t,n){return(t=qX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qX(e){var t=function(e,t){if("object"!=VX(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=VX(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==VX(t)?t:String(t)}var KX=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),HX(this,"activeIndex",0),HX(this,"coordinateList",[]),HX(this,"layout","horizontal")}var t,n,r;return t=e,n=[{key:"setDetails",value:function(e){var t,n=e.coordinateList,r=void 0===n?null:n,i=e.container,o=void 0===i?null:i,a=e.layout,s=void 0===a?null:a,l=e.offset,u=void 0===l?null:l,c=e.mouseHandlerCallback,h=void 0===c?null:c;this.coordinateList=null!==(t=null!==r&&void 0!==r?r:this.coordinateList)&&void 0!==t?t:[],this.container=null!==o&&void 0!==o?o:this.container,this.layout=null!==s&&void 0!==s?s:this.layout,this.offset=null!==u&&void 0!==u?u:this.offset,this.mouseHandlerCallback=null!==h&&void 0!==h?h:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(e){if(0!==this.coordinateList.length)switch(e.key){case"ArrowRight":if("horizontal"!==this.layout)return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break;case"ArrowLeft":if("horizontal"!==this.layout)return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse()}}},{key:"setIndex",value:function(e){this.activeIndex=e}},{key:"spoofMouse",value:function(){var e,t;if("horizontal"===this.layout&&0!==this.coordinateList.length){var n=this.container.getBoundingClientRect(),r=n.x,i=n.y,o=n.height,a=this.coordinateList[this.activeIndex].coordinate,s=(null===(e=window)||void 0===e?void 0:e.scrollX)||0,l=(null===(t=window)||void 0===t?void 0:t.scrollY)||0,u=r+a+s,c=i+this.offset.top+o/2+l;this.mouseHandlerCallback({pageX:u,pageY:c})}}}],n&&GX(t.prototype,n),r&&GX(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function XX(){}function YX(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function QX(e){this._context=e}function JX(e){this._context=e}function ZX(e){this._context=e}QX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:YX(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:YX(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},JX.prototype={areaStart:XX,areaEnd:XX,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:YX(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},ZX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:YX(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class eY{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function tY(e){this._context=e}function nY(e){this._context=e}function rY(e){return new nY(e)}function iY(e){return e<0?-1:1}function oY(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(iY(o)+iY(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function aY(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function sY(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function lY(e){this._context=e}function uY(e){this._context=new cY(e)}function cY(e){this._context=e}function hY(e){this._context=e}function dY(e){var t,n,r=e.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/o[t-1],o[t]-=n,a[t]-=n*a[t-1];for(i[r-1]=a[r-1]/o[r-1],t=r-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function pY(e,t){this._context=e,this._t=t}function fY(e){return e[0]}function mY(e){return e[1]}function gY(e,t){var n=fM(!0),r=null,i=rY,o=null,a=wM(s);function s(s){var l,u,c,h=(s=ZV(s)).length,d=!1;for(null==r&&(o=i(c=a())),l=0;l<=h;++l)!(l<h&&n(u=s[l],l,s))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(u,l,s),+t(u,l,s));if(c)return o=null,c+""||null}return e="function"===typeof e?e:void 0===e?fY:fM(e),t="function"===typeof t?t:void 0===t?mY:fM(t),s.x=function(t){return arguments.length?(e="function"===typeof t?t:fM(+t),s):e},s.y=function(e){return arguments.length?(t="function"===typeof e?e:fM(+e),s):t},s.defined=function(e){return arguments.length?(n="function"===typeof e?e:fM(!!e),s):n},s.curve=function(e){return arguments.length?(i=e,null!=r&&(o=i(r)),s):i},s.context=function(e){return arguments.length?(null==e?r=o=null:o=i(r=e),s):r},s}function yY(e,t,n){var r=null,i=fM(!0),o=null,a=rY,s=null,l=wM(u);function u(u){var c,h,d,p,f,m=(u=ZV(u)).length,g=!1,y=new Array(m),v=new Array(m);for(null==o&&(s=a(f=l())),c=0;c<=m;++c){if(!(c<m&&i(p=u[c],c,u))===g)if(g=!g)h=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),d=c-1;d>=h;--d)s.point(y[d],v[d]);s.lineEnd(),s.areaEnd()}g&&(y[c]=+e(p,c,u),v[c]=+t(p,c,u),s.point(r?+r(p,c,u):y[c],n?+n(p,c,u):v[c]))}if(f)return s=null,f+""||null}function c(){return gY().defined(i).curve(a).context(o)}return e="function"===typeof e?e:void 0===e?fY:fM(+e),t="function"===typeof t?t:fM(void 0===t?0:+t),n="function"===typeof n?n:void 0===n?mY:fM(+n),u.x=function(t){return arguments.length?(e="function"===typeof t?t:fM(+t),r=null,u):e},u.x0=function(t){return arguments.length?(e="function"===typeof t?t:fM(+t),u):e},u.x1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:fM(+e),u):r},u.y=function(e){return arguments.length?(t="function"===typeof e?e:fM(+e),n=null,u):t},u.y0=function(e){return arguments.length?(t="function"===typeof e?e:fM(+e),u):t},u.y1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:fM(+e),u):n},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(n)},u.lineX1=function(){return c().x(r).y(t)},u.defined=function(e){return arguments.length?(i="function"===typeof e?e:fM(!!e),u):i},u.curve=function(e){return arguments.length?(a=e,null!=o&&(s=a(o)),u):a},u.context=function(e){return arguments.length?(null==e?o=s=null:s=a(o=e),u):o},u}function vY(e){return vY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vY(e)}function bY(){return bY=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bY.apply(this,arguments)}function xY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wY(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xY(Object(n),!0).forEach((function(t){kY(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xY(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kY(e,t,n){return t=function(e){var t=function(e,t){if("object"!=vY(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=vY(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vY(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}tY.prototype={areaStart:XX,areaEnd:XX,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},nY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},lY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:sY(this,this._t0,aY(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,sY(this,aY(this,n=oY(this,e,t)),n);break;default:sY(this,this._t0,n=oY(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(uY.prototype=Object.create(lY.prototype)).point=function(e,t){lY.prototype.point.call(this,t,e)},cY.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}},hY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=dY(e),i=dY(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},pY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var SY={curveBasisClosed:function(e){return new JX(e)},curveBasisOpen:function(e){return new ZX(e)},curveBasis:function(e){return new QX(e)},curveBumpX:function(e){return new eY(e,!0)},curveBumpY:function(e){return new eY(e,!1)},curveLinearClosed:function(e){return new tY(e)},curveLinear:rY,curveMonotoneX:function(e){return new lY(e)},curveMonotoneY:function(e){return new uY(e)},curveNatural:function(e){return new hY(e)},curveStep:function(e){return new pY(e,.5)},curveStepAfter:function(e){return new pY(e,1)},curveStepBefore:function(e){return new pY(e,0)}},EY=function(e){return e.x===+e.x&&e.y===+e.y},IY=function(e){return e.x},TY=function(e){return e.y},CY=function(e){var t,n=e.type,r=void 0===n?"linear":n,i=e.points,o=void 0===i?[]:i,a=e.baseLine,s=e.layout,l=e.connectNulls,u=void 0!==l&&l,c=function(e,t){if(aD()(e))return e;var n="curve".concat(GP()(e));return"curveMonotone"!==n&&"curveBump"!==n||!t?SY[n]||rY:SY["".concat(n).concat("vertical"===t?"Y":"X")]}(r,s),h=u?o.filter((function(e){return EY(e)})):o;if(Array.isArray(a)){var d=u?a.filter((function(e){return EY(e)})):a,p=h.map((function(e,t){return wY(wY({},e),{},{base:d[t]})}));return(t="vertical"===s?yY().y(TY).x1(IY).x0((function(e){return e.base.x})):yY().x(IY).y1(TY).y0((function(e){return e.base.y}))).defined(EY).curve(c),t(p)}return(t="vertical"===s&&K$(a)?yY().y(TY).x1(IY).x0(a):K$(a)?yY().x(IY).y1(TY).y0(a):gY().x(IY).y(TY)).defined(EY).curve(c),t(h)},AY=function(e){var t=e.className,n=e.points,r=e.path,i=e.pathRef;if((!n||!n.length)&&!r)return null;var o=n&&n.length?CY(e):r;return l.createElement("path",bY({},ND(e,!1),mD(e),{className:Se("recharts-curve",t),d:o,ref:i}))};function _Y(e){return _Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_Y(e)}var NY=["x","y","top","left","width","height","className"];function OY(){return OY=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OY.apply(this,arguments)}function RY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $Y(e,t,n){return t=function(e){var t=function(e,t){if("object"!=_Y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_Y(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DY(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var PY=function(e,t,n,r,i,o){return"M".concat(e,",").concat(i,"v").concat(r,"M").concat(o,",").concat(t,"h").concat(n)},MY=function(e){var t=e.x,n=void 0===t?0:t,r=e.y,i=void 0===r?0:r,o=e.top,a=void 0===o?0:o,s=e.left,u=void 0===s?0:s,c=e.width,h=void 0===c?0:c,d=e.height,p=void 0===d?0:d,f=e.className,m=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RY(Object(n),!0).forEach((function(t){$Y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RY(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({x:n,y:i,top:a,left:u,width:h,height:p},DY(e,NY));return K$(n)&&K$(i)&&K$(h)&&K$(p)&&K$(a)&&K$(u)?l.createElement("path",OY({},ND(m,!0),{className:Se("recharts-cross",f),d:PY(n,i,h,p,a,u)})):null};function FY(e){var t=e.cx,n=e.cy,r=e.radius,i=e.startAngle,o=e.endAngle;return{points:[ZH(t,n,r,i),ZH(t,n,r,o)],cx:t,cy:n,radius:r,startAngle:i,endAngle:o}}function LY(e,t,n){var r,i,o,a;if("horizontal"===e)o=r=t.x,i=n.top,a=n.top+n.height;else if("vertical"===e)a=i=t.y,r=n.left,o=n.left+n.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return FY(t);var s=t.cx,l=t.cy,u=t.innerRadius,c=t.outerRadius,h=t.angle,d=ZH(s,l,u,h),p=ZH(s,l,c,h);r=d.x,i=d.y,o=p.x,a=p.y}return[{x:r,y:i},{x:o,y:a}]}function jY(e){return jY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jY(e)}function zY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function BY(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zY(Object(n),!0).forEach((function(t){UY(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zY(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function UY(e,t,n){return t=function(e){var t=function(e,t){if("object"!=jY(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=jY(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jY(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WY(e){var t,n=e.element,r=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,a=e.activePayload,s=e.offset,u=e.activeTooltipIndex,c=e.tooltipAxisBandSize,h=e.layout,d=e.chartName;if(!n||!n.props.cursor||!i||!o||"ScatterChart"!==d&&"axis"!==r)return null;var p=AY;if("ScatterChart"===d)t=o,p=MY;else if("BarChart"===d)t=function(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-i:n.left+.5,y:"horizontal"===e?n.top+.5:t.y-i,width:"horizontal"===e?r:n.width-1,height:"horizontal"===e?n.height-1:r}}(h,o,s,c),p=aj;else if("radial"===h){var f=FY(o),m=f.cx,g=f.cy,y=f.radius;t={cx:m,cy:g,startAngle:f.startAngle,endAngle:f.endAngle,innerRadius:y,outerRadius:y},p=oK}else t={points:LY(h,o,s)},p=AY;var v=BY(BY(BY(BY({stroke:"#ccc",pointerEvents:"none"},s),t),ND(n.props.cursor,!1)),{},{payload:a,payloadIndex:u,className:Se("recharts-tooltip-cursor",n.props.cursor.className)});return(0,l.isValidElement)(n.props.cursor)?(0,l.cloneElement)(n.props.cursor,v):(0,l.createElement)(p,v)}var VY=["item"],GY=["children","className","width","height","style","compact","title","desc"];function HY(e){return HY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HY(e)}function qY(){return qY=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qY.apply(this,arguments)}function KY(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||rQ(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XY(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function YY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lQ(r.key),r)}}function QY(e,t,n){return t=ZY(t),function(e,t){if(t&&("object"===HY(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return eQ(e)}(e,JY()?Reflect.construct(t,n||[],ZY(e).constructor):t.apply(e,n))}function JY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(JY=function(){return!!e})()}function ZY(e){return ZY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ZY(e)}function eQ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tQ(e,t){return tQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tQ(e,t)}function nQ(e){return function(e){if(Array.isArray(e))return iQ(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rQ(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rQ(e,t){if(e){if("string"===typeof e)return iQ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iQ(e,t):void 0}}function iQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function aQ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oQ(Object(n),!0).forEach((function(t){sQ(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oQ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sQ(e,t,n){return(t=lQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lQ(e){var t=function(e,t){if("object"!=HY(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=HY(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==HY(t)?t:String(t)}var uQ={xAxis:["bottom","top"],yAxis:["left","right"]},cQ={width:"100%",height:"100%"},hQ={x:0,y:0};function dQ(e){return e}var pQ=function(e,t){var n=t.graphicalItems,r=t.dataStartIndex,i=t.dataEndIndex,o=(null!==n&&void 0!==n?n:[]).reduce((function(e,t){var n=t.props.data;return n&&n.length?[].concat(nQ(e),nQ(n)):e}),[]);return o.length>0?o:e&&e.length&&K$(r)&&K$(i)?e.slice(r,i+1):[]};function fQ(e){return"number"===e?[0,"auto"]:void 0}var mQ=function(e,t,n,r){var i=e.graphicalItems,o=e.tooltipAxis,a=pQ(t,e);return n<0||!i||!i.length||n>=a.length?null:i.reduce((function(i,s){var l,u,c=null!==(l=s.props.data)&&void 0!==l?l:t;(c&&e.dataStartIndex+e.dataEndIndex!==0&&(c=c.slice(e.dataStartIndex,e.dataEndIndex+1)),o.dataKey&&!o.allowDuplicatedCategory)?u=tD(void 0===c?a:c,o.dataKey,r):u=c&&c[n]||a[n];return u?[].concat(nQ(i),[IH(s,u)]):i}),[])},gQ=function(e,t,n,r){var i=r||{x:e.chartX,y:e.chartY},o=function(e,t){return"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius}(i,n),a=e.orderedTooltipTicks,s=e.tooltipAxis,l=e.tooltipTicks,u=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,a=null!==(t=null===n||void 0===n?void 0:n.length)&&void 0!==t?t:0;if(a<=1)return 0;if(i&&"angleAxis"===i.axisType&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var s=i.range,l=0;l<a;l++){var u=l>0?r[l-1].coordinate:r[a-1].coordinate,c=r[l].coordinate,h=l>=a-1?r[0].coordinate:r[l+1].coordinate,d=void 0;if(H$(c-u)!==H$(h-c)){var p=[];if(H$(h-c)===H$(s[1]-s[0])){d=h;var f=c+s[1]-s[0];p[0]=Math.min(f,(f+u)/2),p[1]=Math.max(f,(f+u)/2)}else{d=u;var m=h+s[1]-s[0];p[0]=Math.min(c,(m+c)/2),p[1]=Math.max(c,(m+c)/2)}var g=[Math.min(c,(d+c)/2),Math.max(c,(d+c)/2)];if(e>g[0]&&e<=g[1]||e>=p[0]&&e<=p[1]){o=r[l].index;break}}else{var y=Math.min(u,h),v=Math.max(u,h);if(e>(y+c)/2&&e<=(v+c)/2){o=r[l].index;break}}}else for(var b=0;b<a;b++)if(0===b&&e<=(n[b].coordinate+n[b+1].coordinate)/2||b>0&&b<a-1&&e>(n[b].coordinate+n[b-1].coordinate)/2&&e<=(n[b].coordinate+n[b+1].coordinate)/2||b===a-1&&e>(n[b].coordinate+n[b-1].coordinate)/2){o=n[b].index;break}return o}(o,a,l,s);if(u>=0&&l){var c=l[u]&&l[u].value,h=mQ(e,t,u,c),d=function(e,t,n,r){var i=t.find((function(e){return e&&e.index===n}));if(i){if("horizontal"===e)return{x:i.coordinate,y:r.y};if("vertical"===e)return{x:r.x,y:i.coordinate};if("centric"===e){var o=i.coordinate,a=r.radius;return aQ(aQ(aQ({},r),ZH(r.cx,r.cy,a,o)),{},{angle:o,radius:a})}var s=i.coordinate,l=r.angle;return aQ(aQ(aQ({},r),ZH(r.cx,r.cy,s,l)),{},{angle:l,radius:s})}return hQ}(n,a,u,i);return{activeTooltipIndex:u,activeLabel:c,activePayload:h,activeCoordinate:d}}return null},yQ=function(e,t){var n=t.axes,r=t.graphicalItems,i=t.axisType,o=t.axisIdKey,a=t.stackGroups,s=t.dataStartIndex,l=t.dataEndIndex,u=e.layout,c=e.children,h=e.stackOffset,d=lH(u,i);return n.reduce((function(t,n){var p,f=n.props,m=f.type,g=f.dataKey,y=f.allowDataOverflow,v=f.allowDuplicatedCategory,b=f.scale,x=f.ticks,w=f.includeHidden,k=n.props[o];if(t[k])return t;var S,E,I,T=pQ(e.data,{graphicalItems:r.filter((function(e){return e.props[o]===k})),dataStartIndex:s,dataEndIndex:l}),C=T.length;(function(e,t,n){if("number"===n&&!0===t&&Array.isArray(e)){var r=null===e||void 0===e?void 0:e[0],i=null===e||void 0===e?void 0:e[1];if(r&&i&&K$(r)&&K$(i))return!0}return!1})(n.props.domain,y,m)&&(S=kH(n.props.domain,null,y),!d||"number"!==m&&"auto"===b||(I=iH(T,g,"category")));var A=fQ(m);if(!S||0===S.length){var _,N=null!==(_=n.props.domain)&&void 0!==_?_:A;if(g){if(S=iH(T,g,m),"category"===m&&d){var O=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++){if(n[e[r]])return!0;n[e[r]]=!0}return!1}(S);v&&O?(E=S,S=UD()(0,C)):v||(S=EH(N,S,n).reduce((function(e,t){return e.indexOf(t)>=0?e:[].concat(nQ(e),[t])}),[]))}else if("category"===m)S=v?S.filter((function(e){return""!==e&&!iD()(e)})):EH(N,S,n).reduce((function(e,t){return e.indexOf(t)>=0||""===t||iD()(t)?e:[].concat(nQ(e),[t])}),[]);else if("number"===m){var R=function(e,t,n,r,i){var o=t.map((function(t){return aH(e,t,n,i,r)})).filter((function(e){return!iD()(e)}));return o&&o.length?o.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[1/0,-1/0]):null}(T,r.filter((function(e){return e.props[o]===k&&(w||!e.props.hide)})),g,i,u);R&&(S=R)}!d||"number"!==m&&"auto"===b||(I=iH(T,g,"category"))}else S=d?UD()(0,C):a&&a[k]&&a[k].hasStack&&"number"===m?"expand"===h?[0,1]:bH(a[k].stackGroups,s,l):sH(T,r.filter((function(e){return e.props[o]===k&&(w||!e.props.hide)})),m,u,!0);if("number"===m)S=zX(c,S,k,i,x),N&&(S=kH(N,S,y));else if("category"===m&&N){var $=N;S.every((function(e){return $.indexOf(e)>=0}))&&(S=$)}}return aQ(aQ({},t),{},sQ({},k,aQ(aQ({},n.props),{},{axisType:i,domain:S,categoricalDomain:I,duplicateDomain:E,originalDomain:null!==(p=n.props.domain)&&void 0!==p?p:A,isCategorical:d,layout:u})))}),{})},vQ=function(e,t){var n=t.axisType,r=void 0===n?"xAxis":n,i=t.AxisComp,o=t.graphicalItems,a=t.stackGroups,s=t.dataStartIndex,l=t.dataEndIndex,u=e.children,c="".concat(r,"Id"),h=ID(u,i),d={};return h&&h.length?d=yQ(e,{axes:h,graphicalItems:o,axisType:r,axisIdKey:c,stackGroups:a,dataStartIndex:s,dataEndIndex:l}):o&&o.length&&(d=function(e,t){var n=t.graphicalItems,r=t.Axis,i=t.axisType,o=t.axisIdKey,a=t.stackGroups,s=t.dataStartIndex,l=t.dataEndIndex,u=e.layout,c=e.children,h=pQ(e.data,{graphicalItems:n,dataStartIndex:s,dataEndIndex:l}),d=h.length,p=lH(u,i),f=-1;return n.reduce((function(e,t){var m,g=t.props[o],y=fQ("number");return e[g]?e:(f++,p?m=UD()(0,d):a&&a[g]&&a[g].hasStack?(m=bH(a[g].stackGroups,s,l),m=zX(c,m,g,i)):(m=kH(y,sH(h,n.filter((function(e){return e.props[o]===g&&!e.props.hide})),"number",u),r.defaultProps.allowDataOverflow),m=zX(c,m,g,i)),aQ(aQ({},e),{},sQ({},g,aQ(aQ({axisType:i},r.defaultProps),{},{hide:!0,orientation:W$()(uQ,"".concat(i,".").concat(f%2),null),domain:m,originalDomain:y,isCategorical:p,layout:u}))))}),{})}(e,{Axis:i,graphicalItems:o,axisType:r,axisIdKey:c,stackGroups:a,dataStartIndex:s,dataEndIndex:l})),d},bQ=function(e){var t=e.children,n=e.defaultShowTooltip,r=TD(t,VH),i=0,o=0;return e.data&&0!==e.data.length&&(o=e.data.length-1),r&&r.props&&(r.props.startIndex>=0&&(i=r.props.startIndex),r.props.endIndex>=0&&(o=r.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:Boolean(n)}},xQ=function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},wQ=function(e,t){var n=e.props,r=(e.graphicalItems,e.xAxisMap),i=void 0===r?{}:r,o=e.yAxisMap,a=void 0===o?{}:o,s=n.width,l=n.height,u=n.children,c=n.margin||{},h=TD(u,VH),d=TD(u,iF),p=Object.keys(a).reduce((function(e,t){var n=a[t],r=n.orientation;return n.mirror||n.hide?e:aQ(aQ({},e),{},sQ({},r,e[r]+n.width))}),{left:c.left||0,right:c.right||0}),f=Object.keys(i).reduce((function(e,t){var n=i[t],r=n.orientation;return n.mirror||n.hide?e:aQ(aQ({},e),{},sQ({},r,W$()(e,"".concat(r))+n.height))}),{top:c.top||0,bottom:c.bottom||0}),m=aQ(aQ({},f),p),g=m.bottom;h&&(m.bottom+=h.props.height||VH.defaultProps.height),d&&t&&(m=function(e,t,n,r){var i=n.children,o=n.width,a=n.margin,s=o-(a.left||0)-(a.right||0),l=YG({children:i,legendWidth:s});if(l){var u=r||{},c=u.width,h=u.height,d=l.align,p=l.verticalAlign,f=l.layout;if(("vertical"===f||"horizontal"===f&&"middle"===p)&&"center"!==d&&K$(e[d]))return ZG(ZG({},e),{},eH({},d,e[d]+(c||0)));if(("horizontal"===f||"vertical"===f&&"center"===d)&&"middle"!==p&&K$(e[p]))return ZG(ZG({},e),{},eH({},p,e[p]+(h||0)))}return e}(m,0,n,t));var y=s-m.left-m.right,v=l-m.top-m.bottom;return aQ(aQ({brushBottom:g},m),{},{width:Math.max(y,0),height:Math.max(v,0)})},kQ=function(e,t){return"xAxis"===t?e[t].width:"yAxis"===t?e[t].height:void 0},SQ=function(e){var t,n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,o=void 0===i?"axis":i,a=e.validateTooltipEventTypes,s=void 0===a?["axis"]:a,u=e.axisComponents,c=e.legendContent,h=e.formatAxisMap,d=e.defaultProps,p=function(e,t){var n=t.graphicalItems,r=t.stackGroups,i=t.offset,o=t.updateId,a=t.dataStartIndex,s=t.dataEndIndex,l=e.barSize,c=e.layout,h=e.barGap,d=e.barCategoryGap,p=e.maxBarSize,f=xQ(c),m=f.numericAxisName,g=f.cateAxisName,y=function(e){return!(!e||!e.length)&&e.some((function(e){var t=wD(e&&e.type);return t&&t.indexOf("Bar")>=0}))}(n),v=[];return n.forEach((function(n,f){var b=pQ(e.data,{graphicalItems:[n],dataStartIndex:a,dataEndIndex:s}),x=n.props,w=x.dataKey,k=x.maxBarSize,S=n.props["".concat(m,"Id")],E=n.props["".concat(g,"Id")],I=u.reduce((function(e,r){var i=t["".concat(r.axisType,"Map")],o=n.props["".concat(r.axisType,"Id")];i&&i[o]||"zAxis"===r.axisType||HD(!1);var a=i[o];return aQ(aQ({},e),{},sQ(sQ({},r.axisType,a),"".concat(r.axisType,"Ticks"),uH(a)))}),{}),T=I[g],C=I["".concat(g,"Ticks")],A=r&&r[S]&&r[S].hasStack&&function(e,t){var n=e.props.stackId;if(X$(n)){var r=t[n];if(r){var i=r.items.indexOf(e);return i>=0?r.stackedData[i]:null}}return null}(n,r[S].stackGroups),_=wD(n.type).indexOf("Bar")>=0,N=SH(T,C),O=[],R=y&&function(e){var t=e.barSize,n=e.totalSize,r=e.stackGroups,i=void 0===r?{}:r;if(!i)return{};for(var o={},a=Object.keys(i),s=0,l=a.length;s<l;s++)for(var u=i[a[s]].stackGroups,c=Object.keys(u),h=0,d=c.length;h<d;h++){var p=u[c[h]],f=p.items,m=p.cateAxisId,g=f.filter((function(e){return wD(e.type).indexOf("Bar")>=0}));if(g&&g.length){var y=g[0].props.barSize,v=g[0].props[m];o[v]||(o[v]=[]);var b=iD()(y)?t:y;o[v].push({item:g[0],stackList:g.slice(1),barSize:iD()(b)?void 0:J$(b,n,0)})}}return o}({barSize:l,stackGroups:r,totalSize:kQ(I,g)});if(_){var $,D,P=iD()(k)?p:k,M=null!==($=null!==(D=SH(T,C,!0))&&void 0!==D?D:P)&&void 0!==$?$:0;O=function(e){var t=e.barGap,n=e.barCategoryGap,r=e.bandSize,i=e.sizeList,o=void 0===i?[]:i,a=e.maxBarSize,s=o.length;if(s<1)return null;var l,u=J$(t,r,0,!0),c=[];if(o[0].barSize===+o[0].barSize){var h=!1,d=r/s,p=o.reduce((function(e,t){return e+t.barSize||0}),0);(p+=(s-1)*u)>=r&&(p-=(s-1)*u,u=0),p>=r&&d>0&&(h=!0,p=s*(d*=.9));var f={offset:((r-p)/2|0)-u,size:0};l=o.reduce((function(e,t){var n={item:t.item,position:{offset:f.offset+f.size+u,size:h?d:t.barSize}},r=[].concat(tH(e),[n]);return f=r[r.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach((function(e){r.push({item:e,position:f})})),r}),c)}else{var m=J$(n,r,0,!0);r-2*m-(s-1)*u<=0&&(u=0);var g=(r-2*m-(s-1)*u)/s;g>1&&(g>>=0);var y=a===+a?Math.min(g,a):g;l=o.reduce((function(e,t,n){var r=[].concat(tH(e),[{item:t.item,position:{offset:m+(g+u)*n+(g-y)/2,size:y}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach((function(e){r.push({item:e,position:r[r.length-1].position})})),r}),c)}return l}({barGap:h,barCategoryGap:d,bandSize:M!==N?M:N,sizeList:R[E],maxBarSize:P}),M!==N&&(O=O.map((function(e){return aQ(aQ({},e),{},{position:aQ(aQ({},e.position),{},{offset:e.position.offset-M/2})})})))}var F,L,j=n&&n.type&&n.type.getComposedData;j&&v.push({props:aQ(aQ({},j(aQ(aQ({},I),{},{displayedData:b,props:e,dataKey:w,item:n,bandSize:N,barPosition:O,offset:i,stackedData:A,layout:c,dataStartIndex:a,dataEndIndex:s}))),{},sQ(sQ(sQ({key:n.key||"item-".concat(f)},m,I[m]),g,I[g]),"animationId",o)),childIndex:(F=n,L=e.children,ED(L).indexOf(F)),item:n})})),v},f=function(e,t){var i=e.props,o=e.dataStartIndex,a=e.dataEndIndex,s=e.updateId;if(!CD({props:i}))return null;var l=i.children,c=i.layout,d=i.stackOffset,f=i.data,m=i.reverseStackOrder,g=xQ(c),y=g.numericAxisName,v=g.cateAxisName,b=ID(l,r),x=function(e,t,n,r,i,o){if(!e)return null;var a=(o?t.reverse():t).reduce((function(e,t){var i=t.props,o=i.stackId;if(i.hide)return e;var a=t.props[n],s=e[a]||{hasStack:!1,stackGroups:{}};if(X$(o)){var l=s.stackGroups[o]||{numericAxisId:n,cateAxisId:r,items:[]};l.items.push(t),s.hasStack=!0,s.stackGroups[o]=l}else s.stackGroups[Q$("_stackId_")]={numericAxisId:n,cateAxisId:r,items:[t]};return ZG(ZG({},e),{},eH({},a,s))}),{});return Object.keys(a).reduce((function(t,o){var s=a[o];return s.hasStack&&(s.stackGroups=Object.keys(s.stackGroups).reduce((function(t,o){var a=s.stackGroups[o];return ZG(ZG({},t),{},eH({},o,{numericAxisId:n,cateAxisId:r,items:a.items,stackedData:gH(e,a.items,i)}))}),{})),ZG(ZG({},t),{},eH({},o,s))}),{})}(f,b,"".concat(y,"Id"),"".concat(v,"Id"),d,m),w=u.reduce((function(e,t){var n="".concat(t.axisType,"Map");return aQ(aQ({},e),{},sQ({},n,vQ(i,aQ(aQ({},t),{},{graphicalItems:b,stackGroups:t.axisType===y&&x,dataStartIndex:o,dataEndIndex:a}))))}),{}),k=wQ(aQ(aQ({},w),{},{props:i,graphicalItems:b}),null===t||void 0===t?void 0:t.legendBBox);Object.keys(w).forEach((function(e){w[e]=h(i,w[e],k,e.replace("Map",""),n)}));var S=function(e){var t=Z$(e),n=uH(t,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:VD()(n,(function(e){return e.coordinate})),tooltipAxis:t,tooltipAxisBandSize:SH(t,n)}}(w["".concat(v,"Map")]),E=p(i,aQ(aQ({},w),{},{dataStartIndex:o,dataEndIndex:a,updateId:s,graphicalItems:b,stackGroups:x,offset:k}));return aQ(aQ({formattedGraphicalItems:E,graphicalItems:b,offset:k,stackGroups:x},S),w)};return t=function(e){function t(e){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),sQ(eQ(o=QY(this,t,[e])),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),sQ(eQ(o),"accessibilityManager",new KX),sQ(eQ(o),"handleLegendBBoxUpdate",(function(e){if(e){var t=o.state,n=t.dataStartIndex,r=t.dataEndIndex,i=t.updateId;o.setState(aQ({legendBBox:e},f({props:o.props,dataStartIndex:n,dataEndIndex:r,updateId:i},aQ(aQ({},o.state),{},{legendBBox:e}))))}})),sQ(eQ(o),"handleReceiveSyncEvent",(function(e,t,n){if(o.props.syncId===e){if(n===o.eventEmitterSymbol&&"function"!==typeof o.props.syncMethod)return;o.applySyncEvent(t)}})),sQ(eQ(o),"handleBrushChange",(function(e){var t=e.startIndex,n=e.endIndex;if(t!==o.state.dataStartIndex||n!==o.state.dataEndIndex){var r=o.state.updateId;o.setState((function(){return aQ({dataStartIndex:t,dataEndIndex:n},f({props:o.props,dataStartIndex:t,dataEndIndex:n,updateId:r},o.state))})),o.triggerSyncEvent({dataStartIndex:t,dataEndIndex:n})}})),sQ(eQ(o),"handleMouseEnter",(function(e){var t=o.getMouseInfo(e);if(t){var n=aQ(aQ({},t),{},{isTooltipActive:!0});o.setState(n),o.triggerSyncEvent(n);var r=o.props.onMouseEnter;aD()(r)&&r(n,e)}})),sQ(eQ(o),"triggeredAfterMouseMove",(function(e){var t=o.getMouseInfo(e),n=t?aQ(aQ({},t),{},{isTooltipActive:!0}):{isTooltipActive:!1};o.setState(n),o.triggerSyncEvent(n);var r=o.props.onMouseMove;aD()(r)&&r(n,e)})),sQ(eQ(o),"handleItemMouseEnter",(function(e){o.setState((function(){return{isTooltipActive:!0,activeItem:e,activePayload:e.tooltipPayload,activeCoordinate:e.tooltipPosition||{x:e.cx,y:e.cy}}}))})),sQ(eQ(o),"handleItemMouseLeave",(function(){o.setState((function(){return{isTooltipActive:!1}}))})),sQ(eQ(o),"handleMouseMove",(function(e){e.persist(),o.throttleTriggeredAfterMouseMove(e)})),sQ(eQ(o),"handleMouseLeave",(function(e){o.throttleTriggeredAfterMouseMove.cancel();var t={isTooltipActive:!1};o.setState(t),o.triggerSyncEvent(t);var n=o.props.onMouseLeave;aD()(n)&&n(t,e)})),sQ(eQ(o),"handleOuterEvent",(function(e){var t,n=function(e){var t=e&&e.type;return t&&xD[t]?xD[t]:null}(e),r=W$()(o.props,"".concat(n));n&&aD()(r)&&r(null!==(t=/.*touch.*/i.test(n)?o.getMouseInfo(e.changedTouches[0]):o.getMouseInfo(e))&&void 0!==t?t:{},e)})),sQ(eQ(o),"handleClick",(function(e){var t=o.getMouseInfo(e);if(t){var n=aQ(aQ({},t),{},{isTooltipActive:!0});o.setState(n),o.triggerSyncEvent(n);var r=o.props.onClick;aD()(r)&&r(n,e)}})),sQ(eQ(o),"handleMouseDown",(function(e){var t=o.props.onMouseDown;aD()(t)&&t(o.getMouseInfo(e),e)})),sQ(eQ(o),"handleMouseUp",(function(e){var t=o.props.onMouseUp;aD()(t)&&t(o.getMouseInfo(e),e)})),sQ(eQ(o),"handleTouchMove",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&o.throttleTriggeredAfterMouseMove(e.changedTouches[0])})),sQ(eQ(o),"handleTouchStart",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&o.handleMouseDown(e.changedTouches[0])})),sQ(eQ(o),"handleTouchEnd",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&o.handleMouseUp(e.changedTouches[0])})),sQ(eQ(o),"triggerSyncEvent",(function(e){void 0!==o.props.syncId&&UX.emit(WX,o.props.syncId,e,o.eventEmitterSymbol)})),sQ(eQ(o),"applySyncEvent",(function(e){var t=o.props,n=t.layout,r=t.syncMethod,i=o.state.updateId,a=e.dataStartIndex,s=e.dataEndIndex;if(void 0!==e.dataStartIndex||void 0!==e.dataEndIndex)o.setState(aQ({dataStartIndex:a,dataEndIndex:s},f({props:o.props,dataStartIndex:a,dataEndIndex:s,updateId:i},o.state)));else if(void 0!==e.activeTooltipIndex){var l=e.chartX,u=e.chartY,c=e.activeTooltipIndex,h=o.state,d=h.offset,p=h.tooltipTicks;if(!d)return;if("function"===typeof r)c=r(p,e);else if("value"===r){c=-1;for(var m=0;m<p.length;m++)if(p[m].value===e.activeLabel){c=m;break}}var g=aQ(aQ({},d),{},{x:d.left,y:d.top}),y=Math.min(l,g.x+g.width),v=Math.min(u,g.y+g.height),b=p[c]&&p[c].value,x=mQ(o.state,o.props.data,c),w=p[c]?{x:"horizontal"===n?p[c].coordinate:y,y:"horizontal"===n?v:p[c].coordinate}:hQ;o.setState(aQ(aQ({},e),{},{activeLabel:b,activeCoordinate:w,activePayload:x,activeTooltipIndex:c}))}else o.setState(e)})),sQ(eQ(o),"renderCursor",(function(e){var t,r=o.state,i=r.isTooltipActive,a=r.activeCoordinate,s=r.activePayload,u=r.offset,c=r.activeTooltipIndex,h=r.tooltipAxisBandSize,d=o.getTooltipEventType(),p=null!==(t=e.props.active)&&void 0!==t?t:i,f=o.props.layout,m=e.key||"_recharts-cursor";return l.createElement(WY,{key:m,activeCoordinate:a,activePayload:s,activeTooltipIndex:c,chartName:n,element:e,isActive:p,layout:f,offset:u,tooltipAxisBandSize:h,tooltipEventType:d})})),sQ(eQ(o),"renderPolarAxis",(function(e,t,n){var r=W$()(e,"type.axisType"),i=W$()(o.state,"".concat(r,"Map")),a=i&&i[e.props["".concat(r,"Id")]];return(0,l.cloneElement)(e,aQ(aQ({},a),{},{className:Se(r,a.className),key:e.key||"".concat(t,"-").concat(n),ticks:uH(a,!0)}))})),sQ(eQ(o),"renderPolarGrid",(function(e){var t=e.props,n=t.radialLines,r=t.polarAngles,i=t.polarRadius,a=o.state,s=a.radiusAxisMap,u=a.angleAxisMap,c=Z$(s),h=Z$(u),d=h.cx,p=h.cy,f=h.innerRadius,m=h.outerRadius;return(0,l.cloneElement)(e,{polarAngles:Array.isArray(r)?r:uH(h,!0).map((function(e){return e.coordinate})),polarRadius:Array.isArray(i)?i:uH(c,!0).map((function(e){return e.coordinate})),cx:d,cy:p,innerRadius:f,outerRadius:m,key:e.key||"polar-grid",radialLines:n})})),sQ(eQ(o),"renderLegend",(function(){var e=o.state.formattedGraphicalItems,t=o.props,n=t.children,r=t.width,i=t.height,a=o.props.margin||{},s=r-(a.left||0)-(a.right||0),u=YG({children:n,formattedGraphicalItems:e,legendWidth:s,legendContent:c});if(!u)return null;var h=u.item,d=XY(u,VY);return(0,l.cloneElement)(h,aQ(aQ({},d),{},{chartWidth:r,chartHeight:i,margin:a,onBBoxUpdate:o.handleLegendBBoxUpdate}))})),sQ(eQ(o),"renderTooltip",(function(){var e,t=o.props,n=t.children,r=t.accessibilityLayer,i=TD(n,WP);if(!i)return null;var a=o.state,s=a.isTooltipActive,u=a.activeCoordinate,c=a.activePayload,h=a.activeLabel,d=a.offset,p=null!==(e=i.props.active)&&void 0!==e?e:s;return(0,l.cloneElement)(i,{viewBox:aQ(aQ({},d),{},{x:d.left,y:d.top}),active:p,label:h,payload:p?c:[],coordinate:u,accessibilityLayer:r})})),sQ(eQ(o),"renderBrush",(function(e){var t=o.props,n=t.margin,r=t.data,i=o.state,a=i.offset,s=i.dataStartIndex,u=i.dataEndIndex,c=i.updateId;return(0,l.cloneElement)(e,{key:e.key||"_recharts-brush",onChange:hH(o.handleBrushChange,e.props.onChange),data:r,x:K$(e.props.x)?e.props.x:a.left,y:K$(e.props.y)?e.props.y:a.top+a.height+a.brushBottom-(n.bottom||0),width:K$(e.props.width)?e.props.width:a.width,startIndex:s,endIndex:u,updateId:"brush-".concat(c)})})),sQ(eQ(o),"renderReferenceElement",(function(e,t,n){if(!e)return null;var r=eQ(o).clipPathId,i=o.state,a=i.xAxisMap,s=i.yAxisMap,u=i.offset,c=e.props,h=c.xAxisId,d=c.yAxisId;return(0,l.cloneElement)(e,{key:e.key||"".concat(t,"-").concat(n),xAxis:a[h],yAxis:s[d],viewBox:{x:u.left,y:u.top,width:u.width,height:u.height},clipPathId:r})})),sQ(eQ(o),"renderActivePoints",(function(e){var n=e.item,r=e.activePoint,i=e.basePoint,o=e.childIndex,a=e.isRange,s=[],l=n.props.key,u=n.item.props,c=u.activeDot,h=aQ(aQ({index:o,dataKey:u.dataKey,cx:r.x,cy:r.y,r:4,fill:oH(n.item),strokeWidth:2,stroke:"#fff",payload:r.payload,value:r.value,key:"".concat(l,"-activePoint-").concat(o)},ND(c,!1)),mD(c));return s.push(t.renderActiveDot(c,h)),i?s.push(t.renderActiveDot(c,aQ(aQ({},h),{},{cx:i.x,cy:i.y,key:"".concat(l,"-basePoint-").concat(o)}))):a&&s.push(null),s})),sQ(eQ(o),"renderGraphicChild",(function(e,t,n){var r=o.filterFormatItem(e,t,n);if(!r)return null;var i=o.getTooltipEventType(),a=o.state,s=a.isTooltipActive,u=a.tooltipAxis,c=a.activeTooltipIndex,h=a.activeLabel,d=TD(o.props.children,WP),p=r.props,f=p.points,m=p.isRange,g=p.baseLine,y=r.item.props,v=y.activeDot,b=y.hide,x=y.activeBar,w=y.activeShape,k=Boolean(!b&&s&&d&&(v||x||w)),S={};"axis"!==i&&d&&"click"===d.props.trigger?S={onClick:hH(o.handleItemMouseEnter,e.props.onClick)}:"axis"!==i&&(S={onMouseLeave:hH(o.handleItemMouseLeave,e.props.onMouseLeave),onMouseEnter:hH(o.handleItemMouseEnter,e.props.onMouseEnter)});var E=(0,l.cloneElement)(e,aQ(aQ({},r.props),S));if(k){if(!(c>=0)){var I,T=(null!==(I=o.getItemByXY(o.state.activeCoordinate))&&void 0!==I?I:{graphicalItem:E}).graphicalItem,C=T.item,A=void 0===C?e:C,_=T.childIndex,N=aQ(aQ(aQ({},r.props),S),{},{activeIndex:_});return[(0,l.cloneElement)(A,N),null,null]}var O,R;if(u.dataKey&&!u.allowDuplicatedCategory){var $="function"===typeof u.dataKey?function(e){return"function"===typeof u.dataKey?u.dataKey(e.payload):null}:"payload.".concat(u.dataKey.toString());O=tD(f,$,h),R=m&&g&&tD(g,$,h)}else O=null===f||void 0===f?void 0:f[c],R=m&&g&&g[c];if(w||x){var D=void 0!==e.props.activeIndex?e.props.activeIndex:c;return[(0,l.cloneElement)(e,aQ(aQ(aQ({},r.props),S),{},{activeIndex:D})),null,null]}if(!iD()(O))return[E].concat(nQ(o.renderActivePoints({item:r,activePoint:O,basePoint:R,childIndex:c,isRange:m})))}return m?[E,null,null]:[E,null]})),sQ(eQ(o),"renderCustomized",(function(e,t,n){return(0,l.cloneElement)(e,aQ(aQ({key:"recharts-customized-".concat(n)},o.props),o.state))})),sQ(eQ(o),"renderMap",{CartesianGrid:{handler:dQ,once:!0},ReferenceArea:{handler:o.renderReferenceElement},ReferenceLine:{handler:dQ},ReferenceDot:{handler:o.renderReferenceElement},XAxis:{handler:dQ},YAxis:{handler:dQ},Brush:{handler:o.renderBrush,once:!0},Bar:{handler:o.renderGraphicChild},Line:{handler:o.renderGraphicChild},Area:{handler:o.renderGraphicChild},Radar:{handler:o.renderGraphicChild},RadialBar:{handler:o.renderGraphicChild},Scatter:{handler:o.renderGraphicChild},Pie:{handler:o.renderGraphicChild},Funnel:{handler:o.renderGraphicChild},Tooltip:{handler:o.renderCursor,once:!0},PolarGrid:{handler:o.renderPolarGrid,once:!0},PolarAngleAxis:{handler:o.renderPolarAxis},PolarRadiusAxis:{handler:o.renderPolarAxis},Customized:{handler:o.renderCustomized}}),o.clipPathId="".concat(null!==(r=e.id)&&void 0!==r?r:Q$("recharts"),"-clip"),o.throttleTriggeredAfterMouseMove=M$()(o.triggeredAfterMouseMove,null!==(i=e.throttleDelay)&&void 0!==i?i:1e3/60),o.state={},o}var r,i,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tQ(e,t)}(t,e),r=t,i=[{key:"componentDidMount",value:function(){var e,t;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:null!==(e=this.props.margin.left)&&void 0!==e?e:0,top:null!==(t=this.props.margin.top)&&void 0!==t?t:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var e=this.props,t=e.children,n=e.data,r=e.height,i=e.layout,o=TD(t,WP);if(o){var a=o.props.defaultIndex;if(!("number"!==typeof a||a<0||a>this.state.tooltipTicks.length)){var s=this.state.tooltipTicks[a]&&this.state.tooltipTicks[a].value,l=mQ(this.state,n,a,s),u=this.state.tooltipTicks[a].coordinate,c=(this.state.offset.top+r)/2,h="horizontal"===i?{x:u,y:c}:{y:u,x:c},d=this.state.formattedGraphicalItems.find((function(e){return"Scatter"===e.item.type.name}));d&&(h=aQ(aQ({},h),d.props.points[a].tooltipPosition),l=d.props.points[a].tooltipPayload);var p={activeTooltipIndex:a,isTooltipActive:!0,activeLabel:s,activePayload:l,activeCoordinate:h};this.setState(p),this.renderCursor(o),this.accessibilityManager.setIndex(a)}}}},{key:"getSnapshotBeforeUpdate",value:function(e,t){return this.props.accessibilityLayer?(this.state.tooltipTicks!==t.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==e.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==e.margin&&this.accessibilityManager.setDetails({offset:{left:null!==(n=this.props.margin.left)&&void 0!==n?n:0,top:null!==(r=this.props.margin.top)&&void 0!==r?r:0}}),null):null;var n,r}},{key:"componentDidUpdate",value:function(e){OD([TD(e.children,WP)],[TD(this.props.children,WP)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var e=TD(this.props.children,WP);if(e&&"boolean"===typeof e.props.shared){var t=e.props.shared?"axis":"item";return s.indexOf(t)>=0?t:o}return o}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t,n=this.container,r=n.getBoundingClientRect(),i={top:(t=r).top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft},o={chartX:Math.round(e.pageX-i.left),chartY:Math.round(e.pageY-i.top)},a=r.width/n.offsetWidth||1,s=this.inRange(o.chartX,o.chartY,a);if(!s)return null;var l=this.state,u=l.xAxisMap,c=l.yAxisMap;if("axis"!==this.getTooltipEventType()&&u&&c){var h=Z$(u).scale,d=Z$(c).scale,p=h&&h.invert?h.invert(o.chartX):null,f=d&&d.invert?d.invert(o.chartY):null;return aQ(aQ({},o),{},{xValue:p,yValue:f})}var m=gQ(this.state,this.props.data,this.props.layout,s);return m?aQ(aQ({},o),m):null}},{key:"inRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.props.layout,i=e/n,o=t/n;if("horizontal"===r||"vertical"===r){var a=this.state.offset;return i>=a.left&&i<=a.left+a.width&&o>=a.top&&o<=a.top+a.height?{x:i,y:o}:null}var s=this.state,l=s.angleAxisMap,u=s.radiusAxisMap;if(l&&u){var c=Z$(l);return rq({x:i,y:o},c)}return null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=this.getTooltipEventType(),n=TD(e,WP),r={};return n&&"axis"===t&&(r="click"===n.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd}),aQ(aQ({},mD(this.props,this.handleOuterEvent)),r)}},{key:"addListener",value:function(){UX.on(WX,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){UX.removeListener(WX,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(e,t,n){for(var r=this.state.formattedGraphicalItems,i=0,o=r.length;i<o;i++){var a=r[i];if(a.item===e||a.props.key===e.key||t===wD(a.item.type)&&n===a.childIndex)return a}return null}},{key:"renderClipPath",value:function(){var e=this.clipPathId,t=this.state.offset,n=t.left,r=t.top,i=t.height,o=t.width;return l.createElement("defs",null,l.createElement("clipPath",{id:e},l.createElement("rect",{x:n,y:r,height:i,width:o})))}},{key:"getXScales",value:function(){var e=this.state.xAxisMap;return e?Object.entries(e).reduce((function(e,t){var n=KY(t,2),r=n[0],i=n[1];return aQ(aQ({},e),{},sQ({},r,i.scale))}),{}):null}},{key:"getYScales",value:function(){var e=this.state.yAxisMap;return e?Object.entries(e).reduce((function(e,t){var n=KY(t,2),r=n[0],i=n[1];return aQ(aQ({},e),{},sQ({},r,i.scale))}),{}):null}},{key:"getXScaleByAxisId",value:function(e){var t;return null===(t=this.state.xAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getYScaleByAxisId",value:function(e){var t;return null===(t=this.state.yAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getItemByXY",value:function(e){var t=this.state,n=t.formattedGraphicalItems,r=t.activeItem;if(n&&n.length)for(var i=0,o=n.length;i<o;i++){var a=n[i],s=a.props,l=a.item,u=wD(l.type);if("Bar"===u){var c=(s.data||[]).find((function(t){return ij(e,t)}));if(c)return{graphicalItem:a,payload:c}}else if("RadialBar"===u){var h=(s.data||[]).find((function(t){return rq(e,t)}));if(h)return{graphicalItem:a,payload:h}}else if(mK(a,r)||gK(a,r)||yK(a,r)){var d=wK({graphicalItem:a,activeTooltipItem:r,itemData:l.props.data}),p=void 0===l.props.activeIndex?d:l.props.activeIndex;return{graphicalItem:aQ(aQ({},a),{},{childIndex:p}),payload:yK(a,r)?l.props.data[d]:a.props.data[d]}}}return null}},{key:"render",value:function(){var e=this;if(!CD(this))return null;var t,n,r=this.props,i=r.children,o=r.className,a=r.width,s=r.height,u=r.style,c=r.compact,h=r.title,d=r.desc,p=XY(r,GY),f=ND(p,!1);if(c)return l.createElement(bX,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},l.createElement(YD,qY({},f,{width:a,height:s,title:h,desc:d}),this.renderClipPath(),$D(i,this.renderMap)));this.props.accessibilityLayer&&(f.tabIndex=null!==(t=this.props.tabIndex)&&void 0!==t?t:0,f.role=null!==(n=this.props.role)&&void 0!==n?n:"application",f.onKeyDown=function(t){e.accessibilityManager.keyboardEvent(t)},f.onFocus=function(){e.accessibilityManager.focus()});var m=this.parseEventsOfWrapper();return l.createElement(bX,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},l.createElement("div",qY({className:Se("recharts-wrapper",o),style:aQ({position:"relative",cursor:"default",width:a,height:s},u)},m,{ref:function(t){e.container=t}}),l.createElement(YD,qY({},f,{width:a,height:s,title:h,desc:d,style:cQ}),this.renderClipPath(),$D(i,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}],i&&YY(r.prototype,i),a&&YY(r,a),Object.defineProperty(r,"prototype",{writable:!1}),t}(l.Component),sQ(t,"displayName",n),sQ(t,"defaultProps",aQ({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),sQ(t,"getDerivedStateFromProps",(function(e,t){var n=e.dataKey,r=e.data,i=e.children,o=e.width,a=e.height,s=e.layout,l=e.stackOffset,u=e.margin,c=t.dataStartIndex,h=t.dataEndIndex;if(void 0===t.updateId){var d=bQ(e);return aQ(aQ(aQ({},d),{},{updateId:0},f(aQ(aQ({props:e},d),{},{updateId:0}),t)),{},{prevDataKey:n,prevData:r,prevWidth:o,prevHeight:a,prevLayout:s,prevStackOffset:l,prevMargin:u,prevChildren:i})}if(n!==t.prevDataKey||r!==t.prevData||o!==t.prevWidth||a!==t.prevHeight||s!==t.prevLayout||l!==t.prevStackOffset||!uD(u,t.prevMargin)){var p=bQ(e),m={chartX:t.chartX,chartY:t.chartY,isTooltipActive:t.isTooltipActive},g=aQ(aQ({},gQ(t,r,s)),{},{updateId:t.updateId+1}),y=aQ(aQ(aQ({},p),m),g);return aQ(aQ(aQ({},y),f(aQ({props:e},y),t)),{},{prevDataKey:n,prevData:r,prevWidth:o,prevHeight:a,prevLayout:s,prevStackOffset:l,prevMargin:u,prevChildren:i})}if(!OD(i,t.prevChildren)){var v,b,x,w,k=TD(i,VH),S=k&&null!==(v=null===(b=k.props)||void 0===b?void 0:b.startIndex)&&void 0!==v?v:c,E=k&&null!==(x=null===(w=k.props)||void 0===w?void 0:w.endIndex)&&void 0!==x?x:h,I=S!==c||E!==h,T=!iD()(r)&&!I?t.updateId:t.updateId+1;return aQ(aQ({updateId:T},f(aQ(aQ({props:e},t),{},{updateId:T,dataStartIndex:S,dataEndIndex:E}),t)),{},{prevChildren:i,dataStartIndex:S,dataEndIndex:E})}return null})),sQ(t,"renderActiveDot",(function(e,t){var n;return n=(0,l.isValidElement)(e)?(0,l.cloneElement)(e,t):aD()(e)?e(t):l.createElement(aF,t),l.createElement(eP,{className:"recharts-active-dot",key:t.key},n)})),t};function EQ(e,t,n){if(t<1)return[];if(1===t&&void 0===n)return e;for(var r=[],i=0;i<e.length;i+=t){if(void 0!==n&&!0!==n(e[i]))return;r.push(e[i])}return r}function IQ(e,t,n){return function(e){var t=e.width,n=e.height,r=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),i=r*Math.PI/180,o=Math.atan(n/t),a=i>o&&i<Math.PI-o?n/Math.sin(i):t/Math.cos(i);return Math.abs(a)}({width:e.width+t.width,height:e.height+t.height},n)}function TQ(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var o=n();return e*(t-e*o/2-r)>=0&&e*(t+e*o/2-i)<=0}function CQ(e){return CQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},CQ(e)}function AQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AQ(Object(n),!0).forEach((function(t){NQ(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AQ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function NQ(e,t,n){return t=function(e){var t=function(e,t){if("object"!=CQ(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=CQ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==CQ(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OQ(e,t,n){var r=e.tick,i=e.ticks,o=e.viewBox,a=e.minTickGap,s=e.orientation,l=e.interval,u=e.tickFormatter,c=e.unit,h=e.angle;if(!i||!i.length||!r)return[];if(K$(l)||AP.isSsr)return function(e,t){return EQ(e,t+1)}(i,"number"===typeof l&&K$(l)?l:0);var d=[],p="top"===s||"bottom"===s?"width":"height",f=c&&"width"===p?Tj(c,{fontSize:t,letterSpacing:n}):{width:0,height:0},m=function(e,r){var i=aD()(u)?u(e.value,r):e.value;return"width"===p?IQ(Tj(i,{fontSize:t,letterSpacing:n}),f,h):Tj(i,{fontSize:t,letterSpacing:n})[p]},g=i.length>=2?H$(i[1].coordinate-i[0].coordinate):1,y=function(e,t,n){var r="width"===n,i=e.x,o=e.y,a=e.width,s=e.height;return 1===t?{start:r?i:o,end:r?i+a:o+s}:{start:r?i+a:o+s,end:r?i:o}}(o,g,p);return"equidistantPreserveStart"===l?function(e,t,n,r,i){for(var o,a=(r||[]).slice(),s=t.start,l=t.end,u=0,c=1,h=s,d=function(){var t=null===r||void 0===r?void 0:r[u];if(void 0===t)return{v:EQ(r,c)};var o,a=u,d=function(){return void 0===o&&(o=n(t,a)),o},p=t.coordinate,f=0===u||TQ(e,p,d,h,l);f||(u=0,h=s,c+=1),f&&(h=p+e*(d()/2+i),u+=c)};c<=a.length;)if(o=d())return o.v;return[]}(g,y,m,i,a):(d="preserveStart"===l||"preserveStartEnd"===l?function(e,t,n,r,i,o){var a=(r||[]).slice(),s=a.length,l=t.start,u=t.end;if(o){var c=r[s-1],h=n(c,s-1),d=e*(c.coordinate+e*h/2-u);a[s-1]=c=_Q(_Q({},c),{},{tickCoord:d>0?c.coordinate-d*e:c.coordinate}),TQ(e,c.tickCoord,(function(){return h}),l,u)&&(u=c.tickCoord-e*(h/2+i),a[s-1]=_Q(_Q({},c),{},{isShow:!0}))}for(var p=o?s-1:s,f=function(t){var r,o=a[t],s=function(){return void 0===r&&(r=n(o,t)),r};if(0===t){var c=e*(o.coordinate-e*s()/2-l);a[t]=o=_Q(_Q({},o),{},{tickCoord:c<0?o.coordinate-c*e:o.coordinate})}else a[t]=o=_Q(_Q({},o),{},{tickCoord:o.coordinate});TQ(e,o.tickCoord,s,l,u)&&(l=o.tickCoord+e*(s()/2+i),a[t]=_Q(_Q({},o),{},{isShow:!0}))},m=0;m<p;m++)f(m);return a}(g,y,m,i,a,"preserveStartEnd"===l):function(e,t,n,r,i){for(var o=(r||[]).slice(),a=o.length,s=t.start,l=t.end,u=function(t){var r,u=o[t],c=function(){return void 0===r&&(r=n(u,t)),r};if(t===a-1){var h=e*(u.coordinate+e*c()/2-l);o[t]=u=_Q(_Q({},u),{},{tickCoord:h>0?u.coordinate-h*e:u.coordinate})}else o[t]=u=_Q(_Q({},u),{},{tickCoord:u.coordinate});TQ(e,u.tickCoord,c,s,l)&&(l=u.tickCoord-e*(c()/2+i),o[t]=_Q(_Q({},u),{},{isShow:!0}))},c=a-1;c>=0;c--)u(c);return o}(g,y,m,i,a),d.filter((function(e){return e.isShow})))}var RQ=["viewBox"],$Q=["viewBox"],DQ=["ticks"];function PQ(e){return PQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PQ(e)}function MQ(){return MQ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MQ.apply(this,arguments)}function FQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function LQ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FQ(Object(n),!0).forEach((function(t){GQ(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FQ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jQ(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function zQ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,HQ(r.key),r)}}function BQ(e,t,n){return t=WQ(t),function(e,t){if(t&&("object"===PQ(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,UQ()?Reflect.construct(t,n||[],WQ(e).constructor):t.apply(e,n))}function UQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(UQ=function(){return!!e})()}function WQ(e){return WQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},WQ(e)}function VQ(e,t){return VQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},VQ(e,t)}function GQ(e,t,n){return(t=HQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HQ(e){var t=function(e,t){if("object"!=PQ(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=PQ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==PQ(t)?t:String(t)}var qQ=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=BQ(this,t,[e])).state={fontSize:"",letterSpacing:""},n}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VQ(e,t)}(t,e),n=t,r=[{key:"shouldComponentUpdate",value:function(e,t){var n=e.viewBox,r=jQ(e,RQ),i=this.props,o=i.viewBox,a=jQ(i,$Q);return!uD(n,o)||!uD(r,a)||!uD(t,this.state)}},{key:"componentDidMount",value:function(){var e=this.layerReference;if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];t&&this.setState({fontSize:window.getComputedStyle(t).fontSize,letterSpacing:window.getComputedStyle(t).letterSpacing})}}},{key:"getTickLineCoord",value:function(e){var t,n,r,i,o,a,s=this.props,l=s.x,u=s.y,c=s.width,h=s.height,d=s.orientation,p=s.tickSize,f=s.mirror,m=s.tickMargin,g=f?-1:1,y=e.tickSize||p,v=K$(e.tickCoord)?e.tickCoord:e.coordinate;switch(d){case"top":t=n=e.coordinate,a=(r=(i=u+ +!f*h)-g*y)-g*m,o=v;break;case"left":r=i=e.coordinate,o=(t=(n=l+ +!f*c)-g*y)-g*m,a=v;break;case"right":r=i=e.coordinate,o=(t=(n=l+ +f*c)+g*y)+g*m,a=v;break;default:t=n=e.coordinate,a=(r=(i=u+ +f*h)+g*y)+g*m,o=v}return{line:{x1:t,y1:r,x2:n,y2:i},tick:{x:o,y:a}}}},{key:"getTickTextAnchor",value:function(){var e,t=this.props,n=t.orientation,r=t.mirror;switch(n){case"left":e=r?"start":"end";break;case"right":e=r?"end":"start";break;default:e="middle"}return e}},{key:"getTickVerticalAnchor",value:function(){var e=this.props,t=e.orientation,n=e.mirror,r="end";switch(t){case"left":case"right":r="middle";break;case"top":r=n?"start":"end";break;default:r=n?"end":"start"}return r}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.x,n=e.y,r=e.width,i=e.height,o=e.orientation,a=e.mirror,s=e.axisLine,u=LQ(LQ(LQ({},ND(this.props,!1)),ND(s,!1)),{},{fill:"none"});if("top"===o||"bottom"===o){var c=+("top"===o&&!a||"bottom"===o&&a);u=LQ(LQ({},u),{},{x1:t,y1:n+c*i,x2:t+r,y2:n+c*i})}else{var h=+("left"===o&&!a||"right"===o&&a);u=LQ(LQ({},u),{},{x1:t+h*r,y1:n,x2:t+h*r,y2:n+i})}return l.createElement("line",MQ({},u,{className:Se("recharts-cartesian-axis-line",W$()(s,"className"))}))}},{key:"renderTicks",value:function(e,n,r){var i=this,o=this.props,a=o.tickLine,s=o.stroke,u=o.tick,c=o.tickFormatter,h=o.unit,d=OQ(LQ(LQ({},this.props),{},{ticks:e}),n,r),p=this.getTickTextAnchor(),f=this.getTickVerticalAnchor(),m=ND(this.props,!1),g=ND(u,!1),y=LQ(LQ({},m),{},{fill:"none"},ND(a,!1)),v=d.map((function(e,n){var r=i.getTickLineCoord(e),o=r.line,v=r.tick,b=LQ(LQ(LQ(LQ({textAnchor:p,verticalAnchor:f},m),{},{stroke:"none",fill:s},g),v),{},{index:n,payload:e,visibleTicksCount:d.length,tickFormatter:c});return l.createElement(eP,MQ({className:"recharts-cartesian-axis-tick",key:"tick-".concat(e.value,"-").concat(e.coordinate,"-").concat(e.tickCoord)},gD(i.props,e,n)),a&&l.createElement("line",MQ({},y,o,{className:Se("recharts-cartesian-axis-tick-line",W$()(a,"className"))})),u&&t.renderTickItem(u,b,"".concat(aD()(c)?c(e.value,n):e.value).concat(h||"")))}));return l.createElement("g",{className:"recharts-cartesian-axis-ticks"},v)}},{key:"render",value:function(){var e=this,t=this.props,n=t.axisLine,r=t.width,i=t.height,o=t.ticksGenerator,a=t.className;if(t.hide)return null;var s=this.props,u=s.ticks,c=jQ(s,DQ),h=u;return aD()(o)&&(h=u&&u.length>0?o(this.props):o(c)),r<=0||i<=0||!h||!h.length?null:l.createElement(eP,{className:Se("recharts-cartesian-axis",a),ref:function(t){e.layerReference=t}},n&&this.renderAxisLine(),this.renderTicks(h,this.state.fontSize,this.state.letterSpacing),mq.renderCallByParent(this.props))}}],i=[{key:"renderTickItem",value:function(e,t,n){return l.isValidElement(e)?l.cloneElement(e,t):aD()(e)?e(t):l.createElement(tz,MQ({},t,{className:"recharts-cartesian-axis-tick-value"}),n)}}],r&&zQ(n.prototype,r),i&&zQ(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}(l.Component);function KQ(){return KQ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KQ.apply(this,arguments)}GQ(qQ,"displayName","CartesianAxis"),GQ(qQ,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var XQ=function(e){var t=e.xAxisId,n=kX(),r=SX(),i=xX(t);return null==i?null:l.createElement(qQ,KQ({},i,{className:Se("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(e){return uH(e,!0)}}))};function YQ(){return YQ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},YQ.apply(this,arguments)}XQ.displayName="XAxis",XQ.defaultProps={allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0};var QQ=function(e){var t=e.yAxisId,n=kX(),r=SX(),i=wX(t);return null==i?null:l.createElement(qQ,YQ({},i,{className:Se("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(e){return uH(e,!0)}}))};QQ.displayName="YAxis",QQ.defaultProps={allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1};var JQ=SQ({chartName:"BarChart",GraphicalChild:HK,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:XQ},{axisType:"yAxis",AxisComp:QQ}],formatAxisMap:function(e,t,n,r,i){var o=e.width,a=e.height,s=e.layout,l=e.children,u=Object.keys(t),c={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:a-n.bottom,bottomMirror:a-n.bottom},h=!!TD(l,HK);return u.reduce((function(o,a){var l,u,d,p,f,m=t[a],g=m.orientation,y=m.domain,v=m.padding,b=void 0===v?{}:v,x=m.mirror,w=m.reversed,k="".concat(g).concat(x?"Mirror":"");if("number"===m.type&&("gap"===m.padding||"no-gap"===m.padding)){var S=y[1]-y[0],E=1/0,I=m.categoricalDomain.sort();if(I.forEach((function(e,t){t>0&&(E=Math.min((e||0)-(I[t-1]||0),E))})),Number.isFinite(E)){var T=E/S,C="vertical"===m.layout?n.height:n.width;if("gap"===m.padding&&(l=T*C/2),"no-gap"===m.padding){var A=J$(e.barCategoryGap,T*C),_=T*C/2;l=_-A-(_-A)/C*A}}}u="xAxis"===r?[n.left+(b.left||0)+(l||0),n.left+n.width-(b.right||0)-(l||0)]:"yAxis"===r?"horizontal"===s?[n.top+n.height-(b.bottom||0),n.top+(b.top||0)]:[n.top+(b.top||0)+(l||0),n.top+n.height-(b.bottom||0)-(l||0)]:m.range,w&&(u=[u[1],u[0]]);var N=dH(m,i,h),O=N.scale,R=N.realScaleType;O.domain(y).range(u),fH(O);var $=yH(O,YK(YK({},m),{},{realScaleType:R}));"xAxis"===r?(f="top"===g&&!x||"bottom"===g&&x,d=n.left,p=c[k]-f*m.height):"yAxis"===r&&(f="left"===g&&!x||"right"===g&&x,d=c[k]-f*m.width,p=n.top);var D=YK(YK(YK({},m),$),{},{realScaleType:R,x:d,y:p,scale:O,width:"xAxis"===r?n.width:m.width,height:"yAxis"===r?n.height:m.height});return D.bandSize=SH(D,$),m.hide||"xAxis"!==r?m.hide||(c[k]+=(f?-1:1)*D.width):c[k]+=(f?-1:1)*D.height,YK(YK({},o),{},QK({},a,D))}),{})}}),ZQ=["points","className","baseLinePoints","connectNulls"];function eJ(){return eJ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eJ.apply(this,arguments)}function tJ(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function nJ(e){return function(e){if(Array.isArray(e))return rJ(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return rJ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rJ(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var iJ=function(e){return e&&e.x===+e.x&&e.y===+e.y},oJ=function(e,t){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[[]];return e.forEach((function(e){iJ(e)?t[t.length-1].push(e):t[t.length-1].length>0&&t.push([])})),iJ(e[0])&&t[t.length-1].push(e[0]),t[t.length-1].length<=0&&(t=t.slice(0,-1)),t}(e);t&&(n=[n.reduce((function(e,t){return[].concat(nJ(e),nJ(t))}),[])]);var r=n.map((function(e){return e.reduce((function(e,t,n){return"".concat(e).concat(0===n?"M":"L").concat(t.x,",").concat(t.y)}),"")})).join("");return 1===n.length?"".concat(r,"Z"):r},aJ=function(e){var t=e.points,n=e.className,r=e.baseLinePoints,i=e.connectNulls,o=tJ(e,ZQ);if(!t||!t.length)return null;var a=Se("recharts-polygon",n);if(r&&r.length){var s=o.stroke&&"none"!==o.stroke,u=function(e,t,n){var r=oJ(e,n);return"".concat("Z"===r.slice(-1)?r.slice(0,-1):r,"L").concat(oJ(t.reverse(),n).slice(1))}(t,r,i);return l.createElement("g",{className:a},l.createElement("path",eJ({},ND(o,!0),{fill:"Z"===u.slice(-1)?o.fill:"none",stroke:"none",d:u})),s?l.createElement("path",eJ({},ND(o,!0),{fill:"none",d:oJ(t,i)})):null,s?l.createElement("path",eJ({},ND(o,!0),{fill:"none",d:oJ(r,i)})):null)}var c=oJ(t,i);return l.createElement("path",eJ({},ND(o,!0),{fill:"Z"===c.slice(-1)?o.fill:"none",className:a,d:c}))};function sJ(e){return sJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sJ(e)}function lJ(){return lJ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lJ.apply(this,arguments)}function uJ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cJ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uJ(Object(n),!0).forEach((function(t){gJ(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uJ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hJ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,yJ(r.key),r)}}function dJ(e,t,n){return t=fJ(t),function(e,t){if(t&&("object"===sJ(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,pJ()?Reflect.construct(t,n||[],fJ(e).constructor):t.apply(e,n))}function pJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pJ=function(){return!!e})()}function fJ(e){return fJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fJ(e)}function mJ(e,t){return mJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mJ(e,t)}function gJ(e,t,n){return(t=yJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yJ(e){var t=function(e,t){if("object"!=sJ(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=sJ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==sJ(t)?t:String(t)}var vJ=Math.PI/180,bJ=1e-5,xJ=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),dJ(this,t,arguments)}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mJ(e,t)}(t,e),n=t,r=[{key:"getTickLineCoord",value:function(e){var t=this.props,n=t.cx,r=t.cy,i=t.radius,o=t.orientation,a=t.tickSize||8,s=ZH(n,r,i,e.coordinate),l=ZH(n,r,i+("inner"===o?-1:1)*a,e.coordinate);return{x1:s.x,y1:s.y,x2:l.x,y2:l.y}}},{key:"getTickTextAnchor",value:function(e){var t=this.props.orientation,n=Math.cos(-e.coordinate*vJ);return n>bJ?"outer"===t?"start":"end":n<-bJ?"outer"===t?"end":"start":"middle"}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,n=e.cy,r=e.radius,i=e.axisLine,o=e.axisLineType,a=cJ(cJ({},ND(this.props,!1)),{},{fill:"none"},ND(i,!1));if("circle"===o)return l.createElement(aF,lJ({className:"recharts-polar-angle-axis-line"},a,{cx:t,cy:n,r:r}));var s=this.props.ticks.map((function(e){return ZH(t,n,r,e.coordinate)}));return l.createElement(aJ,lJ({className:"recharts-polar-angle-axis-line"},a,{points:s}))}},{key:"renderTicks",value:function(){var e=this,n=this.props,r=n.ticks,i=n.tick,o=n.tickLine,a=n.tickFormatter,s=n.stroke,u=ND(this.props,!1),c=ND(i,!1),h=cJ(cJ({},u),{},{fill:"none"},ND(o,!1)),d=r.map((function(n,r){var d=e.getTickLineCoord(n),p=cJ(cJ(cJ({textAnchor:e.getTickTextAnchor(n)},u),{},{stroke:"none",fill:s},c),{},{index:r,payload:n,x:d.x2,y:d.y2});return l.createElement(eP,lJ({className:Se("recharts-polar-angle-axis-tick",iq(i)),key:"tick-".concat(n.coordinate)},gD(e.props,n,r)),o&&l.createElement("line",lJ({className:"recharts-polar-angle-axis-tick-line"},h,d)),i&&t.renderTickItem(i,p,a?a(n.value,r):n.value))}));return l.createElement(eP,{className:"recharts-polar-angle-axis-ticks"},d)}},{key:"render",value:function(){var e=this.props,t=e.ticks,n=e.radius,r=e.axisLine;return n<=0||!t||!t.length?null:l.createElement(eP,{className:Se("recharts-polar-angle-axis",this.props.className)},r&&this.renderAxisLine(),this.renderTicks())}}],i=[{key:"renderTickItem",value:function(e,t,n){return l.isValidElement(e)?l.cloneElement(e,t):aD()(e)?e(t):l.createElement(tz,lJ({},t,{className:"recharts-polar-angle-axis-tick-value"}),n)}}],r&&hJ(n.prototype,r),i&&hJ(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}(l.PureComponent);gJ(xJ,"displayName","PolarAngleAxis"),gJ(xJ,"axisType","angleAxis"),gJ(xJ,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var wJ=n(2794),kJ=n.n(wJ),SJ=n(9364),EJ=n.n(SJ),IJ=["cx","cy","angle","ticks","axisLine"],TJ=["ticks","tick","angle","tickFormatter","stroke"];function CJ(e){return CJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},CJ(e)}function AJ(){return AJ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AJ.apply(this,arguments)}function _J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function NJ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_J(Object(n),!0).forEach((function(t){FJ(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function OJ(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function RJ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,LJ(r.key),r)}}function $J(e,t,n){return t=PJ(t),function(e,t){if(t&&("object"===CJ(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,DJ()?Reflect.construct(t,n||[],PJ(e).constructor):t.apply(e,n))}function DJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(DJ=function(){return!!e})()}function PJ(e){return PJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},PJ(e)}function MJ(e,t){return MJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},MJ(e,t)}function FJ(e,t,n){return(t=LJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LJ(e){var t=function(e,t){if("object"!=CJ(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=CJ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==CJ(t)?t:String(t)}var jJ,zJ=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),$J(this,t,arguments)}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MJ(e,t)}(t,e),n=t,r=[{key:"getTickValueCoord",value:function(e){var t=e.coordinate,n=this.props,r=n.angle,i=n.cx,o=n.cy;return ZH(i,o,t,r)}},{key:"getTickTextAnchor",value:function(){var e;switch(this.props.orientation){case"left":e="end";break;case"right":e="start";break;default:e="middle"}return e}},{key:"getViewBox",value:function(){var e=this.props,t=e.cx,n=e.cy,r=e.angle,i=e.ticks,o=kJ()(i,(function(e){return e.coordinate||0}));return{cx:t,cy:n,startAngle:r,endAngle:r,innerRadius:EJ()(i,(function(e){return e.coordinate||0})).coordinate||0,outerRadius:o.coordinate||0}}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,n=e.cy,r=e.angle,i=e.ticks,o=e.axisLine,a=OJ(e,IJ),s=i.reduce((function(e,t){return[Math.min(e[0],t.coordinate),Math.max(e[1],t.coordinate)]}),[1/0,-1/0]),u=ZH(t,n,s[0],r),c=ZH(t,n,s[1],r),h=NJ(NJ(NJ({},ND(a,!1)),{},{fill:"none"},ND(o,!1)),{},{x1:u.x,y1:u.y,x2:c.x,y2:c.y});return l.createElement("line",AJ({className:"recharts-polar-radius-axis-line"},h))}},{key:"renderTicks",value:function(){var e=this,n=this.props,r=n.ticks,i=n.tick,o=n.angle,a=n.tickFormatter,s=n.stroke,u=OJ(n,TJ),c=this.getTickTextAnchor(),h=ND(u,!1),d=ND(i,!1),p=r.map((function(n,r){var u=e.getTickValueCoord(n),p=NJ(NJ(NJ(NJ({textAnchor:c,transform:"rotate(".concat(90-o,", ").concat(u.x,", ").concat(u.y,")")},h),{},{stroke:"none",fill:s},d),{},{index:r},u),{},{payload:n});return l.createElement(eP,AJ({className:Se("recharts-polar-radius-axis-tick",iq(i)),key:"tick-".concat(n.coordinate)},gD(e.props,n,r)),t.renderTickItem(i,p,a?a(n.value,r):n.value))}));return l.createElement(eP,{className:"recharts-polar-radius-axis-ticks"},p)}},{key:"render",value:function(){var e=this.props,t=e.ticks,n=e.axisLine,r=e.tick;return t&&t.length?l.createElement(eP,{className:Se("recharts-polar-radius-axis",this.props.className)},n&&this.renderAxisLine(),r&&this.renderTicks(),mq.renderCallByParent(this.props,this.getViewBox())):null}}],i=[{key:"renderTickItem",value:function(e,t,n){return l.isValidElement(e)?l.cloneElement(e,t):aD()(e)?e(t):l.createElement(tz,AJ({},t,{className:"recharts-polar-radius-axis-tick-value"}),n)}}],r&&RJ(n.prototype,r),i&&RJ(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}(l.PureComponent);function BJ(e){return BJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BJ(e)}function UJ(){return UJ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UJ.apply(this,arguments)}function WJ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VJ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WJ(Object(n),!0).forEach((function(t){QJ(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WJ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function GJ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,JJ(r.key),r)}}function HJ(e,t,n){return t=KJ(t),function(e,t){if(t&&("object"===BJ(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return XJ(e)}(e,qJ()?Reflect.construct(t,n||[],KJ(e).constructor):t.apply(e,n))}function qJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qJ=function(){return!!e})()}function KJ(e){return KJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},KJ(e)}function XJ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YJ(e,t){return YJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},YJ(e,t)}function QJ(e,t,n){return(t=JJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JJ(e){var t=function(e,t){if("object"!=BJ(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=BJ(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==BJ(t)?t:String(t)}FJ(zJ,"displayName","PolarRadiusAxis"),FJ(zJ,"axisType","radiusAxis"),FJ(zJ,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});var ZJ=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),QJ(XJ(n=HJ(this,t,[e])),"pieRef",null),QJ(XJ(n),"sectorRefs",[]),QJ(XJ(n),"id",Q$("recharts-pie-")),QJ(XJ(n),"handleAnimationEnd",(function(){var e=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),aD()(e)&&e()})),QJ(XJ(n),"handleAnimationStart",(function(){var e=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),aD()(e)&&e()})),n.state={isAnimationFinished:!e.isAnimationActive,prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId,sectorToFocus:0},n}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YJ(e,t)}(t,e),n=t,r=[{key:"isActiveIndex",value:function(e){var t=this.props.activeIndex;return Array.isArray(t)?-1!==t.indexOf(e):e===t}},{key:"hasActiveIndex",value:function(){var e=this.props.activeIndex;return Array.isArray(e)?0!==e.length:e||0===e}},{key:"renderLabels",value:function(e){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var n=this.props,r=n.label,i=n.labelLine,o=n.dataKey,a=n.valueKey,s=ND(this.props,!1),u=ND(r,!1),c=ND(i,!1),h=r&&r.offsetRadius||20,d=e.map((function(e,n){var d=(e.startAngle+e.endAngle)/2,p=ZH(e.cx,e.cy,e.outerRadius+h,d),f=VJ(VJ(VJ(VJ({},s),e),{},{stroke:"none"},u),{},{index:n,textAnchor:t.getTextAnchor(p.x,e.cx)},p),m=VJ(VJ(VJ(VJ({},s),e),{},{fill:"none",stroke:e.fill},c),{},{index:n,points:[ZH(e.cx,e.cy,e.outerRadius,d),p],key:"line"}),g=o;return iD()(o)&&iD()(a)?g="value":iD()(o)&&(g=a),l.createElement(eP,{key:"label-".concat(e.startAngle,"-").concat(e.endAngle,"-").concat(e.midAngle,"-").concat(n)},i&&t.renderLabelLineItem(i,m),t.renderLabelItem(r,f,rH(e,g)))}));return l.createElement(eP,{className:"recharts-pie-labels"},d)}},{key:"renderSectorsStatically",value:function(e){var t=this,n=this.props,r=n.activeShape,i=n.blendStroke,o=n.inactiveShape;return e.map((function(n,a){if(0===(null===n||void 0===n?void 0:n.startAngle)&&0===(null===n||void 0===n?void 0:n.endAngle)&&1!==e.length)return null;var s=t.isActiveIndex(a),u=o&&t.hasActiveIndex()?o:null,c=s?r:u,h=VJ(VJ({},n),{},{stroke:i?n.fill:n.stroke,tabIndex:-1});return l.createElement(eP,UJ({ref:function(e){e&&!t.sectorRefs.includes(e)&&t.sectorRefs.push(e)},tabIndex:-1,className:"recharts-pie-sector"},gD(t.props,n,a),{key:"sector-".concat(null===n||void 0===n?void 0:n.startAngle,"-").concat(null===n||void 0===n?void 0:n.endAngle,"-").concat(n.midAngle,"-").concat(a)}),l.createElement(fK,UJ({option:c,isActive:s,shapeType:"sector"},h)))}))}},{key:"renderSectorsWithAnimation",value:function(){var e=this,t=this.props,n=t.sectors,r=t.isAnimationActive,i=t.animationBegin,o=t.animationDuration,a=t.animationEasing,s=t.animationId,u=this.state,c=u.prevSectors,h=u.prevIsAnimationActive;return l.createElement(XL,{begin:i,duration:o,isActive:r,easing:a,from:{t:0},to:{t:1},key:"pie-".concat(s,"-").concat(h),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},(function(t){var r=t.t,i=[],o=(n&&n[0]).startAngle;return n.forEach((function(e,t){var n=c&&c[t],a=t>0?W$()(e,"paddingAngle",0):0;if(n){var s=eD(n.endAngle-n.startAngle,e.endAngle-e.startAngle),l=VJ(VJ({},e),{},{startAngle:o+a,endAngle:o+s(r)+a});i.push(l),o=l.endAngle}else{var u=e.endAngle,h=e.startAngle,d=eD(0,u-h)(r),p=VJ(VJ({},e),{},{startAngle:o+a,endAngle:o+d+a});i.push(p),o=p.endAngle}})),l.createElement(eP,null,e.renderSectorsStatically(i))}))}},{key:"attachKeyboardHandlers",value:function(e){var t=this;e.onkeydown=function(e){if(!e.altKey)switch(e.key){case"ArrowLeft":var n=++t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[n].focus(),t.setState({sectorToFocus:n});break;case"ArrowRight":var r=--t.state.sectorToFocus<0?t.sectorRefs.length-1:t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[r].focus(),t.setState({sectorToFocus:r});break;case"Escape":t.sectorRefs[t.state.sectorToFocus].blur(),t.setState({sectorToFocus:0})}}}},{key:"renderSectors",value:function(){var e=this.props,t=e.sectors,n=e.isAnimationActive,r=this.state.prevSectors;return!(n&&t&&t.length)||r&&cG()(r,t)?this.renderSectorsStatically(t):this.renderSectorsWithAnimation()}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var e=this,t=this.props,n=t.hide,r=t.sectors,i=t.className,o=t.label,a=t.cx,s=t.cy,u=t.innerRadius,c=t.outerRadius,h=t.isAnimationActive,d=this.state.isAnimationFinished;if(n||!r||!r.length||!K$(a)||!K$(s)||!K$(u)||!K$(c))return null;var p=Se("recharts-pie",i);return l.createElement(eP,{tabIndex:this.props.rootTabIndex,className:p,ref:function(t){e.pieRef=t}},this.renderSectors(),o&&this.renderLabels(r),mq.renderCallByParent(this.props,null,!1),(!h||d)&&Mq.renderCallByParent(this.props,r,!1))}}],i=[{key:"getDerivedStateFromProps",value:function(e,t){return t.prevIsAnimationActive!==e.isAnimationActive?{prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:[],isAnimationFinished:!0}:e.isAnimationActive&&e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:t.curSectors,isAnimationFinished:!0}:e.sectors!==t.curSectors?{curSectors:e.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(e,t){return e>t?"start":e<t?"end":"middle"}},{key:"renderLabelLineItem",value:function(e,t){if(l.isValidElement(e))return l.cloneElement(e,t);if(aD()(e))return e(t);var n=Se("recharts-pie-label-line","boolean"!==typeof e?e.className:"");return l.createElement(AY,UJ({},t,{type:"linear",className:n}))}},{key:"renderLabelItem",value:function(e,t,n){if(l.isValidElement(e))return l.cloneElement(e,t);var r=n;if(aD()(e)&&(r=e(t),l.isValidElement(r)))return r;var i=Se("recharts-pie-label-text","boolean"===typeof e||aD()(e)?"":e.className);return l.createElement(tz,UJ({},t,{alignmentBaseline:"middle",className:i}),r)}}],r&&GJ(n.prototype,r),i&&GJ(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}(l.PureComponent);jJ=ZJ,QJ(ZJ,"displayName","Pie"),QJ(ZJ,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!AP.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0}),QJ(ZJ,"parseDeltaAngle",(function(e,t){return H$(t-e)*Math.min(Math.abs(t-e),360)})),QJ(ZJ,"getRealPieData",(function(e){var t=e.props,n=t.data,r=t.children,i=ND(e.props,!1),o=ID(r,kq);return n&&n.length?n.map((function(e,t){return VJ(VJ(VJ({payload:e},i),e),o&&o[t]&&o[t].props)})):o&&o.length?o.map((function(e){return VJ(VJ({},i),e.props)})):[]})),QJ(ZJ,"parseCoordinateOfPie",(function(e,t){var n=t.top,r=t.left,i=t.width,o=t.height,a=eq(i,o);return{cx:r+J$(e.props.cx,i,i/2),cy:n+J$(e.props.cy,o,o/2),innerRadius:J$(e.props.innerRadius,a,0),outerRadius:J$(e.props.outerRadius,a,.8*a),maxRadius:e.props.maxRadius||Math.sqrt(i*i+o*o)/2}})),QJ(ZJ,"getComposedData",(function(e){var t=e.item,n=e.offset,r=jJ.getRealPieData(t);if(!r||!r.length)return null;var i=t.props,o=i.cornerRadius,a=i.startAngle,s=i.endAngle,l=i.paddingAngle,u=i.dataKey,c=i.nameKey,h=i.valueKey,d=i.tooltipType,p=Math.abs(t.props.minAngle),f=jJ.parseCoordinateOfPie(t,n),m=jJ.parseDeltaAngle(a,s),g=Math.abs(m),y=u;iD()(u)&&iD()(h)?(nD(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),y="value"):iD()(u)&&(nD(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),y=h);var v,b,x=r.filter((function(e){return 0!==rH(e,y,0)})).length,w=g-x*p-(g>=360?x:x-1)*l,k=r.reduce((function(e,t){var n=rH(t,y,0);return e+(K$(n)?n:0)}),0);k>0&&(v=r.map((function(e,t){var n,r=rH(e,y,0),i=rH(e,c,t),s=(K$(r)?r:0)/k,u=(n=t?b.endAngle+H$(m)*l*(0!==r?1:0):a)+H$(m)*((0!==r?p:0)+s*w),h=(n+u)/2,g=(f.innerRadius+f.outerRadius)/2,v=[{name:i,value:r,payload:e,dataKey:y,type:d}],x=ZH(f.cx,f.cy,g,h);return b=VJ(VJ(VJ({percent:s,cornerRadius:o,name:i,tooltipPayload:v,midAngle:h,middleRadius:g,tooltipPosition:x},e),f),{},{value:rH(e,y),startAngle:n,endAngle:u,payload:e,paddingAngle:H$(m)*l})})));return VJ(VJ({},f),{},{sectors:v,data:r})}));var eZ=SQ({chartName:"PieChart",GraphicalChild:ZJ,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:xJ},{axisType:"radiusAxis",AxisComp:zJ}],formatAxisMap:function(e,t,n,r,i){var o=e.width,a=e.height,s=e.startAngle,l=e.endAngle,u=J$(e.cx,o,o/2),c=J$(e.cy,a,a/2),h=eq(o,a,n),d=J$(e.innerRadius,h,0),p=J$(e.outerRadius,h,.8*h);return Object.keys(t).reduce((function(e,n){var o,a=t[n],h=a.domain,f=a.reversed;if(iD()(a.range))"angleAxis"===r?o=[s,l]:"radiusAxis"===r&&(o=[d,p]),f&&(o=[o[1],o[0]]);else{var m=XH(o=a.range,2);s=m[0],l=m[1]}var g=dH(a,i),y=g.realScaleType,v=g.scale;v.domain(h).range(o),fH(v);var b=yH(v,qH(qH({},a),{},{realScaleType:y})),x=qH(qH(qH({},a),b),{},{range:o,radius:p,realScaleType:y,scale:v,cx:u,cy:c,innerRadius:d,outerRadius:p,startAngle:s,endAngle:l});return qH(qH({},e),{},KH({},n,x))}),{})},defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const tZ=My({name:"report",initialState:{reportData:[],expenseData:[],incomeTotal:0,expenseTotal:0},reducers:{setReport:(e,t)=>{e.reportData=t.payload},setExpenseData:(e,t)=>{e.expenseData=t.payload},setIncomeTotal:(e,t)=>{e.incomeTotal=t.payload},setExpenseTotal:(e,t)=>{e.expenseTotal=t.payload},clearReportData:e=>{e.reportData=[],e.expenseData=[],e.incomeTotal=0,e.expenseTotal=0}}}),{setReport:nZ,setExpenseData:rZ,setIncomeTotal:iZ,setExpenseTotal:oZ,clearReportData:aZ}=tZ.actions,sZ=tZ.reducer,lZ=()=>{const{items:e}=Zm((e=>e.expenses)),t=hg(),{reportData:n,expenseData:r,incomeTotal:i,expenseTotal:o}=Zm((e=>e.report)),[a,s]=(0,l.useState)(!1);return(0,Lr.jsxs)(Al,{style:{padding:"20px",marginTop:"20px"},children:[(0,Lr.jsx)($o,{variant:"h2",textAlign:"center",borderRadius:"20px",sx:{boxShadow:"0px 4px 10px rgba(0, 0, 0, 0.2)"},children:"Financial Report"}),(0,Lr.jsx)(fc,{variant:"contained",color:"primary",onClick:()=>{s(!0);const n=e.reduce(((e,t)=>e+(t.incomeAmount||0)),0),r=e.reduce(((e,t)=>e+(t.expenseAmount||0)),0),i=n-r,o=e.reduce(((e,t)=>(t.expenseType&&(e[t.expenseType]=(e[t.expenseType]||0)+(t.expenseAmount||0)),e)),{}),a=Object.entries(o).map((e=>{let[t,n]=e;return{name:t,value:n}})),l=[{label:"Expense ",value:""},{label:"Total Income",value:`\u20b9${n.toFixed(2)}`},{label:"Total Expenses",value:`\u20b9${r.toFixed(2)}`},{label:"Net Savings",value:`\u20b9${i<0?0:i.toFixed(2)}`},{label:"Net Loss",value:`\u20b9${i>0?0:i.toFixed(2)}`},{label:"Expenses by Category",value:""},...Object.entries(o).map((e=>{let[t,n]=e;return{label:t,value:`\u20b9${n.toFixed(2)}`}})),{label:"Recommendations",value:""},...i<0?[{label:"1. Consider reducing discretionary spending to improve net savings.",value:""},{label:"2. Review recurring expenses and identify potential savings.",value:""}]:[{label:"1. Maintain current spending habits to sustain savings.",value:""},{label:"2. Consider investing surplus income for better financial growth.",value:""}]];t(nZ(l)),t(rZ(a)),t(iZ(n)),t(oZ(r)),s(!1)},style:{marginTop:"10px"},children:"Generate Report"}),a&&(0,Lr.jsx)(co,{position:"fixed",top:"0",left:"0",width:"100%",bgcolor:"rgba(255, 255, 255, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",children:(0,Lr.jsx)(Ic,{style:{marginLeft:"10px"}})}),n.length>0&&(0,Lr.jsxs)(co,{style:{marginTop:"20px"},children:[(0,Lr.jsx)(co,{sx:{borderRadius:1,p:2,bgcolor:"#ede8eb"},children:n.map(((e,t)=>(0,Lr.jsxs)($o,{variant:"body1",style:{marginBottom:"10px",fontWeight:""===e.value?"bold":"normal"},children:[e.label,e.value&&`: ${e.value}`]},t)))}),(0,Lr.jsx)("h2",{children:"Chart Representations"}),(0,Lr.jsxs)(co,{sx:{borderRadius:1,p:2,bgcolor:"#ede8eb"},children:[(0,Lr.jsx)(zD,{width:"100%",height:300,children:(0,Lr.jsxs)(JQ,{data:[{name:"Total Income",value:i},{name:"Total Expenses",value:o}],margin:{top:20,right:30,left:20,bottom:5},children:[(0,Lr.jsx)(XQ,{dataKey:"name",tick:{color:"#000",fontSize:14,fontWeight:"bold",fill:"#4a4a4a"}}),(0,Lr.jsx)(QQ,{tick:{color:"#000",fontSize:14,fontWeight:"bold",fill:"#4a4a4a"}}),(0,Lr.jsx)(WP,{}),(0,Lr.jsx)(HK,{dataKey:"value",fill:"#8884d8"})]})}),(0,Lr.jsx)(zD,{width:"100%",height:300,children:(0,Lr.jsxs)(eZ,{children:[(0,Lr.jsx)(ZJ,{data:r,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",children:r.map(((e,t)=>(0,Lr.jsx)(kq,{fill:`#${Math.floor(16777215*Math.random()).toString(16)}`},`cell-${t}`)))}),(0,Lr.jsx)(WP,{}),(0,Lr.jsx)(iF,{})]})})]})]})]})},uZ=My({name:"aiReport",initialState:{aiReportData:[],aiIncomeTotal:0,aiExpenseTotal:0,hasRisk:null},reducers:{setAiReport:(e,t)=>{e.aiReportData=t.payload},setAiIncomeTotal:(e,t)=>{e.aiIncomeTotal=t.payload},setAiExpenseTotal:(e,t)=>{e.aiExpenseTotal=t.payload},setHasRisk:(e,t)=>{e.hasRisk=t.payload},clearAiReportData:e=>{e.aiReportData=[],e.aiExpenseTotal=0,e.aiIncomeTotal=0,e.hasRisk=null}}}),{setAiReport:cZ,setAiIncomeTotal:hZ,setAiExpenseTotal:dZ,setHasRisk:pZ,clearAiReportData:fZ}=uZ.actions,mZ=uZ.reducer;class gZ{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class yZ{refCount(e){return vZ("refCount")}incRef(e){return vZ("incRef")}timerAvailable(){return!0}time(e){return vZ("time")}read(e){return vZ("read")}readSync(e){return vZ("readSync")}readToGPU(e,t){return vZ("readToGPU")}numDataIds(){return vZ("numDataIds")}disposeData(e,t){return vZ("disposeData")}write(e,t,n){return vZ("write")}move(e,t,n,r,i){return vZ("move")}createTensorFromGPUData(e,t,n){return vZ("createTensorFromGPUData")}memory(){return vZ("memory")}floatPrecision(){return vZ("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return vZ("dispose")}}function vZ(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function bZ(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,kZ(e,t,n)}function xZ(e,t,n){return Math.max(e,Math.min(t,n))}function wZ(e){return e%2===0?e:e+1}function kZ(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function SZ(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function EZ(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";SZ(CZ(e,t),(()=>n+` Shapes ${e} and ${t} must match`))}function IZ(e){SZ(null!=e,(()=>"The input to the tensor constructor must be a non-null value."))}function TZ(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function CZ(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function AZ(e){return e%1===0}function _Z(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function NZ(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function OZ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return new Promise(((i,o)=>{let a=0;const s=()=>{if(e())return void i();a++;const l=t(a);null!=n&&a>=n?o():null!=r?r(s,l):setTimeout(s,l)};s()}))}function RZ(e,t){let n=1,r=-1;for(let o=0;o<e.length;++o)if(e[o]>=0)n*=e[o];else if(-1===e[o]){if(-1!==r)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${o}`);r=o}else if(e[o]<0)throw Error(`Shapes can not be < 0. Found ${e[o]} at dim ${o}`);if(-1===r){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(0===n)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);const i=e.slice();return i[r]=t/n,i}function $Z(e,t){const n=t.length;return SZ((e=null==e?t.map(((e,t)=>t)):[].concat(e)).every((e=>e>=-n&&e<n)),(()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`)),SZ(e.every((e=>AZ(e))),(()=>`All values in axis param must be integers but got axis ${e}`)),e.map((e=>e<0?n+e:e))}function DZ(e,t){const n=[],r=[],i=null!=t&&Array.isArray(t)&&0===t.length,o=null==t||i?null:$Z(t,e).sort();let a=0;for(let s=0;s<e.length;++s){if(null!=o){if(o[a]===s&&1!==e[s])throw new Error(`Can't squeeze axis ${s} since its dim '${e[s]}' is not 1`);(null==o[a]||o[a]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),o[a]<=s&&a++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function PZ(e,t){return MZ(e,t)}function MZ(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error(`Unknown data type ${e}`);n=new Array(t)}return n}function FZ(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function LZ(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error(`Unknown dtype ${e}`)}function jZ(e){return"string"===typeof e||e instanceof String}function zZ(e){return"number"===typeof e}function BZ(e){return Array.isArray(e)?BZ(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":zZ(e)?"float32":jZ(e)?"string":function(e){return"boolean"===typeof e}(e)?"bool":"float32"}function UZ(e){return!!(e&&e.constructor&&e.call&&e.apply)}function WZ(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function VZ(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function GZ(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Array;if(1===t.length){const o=t[0]*(r?2:1);for(let t=0;t<o;t++)i[t]=n[e+t]}else{const o=t[0],a=t.slice(1),s=a.reduce(((e,t)=>e*t))*(r?2:1);for(let t=0;t<o;t++)i[t]=GZ(e+t*s,a,n,r)}return i}function HZ(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];const r=e.reduce(((e,t)=>e*t))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return GZ(0,e,t,n)}function qZ(e,t){const n=KZ(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function KZ(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function XZ(e,t){const n=e.reduce(((e,t)=>e*t),1);if(null==t||"float32"===t)return HZ(e,new Float32Array(n));if("int32"===t)return HZ(e,new Int32Array(n));if("bool"===t)return HZ(e,new Uint8Array(n));throw new Error(`Unknown data type ${t}`)}function YZ(e){e.forEach((t=>{SZ(Number.isInteger(t)&&t>=0,(()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`))}))}function QZ(e,t,n){if(0===t)return 0;if(1===t)return e[0];let r=e[e.length-1];for(let i=0;i<e.length-1;++i)r+=n[i]*e[i];return r}function JZ(e,t,n){if(0===t)return[];if(1===t)return[e];const r=new Array(t);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(e/n[i]),e-=r[i]*n[i];return r[r.length-1]=e,r}function ZZ(e){return e&&e.then&&"function"===typeof e.then}const e0="tfjsflags";class t0{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=n0,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&(r0().getBool("IS_TEST")||r0().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){const t=this.urlFlags[e];r0().getBool("IS_TEST")||r0().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${t}.`),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(ZZ(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if("undefined"===typeof this.global||"undefined"===typeof this.global.location||"undefined"===typeof this.global.location.search)return;const e=this.getQueryParams(this.global.location.search);if(e0 in e){e[e0].split(",").forEach((e=>{const[t,n]=e.split(":");this.urlFlags[t]=function(e,t){const n=t.toLowerCase();return"true"===n||"false"===n?"true"===n:""+ +n===n?+n:t}(0,n)}))}}}function n0(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,r[0],r[1]),r.join("=")})),t}function r0(){return o0}let i0,o0=null;function a0(){if(null==i0){let e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}i0=e}return i0}function s0(e,t){const n=function(){const e=a0();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{const r=t();return n.set(e,r),n.get(e)}}const l0="Abs",u0="Acos",c0="Acosh",h0="Add",d0="AddN",p0="All",f0="Any",m0="ArgMax",g0="ArgMin",y0="Asin",v0="Asinh",b0="Atan",x0="Atanh",w0="Atan2",k0="AvgPool",S0="AvgPoolGrad",E0="AvgPool3D",I0="AvgPool3DGrad",T0="BatchMatMul",C0="BatchToSpaceND",A0="Bincount",_0="BitwiseAnd",N0="BroadcastArgs",O0="Cast",R0="Ceil",$0="ClipByValue",D0="Complex",P0="ComplexAbs",M0="Concat",F0="Conv2D",L0="Conv2DBackpropFilter",j0="Conv2DBackpropInput",z0="Conv3D",B0="Conv3DBackpropFilterV2",U0="Conv3DBackpropInputV2",W0="Cos",V0="Cosh",G0="Cumprod",H0="Cumsum",q0="CropAndResize",K0="DenseBincount",X0="DepthToSpace",Y0="DepthwiseConv2dNative",Q0="DepthwiseConv2dNativeBackpropFilter",J0="DepthwiseConv2dNativeBackpropInput",Z0="Diag",e1="Dilation2D",t1="Dilation2DBackpropInput",n1="Dilation2DBackpropFilter",r1="Draw",i1="RealDiv",o1="Einsum",a1="Elu",s1="EluGrad",l1="Erf",u1="Equal",c1="Exp",h1="ExpandDims",d1="Expm1",p1="FFT",f1="Fill",m1="FlipLeftRight",g1="Floor",y1="FloorDiv",v1="FusedBatchNorm",b1="GatherV2",x1="GatherNd",w1="Greater",k1="GreaterEqual",S1="Identity",E1="IFFT",I1="Imag",T1="IsFinite",C1="IsInf",A1="IsNan",_1="LeakyRelu",N1="Less",O1="LessEqual",R1="LinSpace",$1="Log",D1="Log1p",P1="LogicalAnd",M1="LogicalNot",F1="LogicalOr",L1="LRN",j1="LRNGrad",z1="Max",B1="Maximum",U1="MaxPool",W1="MaxPoolGrad",V1="MaxPool3D",G1="MaxPool3DGrad",H1="MaxPoolWithArgmax",q1="Mean",K1="Min",X1="Minimum",Y1="MirrorPad",Q1="Mod",J1="Multinomial",Z1="Multiply",e2="Neg",t2="NotEqual",n2="NonMaxSuppressionV3",r2="NonMaxSuppressionV4",i2="NonMaxSuppressionV5",o2="OnesLike",a2="OneHot",s2="Pack",l2="PadV2",u2="Pow",c2="Prelu",h2="Prod",d2="RaggedGather",p2="RaggedRange",f2="RaggedTensorToTensor",m2="Range",g2="Real",y2="Reciprocal",v2="Relu",b2="Reshape",x2="ResizeNearestNeighbor",w2="ResizeNearestNeighborGrad",k2="ResizeBilinear",S2="ResizeBilinearGrad",E2="Relu6",I2="Reverse",T2="Round",C2="Rsqrt",A2="ScatterNd",_2="TensorScatterUpdate",N2="SearchSorted",O2="Select",R2="Selu",$2="Slice",D2="Sin",P2="Sinh",M2="Sign",F2="Sigmoid",L2="Softplus",j2="Sqrt",z2="Sum",B2="SpaceToBatchND",U2="SplitV",W2="Softmax",V2="SparseFillEmptyRows",G2="SparseReshape",H2="SparseSegmentMean",q2="SparseSegmentSum",K2="SparseToDense",X2="SquaredDifference",Y2="Square",Q2="StaticRegexReplace",J2="StridedSlice",Z2="StringNGrams",e3="StringSplit",t3="StringToHashBucketFast",n3="Sub",r3="Tan",i3="Tanh",o3="Tile",a3="TopK",s3="Transform",l3="Transpose",u3="Unique",c3="Unpack",h3="UnsortedSegmentSum",d3="ZerosLike",p3="Step",f3="FromPixels",m3="RotateWithOffset",g3="_FusedMatMul",y3="FusedConv2D",v3="FusedDepthwiseConv2D";function b3(){r0().getBool("IS_TEST")||r0().getBool("PROD")||console.warn(...arguments)}function x3(){r0().getBool("IS_TEST")||r0().getBool("PROD")||console.log(...arguments)}const w3=s0("kernelRegistry",(()=>new Map)),k3=s0("gradRegistry",(()=>new Map));function S3(e,t){const n=A3(e,t);return w3.get(n)}function E3(e){return k3.get(e)}function I3(e){const t=w3.entries(),n=[];for(;;){const{done:r,value:i}=t.next();if(r)break;const[o,a]=i,[s]=o.split("_");s===e&&n.push(a)}return n}function T3(e){const{kernelName:t,backendName:n}=e,r=A3(t,n);w3.has(r)&&b3(`The kernel '${t}' for backend '${n}' is already registered`),w3.set(r,e)}function C3(e){const{kernelName:t}=e;k3.has(t)&&r0().getBool("DEBUG")&&b3(`Overriding the gradient for '${t}'`),k3.set(t,e)}function A3(e,t){return`${t}_${e}`}function _3(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var N3=n(7353);const O3=n.n(N3)()||N3;function R3(e){return O3.fromString(e,!0,16)}const $3=R3("c3a5c85c97cb3127"),D3=R3("b492b66fbe98f273"),P3=R3("9ae16a3b2f90404f");function M3(e){return e.xor(e.shru(47))}function F3(e,t,n){const r=e.slice(t,t+n);return O3.fromBytes(Array.from(r),!0,!0)}function L3(e,t){return F3(e,t,8)}function j3(e,t){return F3(e,t,4)}function z3(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function B3(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:R3("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));let i=t.xor(r).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function U3(e,t,n,r){return function(e,t,n,r,i,o){i=i.add(e),o=z3(o.add(i).add(r),21);const a=i;return i=(i=i.add(t)).add(n),o=o.add(z3(i,44)),[i.add(r),o.add(a)]}(L3(e,t),L3(e,t+8),L3(e,t+16),L3(e,t+24),n,r)}function W3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=O3.fromNumber(81,!0);if(t<=32)return t<=16?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){const n=P3.add(2*t),r=L3(e,0).add(P3),i=L3(e,t-8);return B3(z3(i,37).mul(n).add(r),z3(r,25).add(i).mul(n),n)}if(t>=4){const n=P3.add(2*t);return B3(j3(e,0).shl(3).add(t),j3(e,t-4),n)}if(t>0){const n=e[0]+(e[t>>1]<<8),r=t+(e[t-1]<<2);return M3(P3.mul(n).xor($3.mul(r))).mul(P3)}return P3}(e,t):function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=P3.add(2*t),r=L3(e,0).mul(D3),i=L3(e,8),o=L3(e,t-8).mul(n),a=L3(e,t-16).mul(P3);return B3(z3(r.add(i),43).add(z3(o,30)).add(a),r.add(z3(i.add(P3),18)).add(o),n)}(e,t);if(t<=64)return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;const n=P3.add(2*t),r=L3(e,0).mul(P3),i=L3(e,8),o=L3(e,t-8).mul(n),a=L3(e,t-16).mul(P3),s=z3(r.add(i),43).add(z3(o,30)).add(a),l=B3(s,r.add(z3(i.add(P3),18)).add(o),n),u=L3(e,16).mul(n),c=L3(e,24),h=s.add(L3(e,t-32)).mul(n),d=l.add(L3(e,t-24)).mul(n);return B3(z3(u.add(c),43).add(z3(h,30)).add(d),u.add(z3(c.add(r),18)).add(h),n)}(e,t);let r=n,i=n.mul(D3).add(113),o=M3(i.mul(P3).add(113)).mul(P3),a=[O3.UZERO,O3.UZERO],s=[O3.UZERO,O3.UZERO];r=r.mul(P3).add(L3(e,0));let l=0;const u=64*(t-1>>6),c=u+(t-1&63)-63;do{r=z3(r.add(i).add(a[0]).add(L3(e,l+8)),37).mul(D3),i=z3(i.add(a[1]).add(L3(e,l+48)),42).mul(D3),r=r.xor(s[1]),i=i.add(a[0]).add(L3(e,l+40)),o=z3(o.add(s[0]),33).mul(D3),a=U3(e,l,a[1].mul(D3),r.add(s[0])),s=U3(e,l+32,o.add(s[1]),i.add(L3(e,l+16))),[o,r]=[r,o],l+=64}while(l!==u);const h=D3.add(o.and(255).shl(1));return l=c,s[0]=s[0].add(t-1&63),a[0]=a[0].add(s[0]),s[0]=s[0].add(a[0]),r=z3(r.add(i).add(a[0]).add(L3(e,l+8)),37).mul(h),i=z3(i.add(a[1]).add(L3(e,l+48)),42).mul(h),r=r.xor(s[1].mul(9)),i=i.add(a[0].mul(9).add(L3(e,l+40))),o=z3(o.add(s[0]),33).mul(h),a=U3(e,l,a[1].mul(h),r.add(s[0])),s=U3(e,l+32,o.add(s[1]),i.add(L3(e,l+16))),[o,r]=[r,o],B3(B3(a[0],s[0],h).add(M3(i).mul($3)).add(o),B3(a[1],s[1],h).add(r),h)}function V3(e,t){return"string"===t?q3(e):G3([e],t)}function G3(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Y3(e)),r0().getBool("DEBUG")&&function(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){const t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error(`Unknown data type ${t}`)}function H3(){return r0().platform.now()}function q3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",r0().platform.encode(e,t)}function K3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",r0().platform.decode(e,t)}function X3(e){return null!=r0().platform.isTypedArray?r0().platform.isTypedArray(e):_3(e)}function Y3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),"boolean"===typeof e||"number"===typeof e||"string"===typeof e||ZZ(e)||null==e||X3(e)&&n)t.push(e);else if(Array.isArray(e)||X3(e))for(let r=0;r<e.length;++r)Y3(e[r],t,n);else{let r=-1;for(const t of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(t)&&(r=Math.max(r,Number(t)));for(let i=0;i<=r;i++)Y3(e[i],t,n)}return t}class Q3{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new Z3)}profileKernel(e,t,n){let r;const i=()=>{r=n()};let o;const a=H3();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(i);else{i();for(const e of r)e.dataSync();o=Promise.resolve({kernelMs:H3()-a})}if(r0().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let s=0;s<r.length;s++){const t=r[s];t.data().then((n=>{J3(n,t.dtype,e)}))}return{kernelName:e,outputs:r,inputs:t,timeMs:o.then((e=>e.kernelMs)),extraInfo:o.then((e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""))}}logKernelProfile(e){const{kernelName:t,outputs:n,timeMs:r,inputs:i,extraInfo:o}=e;n.forEach((e=>{Promise.all([e.data(),r,o]).then((n=>{this.logger.logKernelProfile(t,e,n[0],n[1],i,n[2])}))}))}}function J3(e,t,n){if("float32"!==t)return!1;for(let r=0;r<e.length;r++){const t=e[r];if(isNaN(t)||!isFinite(t))return console.warn(`Found ${t} in the result of '${n}'`),!0}return!1}class Z3{logKernelProfile(e,t,n,r,i,o){const a="number"===typeof r?NZ(`${r}ms`,9):r.error,s=NZ(e,25),l=t.rank,u=t.size,c=NZ(t.shape.toString(),14);let h="";for(const d in i){const e=i[d];if(null!=e){const n=e.shape||t.shape,r=n.length;h+=`${d}: ${r}D ${r>0?n:""} `}}console.log(`%c${s}\t%c${a}\t%c${l}D ${c}\t%c${u}\t%c${h}\t%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}function e4(e,t,n,r){const i=VZ(t),o=function(e,t,n,r){const i=TZ(t),o=r[r.length-1],a=new Array(o).fill(0),s=t.length,l="complex64"===n?i4(e):e;if(s>1)for(let u=0;u<i/o;u++){const e=u*o;for(let t=0;t<o;t++)a[t]=Math.max(a[t],t4(l[e+t],0,n).length)}return a}(e,t,n,i),a=t.length,s=r4(e,t,n,i,o),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${a}`),l.push(`  shape: [${t}]`),l.push("  values:")),l.push(s.map((e=>"    "+e)).join("\n")),l.join("\n")}function t4(e,t,n){let r;return r=Array.isArray(e)?`${parseFloat(e[0].toFixed(7))} + ${parseFloat(e[1].toFixed(7))}j`:jZ(e)?`'${e}'`:"bool"===n?n4(e):parseFloat(e.toFixed(7)).toString(),NZ(r,t)}function n4(e){return 0===e?"false":"true"}function r4(e,t,n,r,i){let o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const a="complex64"===n?2:1,s=t[0],l=t.length;if(0===l){if("complex64"===n){return[t4(i4(e)[0],0,n)]}return"bool"===n?[n4(e[0])]:[e[0].toString()]}if(1===l){if(s>20){const t=3*a;let r=Array.from(e.slice(0,t)),o=Array.from(e.slice((s-3)*a,s*a));return"complex64"===n&&(r=i4(r),o=i4(o)),["["+r.map(((e,t)=>t4(e,i[t],n))).join(", ")+", ..., "+o.map(((e,t)=>t4(e,i[s-3+t],n))).join(", ")+"]"]}return["["+("complex64"===n?i4(e):Array.from(e)).map(((e,t)=>t4(e,i[t],n))).join(", ")+"]"]}const u=t.slice(1),c=r.slice(1),h=r[0]*a,d=[];if(s>20){for(let t=0;t<3;t++){const r=t*h,o=r+h;d.push(...r4(e.slice(r,o),u,n,c,i,!1))}d.push("...");for(let t=s-3;t<s;t++){const r=t*h,o=r+h;d.push(...r4(e.slice(r,o),u,n,c,i,t===s-1))}}else for(let m=0;m<s;m++){const t=m*h,r=t+h;d.push(...r4(e.slice(t,r),u,n,c,i,m===s-1))}const p=2===l?",":"";d[0]="["+(s>0?d[0]+p:"");for(let m=1;m<d.length-1;m++)d[m]=" "+d[m]+p;let f=",\n";for(let m=2;m<l;m++)f+="\n";return d[d.length-1]=" "+d[d.length-1]+"]"+(o?"":f),d}function i4(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}class o4{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=TZ(e),null!=n){const e=n.length;SZ(e===this.size,(()=>`Length of values '${e}' does not match the size inferred by the shape '${this.size}'.`))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||MZ(t,this.size),this.strides=VZ(e)}set(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),SZ(n.length===this.rank,(()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`));const i=this.locToIndex(n);this.values[i]=e}get(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);let r=0;for(const o of t){if(o<0||o>=this.shape[r]){const e=`Requested out of range element at ${t}.   Buffer shape=${this.shape}`;throw new Error(e)}r++}let i=t[t.length-1];for(let o=0;o<t.length-1;++o)i+=this.strides[o]*t[o];return this.values[i]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return a4().makeTensor(this.values,this.shape,this.dtype)}}let a4=null,s4=null,l4=null;class u4{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=TZ(e),this.strides=VZ(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return s4.buffer(this.shape,this.dtype,e)}bufferSync(){return s4.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return HZ(this.shape,e,"complex64"===this.dtype)}arraySync(){return HZ(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const e=a4().read(this.dataId);if("string"===this.dtype){const n=await e;try{return n.map((e=>K3(e)))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),a4().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=a4().readSync(this.dataId);if("string"===this.dtype)try{return e.map((e=>K3(e)))}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await a4().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),a4().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return s4.print(this,e)}clone(){return this.throwIfDisposed(),s4.clone(this)}toString(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e4(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),s4.cast(this,e)}variable(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),a4().makeVariable(this,e,t,n)}}function c4(){return s0("Tensor",(()=>u4))}Object.defineProperty(u4,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),c4();class h4 extends u4{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!CZ(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);a4().disposeTensor(this),this.dataId=e.dataId,a4().incRef(this,null)}dispose(){a4().disposeVariable(this),this.isDisposedInternal=!0}}var d4,p4,f4,m4,g4;Object.defineProperty(h4,Symbol.hasInstance,{value:e=>e instanceof u4&&null!=e.assign&&e.assign instanceof Function}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(d4||(d4={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(p4||(p4={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(f4||(f4={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(m4||(m4={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(g4||(g4={}));const y4={float32:m4,int32:p4,bool:f4,complex64:g4};function v4(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return y4[e][t]}function b4(e){return v4(e,"int32")}function x4(e){return null!=e&&"object"===typeof e&&"texture"in e&&e.texture instanceof WebGLTexture}function w4(e){return"undefined"!==typeof GPUBuffer&&null!=e&&"object"===typeof e&&"buffer"in e&&e.buffer instanceof GPUBuffer}function k4(e,t){if(e.dtype===t.dtype)return[e,t];const n=v4(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function S4(e,t){return t.some((t=>t.id===e.id))}function E4(e){const t=[];return I4(e,t,new Set),t}function I4(e,t,n){if(null==e)return;if(e instanceof u4)return void t.push(e);if(r=e,!Array.isArray(r)&&"object"!==typeof r)return;var r;const i=e;for(const o in i){const e=i[o];n.has(e)||(n.add(e),I4(e,t,n))}}function T4(e){return null!=e.kernelName}class C4{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((e=>e.name))))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class A4{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new C4}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then((()=>{}));if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(b3(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Q3(this.backendInstance),!0}setupRegisteredKernels(){I3(this.backendName).forEach((e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)}))}disposeRegisteredKernels(e){I3(e).forEach((t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])}))}initializeBackend(e){const t=this.registryFactory[e];if(null==t)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const n=t.factory();if(!n||n instanceof yZ||"function"!==typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{const t=++this.pendingBackendInitId,r=n.then((n=>!(t<this.pendingBackendInitId)&&(this.registry[e]=n,this.pendingBackendInit=null,!0))).catch((n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,b3(`Initialization of backend ${e} failed`),b3(n.stack||n.message)),!1)));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(n){return b3(`Initialization of backend ${e} failed`),b3(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority))}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],{success:r,asyncInit:i}=this.initializeBackend(n);if(i||r)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const n=this.state.tensorInfo.get(t),r=n.backend,i=this.readSync(t),o=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,i,n.shape,n.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,r=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}return this.scopedRun((()=>this.startScope(r)),(()=>this.endScope(n)),(()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n)))}scopedRun(e,t,n){e();try{const e=n();return t(),e}catch(r){throw t(),r}}nextTensorId(){return A4.nextTensorId++}nextVariableId(){return A4.nextVariableId++}clone(e){const t=N4.runKernel(S1,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(e=>({x:()=>{const t={x:e},n={dtype:"float32"};return N4.runKernel(O0,t,n)}})),[],{}),t}runKernel(e,t,n){null==this.backendName&&this.backend;if(!(null!=S3(e,this.backendName)))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){const r=this.backend.numDataIds();let i=0;n.forEach((e=>{i+="complex64"===e.dtype?3:1}));const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=r-t-i-o;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let t,n=[];const r=this.isTapeOn(),i=this.state.numBytes,o=this.state.numTensors;let a,s;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const l=T4(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(T4(e)){const{kernelName:t,inputs:i,attrs:o}=e;null==this.backendName&&this.backend;const l=S3(t,this.backendName);SZ(null!=l,(()=>`Cannot find registered kernel '${t}' for backend '${this.backendName}'`)),a=()=>{const e=this.backend.numDataIds();s=l.kernelFunc({inputs:i,attrs:o,backend:this.backend});const a=Array.isArray(s)?s:[s];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,a);const u=a.map((e=>null!=e.rank?e:this.makeTensorFromTensorInfo(e)));if(r){const e=this.getTensorsForGradient(t,i,u);n=this.saveTensorsForBackwardMode(e)}return u}}else{const{forwardFunc:t}=e,i=e=>{r&&(n=e.map((e=>this.keep(this.clone(e)))))};a=()=>{const e=this.backend.numDataIds();s=this.tidy((()=>t(this.backend,i)));const n=Array.isArray(s)?s:[s];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,e,n),n}}const{inputs:u,attrs:c}=e,h=T4(e)?null:e.backwardsFunc;let d;return this.scopedRun((()=>this.state.kernelDepth++),(()=>this.state.kernelDepth--),(()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(d=this.profiler.profileKernel(l,u,(()=>a())),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(d),t=d.outputs):t=a()})),r&&this.addTapeNode(l,u,t,h,n,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map((e=>null!=u[e]?u[e].shape:null)),outputShapes:t.map((e=>e.shape)),kernelTimeMs:d.timeMs,extraInfo:d.extraInfo}),Array.isArray(s)?t:t[0]}saveTensorsForBackwardMode(e){return e.map((e=>this.keep(this.clone(e))))}getTensorsForGradient(e,t,n){const r=E3(e);if(null!=r){const e=r.inputsToSave||[],i=r.outputsToSave||[];let o;r.saveAllInputs?(SZ(Array.isArray(t),(()=>"saveAllInputs is true, expected inputs to be an array.")),o=Object.keys(t).map((e=>t[e]))):o=e.map((e=>t[e]));const a=n.filter(((e,t)=>i[t]));return o.concat(a)}return[]}makeTensor(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let i=e;"string"===n&&jZ(e[0])&&(i=e.map((e=>q3(e))));const o=r.write(i,t,n),a=new u4(t,n,o,this.nextTensorId());if(this.trackTensor(a,r),"string"===n){const e=this.state.tensorInfo.get(o),t=function(e){if(null==e)return 0;let t=0;return e.forEach((e=>t+=e.length)),t}(i);this.state.numBytes+=t-e.bytes,e.bytes=t}return a}makeTensorFromDataId(e,t,n,r){const i={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(i,r)}makeTensorFromTensorInfo(e,t){const{dataId:n,shape:r,dtype:i}=e,o=new u4(r,i,n,this.nextTensorId());return this.trackTensor(o,t),o}makeVariable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));const i=new h4(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[i.name])throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*LZ(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof h4||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*LZ(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map((e=>e.totalBytesSnapshot))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,r,i,o){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:i},s=E3(e);null!=s&&(r=s.gradFunc),null!=r&&(a.gradient=e=>(e=e.map(((e,t)=>{if(null==e){const e=n[t],r=KZ(e.size,e.dtype);return this.makeTensor(r,e.shape,e.dtype)}return e})),r(e.length>1?e:e[0],i,o))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=E4(e),n=new Set(t.map((e=>e.id)));for(let i=0;i<this.state.activeScope.track.length;i++){const e=this.state.activeScope.track[i];e.kept||n.has(e.id)||e.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach((e=>{e.kept||e.scopeId!==r.id||this.track(e)}))}gradients(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(SZ(t.length>0,(()=>"gradients() received an empty list of xs.")),null!=n&&"float32"!==n.dtype)throw new Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);const i=this.scopedRun((()=>this.startTape()),(()=>this.endTape()),(()=>this.tidy("forward",e)));SZ(i instanceof u4,(()=>"The result y returned by f() must be a tensor."));const o=function(e,t,n){const r={},i={};for(let l=0;l<t.length;l++)r[t[l].id]=!0;for(let l=0;l<e.length;l++){const n=e[l],o=n.inputs;for(const e in o){const a=o[e];let s=!1;for(let e=0;e<t.length;e++)if(r[a.id]){n.outputs.forEach((e=>r[e.id]=!0)),s=!0,i[n.id]=!0;break}if(s)break}}const o={};o[n.id]=!0;const a={};for(let l=e.length-1;l>=0;l--){const t=e[l],n=t.inputs;for(let e=0;e<t.outputs.length;e++)if(o[t.outputs[e].id]){for(const e in n)o[n[e].id]=!0,a[t.id]=!0;break}}const s=[];for(let l=0;l<e.length;l++){const t=e[l];if(i[t.id]&&a[t.id]){const e={};for(const i in t.inputs){const n=t.inputs[i];r[n.id]&&(e[i]=n)}const n=Object.assign({},t);n.inputs=e,n.outputs=t.outputs,s.push(n)}}return s}(this.state.activeTape,t,i);if(!r&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(()=>{const e={};e[i.id]=null==n?function(e){const t=qZ(TZ(e),"float32");return N4.makeTensor(t,e,"float32")}(i.shape):n,function(e,t,n,r){for(let i=t.length-1;i>=0;i--){const o=t[i],a=[];if(o.outputs.forEach((t=>{const n=e[t.id];null!=n?a.push(n):a.push(null)})),null==o.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${o.kernelName}.`);const s=o.gradient(a);for(const t in o.inputs){if(!(t in s))throw new Error(`Cannot backprop through input ${t}. Available gradients found: ${Object.keys(s)}.`);const i=n((()=>s[t]()));if("float32"!==i.dtype)throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input ${t} must have 'float32' dtype, but has '${i.dtype}'`);const a=o.inputs[t];if(!CZ(i.shape,a.shape))throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input '${t}' has shape '${i.shape}', which does not match the shape of the input '${a.shape}'`);if(null==e[a.id])e[a.id]=i;else{const t=e[a.id];e[a.id]=r(t,i),t.dispose()}}}}(e,o,(e=>this.tidy(e)),O4);const r=t.map((t=>e[t.id]));return 0===this.state.gradientDepth&&(this.state.activeTape.forEach((e=>{for(const t of e.saved)t.dispose()})),this.state.activeTape=null),{value:i,grads:r}}))}customGrad(e){var t=this;return SZ(UZ(e),(()=>"The f passed in customGrad(f) must be a function.")),function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];let o;SZ(r.every((e=>e instanceof u4)),(()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors"));const a={};r.forEach(((e,t)=>{a[t]=e}));return t.runKernelFunc({forwardFunc:(t,n)=>(o=e(...r,n),SZ(o.value instanceof u4,(()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor")),SZ(UZ(o.gradFunc),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function.")),o.value),backwardsFunc:(e,t)=>{const n=o.gradFunc(e,t),i=Array.isArray(n)?n:[n];SZ(i.length===r.length,(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...).")),SZ(i.every((e=>e instanceof u4)),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."));const a={};return i.forEach(((e,t)=>{a[t]=()=>e})),a},inputs:a})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=H3(),n=await this.backend.time(e);return n.wallMs=H3()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new C4;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function _4(){const e=a0();if(null==e._tfengine){const t=new t0(e);e._tfengine=new A4(t)}var t;return t=e._tfengine.ENV,o0=t,function(e){a4=e}((()=>e._tfengine)),e._tfengine}A4.nextTensorId=0,A4.nextVariableId=0;const N4=_4();function O4(e,t){const n={a:e,b:t};return N4.runKernel(h0,n)}let R4;function $4(e){if(void 0!==R4)return R4;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;const t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){const t=e;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function D4(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}const P4=r0();function M4(e,t){let n=e;if(X3(e))return"string"===t?[]:[e.length];if(x4(e)){const t=e.channels||"RGBA";return[e.height,e.width*t.length]}if(w4(e))return[e.buffer.size/(null==t?4:LZ(t))];if(!Array.isArray(e))return[];const r=[];for(;Array.isArray(n)||X3(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&r0().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&F4(e,r,[]),r}function F4(e,t,n){if(n=n||[],!Array.isArray(e)&&!X3(e))return void SZ(0===t.length,(()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`));SZ(t.length>0,(()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`)),SZ(e.length===t[0],(()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`));const r=t.slice(1);for(let i=0;i<e.length;++i)F4(e[i],r,n.concat(i))}function L4(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error(`Argument '${n}' passed to '${r}' must be ${e} tensor, but got ${t} tensor`)}}function j4(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof c4())return L4(r,e.dtype,t,n),e;let i=BZ(e);if("string"!==i&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),L4(r,i,t,n),null==e||!X3(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){const r=null==e?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${r}'`)}const o=M4(e,i);X3(e)||Array.isArray(e)||(e=[e]);const a="string"!==i?G3(e,i):Y3(e,[],!0);return N4.makeTensor(a,o,i)}function z4(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map(((e,i)=>j4(e,`${t}[${i}]`,n,r)))}P4.registerFlag("DEBUG",(()=>!1),(e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),P4.registerFlag("IS_BROWSER",(()=>D4())),P4.registerFlag("IS_NODE",(()=>"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node)),P4.registerFlag("IS_CHROME",(()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor))),P4.registerFlag("IS_SAFARI",(()=>"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor))),P4.registerFlag("PROD",(()=>!1)),P4.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(()=>P4.getBool("DEBUG"))),P4.registerFlag("DEPRECATION_WARNINGS_ENABLED",(()=>!0)),P4.registerFlag("IS_TEST",(()=>!1)),P4.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(()=>P4.getBool("DEBUG"))),P4.registerFlag("WRAP_TO_IMAGEBITMAP",(()=>!1)),P4.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",(()=>!1)),P4.registerFlag("USE_SETTIMEOUTCUSTOM",(()=>!1));function B4(e){const t=Object.keys(e);if(1!==t.length)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0];const r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+="__op";const i=function(){N4.startScope(n);try{const e=r(...arguments);return ZZ(e)&&console.error("Cannot return a Promise inside of tidy."),N4.endScope(e),e}catch(e){throw N4.endScope(null),e}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}const U4=B4({complex_:function(e,t){const n=j4(e,"real","complex"),r=j4(t,"imag","complex");EZ(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const i={real:n,imag:r};return N4.runKernel(D0,i)}});function W4(e,t,n,r){if(null==r)r=BZ(e);else if("complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(w4(e)||x4(e)){if("float32"!==r&&"int32"!==r)throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return N4.backend.createTensorFromGPUData(e,t||n,r)}if(!X3(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){YZ(t);const e=TZ(t),r=TZ(n);SZ(e===r,(()=>`Based on the provided shape, [${t}], the tensor should have ${e} values but has ${r}`));for(let i=0;i<n.length;++i){const e=n[i],r=i!==n.length-1||e!==TZ(t.slice(i));SZ(n[i]===t[i]||!r,(()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `))}}return X3(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?G3(e,r):Y3(e,[],!0),N4.makeTensor(e,t,r)}function V4(e,t,n){return W4(e,t,M4(e,n),n)}class G4{static join(e){return new G4(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,null==e)return;if(e instanceof Array||(e=[e]),0===(e=e.map((e=>X3(e)?e.buffer:e))).length)return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let n=0;n<e.length;n++){const r=e[n];n!==e.length-1&&r.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const i=t+r.byteLength;this.shards.push({buffer:r,start:t,end:i}),t=i}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength;if(0===this.shards.length)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),t=Math.min(this.byteLength,t),t<=e)return new ArrayBuffer(0);const n=this.findShardForByte(e);if(-1===n)throw new Error(`Could not find start shard for byte ${e}`);const r=new ArrayBuffer(t-e),i=new Uint8Array(r);let o=0;for(let a=n;a<this.shards.length;a++){const n=this.shards[a],r=e+o-n.start,s=o,l=Math.min(t,n.end)-n.start,u=new Uint8Array(n.buffer,r,l-r);if(i.set(u,s),o+=u.length,t<n.end)break}return r}findShardForByte(e){if(0===this.shards.length||e<0||e>=this.byteLength)return-1;if(null!=this.bufferUniformSize)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(t){return e<t.start?-1:e>=t.end?1:0}if(0===t(this.shards[this.previousShardIndex]))return this.previousShardIndex;const n=function(e,t){let n=0,r=e.length;for(;n<=r;){const i=Math.floor((r-n)/2)+n,o=t(e[i]);if(0===o)return i;o<0?r=i:n=i+1}return-1}(this.shards,t);return-1===n?-1:(this.previousShardIndex=n,this.previousShardIndex)}}function H4(){return N4}function q4(){return N4.memory()}function K4(e,t){return N4.tidy(e,t)}function X4(e){E4(e).forEach((e=>e.dispose()))}function Y4(e){return N4.keep(e)}function Q4(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return N4.registerBackend(e,t,n)}function J4(){return N4.backend}!function(e){l4=e}((function(e){r0().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}));async function Z4(e,t){const n=[],r=[],i=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);for(let o=0;o<i.length;++o){const a=i[o],s=Array.isArray(e)?e[o].tensor:e[a];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error(`Unsupported dtype in weight '${a}': ${s.dtype}`);const l={name:a,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){const e=new Promise((async e=>{const t=await s.bytes(),n=t.reduce(((e,t)=>e+t.length),0)+4*t.length,r=new Uint8Array(n);let i=0;for(let o=0;o<t.length;o++){const e=t[o],n=new Uint8Array(new Uint32Array([e.length]).buffer);r.set(n,i),i+=4,r.set(e,i),i+=e.length}e(r)}));r.push(e)}else r.push(s.data());null!=t&&(l.group=t),n.push(l)}return{data:e5(await Promise.all(r)),specs:n}}function e5(e){if(null===e)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach((e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${e.constructor.name}`)}));const r=new Uint8Array(t);let i=0;return n.forEach((e=>{r.set(new Uint8Array(e.buffer),i),i+=e.byteLength})),r.buffer}const t5="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function n5(e){return t5?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function r5(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}async function i5(e,t){let n,r;return null!=e.weightsManifest&&([n,r]=await t(e.weightsManifest)),function(e,t,n){const r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(r.initializerSignature=e.initializerSignature),r}(e,n,r)}function o5(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:n5(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:n5(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:new G4(e.weightData).byteLength}}function a5(e){const t=[];for(const n of e)t.push(...n.weights);return t}class s5{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==s5.instance&&(s5.instance=new s5),s5.instance}static registerSaveRouter(e){s5.getInstance().saveRouters.push(e)}static registerLoadRouter(e){s5.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return s5.getHandlers(e,"save")}static getLoadHandlers(e,t){return s5.getHandlers(e,"load",t)}static getHandlers(e,t,n){const r=[];return("load"===t?s5.getInstance().loadRouters:s5.getInstance().saveRouters).forEach((t=>{const i=t(e,n);null!==i&&r.push(i)})),r}}const l5="tensorflowjs",u5="models_store",c5="model_info_store";function h5(){if(!r0().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function d5(e){const t=e.result;t.createObjectStore(u5,{keyPath:"modelPath"}),t.createObjectStore(c5,{keyPath:"modelPath"})}class p5{constructor(e){if(this.indexedDB=h5(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise(((e,n)=>{const r=this.indexedDB.open(l5,1);r.onupgradeneeded=()=>d5(r),r.onsuccess=()=>{const i=r.result;if(null==t){const t=i.transaction(u5,"readonly"),r=t.objectStore(u5).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return i.close(),n(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));e(r.result.modelArtifacts)},r.onerror=e=>(i.close(),n(r.error)),t.oncomplete=()=>i.close()}else{t.weightData=G4.join(t.weightData);const r=o5(t),a=i.transaction(c5,"readwrite");let s,l,u=a.objectStore(c5);try{s=u.put({modelPath:this.modelPath,modelArtifactsInfo:r})}catch(o){return n(o)}s.onsuccess=()=>{l=i.transaction(u5,"readwrite");const s=l.objectStore(u5);let c;try{c=s.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:r})}catch(o){return n(o)}c.onsuccess=()=>e({modelArtifactsInfo:r}),c.onerror=e=>{u=a.objectStore(c5);const t=u.delete(this.modelPath);t.onsuccess=()=>(i.close(),n(c.error)),t.onerror=e=>(i.close(),n(c.error))}},s.onerror=e=>(i.close(),n(s.error)),a.oncomplete=()=>{null==l?i.close():l.oncomplete=()=>i.close()}}},r.onerror=e=>n(r.error)}))}}p5.URL_SCHEME="indexeddb://";const f5=e=>{return r0().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(p5.URL_SCHEME)?(t=e.slice(p5.URL_SCHEME.length),new p5(t)):null;var t};s5.registerSaveRouter(f5),s5.registerLoadRouter(f5);class m5{constructor(){this.indexedDB=h5()}async listModels(){return new Promise(((e,t)=>{const n=this.indexedDB.open(l5,1);n.onupgradeneeded=()=>d5(n),n.onsuccess=()=>{const r=n.result,i=r.transaction(c5,"readonly"),o=i.objectStore(c5).getAll();o.onsuccess=()=>{const t={};for(const e of o.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},o.onerror=e=>(r.close(),t(o.error)),i.oncomplete=()=>r.close()},n.onerror=e=>t(n.error)}))}async removeModel(e){var t;return e=(t=e).startsWith(p5.URL_SCHEME)?t.slice(p5.URL_SCHEME.length):t,new Promise(((t,n)=>{const r=this.indexedDB.open(l5,1);r.onupgradeneeded=()=>d5(r),r.onsuccess=()=>{const i=r.result,o=i.transaction(c5,"readwrite"),a=o.objectStore(c5),s=a.get(e);let l;s.onsuccess=()=>{if(null==s.result)return i.close(),n(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const r=a.delete(e),o=()=>{l=i.transaction(u5,"readwrite");const r=l.objectStore(u5).delete(e);r.onsuccess=()=>t(s.result.modelArtifactsInfo),r.onerror=e=>n(s.error)};r.onsuccess=o,r.onerror=e=>(o(),i.close(),n(s.error))}},s.onerror=e=>(i.close(),n(s.error)),o.oncomplete=()=>{null==l?i.close():l.oncomplete=()=>i.close()}},r.onerror=e=>n(r.error)}))}}const g5="/",y5="tensorflowjs_models",v5="info",b5="model_topology",x5="weight_specs",w5="weight_data",k5="model_metadata";function S5(e){return{info:[y5,e,v5].join(g5),topology:[y5,e,b5].join(g5),weightSpecs:[y5,e,x5].join(g5),weightData:[y5,e,w5].join(g5),modelMetadata:[y5,e,k5].join(g5)}}function E5(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function I5(e){const t=e.split(g5);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(g5)}class T5{constructor(e){if(!r0().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=S5(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=o5(e),o=G4.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(e){if(t5)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let r=0,i=t.length;r<i;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(o));const t={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,initializerSignature:null!=e.initializerSignature?e.initializerSignature:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(t)),{modelArtifactsInfo:i}}catch(t){throw E5(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=r;const i=this.LS.getItem(this.keys.modelMetadata);if(null!=i){const e=JSON.parse(i);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(t.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(null==o)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=function(e){if(t5){const t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n.set([t.charCodeAt(r)],r);return n.buffer}(o),t}}T5.URL_SCHEME="localstorage://";const C5=e=>{return r0().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(T5.URL_SCHEME)?(t=e.slice(T5.URL_SCHEME.length),new T5(t)):null;var t};s5.registerSaveRouter(C5),s5.registerLoadRouter(C5);class A5{constructor(){SZ(r0().getBool("IS_BROWSER"),(()=>"Current environment is not a web browser")),SZ("undefined"===typeof window||"undefined"!==typeof window.localStorage,(()=>"Current browser does not appear to support localStorage")),this.LS=window.localStorage}async listModels(){const e={},t=y5+g5,n=g5+v5;for(let r=0;r<this.LS.length;++r){const i=this.LS.key(r);if(i.startsWith(t)&&i.endsWith(n)){e[I5(i)]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){var t;const n=S5(e=(t=e).startsWith(T5.URL_SCHEME)?t.slice(T5.URL_SCHEME.length):t);if(null==this.LS.getItem(n.info))throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return E5(n),r}}const _5="://";class N5{constructor(){this.managers={}}static getInstance(){return null==N5.instance&&(N5.instance=new N5),N5.instance}static registerManager(e,t){SZ(null!=e,(()=>"scheme must not be undefined or null.")),e.endsWith(_5)&&(e=e.slice(0,e.indexOf(_5))),SZ(e.length>0,(()=>"scheme must not be an empty string."));const n=N5.getInstance();SZ(null==n.managers[e],(()=>`A model store manager is already registered for scheme '${e}'.`)),n.managers[e]=t}static getManager(e){const t=N5.getInstance().managers[e];if(null==t)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(N5.getInstance().managers)}}class O5{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Browser's encoder only supports utf-8, but got ${t}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){"undefined"!==typeof window&&r0().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout((()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")}),t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",(e=>{if(e.source===window&&e.data.name===this.messageName){e.stopPropagation();(0,this.functionRefs[e.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}}),!0))):setTimeout(e,t)}isTypedArray(e){return _3(e)}}if(r0().get("IS_BROWSER")){r0().setPlatform("browser",new O5);try{N5.registerManager(T5.URL_SCHEME,new A5)}catch(hNe){}try{N5.registerManager(p5.URL_SCHEME,new m5)}catch(hNe){}}const R5=()=>n(5817);let $5;class D5{constructor(){this.util=n(8590),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=r0().global.fetch?r0().global.fetch(e,t):(null==$5&&($5=R5()),$5(e,t))}now(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}function P5(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",YZ(e),new o4(e,t,n)}r0().get("IS_NODE")&&!r0().get("IS_BROWSER")&&r0().setPlatform("node",new D5);const M5=B4({cast_:function(e,t){const n=j4(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const r={x:n},i={dtype:t};return N4.runKernel(O0,r,i)}});const F5=B4({clone_:function(e){const t={x:j4(e,"x","clone","string_or_numeric")};return N4.runKernel(S1,t)}});_4();const L5={buffer:P5,cast:M5,clone:F5,print:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}};s4=L5;const j5=B4({add_:function(e,t){let n=j4(e,"a","add"),r=j4(t,"b","add");[n,r]=k4(n,r);const i={a:n,b:r};return N4.runKernel(h0,i)}});const z5=B4({floorDiv_:function(e,t){let n=j4(e,"a","floorDiv"),r=j4(t,"b","floorDiv");[n,r]=k4(n,r);const i={a:n,b:r};return N4.runKernel(y1,i)}});const B5=B4({div_:function(e,t){let n=j4(e,"a","div"),r=j4(t,"b","div");if([n,r]=k4(n,r),"int32"===n.dtype&&"int32"===r.dtype)return z5(n,r);const i={a:n,b:r};return N4.runKernel(i1,i,{})}});const U5=B4({mul_:function(e,t){let n=j4(e,"a","mul"),r=j4(t,"b","mul");[n,r]=k4(n,r);const i={a:n,b:r};return N4.runKernel(Z1,i)}});const W5=B4({sqrt_:function(e){const t={x:j4(e,"x","sqrt","float32")};return N4.runKernel(j2,t)}});const V5=B4({square_:function(e){const t=j4(e,"x","square");return N4.runKernel("Square",{x:t},{})}});const G5=B4({zerosLike_:function(e){const t={x:j4(e,"x","zerosLike")};return N4.runKernel(d3,t)}});function H5(e){return N4.customGrad(e)}function q5(e,t){if((X3(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&X3(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return W4(e,[],[],t)}const K5=new Map,X5=new Map;class Y5{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class Q5{constructor(){this.classNameMap={}}static getMap(){return null==Q5.instance&&(Q5.instance=new Q5),Q5.instance}static register(e){Q5.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function J5(e,t,n){SZ(null!=e.className,(()=>"Class being registered does not have the static className property defined.")),SZ("string"===typeof e.className,(()=>"className is required to be a string, but got type "+typeof e.className)),SZ(e.className.length>0,(()=>"Class being registered has an empty-string as its className, which is disallowed.")),"undefined"===typeof t&&(t="Custom"),"undefined"===typeof n&&(n=e.className);const r=t+">"+n;return Q5.register(e),K5.set(r,e),X5.set(e,r),e}class Z5 extends Y5{minimize(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;const{value:r,grads:i}=this.computeGradients(e,n);if(null!=n){const e=n.map((e=>({name:e.name,tensor:i[e.name]})));this.applyGradients(e)}else this.applyGradients(i);return X4(i),t?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return function(e,t){SZ(UZ(e),(()=>"The f passed in variableGrads(f) must be a function")),SZ(null==t||Array.isArray(t)&&t.every((e=>e instanceof h4)),(()=>"The varList passed in variableGrads(f, varList) must be an array of variables"));const n=null!=t;if(!n){t=[];for(const e in N4.registeredVariables)t.push(N4.registeredVariables[e])}const r=n?t.filter((e=>!e.trainable)):null,i=t.length;t=t.filter((e=>e.trainable)),SZ(t.length>0,(()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`));const{value:o,grads:a}=N4.gradients(e,t,null,!0);SZ(a.some((e=>null!=e)),(()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize().")),SZ(0===o.rank,(()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`));const s={};return t.forEach(((e,t)=>{null!=a[t]&&(s[e.name]=a[t])})),null!=r&&r.forEach((e=>s[e.name]=null)),{value:o,grads:s}}(e,t)}dispose(){null!=this.iterations_&&X4(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:q5(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Z5,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});class e6 extends Z5{static get className(){return"Adadelta"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=N4.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=N4.registeredVariables[t],i=!1;null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:`${t}/accum_grad`,variable:K4((()=>G5(r).variable(i)))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:`${t}/accum_var`,variable:K4((()=>G5(r).variable(i)))});const o=Array.isArray(e)?e[n].tensor:e[t];if(null==o)return;const a=this.accumulatedGrads[n].variable,s=this.accumulatedUpdates[n].variable;K4((()=>{const e=j5(U5(a,this.rho),U5(V5(o),1-this.rho)),t=U5(B5(W5(j5(s,this.epsilon)),W5(j5(a,this.epsilon))),o),n=j5(U5(s,this.rho),U5(V5(t),1-this.rho));a.assign(e),s.assign(n);const i=j5(U5(t,-this.learningRate),r);r.assign(i)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(X4(this.accumulatedGrads.map((e=>e.variable))),X4(this.accumulatedUpdates.map((e=>e.variable))))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){const t=(e=await this.extractIterations(e)).length/2,n=!1;this.accumulatedGrads=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedUpdates=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}function t6(e,t,n){YZ(e);const r={shape:e,value:t,dtype:n=n||BZ(t)};return N4.runKernel(f1,{},r)}class n6 extends Z5{static get className(){return"Adagrad"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=N4.registeredVariables[t];if(null==this.accumulatedGrads[n]){const e=!1;this.accumulatedGrads[n]={originalName:`${t}/accumulator`,variable:K4((()=>t6(r.shape,this.initialAccumulatorValue).variable(e)))}}const i=Array.isArray(e)?e[n].tensor:e[t];if(null==i)return;const o=this.accumulatedGrads[n].variable;K4((()=>{const e=j5(o,V5(i));o.assign(e);const t=j5(U5(B5(i,W5(j5(e,N4.backend.epsilon()))),-this.learningRate),r);r.assign(t)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&X4(this.accumulatedGrads.map((e=>e.variable)))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);this.accumulatedGrads=e.map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}const r6=B4({pow_:function(e,t){let n=j4(e,"base","pow"),r=j4(t,"exp","pow");[n,r]=k4(n,r);const i={a:n,b:r};return N4.runKernel(u2,i)}});const i6=B4({sub_:function(e,t){let n=j4(e,"a","sub"),r=j4(t,"b","sub");[n,r]=k4(n,r);const i={a:n,b:r};return N4.runKernel(n3,i)}});class o6 extends Z5{static get className(){return"Adam"}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],K4((()=>{this.accBeta1=q5(t).variable(),this.accBeta2=q5(n).variable()})),null==r&&(this.epsilon=N4.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);K4((()=>{const n=i6(1,this.accBeta1),r=i6(1,this.accBeta2);t.forEach(((t,i)=>{const o=N4.registeredVariables[t],a=!1;null==this.accumulatedFirstMoment[i]&&(this.accumulatedFirstMoment[i]={originalName:`${t}/m`,variable:K4((()=>G5(o).variable(a)))}),null==this.accumulatedSecondMoment[i]&&(this.accumulatedSecondMoment[i]={originalName:`${t}/v`,variable:K4((()=>G5(o).variable(a)))});const s=Array.isArray(e)?e[i].tensor:e[t];if(null==s)return;const l=this.accumulatedFirstMoment[i].variable,u=this.accumulatedSecondMoment[i].variable,c=j5(U5(l,this.beta1),U5(s,1-this.beta1)),h=j5(U5(u,this.beta2),U5(V5(s),1-this.beta2)),d=B5(c,n),p=B5(h,r);l.assign(c),u.assign(h);const f=j5(U5(B5(d,j5(W5(p),this.epsilon)),-this.learningRate),o);o.assign(f)})),this.accBeta1.assign(U5(this.accBeta1,this.beta1)),this.accBeta2.assign(U5(this.accBeta2,this.beta2))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&X4(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedSecondMoment&&X4(this.accumulatedSecondMoment.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e),K4((()=>{this.accBeta1.assign(r6(this.beta1,this.iterations_+1)),this.accBeta2.assign(r6(this.beta2,this.iterations_+1))}));const t=e.length/2,n=!1;this.accumulatedFirstMoment=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedSecondMoment=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}const a6=B4({abs_:function(e){const t=j4(e,"x","abs");if("complex64"===t.dtype){const e={x:t};return N4.runKernel(P0,e)}{const e={x:t};return N4.runKernel(l0,e)}}});function s6(e,t){const n=e.length,r=[];for(let i=0;i<n;i++){const o=n-1-i,a=e[o]||1;(t[t.length-1-i]||1)>1&&1===a&&r.unshift(o)}return r}function l6(e,t){const n=[];for(let r=0;r<t.length;r++){const i=e[e.length-r-1],o=t.length-r-1,a=t[o];(null==i||1===i&&a>1)&&n.unshift(o)}return n}function u6(e,t){const n=Math.max(e.length,t.length),r=new Array(n);for(let i=0;i<n;i++){let o=e[e.length-i-1];null==o&&(o=1);let a=t[t.length-i-1];if(null==a&&(a=1),1===o)r[n-i-1]=a;else if(1===a)r[n-i-1]=o;else{if(o!==a){throw Error(`Operands could not be broadcast together with shapes ${e} and ${t}.`)}r[n-i-1]=o}}return r}const c6=B4({maximum_:function(e,t){let n=j4(e,"a","maximum"),r=j4(t,"b","maximum");[n,r]=k4(n,r),"bool"===n.dtype&&(n=M5(n,"int32"),r=M5(r,"int32")),u6(n.shape,r.shape);const i={a:n,b:r};return N4.runKernel(B1,i)}});class h6 extends Z5{static get className(){return"Adamax"}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],K4((()=>{this.iteration=q5(0).variable(),this.accBeta1=q5(t).variable()})),null==r&&(this.epsilon=N4.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);K4((()=>{const n=i6(1,this.accBeta1),r=B5(-this.learningRate,j5(U5(this.iteration,this.decay),1));t.forEach(((t,i)=>{const o=N4.registeredVariables[t],a=!1;null==this.accumulatedFirstMoment[i]&&(this.accumulatedFirstMoment[i]={originalName:`${t}/m`,variable:G5(o).variable(a)}),null==this.accumulatedWeightedInfNorm[i]&&(this.accumulatedWeightedInfNorm[i]={originalName:`${t}/v`,variable:G5(o).variable(a)});const s=Array.isArray(e)?e[i].tensor:e[t];if(null==s)return;const l=this.accumulatedFirstMoment[i].variable,u=this.accumulatedWeightedInfNorm[i].variable,c=j5(U5(l,this.beta1),U5(s,1-this.beta1)),h=U5(u,this.beta2),d=a6(s),p=c6(h,d);l.assign(c),u.assign(p);const f=j5(U5(B5(r,n),B5(c,j5(p,this.epsilon))),o);o.assign(f)})),this.iteration.assign(j5(this.iteration,1)),this.accBeta1.assign(U5(this.accBeta1,this.beta1))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&X4(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedWeightedInfNorm&&X4(this.accumulatedWeightedInfNorm.map((e=>e.variable)))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}class d6 extends Z5{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);t.forEach(((t,n)=>{const r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;const i=N4.registeredVariables[t];K4((()=>{const e=j5(U5(this.c,r),i);i.assign(e)}))})),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=Y4(q5(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}class p6 extends d6{static get className(){return"Momentum"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=q5(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=N4.registeredVariables[t];if(null==this.accumulations[n]){const e=!1;this.accumulations[n]={originalName:`${t}/momentum`,variable:K4((()=>G5(r).variable(e)))}}const i=this.accumulations[n].variable,o=Array.isArray(e)?e[n].tensor:e[t];null!=o&&K4((()=>{let e;const t=j5(U5(this.m,i),o);e=this.useNesterov?j5(U5(this.c,j5(o,U5(t,this.m))),r):j5(U5(this.c,t),r),i.assign(t),r.assign(e)}))})),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&X4(this.accumulations.map((e=>e.variable)))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);this.accumulations=e.map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}class f6 extends Z5{static get className(){return"RMSProp"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,null==r&&(this.epsilon=N4.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const r=N4.registeredVariables[t],i=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:`${t}/rms`,variable:K4((()=>G5(r).variable(i)))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:`${t}/momentum`,variable:K4((()=>G5(r).variable(i)))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:`${t}/mg`,variable:K4((()=>G5(r).variable(i)))});const o=Array.isArray(e)?e[n].tensor:e[t];if(null==o)return;const a=this.accumulatedMeanSquares[n].variable,s=this.accumulatedMoments[n].variable;K4((()=>{const e=j5(U5(a,this.decay),U5(V5(o),1-this.decay));if(this.centered){const t=this.accumulatedMeanGrads[n].variable,i=j5(U5(t,this.decay),U5(o,1-this.decay)),l=B5(U5(o,this.learningRate),W5(i6(e,j5(V5(i),this.epsilon)))),u=j5(U5(s,this.momentum),l);a.assign(e),t.assign(i),s.assign(u);const c=i6(r,u);r.assign(c)}else{const e=j5(U5(a,this.decay),U5(V5(o),1-this.decay)),t=j5(U5(s,this.momentum),B5(U5(o,this.learningRate),W5(j5(e,this.epsilon))));a.assign(e),s.assign(t);const n=i6(r,t);r.assign(n)}}))})),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&X4(this.accumulatedMeanSquares.map((e=>e.variable))),null!=this.accumulatedMeanGrads&&this.centered&&X4(this.accumulatedMeanGrads.map((e=>e.variable))),null!=this.accumulatedMoments&&X4(this.accumulatedMoments.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedMoments=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}const m6=[e6,n6,o6,h6,p6,f6,d6];function g6(e){return new Promise((e=>setTimeout(e))).then(e)}class y6{constructor(e){if(!r0().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(y6.URL_SCHEME)&&(e=e.slice(y6.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"===typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=G4.join(e.weightData),n=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const t=r5(e,[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]),r=window.URL.createObjectURL(new Blob([JSON.stringify(t)],{type:"application/json"})),i=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(i.download=this.modelJsonFileName,i.href=r,await g6((()=>i.dispatchEvent(new MouseEvent("click")))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=n,await g6((()=>e.dispatchEvent(new MouseEvent("click"))))}return{modelArtifactsInfo:o5(e)}}}}y6.URL_SCHEME="downloads://";function v6(e,t,n,r){!function(e){SZ(null!=e&&Array.isArray(e)&&e.length>0,(()=>"promises must be a none empty array"))}(e),function(e,t){SZ(e>=0&&e<=1,(()=>`Progress fraction must be in range [0, 1], but got startFraction ${e}`)),SZ(t>=0&&t<=1,(()=>`Progress fraction must be in range [0, 1], but got endFraction ${t}`)),SZ(t>=e,(()=>`startFraction must be no more than endFraction, but got startFraction ${e} and endFraction ${t}`))}(n=null==n?0:n,r=null==r?1:r);let i=0;return Promise.all(e.map((o=>(o.then((o=>{const a=n+ ++i/e.length*(r-n);return t(a),o})),o))))}async function b6(e,t){null==t&&(t={});const n=null==t.fetchFunc?r0().platform.fetch:t.fetchFunc,r=e.map((e=>n(e,t.requestInit,{isBinary:!0}))),i=(null==t.onProgress?await Promise.all(r):await v6(r,t.onProgress,0,.5)).map((e=>e.arrayBuffer()));return null==t.onProgress?await Promise.all(i):await v6(i,t.onProgress,.5,1)}s5.registerSaveRouter((e=>r0().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(y6.URL_SCHEME)?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new y6(e)}(e.slice(y6.URL_SCHEME.length)):null));class x6{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(SZ("function"===typeof t.fetchFunc,(()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)")),this.fetch=t.fetchFunc):this.fetch=r0().platform.fetch,SZ(null!=e&&e.length>0,(()=>"URL path for http must not be null, undefined or empty.")),Array.isArray(e)&&SZ(2===e.length,(()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`)),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{},this.loadOptions=t}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n=r5(e,[{paths:["./model.weights.bin"],weights:e.weightSpecs}]);if(t.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=e.weightData){const n=G4.join(e.weightData);t.body.append("model.weights.bin",new Blob([n],{type:"application/octet-stream"}),"model.weights.bin")}const r=await this.fetch(this.path,t);if(r.ok)return{modelArtifactsInfo:o5(e),responses:[r]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${r.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let t;try{t=await e.json()}catch(i){let e=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?e+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":e+=" Please make sure the server is serving valid JSON for this request.",new Error(e)}const n=t.modelTopology,r=t.weightsManifest;if(null==n&&null==r)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return t}async load(){if(this.loadOptions.streamWeights)return this.loadStream();return i5(await this.loadModelJSON(),(e=>this.loadWeights(e)))}async loadStream(){const e=await this.loadModelJSON(),t=await this.getWeightUrls(e.weightsManifest),n=a5(e.weightsManifest);return Object.assign(Object.assign({},e),{weightSpecs:n,getWeightStream:()=>function(e,t){var n;const r=null==t.fetchFunc?r0().platform.fetch:t.fetchFunc;let i,o=0;return null===(n=t.onProgress)||void 0===n||n.call(t,0),new ReadableStream({pull:async n=>{for(var a;o<e.length;){if(!i){const n=(await r(e[o],t.requestInit,{isBinary:!0})).body;i=n.getReader()}const{done:s,value:l}=await i.read();if(!s)return void n.enqueue(l);o++,i=void 0,null===(a=t.onProgress)||void 0===a||a.call(t,o/e.length)}n.close()}})}(t,this.loadOptions)})}async getWeightUrls(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),i=n>t?e.substring(n):"";return[r+"/",i]}(t),i=this.weightPathPrefix||n,o=[],a=[];for(const s of e)for(const e of s.paths)null!=this.weightUrlConverter?a.push(this.weightUrlConverter(e)):o.push(i+e+r);return this.weightUrlConverter&&o.push(...await Promise.all(a)),o}async loadWeights(e){const t=await this.getWeightUrls(e);return[a5(e),await b6(t,this.loadOptions)]}}function w6(e){return null!=e.match(x6.URL_SCHEME_REGEX)}x6.URL_SCHEME_REGEX=/^https?:\/\//;const k6=(e,t)=>{if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every((e=>w6(e))):w6(e),n)return S6(e,t)}return null};function S6(e,t){return new x6(e,t)}s5.registerSaveRouter(k6),s5.registerLoadRouter(k6);const E6=-2,I6=-1;function T6(e,t,n){const r=e.shape.length;SZ(r===t.length,(()=>`Error in slice${r}D: Length of begin ${t} must match the rank of the array (${r}).`)),SZ(r===n.length,(()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`));for(let i=0;i<r;++i)SZ(t[i]+n[i]<=e.shape[i],(()=>`Error in slice${r}D: begin[${i}] + size[${i}] (${t[i]+n[i]}) would overflow input.shape[${i}] (${e.shape[i]})`))}function C6(e){const t=[];let n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function A6(e,t,n){const r=[];for(let i=0;i<e.length;i++)r[i]=Math.ceil((t[i]-e[i])/n[i]);return r}function _6(e,t,n,r){const i=[...e];for(let o=i.length;o<r.length;o++)i.push(1);for(let o=0;o<n;o++)0===o?i[t]=1:(i.splice(t,0,1),i.pop());return i}function N6(e,t,n){return n<=e?n:n-(t-1)}function O6(e,t){const n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function R6(e,t,n,r,i,o,a,s,l){const u=e.length;let c=new Array(u),h=new Array(u),d=new Array(u);if(t.length&&n>0){const l=t[0],u=n+1;c=$6(a,l,u,r,e),h=D6(s,l,u,i,e),d=_6(o,l,u,e)}else for(let p=0;p<u;p++)c[p]=M6(a,r,o,e,p,l),h[p]=F6(s,i,o,e,p,l),d[p]=P6(o,p,l);return{begin:c,end:h,strides:d}}function $6(e,t,n,r,i){const o=[...i],a=O6(n,t);for(let s=0;s<o.length;s++)if(a.indexOf(s)>-1)o[s]=0;else{const i=N6(t,n,s);let a=r[i];e&1<<i&&(a=0),o[s]=a}return o}function D6(e,t,n,r,i){const o=[...i],a=O6(n,t);for(let s=0;s<o.length;s++)if(a.indexOf(s)>-1)o[s]=Number.MAX_SAFE_INTEGER;else{const i=N6(t,n,s);let a=r[i];e&1<<i&&(a=Number.MAX_SAFE_INTEGER),o[s]=a}for(let s=0;s<o.length;s++){const e=i[s];o[s]<0&&(o[s]+=e),o[s]=xZ(0,o[s],i[s])}return o}function P6(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function M6(e,t,n,r,i,o){let a=t[i];const s=n[i]||1;(e&1<<i||o&1<<i||null==a)&&(a=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const l=r[i];return a<0&&(a+=l),a=xZ(0,a,l-1),a}function F6(e,t,n,r,i,o){let a=t[i];const s=n[i]||1;(e&1<<i||o&1<<i||null==a)&&(a=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const l=r[i];return a<0&&(a+=l),a=s>0?xZ(0,a,l):xZ(-1,a,l-1),a}function L6(e,t,n){let r=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(let i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function j6(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function z6(e,t,n){let r;const i=e.shape.length;let o;return r="number"===typeof t?[t,...new Array(i-1).fill(0)]:t.length<i?t.concat(new Array(i-t.length).fill(0)):t.slice(),r.forEach((e=>{SZ(-1!==e,(()=>"slice() does not support negative begin indexing."))})),o=null==n?new Array(i).fill(-1):"number"===typeof n?[n,...new Array(i-1).fill(-1)]:n.length<i?n.concat(new Array(i-n.length).fill(-1)):n,o=o.map(((t,n)=>t>=0?t:(SZ(-1===t,(()=>`Negative size values should be exactly -1 but got ${t} for the slice() size at index ${n}.`)),e.shape[n]-r[n]))),[r,o]}function B6(e,t,n,r,i,o,a,s,l){let u;if(null==r?(u=new Array(t.length),u.fill(1)):u=r,null!=a&&0!==(a&a-1))throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const h={dims:u.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:u.slice(),beginMask:i,endMask:o,ellipsisMask:a,newAxisMask:s,shrinkAxisMask:l};for(let v=0;v<h.dims;v++)c&&0!==(1<<v&s)&&h.numAddAxisAfterEllipsis++,1<<v&a&&(c=!0);c||(h.ellipsisMask|=1<<h.dims,h.dims++);const d={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){const i=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<i;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(E6),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${t.dims} dims, ${t.begin.length}.`);null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(I6),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(h,d);let p=!0,f=!0,m=!0;const g=[],y=[];for(let v=0;v<e.length;++v){if(0===d.strides[v])throw Error(`strides[${v}] must be non-zero`);const t=!!(d.shrinkAxisMask&1<<v),n=e[v];if(-1===n){g.push(t?1:-1);continue}const r=[d.beginMask&1<<v,d.endMask&1<<v],i=[d.strides[v]>0?0:-1,d.strides[v]>0?n:n-1];if(t&&d.strides[v]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&1===d.strides[v];const o=!!(d.beginMask&1<<v&&d.endMask&1<<v);if(d.beginValid&&d.endValid){if(t){const e=d.begin[v]<0?n+d.begin[v]:d.begin[v];if(d.begin[v]=e,d.end[v]=d.begin[v]+1,e<0||e>=n)throw Error(`slice index ${d.begin[v]} of dimension ${v} out of bounds.`)}else d.begin[v]=U6(d.begin[v],0,d.strides[v],n,r,i),d.end[v]=U6(d.end[v],1,d.strides[v],n,r,i);const e=1===d.strides[v]&&0===d.begin[v]&&d.end[v]===n;p=p&&e,f=f&&(0===v&&1===d.strides[v]||e)}else p=p&&1===d.strides[v]&&o,f=f&&(0===v&&1===d.strides[v]||o);let a,s=!1;if(d.beginValid&&d.endValid?(a=d.end[v]-d.begin[v],s=!0):t?(a=1,s=!0):o&&n>=0&&(a=d.strides[v]<0?-n:n,s=!0),s){let e;e=0===a||a<0!==d.strides[v]<0?0:Math.trunc(a/d.strides[v])+(a%d.strides[v]!==0?1:0),g.push(e)}else g.push(-1)}for(let v=0;v<d.finalShapeGatherIndices.length;++v){const e=d.finalShapeGatherIndices[v];e>=0?y.push(g[e]):e===E6&&y.push(1)}return{finalShapeSparse:y.filter(((e,t)=>d.finalShapeGatherIndices[t]!==E6)),finalShape:y,isIdentity:p,sliceDim0:f,isSimpleSlice:m,begin:d.begin,end:d.end,strides:d.strides}}function U6(e,t,n,r,i,o){if(i[t])return n>0?o[t]:o[t+1&1];{const t=e<0?r+e:e;return t<o[0]?o[0]:t>o[1]?o[1]:t}}const W6=B4({all_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:j4(e,"x","all","bool")},i={axis:t,keepDims:n};return N4.runKernel(p0,r,i)}});const V6=B4({any_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:j4(e,"x","any","bool")},i={axis:t,keepDims:n};return N4.runKernel(f0,r,i)}});const G6=B4({argMax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:j4(e,"x","argMax")},r={axis:t};return N4.runKernel(m0,n,r)}});function H6(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5?arguments[5]:void 0;return X6(e,[...t,e[3]],n,o,r,null,null,o9(i))}function q6(e,t,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast";const[s,l]=J6(t);let u;if("channelsLast"===a)u=[s,l,e[3],e[3]];else{if("channelsFirst"!==a)throw new Error(`Unknown dataFormat ${a}`);u=[s,l,e[1],e[1]]}return X6(e,u,n,r,i,o,!1,a)}function K6(e,t,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC";const[s,l,u]=Z6(t);let c,h;if("NDHWC"===a)h="channelsLast",c=[s,l,u,e[4],e[4]];else{if("NCDHW"!==a)throw new Error(`Unknown dataFormat ${a}`);h="channelsFirst",c=[s,l,u,e[1],e[1]]}return Y6(e,c,n,r,i,!1,h,o)}function X6(e,t,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",[l,u,c,h]=[-1,-1,-1,-1];if("channelsLast"===s)[l,u,c,h]=e;else{if("channelsFirst"!==s)throw new Error(`Unknown dataFormat ${s}`);[l,h,u,c]=e}const[d,p,,f]=t,[m,g]=J6(n),[y,v]=J6(r),b=e9(d,y),x=e9(p,v),{padInfo:w,outHeight:k,outWidth:S}=function(e,t,n,r,i,o,a,s,l){let u,c,h;if("number"===typeof e){u={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};const i=function(e,t,n,r,i){null==r&&(r=Q6(e,t,n));const o=e[0],a=e[1],s=t9((o-t+2*r)/n+1,i),l=t9((a-t+2*r)/n+1,i);return[s,l]}([t,n],o,r,e,s);c=i[0],h=i[1]}else if("same"===e){c=Math.ceil(t/r),h=Math.ceil(n/i);const e=Math.max(0,(c-1)*r+o-t),s=Math.max(0,(h-1)*i+a-n),l=Math.floor(e/2),d=e-l,p=Math.floor(s/2);u={top:l,bottom:d,left:p,right:s-p,type:"SAME"}}else if("valid"===e)u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-o+1)/r),h=Math.ceil((n-a+1)/i);else{if("object"!==typeof e)throw Error(`Unknown padding parameter: ${e}`);{const d="channelsLast"===l?e[1][0]:e[2][0],p="channelsLast"===l?e[1][1]:e[2][1],f="channelsLast"===l?e[2][0]:e[3][0],m="channelsLast"===l?e[2][1]:e[3][1];u={top:d,bottom:p,left:f,right:m,type:0===d&&0===p&&0===f&&0===m?"VALID":"EXPLICIT"},c=t9((t-o+d+p)/r+1,s),h=t9((n-a+f+m)/i+1,s)}}return{padInfo:u,outHeight:c,outWidth:h}}(i,u,c,m,g,b,x,o,s),E=a?f*h:f;let I;return"channelsFirst"===s?I=[l,E,k,S]:"channelsLast"===s&&(I=[l,k,S,E]),{batchSize:l,dataFormat:s,inHeight:u,inWidth:c,inChannels:h,outHeight:k,outWidth:S,outChannels:E,padInfo:w,strideHeight:m,strideWidth:g,filterHeight:d,filterWidth:p,effectiveFilterHeight:b,effectiveFilterWidth:x,dilationHeight:y,dilationWidth:v,inShape:e,outShape:I,filterShape:t}}function Y6(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,[l,u,c,h,d]=[-1,-1,-1,-1,-1];if("channelsLast"===a)[l,u,c,h,d]=e;else{if("channelsFirst"!==a)throw new Error(`Unknown dataFormat ${a}`);[l,d,u,c,h]=e}const[p,f,m,,g]=t,[y,v,b]=Z6(n),[x,w,k]=Z6(r),S=e9(p,x),E=e9(f,w),I=e9(m,k),{padInfo:T,outDepth:C,outHeight:A,outWidth:_}=function(e,t,n,r,i,o,a,s,l,u,c){let h,d,p,f;"valid"===e&&(e=0);if("number"===typeof e){h={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};const m=function(e,t,n,r,i,o){null==i&&(i=Q6(e,t[0],r[0]));const a=[0,0,0,n];for(let s=0;s<3;s++)e[s]+2*i>=t[s]&&(a[s]=t9((e[s]-t[s]+2*i)/r[s]+1,o));return a}([t,n,r,1],[s,l,u],1,[i,o,a],e,c);d=m[0],p=m[1],f=m[2]}else{if("same"!==e)throw Error(`Unknown padding parameter: ${e}`);{d=Math.ceil(t/i),p=Math.ceil(n/o),f=Math.ceil(r/a);const e=(d-1)*i+s-t,c=(p-1)*o+l-n,m=(f-1)*a+u-r,g=Math.floor(e/2),y=e-g,v=Math.floor(c/2),b=c-v,x=Math.floor(m/2);h={top:v,bottom:b,left:x,right:m-x,front:g,back:y,type:"SAME"}}}return{padInfo:h,outDepth:d,outHeight:p,outWidth:f}}(i,u,c,h,y,v,b,S,E,I,s),N=o?g*d:g;let O;return"channelsFirst"===a?O=[l,N,C,A,_]:"channelsLast"===a&&(O=[l,C,A,_,N]),{batchSize:l,dataFormat:a,inDepth:u,inHeight:c,inWidth:h,inChannels:d,outDepth:C,outHeight:A,outWidth:_,outChannels:N,padInfo:T,strideDepth:y,strideHeight:v,strideWidth:b,filterDepth:p,filterHeight:f,filterWidth:m,effectiveFilterDepth:S,effectiveFilterHeight:E,effectiveFilterWidth:I,dilationDepth:x,dilationHeight:w,dilationWidth:k,inShape:e,outShape:O,filterShape:t}}function Q6(e,t,n){const r=e9(t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1);return Math.floor((e[0]*(n-1)-n+r)/2)}function J6(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function Z6(e){return"number"===typeof e?[e,e,e]:e}function e9(e,t){return t<=1?e:e+(e-1)*(t-1)}function t9(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function n9(e){const[t,n,r]=J6(e);return 1===t&&1===n&&1===r}function r9(e,t){return n9(e)||n9(t)}function i9(e){return J6(e).every((e=>e>0))}function o9(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}function a9(e,t,n){if(null!=n){if("string"===typeof t)throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);if("number"===typeof t)SZ(AZ(t),(()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`));else{if("object"!==typeof t)throw Error(`Error in ${e}: Unknown padding parameter: ${t}`);t.forEach((t=>{t.forEach((t=>{SZ(AZ(t),(()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`))}))}))}}}const s9=B4({reshape_:function(e,t){const n={x:j4(e,"x","reshape","string_or_numeric")},r={shape:t};return N4.runKernel(b2,n,r)}});const l9=B4({avgPool_:function(e,t,n,r,i){const o=j4(e,"x","avgPool","float32");SZ(r9(n,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`));let a=o,s=!1;3===o.rank&&(s=!0,a=s9(o,[1,o.shape[0],o.shape[1],o.shape[2]])),SZ(4===a.rank,(()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`)),a9("avgPool",r,i);const l={x:a},u={filterSize:t,strides:n,pad:r,dimRoundingMode:i};let c=N4.runKernel(k0,l,u);return c=M5(c,o.dtype),s?s9(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const u9=B4({avgPool3d_:function(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const a=j4(e,"x","avgPool3d","float32");let s=a,l=!1;4===a.rank&&(l=!0,s=s9(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),SZ(5===s.rank,(()=>`Error in avgPool3d: x must be rank 5 but got rank ${s.rank}.`)),SZ("NDHWC"===o,(()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`)),SZ("number"===typeof n&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,(()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`)),a9("avgPool3d",r,i);const u={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:i,dataFormat:o};let h=N4.runKernel(E0,u,c);return h=M5(h,s.dtype),l?s9(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});const c9=B4({batchNorm_:function(e,t,n,r,i,o){null==o&&(o=.001);const a=j4(e,"x","batchNorm"),s=j4(t,"mean","batchNorm"),l=j4(n,"variance","batchNorm");let u,c;null!=i&&(u=j4(i,"scale","batchNorm")),null!=r&&(c=j4(r,"offset","batchNorm")),SZ(s.rank===l.rank,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),SZ(null==c||s.rank===c.rank,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),SZ(null==u||s.rank===u.rank,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));const h=function(e){let t;return t=0===e.rank||1===e.rank?s9(e,[1,1,1,e.size]):2===e.rank?s9(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?s9(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}(a),d={x:h,scale:u,offset:c,mean:s,variance:l},p={varianceEpsilon:o},f=N4.runKernel(v1,d,p);return s9(f,a.shape)}});const h9=B4({batchNorm2d_:function(e,t,n,r,i,o){const a=j4(e,"x","batchNorm"),s=j4(t,"mean","batchNorm"),l=j4(n,"variance","batchNorm");let u,c;return null!=i&&(u=j4(i,"scale","batchNorm")),null!=r&&(c=j4(r,"offset","batchNorm")),SZ(2===a.rank,(()=>`Error in batchNorm2D: x must be rank 2 but got rank ${a.rank}.`)),SZ(2===s.rank||1===s.rank,(()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${s.rank}.`)),SZ(2===l.rank||1===l.rank,(()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`)),null!=u&&SZ(2===u.rank||1===u.rank,(()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`)),null!=c&&SZ(2===c.rank||1===c.rank,(()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`)),c9(a,s,l,c,u,o)}});const d9=B4({batchNorm3d_:function(e,t,n,r,i,o){const a=j4(e,"x","batchNorm"),s=j4(t,"mean","batchNorm"),l=j4(n,"variance","batchNorm");let u,c;return null!=i&&(u=j4(i,"scale","batchNorm")),null!=r&&(c=j4(r,"offset","batchNorm")),SZ(3===a.rank,(()=>`Error in batchNorm3D: x must be rank 3 but got rank ${a.rank}.`)),SZ(3===s.rank||1===s.rank,(()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${s.rank}.`)),SZ(3===l.rank||1===l.rank,(()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`)),null!=u&&SZ(3===u.rank||1===u.rank,(()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`)),null!=c&&SZ(3===c.rank||1===c.rank,(()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`)),c9(a,s,l,c,u,o)}});const p9=B4({batchNorm4d_:function(e,t,n,r,i,o){const a=j4(e,"x","batchNorm"),s=j4(t,"mean","batchNorm"),l=j4(n,"variance","batchNorm");let u,c;return null!=i&&(u=j4(i,"scale","batchNorm")),null!=r&&(c=j4(r,"offset","batchNorm")),SZ(4===a.rank,(()=>`Error in batchNorm4D: x must be rank 4 but got rank ${a.rank}.`)),SZ(4===s.rank||1===s.rank,(()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${s.rank}.`)),SZ(4===l.rank||1===l.rank,(()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`)),null!=u&&SZ(4===u.rank||1===u.rank,(()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`)),null!=c&&SZ(4===c.rank||1===c.rank,(()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`)),c9(a,s,l,c,u,o)}});const f9=B4({broadcastTo_:function(e,t){let n=j4(e,"broadcastTo","x");const r=n.shape;if(YZ(t),t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){const e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=s9(n,e)}const i=n.shape,o=Array.from(t);for(let l=t.length-1;l>=0;l--)if(i[l]===t[l])o[l]=1;else if(1!==n.shape[l])throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${t}].`);if(0===o.map(((e,t)=>e>1?t:-1)).filter((e=>e>=0)).length)return F5(n);const a={x:n},s={reps:o};return N4.runKernel(o3,a,s)}});const m9=B4({clipByValue_:function(e,t,n){const r=j4(e,"x","clipByValue");if(SZ(t<=n,(()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`)),t===n)return t6(r.shape,t,r.dtype);const i={x:r},o={clipValueMin:t,clipValueMax:n};return N4.runKernel($0,i,o)}});const g9=B4({concat_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;SZ(e.length>=1,(()=>"Pass at least one tensor to concat"));const n=z4(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((e=>{if("complex64"!==e.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${e.dtype}. `)})),1===n.length)return F5(n[0]);const r=n,i={axis:t};return N4.runKernel(M0,r,i)}});const y9=B4({concat1d_:function(e){return g9(e,0)}});const v9=B4({concat2d_:function(e,t){return g9(e,t)}});const b9=B4({concat3d_:function(e,t){return g9(e,t)}});const x9=B4({concat4d_:function(e,t){return g9(e,t)}});const w9=B4({conv2d_:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],a=arguments.length>6?arguments[6]:void 0;const s=j4(e,"x","conv2d","float32"),l=j4(t,"filter","conv2d","float32");let u=s,c=!1;3===s.rank&&(c=!0,u=s9(s,[1,s.shape[0],s.shape[1],s.shape[2]])),SZ(4===u.rank,(()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`)),SZ(4===l.rank,(()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`)),a9("conv2d",r,a);const h="NHWC"===i?u.shape[3]:u.shape[1];SZ(h===l.shape[2],(()=>`Error in conv2d: depth of input (${h}) must match input depth for filter ${l.shape[2]}.`)),SZ(r9(n,o),(()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`)),SZ(i9(o),(()=>"Error in conv2D: Dilated rates should be larger than 0.")),SZ(i9(n),(()=>"Error in conv2D: Strides should be larger than 0."));const d={x:u,filter:l},p={strides:n,pad:r,dataFormat:i,dilations:o,dimRoundingMode:a},f=N4.runKernel(F0,d,p);return c?s9(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const k9=B4({conv1d_:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6?arguments[6]:void 0;const s=j4(e,"x","conv1d"),l=j4(t,"filter","conv1d");let u=s,c=!1;2===s.rank&&(c=!0,u=s9(s,[1,s.shape[0],s.shape[1]])),SZ(3===u.rank,(()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`)),SZ(3===l.rank,(()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`)),a9("conv1d",r,a),SZ(u.shape[2]===l.shape[1],(()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`)),SZ(r9(n,o),(()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${o}'`)),SZ(i9(o),(()=>"Error in conv1D: Dilated rates should be larger than 0.")),SZ(i9(n),(()=>"Error in conv1D: Stride should be larger than 0.")),SZ("NWC"===i,(()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`));const h=s9(l,[1,l.shape[0],l.shape[1],l.shape[2]]),d=s9(u,[u.shape[0],1,u.shape[1],u.shape[2]]),p=w9(d,h,[1,n],r,"NHWC",[1,o],a);return s9(p,c?[p.shape[2],p.shape[3]]:[p.shape[0],p.shape[2],p.shape[3]])}});const S9=B4({conv2DBackpropInput_:function(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",a=arguments.length>6?arguments[6]:void 0;SZ(e.length===t.rank,(()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`));let s=e,l=t,u=!1;3===t.rank&&(u=!0,l=s9(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),SZ(4===s.length,(()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${s.length}.`)),SZ(4===l.rank,(()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`)),SZ(4===n.rank,(()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`));const c="NHWC"===o?s[3]:s[1],h="NHWC"===o?l.shape[3]:l.shape[1];SZ(c===n.shape[2],(()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`)),SZ(h===n.shape[3],(()=>`Error in conv2dDerInput: depth of output (${h}) must match output depth for filter ${n.shape[3]}.`)),a9("conv2dDerInput",i,a);const d={dy:l,filter:n},p={strides:r,pad:i,dataFormat:o,dimRoundingMode:a,inputShape:s},f=N4.runKernel(j0,d,p);return u?s9(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const E9=B4({conv2dTranspose_:function(e,t,n,r,i,o){const a=j4(e,"x","conv2dTranspose"),s=j4(t,"filter","conv2dTranspose");return S9(n,a,s,r,i,"NHWC",o)}});const I9=B4({conv3d_:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1];const a=j4(e,"x","conv3d"),s=j4(t,"filter","conv3d");let l=a,u=!1;4===a.rank&&(u=!0,l=s9(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),SZ(5===l.rank,(()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`)),SZ(5===s.rank,(()=>`Error in conv3d: filter must be rank 5, but got rank ${s.rank}.`)),SZ(l.shape[4]===s.shape[3],(()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${s.shape[3]}.`)),SZ(r9(n,o),(()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`)),SZ("NDHWC"===i,(()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`)),SZ(i9(o),(()=>"Error in conv3D: Dilated rates should be larger than 0.")),SZ(i9(n),(()=>"Error in conv3D: Strides should be larger than 0."));const c={x:l,filter:s},h={strides:n,pad:r,dataFormat:i,dilations:o},d=N4.runKernel(z0,c,h);return u?s9(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const T9=B4({conv3DBackpropInput_:function(e,t,n,r,i){SZ(e.length===t.rank,(()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`));let o=e,a=t,s=!1;4===t.rank&&(s=!0,a=s9(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),o=[1,e[0],e[1],e[2],e[3]]);const l=o[4],u=a.shape[4];SZ(5===o.length,(()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${o.length}.`)),SZ(5===a.rank,(()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${a.rank}`)),SZ(5===n.rank,(()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`)),SZ(l===n.shape[3],(()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`)),SZ(u===n.shape[4],(()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`));const c={dy:a,filter:n},h={pad:i,strides:r,inputShape:o},d=N4.runKernel(U0,c,h);return s?s9(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const C9=B4({conv3dTranspose_:function(e,t,n,r,i){const o=j4(e,"x","conv3dTranspose"),a=j4(t,"filter","conv3dTranspose");return T9(n,o,a,r,i)}});const A9=B4({denseBincount_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=j4(e,"x","denseBincount"),o=j4(t,"weights","denseBincount");SZ("int32"===i.dtype,(()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`)),SZ(i.rank<=2,(()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`)),SZ(n>=0,(()=>`size must be non-negative, but got ${n}.`)),SZ(o.size===i.size||0===o.size,(()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${o.shape}.`));const a={x:i,weights:o},s={size:n,binaryOutput:r};return N4.runKernel(K0,a,s)}});const _9=B4({depthwiseConv2d_:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],a=arguments.length>6?arguments[6]:void 0;const s=j4(e,"x","depthwiseConv2d","float32"),l=j4(t,"filter","depthwiseConv2d","float32");let u=s,c=!1;3===s.rank&&(c=!0,u=s9(s,[1,s.shape[0],s.shape[1],s.shape[2]])),SZ(4===u.rank,(()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`)),SZ(4===l.rank,(()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`));const h="NHWC"===i?u.shape[3]:u.shape[1];SZ(h===l.shape[2],(()=>`Error in depthwiseConv2d: number of input channels (${h}) must match the inChannels dimension in filter ${l.shape[2]}.`)),a9("depthwiseConv2d",r,a);const d={x:u,filter:l},p={strides:n,pad:r,dataFormat:i,dilations:o,dimRoundingMode:a},f=N4.runKernel(Y0,d,p);return c?s9(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const N9=B4({elu_:function(e){const t={x:j4(e,"x","elu","float32")};return N4.runKernel(a1,t)}});const O9=B4({equal_:function(e,t){let n=j4(e,"a","equal","string_or_numeric"),r=j4(t,"b","equal","string_or_numeric");[n,r]=k4(n,r),u6(n.shape,r.shape);const i={a:n,b:r};return N4.runKernel(u1,i)}});const R9=B4({erf_:function(e){let t=j4(e,"x","erf");SZ("int32"===t.dtype||"float32"===t.dtype,(()=>"Input dtype must be `int32` or `float32`.")),"int32"===t.dtype&&(t=M5(t,"float32"));const n={x:t};return N4.runKernel(l1,n)}});const $9=B4({exp_:function(e){const t={x:j4(e,"x","exp")};return N4.runKernel(c1,t)}});const D9=B4({expandDims_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=j4(e,"x","expandDims","string_or_numeric");SZ(t<=n.rank,(()=>"Axis must be <= rank of the tensor"));const r={input:n},i={dim:t};return N4.runKernel(h1,r,i)}});const P9=B4({tile_:function(e,t){const n=j4(e,"x","tile","string_or_numeric");SZ(n.rank===t.length,(()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`));const r={x:n},i={reps:t};return N4.runKernel(o3,r,i)}});const M9=B4({eye_:function(e,t,n){null==t&&(t=e);const r=P5([e,t],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32"),i=e<=t?e:t;for(let a=0;a<i;++a)r.set(1,a,a);const o=s9(r.toTensor(),[e,t]);if(null==n)return o;if(1===n.length)return P9(D9(o,0),[n[0],1,1]);if(2===n.length)return P9(D9(D9(o,0),0),[n[0],n[1],1,1]);if(3===n.length)return P9(D9(D9(D9(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}});const F9=B4({floor_:function(e){const t={x:j4(e,"x","floor","float32")};return N4.runKernel(g1,t)}});const L9=B4({gather_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i={x:j4(e,"x","gather"),indices:j4(t,"indices","gather","int32")},o={axis:n,batchDims:r};return N4.runKernel(b1,i,o)}});const j9=B4({greater_:function(e,t){let n=j4(e,"a","greater","string_or_numeric"),r=j4(t,"b","greater","string_or_numeric");[n,r]=k4(n,r),u6(n.shape,r.shape);const i={a:n,b:r};return N4.runKernel(w1,i)}});const z9=B4({greaterEqual_:function(e,t){let n=j4(e,"a","greaterEqual","string_or_numeric"),r=j4(t,"b","greaterEqual","string_or_numeric");[n,r]=k4(n,r),u6(n.shape,r.shape);const i={a:n,b:r};return N4.runKernel(k1,i)}});const B9=B4({leakyRelu_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;const n={x:j4(e,"x","leakyRelu")},r={alpha:t};return N4.runKernel(_1,n,r)}});const U9=B4({log_:function(e){const t={x:j4(e,"x","log","float32")};return N4.runKernel($1,t)}});const W9=B4({log1p_:function(e){const t={x:j4(e,"x","log1p")};return N4.runKernel(D1,t)}});const V9=B4({max_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:j4(e,"x","max")},i={reductionIndices:t,keepDims:n};return N4.runKernel(z1,r,i)}});const G9=B4({sum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=j4(e,"x","sum");"bool"===r.dtype&&(r=M5(r,"int32"));const i={x:r},o={axis:t,keepDims:n};return N4.runKernel(z2,i,o)}});const H9=B4({logSoftmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=j4(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);const r=H5(((e,n)=>{const r=V9(e,t,!0),i=i6(e,r),o=i6(M5(i,"float32"),U9(G9($9(i),t,!0)));n([o]);return{value:o,gradFunc:(e,n)=>{const[r]=n,i=$9(r);return i6(e,U5(G9(e,t,!0),i))}}}));return r(n)}});function q9(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function K9(e,t,n){const r=e.length+t.length,i=[];let o=0,a=0;for(let s=0;s<r;s++)-1===n.indexOf(s)?i.push(e[o++]):i.push(t[a++]);return i}function X9(e,t){const n=[],r=e.length;for(let i=0;i<r;i++)-1===t.indexOf(i)&&n.push(e[i]);return[n,t.map((t=>e[t]))]}function Y9(e,t){return K9(e,t.map((e=>1)),t)}function Q9(e,t,n){SZ(q9(t,n),(()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`))}function J9(e,t){if(q9(e,t))return null;const n=[];for(let r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((e=>n.push(e))),n}function Z9(e){return e.map(((e,t)=>[t,e])).sort(((e,t)=>e[1]-t[1])).map((e=>e[0]))}function e7(e,t){const n=[];for(let r=t-e;r<t;++r)n.push(r);return n}const t7=B4({logSumExp_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=j4(e,"x","logSumExp"),i=$Z(t,r.shape),o=V9(r,i,!0),a=i6(r,o),s=$9(a),l=G9(s,i),u=U9(l),c=j5(s9(o,u.shape),u);if(n){const e=Y9(c.shape,i);return s9(c,e)}return c}});const n7=B4({logicalAnd_:function(e,t){const n=j4(e,"a","logicalAnd","bool"),r=j4(t,"b","logicalAnd","bool");u6(n.shape,r.shape);const i={a:n,b:r};return N4.runKernel(P1,i)}});const r7=B4({matMul_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=j4(e,"a","matMul"),o=j4(t,"b","matMul");[i,o]=k4(i,o);const a={a:i,b:o},s={transposeA:n,transposeB:r};return N4.runKernel(T0,a,s)}});const i7=B4({maxPool_:function(e,t,n,r,i){const o=j4(e,"x","maxPool");let a=o,s=!1;3===o.rank&&(s=!0,a=s9(o,[1,o.shape[0],o.shape[1],o.shape[2]])),SZ(4===a.rank,(()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`)),SZ(r9(n,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`)),a9("maxPool",r,i);const l={x:a},u={filterSize:t,strides:n,pad:r,dimRoundingMode:i},c=N4.runKernel(U1,l,u);return s?s9(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const o7=B4({maxPool3d_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC";const a=j4(e,"x","maxPool3d");let s=a,l=!1;4===a.rank&&(l=!0,s=s9(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),SZ(5===s.rank,(()=>`Error in maxPool3d: x must be rank 5 but got rank ${s.rank}.`)),SZ("NDHWC"===o,(()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`)),a9("maxPool3d",r,i);const u={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:i,dataFormat:o},h=N4.runKernel(V1,u,c);return l?s9(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});const a7=B4({mean_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:j4(e,"x","mean")},i={axis:t,keepDims:n};return N4.runKernel(q1,r,i)}});const s7=B4({min_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r={x:j4(e,"x","min")},i={axis:t,keepDims:n};return N4.runKernel(K1,r,i)}});const l7=B4({minimum_:function(e,t){let n=j4(e,"a","minimum"),r=j4(t,"b","minimum");[n,r]=k4(n,r),"bool"===n.dtype&&(n=M5(n,"int32"),r=M5(r,"int32")),u6(n.shape,r.shape);const i={a:n,b:r};return N4.runKernel(X1,i)}});const u7=B4({moments_:function(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=$Z(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,(e=j4(e,"x","moments")).shape),r=a7(e,n,t);let i=r.shape;t||(i=Y9(r.shape,n));const o=V5(i6(M5(e,"float32"),s9(r,i)));return{mean:r,variance:a7(o,n,t)}}});const c7=B4({neg_:function(e){const t={x:j4(e,"x","neg")};return N4.runKernel(e2,t)}});const h7=B4({notEqual_:function(e,t){let n=j4(e,"a","notEqual","string_or_numeric"),r=j4(t,"b","notEqual","string_or_numeric");[n,r]=k4(n,r),u6(n.shape,r.shape);const i={a:n,b:r};return N4.runKernel(t2,i)}});const d7=B4({oneHot_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"int32";if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const o={indices:j4(e,"indices","oneHot","int32")},a={dtype:i,depth:t,onValue:n,offValue:r};return N4.runKernel(a2,o,a)}});function p7(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(YZ(e),"complex64"===t){const t=p7(e,"float32"),n=p7(e,"float32");return U4(t,n)}const n=KZ(TZ(e),t);return N4.makeTensor(n,e,t)}function f7(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(YZ(e),"complex64"===t){const t=f7(e,"float32"),n=p7(e,"float32");return U4(t,n)}const n=qZ(TZ(e),t);return N4.makeTensor(n,e,t)}const m7=B4({onesLike_:function(e){const t={x:j4(e,"x","onesLike")};return N4.runKernel(o2,t)}});const g7=B4({pad_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=j4(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:t,constantValue:n},o={x:r};return N4.runKernel(l2,o,i)}});const y7=B4({prelu_:function(e,t){const n={x:j4(e,"x","prelu"),alpha:j4(t,"alpha","prelu")};return N4.runKernel(c2,n)}});var v7=n(4334);class b7{constructor(e,t,n,r,i){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const o=i||Math.random();this.random=v7.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;for(;!n;){let r,i,o;do{r=2*this.random()-1,i=2*this.random()-1,o=r*r+i*i}while(o>=1||0===o);const a=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*r*a,t=this.mean+this.stdDev*i*a,this.truncated&&!this.isValidTruncated(e)||(n=!0)}return this.truncated&&!this.isValidTruncated(t)||(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class x7{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"===typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=v7.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const w7=B4({randomNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(YZ(e),null!=r&&"bool"===r)throw new Error(`Unsupported data type ${r}`);const o=new b7(t,n,r,!1,i),a=P5(e,r);for(let s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}});const k7=B4({randomUniform_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",i=arguments.length>4?arguments[4]:void 0;YZ(e);const o=P5(e,r),a=new x7(t,n,null,i);for(let s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}});function S7(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");const i={start:e,stop:t,step:n,dtype:r};return N4.runKernel(m2,{},i)}const E7=B4({relu_:function(e){const t={x:j4(e,"x","relu")};return N4.runKernel(v2,t)}});const I7=B4({reverse_:function(e,t){const n={x:j4(e,"x","reverse")},r={dims:t};return N4.runKernel(I2,n,r)}});const T7=B4({selu_:function(e){const t={x:j4(e,"x","selu")};return N4.runKernel(R2,t)}});const C7=B4({separableConv2d_:function(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC";const s=j4(e,"x","separableConv2d"),l=j4(t,"depthwiseFilter","separableConv2d"),u=j4(n,"pointwiseFilter","separableConv2d");let c=s,h=!1;if(3===s.rank&&(h=!0,c=s9(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===a)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");SZ(4===c.rank,(()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`)),SZ(4===l.rank,(()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`)),SZ(4===u.rank,(()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`)),SZ(1===u.shape[0],(()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`)),SZ(1===u.shape[1],(()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`));const d=l.shape[2],p=l.shape[3];SZ(u.shape[2]===d*p,(()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${d*p}, but got ${u.shape[2]}.`));const f=_9(c,l,r,i,a,o),m=w9(f,u,1,"valid",a);return h?s9(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});const A7=B4({sigmoid_:function(e){const t={x:j4(e,"x","sigmoid","float32")};return N4.runKernel(F2,t)}});const _7=B4({slice_:function(e,t,n){const r=j4(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");const i={x:r},o={begin:t,size:n};return N4.runKernel($2,i,o)}});const N7=B4({slice1d_:function(e,t,n){const r=j4(e,"x","slice1d");return SZ(1===r.rank,(()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`)),_7(r,[t],[n])}});const O7=B4({slice2d_:function(e,t,n){const r=j4(e,"x","slice2d");return SZ(2===r.rank,(()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`)),_7(r,t,n)}});const R7=B4({slice3d_:function(e,t,n){const r=j4(e,"x","slice3d");return SZ(3===r.rank,(()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`)),_7(r,t,n)}});const $7=B4({slice4d_:function(e,t,n){const r=j4(e,"x","slice4d");return SZ(4===r.rank,(()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`)),_7(r,t,n)}});const D7=B4({softmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=j4(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);const r={logits:n},i={dim:t};return N4.runKernel(W2,r,i)}});const P7=B4({softplus_:function(e){const t={x:j4(e,"x","softplus")};return N4.runKernel(L2,t)}});const M7=B4({split_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r={x:j4(e,"x","split")},i={numOrSizeSplits:t,axis:n};return N4.runKernel(U2,r,i)}});const F7=B4({squeeze_:function(e,t){const n=j4(e,"x","squeeze","string_or_numeric");return s9(n,DZ(n.shape,t).newShape)}});const L7=B4({stack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=z4(e,"tensors","stack","string_or_numeric");SZ(n.length>=1,(()=>"Pass at least one tensor to tf.stack")),n.length>0&&SZ(t<=n[0].rank,(()=>"Axis must be <= rank of the tensor"));const r=n,i={axis:t};return N4.runKernel(s2,r,i)}});const j7=B4({tanh_:function(e){const t={x:j4(e,"x","tanh","float32")};return N4.runKernel(i3,t)}});function z7(e,t){IZ(e);const n=M4(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return W4(e,null,n,t)}function B7(e,t,n){if(IZ(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");const r=M4(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return W4(e,t,r,n)}const U7=B4({truncatedNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(YZ(e),null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");const o=new b7(t,n,r,!0,i),a=P5(e,r);for(let s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}});const W7=B4({unstack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=j4(e,"x","unstack","string_or_numeric");SZ(t>=-n.shape.length&&t<n.shape.length,(()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`));const r={value:n},i={axis:t};return N4.runKernel(c3,r,i)}});const V7=B4({where_:function(e,t,n){const r=j4(t,"a","where"),i=j4(n,"b","where"),o=j4(e,"condition","where","bool"),a=u6(u6(o.shape,r.shape),i.shape),s={condition:f9(o,a),t:f9(r,a),e:f9(i,a)};return N4.runKernel(O2,s)}});const G7=B4({imag_:function(e){const t={input:j4(e,"input","imag")};return N4.runKernel(I1,t)}});const H7=B4({real_:function(e){const t={input:j4(e,"input","real")};return N4.runKernel(g2,t)}});const q7=B4({transpose_:function(e,t,n){const r=j4(e,"x","transpose");if(null==t&&(t=r.shape.map(((e,t)=>t)).reverse()),SZ(r.rank===t.length,(()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${t}.`)),t.forEach((e=>{SZ(e>=0&&e<r.rank,(()=>"All entries in 'perm' must be between 0 and "+(r.rank-1)+` but got ${t}`))})),r.rank<=1)return r.clone();const i={x:r},o={perm:t};return"complex64"===r.dtype?K4((()=>{let e=H7(r),t=G7(r);return e=N4.runKernel(l3,{x:e},o),t=N4.runKernel(l3,{x:t},o),n&&(t=c7(t)),U4(e,t)})):N4.runKernel(l3,i,o)}});const K7=B4({dropout_:function(e,t,n,r){const i=j4(e,"x","dropout");if(SZ("float32"===i.dtype,(()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`)),SZ(t>=0&&t<1,(()=>`rate must be a float in the range [0, 1), but got ${t}.`)),0===t)return e instanceof u4?i.clone():i;const o=function(e,t){if(null==t)return e.shape.slice();if(CZ(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(i,n),a=1-t,s=B5(F9(j5(k7(o,0,1,"float32",r),a)),a);return U5(i,s)}});const X7=B4({fft_:function(e){SZ("complex64"===e.dtype,(()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`));const t={input:e};return N4.runKernel(p1,t)}});const Y7=B4({rfft_:function(e,t){SZ("float32"===e.dtype,(()=>`The dtype for rfft() must be real value but got ${e.dtype}`));let n=e.shape[e.shape.length-1];const r=e.size/n;let i;if(null!=t&&t<n){const r=e.shape.map((e=>0)),o=e.shape.map((e=>e));o[e.shape.length-1]=t,i=_7(e,r,o),n=t}else if(null!=t&&t>n){const r=e.shape.map((e=>e));r[e.shape.length-1]=t-n,i=g9([e,p7(r)],e.shape.length-1),n=t}else i=e;const o=G5(i),a=s9(U4(i,o),[r,n]),s=X7(a),l=Math.floor(n/2)+1,u=H7(s),c=G7(s),h=M7(u,[l,n-l],u.shape.length-1),d=M7(c,[l,n-l],c.shape.length-1),p=i.shape.slice();return p[i.shape.length-1]=l,s9(U4(h[0],d[0]),p)}});const Q7=B4({ifft_:function(e){SZ("complex64"===e.dtype,(()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`));const t={input:e};return N4.runKernel(E1,t)}});const J7=B4({irfft_:function(e){const t=e.shape[e.shape.length-1],n=e.size/t;let r;if(t<=2){const i=s9(e,[n,t]);r=Q7(i)}else{const i=[n,2*(t-1)],o=s9(H7(e),[n,t]),a=s9(G7(e),[n,t]),s=I7(_7(o,[0,1],[n,t-2]),1),l=U5(I7(_7(a,[0,1],[n,t-2]),1),q5(-1)),u=g9([o,s],1),c=g9([a,l],1),h=s9(U4(u,c),[i[0],i[1]]);r=Q7(h)}if(r=H7(r),3===e.rank&&0!==e.shape[0]){const t=r,n=e.shape[0];r=s9(r,[n,r.shape[0]/n,r.shape[1]]),t.dispose()}return r}});const Z7=B4({conv2DBackpropFilter_:function(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",a=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=s9(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=s9(t,[1,t.shape[0],t.shape[1],t.shape[2]])),SZ(4===s.rank,(()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${s.shape}.`)),SZ(4===l.rank,(()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`)),SZ(4===n.length,(()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`));const u="NHWC"===o?s.shape[3]:s.shape[1],c="NHWC"===o?l.shape[3]:l.shape[1];SZ(u===n[2],(()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`)),SZ(c===n[3],(()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`)),a9("conv2dDerFilter",i,a);const h={x:s,dy:l},d={strides:r,pad:i,dataFormat:o,dimRoundingMode:a,filterShape:n};return N4.runKernel(L0,h,d)}});const e8=B4({relu6_:function(e){const t={x:j4(e,"x","relu6")};return N4.runKernel(E2,t)}});const t8=B4({step_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:j4(e,"x","step")},r={alpha:t};return N4.runKernel(p3,n,r)}});function n8(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return U5(e,t8(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function r8(e,t){let n=t;const r=l6(e.shape,t.shape);return r.length>0&&(n=G9(n,r)),s9(n,e.shape)}function i8(e,t,n,r){if("linear"===t)return e;if("relu"===t)return E7(e);if("elu"===t)return N9(e);if("relu6"===t)return e8(e);if("prelu"===t)return y7(e,n);if("leakyrelu"===t)return B9(e,r);if("sigmoid"===t)return A7(e);throw new Error(`Unknown fused activation ${t}.`)}const o8=(e,t)=>!(e>0)||"linear"===t;const a8=B4({fusedConv2d_:function(e){let{x:t,filter:n,strides:r,pad:i,dataFormat:o="NHWC",dilations:a=[1,1],dimRoundingMode:s,bias:l,activation:u="linear",preluActivationWeights:c,leakyreluAlpha:h}=e;if(u=u||"linear",!1===o8(N4.state.gradientDepth,u)){SZ("NHWC"===o,(()=>`Error in fused conv2d: got dataFormat of ${o} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`));let e=w9(t,n,r,i,o,a,s);return null!=l&&(e=j5(e,l)),i8(e,u,c,h)}const d=j4(t,"x","conv2d","float32"),p=j4(n,"filter","conv2d","float32");let f=d,m=!1;3===d.rank&&(m=!0,f=s9(d,[1,d.shape[0],d.shape[1],d.shape[2]])),SZ(4===f.rank,(()=>`Error in fused conv2d: input must be rank 4, but got rank ${f.rank}.`)),SZ(4===p.rank,(()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`)),a9("fused conv2d",i,s);const g="NHWC"===o?f.shape[3]:f.shape[1];SZ(p.shape[2]===g,(()=>`Error in conv2d: depth of input (${g}) must match input depth for filter ${p.shape[2]}.`)),SZ(r9(r,a),(()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${r} and dilations '${a}'`));const y=X6(f.shape,p.shape,r,a,i,s);let v,b;if(null!=l&&(v=j4(l,"bias","fused conv2d"),[v]=k4(v,d),"NHWC"===o?u6(y.outShape,v.shape):(SZ(v.shape.length<=1,(()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${v.shape.length}.`)),SZ(0===v.shape.length||v.shape[0]===y.outChannels||1===v.shape[0],(()=>`Error in fused conv2d: bias shape (${v.shape}) is not compatible with the number of output channels (${y.outChannels})`)))),null!=c){const e=c.shape;if(SZ(e.length<=1||3===e.length,(()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${e.length}.`)),1===e.length)SZ(1===e[0]||e[0]===y.outChannels,(()=>`Error in fused conv2d: PReLU activation weights (${e}) is not compatible with the number of output channels (${y.outChannels}).`));else if(3===e.length)try{u6(e,y.outShape)}catch(S){const t=`Error in fused conv2d: PReLU activation weights (${e}) is not compatible with the output shape of the conv2d (${y.outShape}).`;throw Error(t)}b=j4(c,"prelu weights","fused conv2d")}const x=(e,t)=>{SZ("NHWC"===o,(()=>`Error in gradient of fused conv2D: got dataFormat of ${o} but only NHWC is currently supported.`));const[n,s,l,c]=t,h=n8(e,l,u);SZ(n9(a),(()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`));const d=[S9(s.shape,h,n,r,i),Z7(s,h,n.shape,r,i)];if(null!=c){const e=r8(c,h);d.push(e)}return d},w={x:f,filter:p,bias:v,preluActivationWeights:b},k={strides:r,pad:i,dataFormat:o,dilations:a,dimRoundingMode:s,activation:u,leakyreluAlpha:h};if(null==l){const e=H5(((e,t,n)=>{let r=N4.runKernel(y3,w,k);return n([t,e,r]),m&&(r=s9(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:x}}));return e(f,p)}{const e=H5(((e,t,n,r)=>{let i=N4.runKernel(y3,w,k);return r([t,e,i,n]),m&&(i=s9(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:x}}));return e(f,p,v)}}});const s8=B4({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],a=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=s9(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=s9(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={x:s,dy:l},c={strides:r,pad:i,dimRoundingMode:a,dilations:o,filterShape:n};return N4.runKernel(Q0,u,c)}});const l8=B4({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],a=arguments.length>6?arguments[6]:void 0,s=t,l=!1;3===t.rank&&(l=!0,s=s9(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={dy:s,filter:n},c={strides:r,pad:i,dimRoundingMode:a,dilations:o,inputShape:e},h=N4.runKernel(J0,u,c);return l?s9(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});const u8=B4({fusedMatMul_:function(e){let{a:t,b:n,transposeA:r=!1,transposeB:i=!1,bias:o,activation:a="linear",preluActivationWeights:s,leakyreluAlpha:l=.2}=e;if(!1===o8(N4.state.gradientDepth,a)){let e=r7(t,n,r,i);return null!=o&&(e=j5(e,o)),i8(e,a,s,l)}let u=j4(t,"a","fused matMul"),c=j4(n,"b","fused matMul");[u,c]=k4(u,c);const h=r?u.shape[u.rank-2]:u.shape[u.rank-1],d=i?c.shape[c.rank-1]:c.shape[c.rank-2],p=r?u.shape[u.rank-1]:u.shape[u.rank-2],f=i?c.shape[c.rank-2]:c.shape[c.rank-1],m=u.shape.slice(0,-2),g=c.shape.slice(0,-2),y=TZ(m),v=TZ(g);SZ(h===d,(()=>`Error in fused matMul: inner shapes (${h}) and (${d}) of Tensors with shapes ${u.shape} and ${c.shape} and transposeA=${r} and transposeB=${i} must match.`));const b=u6(u.shape.slice(0,-2),c.shape.slice(0,-2)).concat([p,f]),x=s9(u,r?[y,h,p]:[y,p,h]),w=s9(c,i?[v,f,d]:[v,d,f]);let k,S;null!=o&&(k=j4(o,"bias","fused matMul"),[k]=k4(k,u),u6(b,k.shape)),null!=s&&(S=j4(s,"prelu weights","fused matMul"));const E=(e,t)=>{const[n,s,l,u]=t,c=n8(s9(e,l.shape),l,a);let h,d;if(r||i?!r&&i?(h=r7(c,s,!1,!1),d=r7(c,n,!0,!1)):r&&!i?(h=r7(s,c,!1,!0),d=r7(n,c,!1,!1)):(h=r7(s,c,!0,!0),d=r7(c,n,!0,!0)):(h=r7(c,s,!1,!0),d=r7(n,c,!0,!1)),null!=o){return[h,d,r8(u,c)]}return[h,d]},I={a:x,b:w,bias:k,preluActivationWeights:S},T={transposeA:r,transposeB:i,activation:a,leakyreluAlpha:l};if(null==o){const e=H5(((e,t,n)=>{const r=N4.runKernel(g3,I,T);return n([e,t,r]),{value:s9(r,b),gradFunc:E}}));return e(x,w)}{const e=H5(((e,t,n,r)=>{const i=N4.runKernel(g3,I,T);return r([e,t,i,n]),{value:s9(i,b),gradFunc:E}}));return e(x,w,k)}}});const c8=B4({cropAndResize_:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const a=j4(e,"image","cropAndResize"),s=j4(t,"boxes","cropAndResize","float32"),l=j4(n,"boxInd","cropAndResize","int32"),u=s.shape[0];SZ(4===a.rank,(()=>`Error in cropAndResize: image must be rank 4,but got rank ${a.rank}.`)),SZ(2===s.rank&&4===s.shape[1],(()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${s.shape}.`)),SZ(1===l.rank&&l.shape[0]===u,(()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${s.shape}.`)),SZ(2===r.length,(()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`)),SZ(r[0]>=1&&r[1]>=1,(()=>`cropSize must be atleast [1,1], but was ${r}`)),SZ("bilinear"===i||"nearest"===i,(()=>`method must be bilinear or nearest, but was ${i}`));const c={image:a,boxes:s,boxInd:l},h={method:i,extrapolationValue:o,cropSize:r};return N4.runKernel(q0,c,h)}});const h8=B4({flipLeftRight_:function(e){const t=j4(e,"image","flipLeftRight","float32");SZ(4===t.rank,(()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`));const n={image:t};return N4.runKernel(m1,n,{})}});const d8=B4({grayscaleToRGB_:function(e){const t=j4(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];SZ(t.rank>=2,(()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`)),SZ(1===r,(()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`));const i=new Array(t.rank);return i.fill(1,0,n),i[n]=3,P9(t,i)}});const p8=B4({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(((e,t)=>j4(e,`tensors${t}`,"einsum"))),o={equation:e};return N4.runKernel(o1,i,o)}});const f8=B4({rgbToGrayscale_:function(e){const t=j4(e,"image","RGBToGrayscale"),n=t.rank-1,r=t.shape[n];SZ(t.rank>=2,(()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${t.rank}.`)),SZ(3===r,(()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`));const i=t.dtype,o=M5(t,"float32"),a=z7([.2989,.587,.114]);let s;switch(t.rank){case 2:s=p8("ij,j->i",o,a);break;case 3:s=p8("ijk,k->ij",o,a);break;case 4:s=p8("ijkl,l->ijk",o,a);break;case 5:s=p8("ijklm,m->ijkl",o,a);break;case 6:s=p8("ijklmn,n->ijklm",o,a);break;default:throw new Error("Not a valid tensor rank.")}return s=D9(s,-1),M5(s,i)}});const m8=B4({rotateWithOffset_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const i=j4(e,"image","rotateWithOffset","float32");SZ(4===i.rank,(()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`));const o={image:i},a={radians:t,fillValue:n,center:r};return N4.runKernel(m3,o,a)}});function g8(e,t,n,r,i,o){null==r&&(r=.5),null==i&&(i=Number.NEGATIVE_INFINITY),null==o&&(o=0);const a=e.shape[0];return n=Math.min(n,a),SZ(0<=r&&r<=1,(()=>`iouThreshold must be in [0, 1], but was '${r}'`)),SZ(2===e.rank,(()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`)),SZ(4===e.shape[1],(()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`)),SZ(1===t.rank,(()=>"scores must be a 1D tensor")),SZ(t.shape[0]===a,(()=>`scores has incompatible shape with boxes. Expected ${a}, but was ${t.shape[0]}`)),SZ(0<=o&&o<=1,(()=>`softNmsSigma must be in [0, 1], but was '${o}'`)),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:o}}const y8=B4({nonMaxSuppression_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const o=j4(e,"boxes","nonMaxSuppression","float32"),a=j4(t,"scores","nonMaxSuppression","float32"),s=g8(o,a,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return N4.runKernel(n2,{boxes:o,scores:a},l)}});function v8(e,t,n){const r=function(e,t,n){return function(e,t,n){let r=0,i=e.length,o=0,a=!1;for(;r<i;){o=r+(i-r>>>1);const s=n(t,e[o]);s>0?r=o+1:(i=o,a=!s)}return a?r:-r-1}(e,t,n||b8)}(e,t,n),i=r<0?-(r+1):r;e.splice(i,0,t)}function b8(e,t){return e>t?1:e<t?-1:0}function x8(e,t,n,r,i){return S8(e,t,n,r,i,0)}function w8(e,t,n,r,i,o){return S8(e,t,n,r,i,0,!1,o,!0)}function k8(e,t,n,r,i,o){return S8(e,t,n,r,i,o,!0)}function S8(e,t,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];const u=[];for(let g=0;g<t.length;g++)t[g]>i&&u.push({score:t[g],boxIndex:g,suppressBeginIndex:0});u.sort(T8);const c=o>0?-.5/o:0,h=[],d=[];for(;h.length<n&&u.length>0;){const t=u.pop(),{score:n,boxIndex:o,suppressBeginIndex:a}=t;if(n<i)break;let s=!1;for(let l=h.length-1;l>=a;--l){const n=E8(e,o,h[l]);if(n>=r){s=!0;break}if(t.score=t.score*I8(r,c,n),t.score<=i)break}t.suppressBeginIndex=h.length,s||(t.score===n?(h.push(o),d.push(t.score)):t.score>i&&v8(u,t,T8))}const p=h.length,f=n-p;s&&f>0&&(h.push(...new Array(f).fill(0)),d.push(...new Array(f).fill(0)));const m={selectedIndices:h};return a&&(m.selectedScores=d),l&&(m.validOutputs=p),m}function E8(e,t,n){const r=e.subarray(4*t,4*t+4),i=e.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),h=Math.max(i[0],i[2]),d=Math.max(i[1],i[3]),p=(s-o)*(l-a),f=(h-u)*(d-c);if(p<=0||f<=0)return 0;const m=Math.max(o,u),g=Math.max(a,c),y=Math.min(s,h),v=Math.min(l,d),b=Math.max(y-m,0)*Math.max(v-g,0);return b/(p+f-b)}function I8(e,t,n){const r=Math.exp(t*n*n);return n<=e?r:0}function T8(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}const C8=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY;const o=j4(e,"boxes","nonMaxSuppressionAsync"),a=j4(t,"scores","nonMaxSuppressionAsync"),s=g8(o,a,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;const l=await Promise.all([o.data(),a.data()]),u=l[0],c=l[1],{selectedIndices:h}=x8(u,c,n,r,i);return o!==e&&o.dispose(),a!==t&&a.dispose(),z7(h,"int32")};const A8=B4({nonMaxSuppressionWithScore_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const a=j4(e,"boxes","nonMaxSuppression"),s=j4(t,"scores","nonMaxSuppression"),l=g8(a,s,n,r,i,o);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,o=l.softNmsSigma;const u={boxes:a,scores:s},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:o},h=N4.runKernel(i2,u,c);return{selectedIndices:h[0],selectedScores:h[1]}}});const _8=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const a=j4(e,"boxes","nonMaxSuppressionAsync"),s=j4(t,"scores","nonMaxSuppressionAsync"),l=g8(a,s,n,r,i,o);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,o=l.softNmsSigma;const u=await Promise.all([a.data(),s.data()]),c=u[0],h=u[1],{selectedIndices:d,selectedScores:p}=k8(c,h,n,r,i,o);return a!==e&&a.dispose(),s!==t&&s.dispose(),{selectedIndices:z7(d,"int32"),selectedScores:z7(p)}};const N8=B4({nonMaxSuppressionPadded_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const a=j4(e,"boxes","nonMaxSuppression"),s=j4(t,"scores","nonMaxSuppression"),l=g8(a,s,n,r,i,null),u={boxes:a,scores:s},c={maxOutputSize:l.maxOutputSize,iouThreshold:l.iouThreshold,scoreThreshold:l.scoreThreshold,padToMaxOutputSize:o},h=N4.runKernel(r2,u,c);return{selectedIndices:h[0],validOutputs:h[1]}}});const O8=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const a=j4(e,"boxes","nonMaxSuppressionAsync"),s=j4(t,"scores","nonMaxSuppressionAsync"),l=g8(a,s,n,r,i,null),u=l.maxOutputSize,c=l.iouThreshold,h=l.scoreThreshold,[d,p]=await Promise.all([a.data(),s.data()]),{selectedIndices:f,validOutputs:m}=w8(d,p,u,c,h,o);return a!==e&&a.dispose(),s!==t&&s.dispose(),{selectedIndices:z7(f,"int32"),validOutputs:q5(m,"int32")}};const R8=B4({resizeBilinear_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=j4(e,"images","resizeBilinear");SZ(3===i.rank||4===i.rank,(()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`)),SZ(2===t.length,(()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`)),SZ(!1===r||!1===n,(()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."));let o=i,a=!1;3===i.rank&&(a=!0,o=s9(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const[]=t,s={images:o},l={alignCorners:n,halfPixelCenters:r,size:t},u=N4.runKernel(k2,s,l);return a?s9(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const $8=B4({resizeNearestNeighbor_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=j4(e,"images","resizeNearestNeighbor");SZ(3===i.rank||4===i.rank,(()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`)),SZ(2===t.length,(()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`)),SZ("float32"===i.dtype||"int32"===i.dtype,(()=>"`images` must have `int32` or `float32` as dtype")),SZ(!1===r||!1===n,(()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."));let o=i,a=!1;3===i.rank&&(a=!0,o=s9(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const[]=t,s={images:o},l={alignCorners:n,halfPixelCenters:r,size:t},u=N4.runKernel(x2,s,l);return a?s9(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const D8=B4({bincount_:function(e,t,n){const r=j4(e,"x","bincount"),i=j4(t,"weights","bincount");SZ("int32"===r.dtype,(()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`)),SZ(n>=0,(()=>`size must be non-negative, but got ${n}.`)),SZ(i.size===r.size||0===i.size,(()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`));const o={x:r,weights:i},a={size:n};return N4.runKernel(A0,o,a)}});const P8=B4({lessEqual_:function(e,t){let n=j4(e,"a","lessEqual","string_or_numeric"),r=j4(t,"b","lessEqual","string_or_numeric");[n,r]=k4(n,r),u6(n.shape,r.shape);const i={a:n,b:r};return N4.runKernel(O1,i)}});const M8=B4({round_:function(e){const t={x:j4(e,"x","round")};return N4.runKernel(T2,t)}});const F8=B4({threshold_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const i=j4(e,"image","threshold"),o=i.shape[0]*i.shape[1];let a,s,l,u,c=U5(z7([r]),255);if(SZ(3===i.rank,(()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`)),SZ(3===i.shape[2]||1===i.shape[2],(()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`)),SZ("int32"===i.dtype||"float32"===i.dtype,(()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`)),SZ("otsu"===t||"binary"===t,(()=>`Method must be binary or otsu, but was ${t}`)),3===i.shape[2]){[a,s,l]=M7(i,[1,1,1],-1);const e=U5(a,.2989),t=U5(s,.587),n=U5(l,.114);u=j5(j5(e,t),n)}else u=e;if("otsu"===t){c=function(e,t){let n,r,i,o,a,s,l=z7([-1]),u=z7([0]),c=z7([0]);for(let h=0;h<e.size-1;h++){n=_7(e,0,h+1),r=_7(e,h+1),a=B5(G9(n),t),s=B5(G9(r),t);const d=G9(U5(n,S7(0,n.size)));i=B5(d,G9(n));const p=t6(r.shape,n.size),f=j5(S7(0,r.size),p),m=U5(r,f);o=B5(G9(m),G9(r));const g=i6(i,o),y=i6(i,o),v=U5(a,s);c=U5(U5(v,g),y);const b=j9(c,u);u=V7(b,c,u),l=V7(b,z7([h]),l)}return l}(D8(M5(M8(u),"int32"),V4([]),256),o)}const h=n?P8(u,c):j9(u,c);return M5(U5(h,255),"int32")}});const L8=B4({transform_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0;const a=j4(e,"image","transform","float32"),s=j4(t,"transforms","transform","float32");SZ(4===a.rank,(()=>`Error in transform: image must be rank 4,but got rank ${a.rank}.`)),SZ(2===s.rank&&(s.shape[0]===a.shape[0]||1===s.shape[0])&&8===s.shape[1],(()=>"Error in transform: Input transform should be batch x 8 or 1 x 8")),SZ(null==o||2===o.length,(()=>`Error in transform: outputShape must be [height, width] or null, but got ${o}.`));const l={image:a,transforms:s},u={interpolation:n,fillMode:r,fillValue:i,outputShape:o};return N4.runKernel(s3,l,u)}});const j8=B4({less_:function(e,t){let n=j4(e,"a","less","string_or_numeric"),r=j4(t,"b","less","string_or_numeric");[n,r]=k4(n,r),u6(n.shape,r.shape);const i={a:n,b:r};return N4.runKernel(N1,i)}});const z8=B4({bandPart_:function(e,t,n){const r=j4(e,"a","bandPart");SZ(r.rank>=2,(()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`));const i=r.shape,[o,a]=r.shape.slice(-2);let s,l;"number"===typeof t?(SZ(t%1===0,(()=>`bandPart(): numLower must be an integer, got ${t}.`)),SZ(t<=o,(()=>`bandPart(): numLower (${t}) must not be greater than the number of rows (${o}).`)),s=j4(t<0?o:t,"numLower","bandPart")):(SZ("int32"===t.dtype,(()=>"bandPart(): numLower's dtype must be an int32.")),s=V7(j8(t,0),o,l7(t,o))),"number"===typeof n?(SZ(n%1===0,(()=>`bandPart(): numUpper must be an integer, got ${n}.`)),SZ(n<=a,(()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${a}).`)),l=j4(n<0?a:n,"numUpper","bandPart")):(SZ("int32"===n.dtype,(()=>"bandPart(): numUpper's dtype must be an int32.")),l=V7(j8(n,0),a,l7(n,a)));const u=s9(S7(0,o,1,"int32"),[-1,1]),c=S7(0,a,1,"int32"),h=i6(u,c),d=n7(P8(h,s),z9(h,c7(l))),p=p7([o,a],r.dtype);return s9(L7(W7(s9(r,[-1,o,a])).map((e=>V7(d,e,p)))),i)}});function B8(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return a6(e);if(1!==e.rank&&null===n)return B8(s9(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return G9(a6(e),n);if(t===1/0)return V9(a6(e),n);if(t===-1/0)return s7(a6(e),n);if("euclidean"===t||2===t)return W5(G9(r6(a6(e),q5(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(n)&&2===n.length){if(1===t)return V9(G9(a6(e),n[0]),n[1]-1);if(t===1/0)return V9(G9(a6(e),n[1]),n[0]);if(t===-1/0)return s7(G9(a6(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return W5(G9(V5(e),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const U8=B4({norm_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=B8(e=j4(e,"x","norm"),t,n);let o=i.shape;if(r){const t=$Z(n,e.shape);o=Y9(i.shape,t)}return s9(i,o)}});const W8=B4({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,SZ(null!=e&&e.length>0,(()=>"Gram-Schmidt process: input must not be null, undefined, or empty"));const n=e[0].shape[0];for(let t=1;t<e.length;++t)SZ(e[t].shape[0]===n,(()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[t].shape[0]} vs. ${n})`))}else t=!0,e=M7(e,e.shape[0],0).map((e=>F7(e,[0])));SZ(e.length<=e[0].shape[0],(()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`));const n=[],r=e;for(let i=0;i<e.length;++i)n.push(N4.tidy((()=>{let e=r[i];if(i>0)for(let t=0;t<i;++t){const r=U5(G9(U5(n[t],e)),n[t]);e=i6(e,r)}return B5(e,U8(e,"euclidean"))})));return t?L7(n,0):n}});function V8(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return N4.tidy((()=>{SZ(2===e.shape.length,(()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`));const n=e.shape[0],r=e.shape[1];let i=M9(n),o=F5(e);const a=B7([[1]],[1,1]);let s=F5(a);const l=n>=r?r:n;for(let e=0;e<l;++e){const t=o,l=s,u=i;[s,o,i]=N4.tidy((()=>{const t=_7(o,[e,e],[n-e,1]),l=U8(t),u=_7(o,[e,e],[1,1]),c=V7(j9(u,0),B7([[-1]]),B7([[1]])),h=i6(u,U5(c,l)),d=B5(t,h);s=1===d.shape[0]?F5(a):g9([a,_7(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);const p=c7(B5(r7(c,h),l)),f=_7(o,[e,0],[n-e,r]),m=U5(p,s),g=q7(s);if(0===e)o=i6(f,r7(m,r7(g,f)));else{const t=i6(f,r7(m,r7(g,f)));o=g9([_7(o,[0,0],[e,r]),t],0)}const y=q7(m),v=_7(i,[0,e],[n,i.shape[1]-e]);if(0===e)i=i6(v,r7(r7(v,s),y));else{const t=i6(v,r7(r7(v,s),y));i=g9([_7(i,[0,0],[n,e]),t],1)}return[s,o,i]})),X4([t,l,u])}return!t&&n>r&&(i=_7(i,[0,0],[n,r]),o=_7(o,[0,0],[r,r])),[i,o]}))}const G8=B4({qr_:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(SZ(e.rank>=2,(()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`)),2===e.rank)return V8(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce(((e,t)=>e*t)),r=W7(s9(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),i=[],o=[];r.forEach((e=>{const[n,r]=V8(e,t);i.push(n),o.push(r)}));return[s9(L7(i,0),e.shape),s9(L7(o,0),e.shape)]}}});var H8;!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(H8||(H8={}));const q8=B4({squaredDifference_:function(e,t){let n=j4(e,"a","squaredDifference"),r=j4(t,"b","squaredDifference");[n,r]=k4(n,r),u6(n.shape,r.shape);const i={a:n,b:r};return N4.runKernel(X2,i,{})}});const K8={flipLeftRight:h8,grayscaleToRGB:d8,resizeNearestNeighbor:$8,resizeBilinear:R8,rgbToGrayscale:f8,rotateWithOffset:m8,cropAndResize:c8,nonMaxSuppression:y8,nonMaxSuppressionAsync:C8,nonMaxSuppressionWithScore:A8,nonMaxSuppressionWithScoreAsync:_8,nonMaxSuppressionPadded:N8,nonMaxSuppressionPaddedAsync:O8,threshold:F8,transform:L8},X8={bandPart:z8,gramSchmidt:W8,qr:G8};const Y8=class{static sgd(e){return new d6(e)}static momentum(e,t){return new p6(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}static rmsprop(e){return new f6(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]&&arguments[4])}static adam(){return new o6(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)}static adadelta(){return new e6(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}static adamax(){return new h6(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0)}static adagrad(e){return new n6(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1)}},Q8="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:e=>e();function J8(){return new Promise((e=>Q8((()=>e()))))}function Z8(e,t){const n=e[0].length;e.forEach(((e,t)=>{SZ(e.length===n,(()=>`Error in concat${n}D: rank of tensors[${t}] must be the same as the rank of the rest (${n})`))})),SZ(t>=0&&t<n,(()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`));const r=e[0];e.forEach(((e,i)=>{for(let o=0;o<n;o++)SZ(o===t||e[o]===r[o],(()=>`Error in concat${n}D: Shape of tensors[${i}] (${e}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`))}))}function eee(e,t){const n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}var tee;function nee(e,t,n){let r=new Array;if(null==n&&null==t)return r;if(null==t)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(null==n)return r;if(e+n.length!==r.length)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.rank = ${e+n.length}, but shape.rank = ${r.length}`);for(let i=1;i<n.length;++i){const o=n[i],a=r[r.length-n.length+i],s=r[a];if(o>=0)if(s>=0){if(s!==o)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.shape[${i+e}] = ${o} but shape[${i+e}] = ${s}`)}else r[a]=o}return r}function ree(e){const t={FIRST_DIM_SIZE:tee.FIRST_DIM_SIZE,VALUE_ROWIDS:tee.VALUE_ROWIDS,ROW_LENGTHS:tee.ROW_LENGTHS,ROW_SPLITS:tee.ROW_SPLITS,ROW_LIMITS:tee.ROW_LIMITS,ROW_STARTS:tee.ROW_STARTS},n=[];for(const r of e){if(!(r in t))break;n.push(t[r])}return n}function iee(e){return 0===e.length?0:e[0]===tee.FIRST_DIM_SIZE?e.length-1:e.length}function oee(e,t){if(null==e||null==t)return;const n=e.length,r=t.length;if(n>=r)throw new Error(`defaultValue.shape=${e} and ragged tensor flatValues.shape=${t}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(n,r-1);++i){const n=e[i],r=t[i+1];if(n>=0&&r>=0&&1!==n&&n!==r)throw new Error(`defaultValue.shape=${e}, and ragged tensor input flatValues.shape=${t} are incompatible: defaultValue.shape[${i-e.length}] = ${n} but ragged tensor input.flatValues.shape[${i-e.length}] = ${r}`)}}!function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(tee||(tee={}));const aee=30;function see(e){return e<=aee?e:WZ(e,Math.floor(Math.sqrt(e)))}function lee(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function uee(e,t,n){let r=[];if(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])r=r.concat(t.slice(0)),r.push(e[0]/n),r=r.concat(e.slice(1));else{r=r.concat(e[0]);const n=t.length;for(let i=0;i<n;++i)r=r.concat([e[i+1]/t[i],t[i]]);r=r.concat(e.slice(n+1))}return r}function cee(e,t){const n=[];if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){n.push(t);for(let r=t+1;r<e;++r)r<=2*t?(n.push(r),n.push(r-(t+1))):n.push(r)}else{const r=[],i=[];for(let n=1;n<e;++n)n>=2*t+1||n%2===1?i.push(n):r.push(n);n.push(...r),n.push(0),n.push(...i)}return n}function hee(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i=[];r?i.push(e[0]/n):i.push(e[0]*n);for(let o=1;o<e.length;++o)o<=t.length?r?i.push(t[o-1]*e[o]):i.push(e[o]/t[o-1]):i.push(e[o]);return i}function dee(e,t){const n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function pee(e,t,n){const r=e.slice(0,1);for(let i=0;i<n;++i)r.push(e[i+1]-t[i][0]-t[i][1]);return r}function fee(e,t){const n=e.shape.length,r=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if("int32"!==t.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[r-1]} vs. ${n}`);if(0===TZ(e.shape))throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);const i=t.shape,o=i[i.length-1];let a=1;for(let h=0;h<i.length-1;++h)a*=i[h];const s=e.shape,l=i.slice();l.pop();let u=1;for(let h=o;h<n;++h)u*=s[h],l.push(s[h]);const c=[...VZ(e.shape).map((e=>e/u)),1].slice(0,o);return[l,a,u,c]}function mee(e,t,n){const r=t.rank>1?t.shape[t.rank-1]:1,i=t.rank>1?t.rank-1:1,o=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(o+` update.rank < ${i}. `);if(e.length<r+(n.rank-i))throw new Error(o+` Output shape length < ${r+(n.rank-i)}`);if(n.rank!==i+e.length-r)throw new Error(o+" update.rank != "+(i+e.length-r));for(let a=0;a<i;++a)if(n.shape[a]!==t.shape[a])throw new Error(o+` updates.shape[${a}] (${n.shape[a]}) != indices.shape[${a}] (${t.shape[a]}).`);for(let a=0;a<n.rank-i;++a)if(n.shape[a+i]!==e[a+r])throw new Error(o+` updates.shape[${a+i}] (${n.shape[a+i]}) != shape[${a+i}] (${e[a+i]})`)}function gee(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if("int32"!==t.dtype)throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(0===n.length){if(0===t.size)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(0===e.size)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}mee(n,t,e)}function yee(e,t,n){const r=t.shape.length,i=r>1?t.shape[r-1]:1,o=n.length;let a=1;for(let l=i;l<o;++l)a*=n[l];const s=i<1?1:i;return{sliceRank:i,numUpdates:TZ(t.shape)/s,sliceSize:a,strides:[...VZ(n.slice(0,i)),1],outputSize:TZ(n)}}const vee=1.7580993408473768,bee=1.0507009873554805,xee=.3275911,wee=.254829592,kee=-.284496736,See=1.421413741,Eee=-1.453152027,Iee=1.061405429;function Tee(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);const n=new Float32Array(2*e.length);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function Cee(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function Aee(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let i=0;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1];return{real:n,imag:r}}function _ee(e){const t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let i=2;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1];return{real:n,imag:r}}function Nee(e,t){return{real:e[2*t],imag:e[2*t+1]}}function Oee(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function Ree(e,t){const n=new Float32Array(e/2),r=new Float32Array(e/2);for(let i=0;i<Math.ceil(e/2);i++){const o=(t?2:-2)*Math.PI*(i/e);n[i]=Math.cos(o),r[i]=Math.sin(o)}return{real:n,imag:r}}function $ee(e,t,n){const r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}const Dee="->",Pee=/->/g,Mee=",",Fee="...";function Lee(e,t){const n=((e=e.replace(/\s/g,"")).length-e.replace(Pee,"").length)/Dee.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${Dee}").`);const[r,i]=e.split(Dee);SZ(-1===r.indexOf(Fee),(()=>`The ellipsis notation ("${Fee}") is not supported yet.`));const o=r.split(Mee),a=o.length;if(t!==a)throw new Error(`Expected ${a} input tensors, received ${t}`);if(a>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const s=[];for(let h=0;h<i.length;++h){const e=i[h];if(!o.some((t=>-1!==t.indexOf(e))))throw new Error(`Output subscripts contain the label ${e} not present in the input subscripts.`);-1===s.indexOf(e)&&s.push(e)}for(let h=0;h<r.length;++h){const e=r[h];-1===s.indexOf(e)&&e!==Mee&&s.push(e)}const l=new Array(o.length);for(let h=0;h<a;++h){if(new Set(o[h].split("")).size!==o[h].length)throw new Error(`Found duplicate axes in input component ${o[h]}. Support for duplicate axes in input is not implemented yet.`);l[h]=[];for(let e=0;e<o[h].length;++e)l[h].push(s.indexOf(o[h][e]))}const u=s.length,c=[];for(let h=i.length;h<u;++h)c.push(h);return{allDims:s,summedDims:c,idDims:l}}function jee(e,t){let n=new Array(e);n.fill(-1);for(let i=0;i<t.length;++i)n[t[i]]=i;const r=[];for(let i=0;i<e;++i)-1===n[i]&&r.push(i);return n=n.filter((e=>-1!==e)),{permutationIndices:n,expandDims:r}}function zee(e,t,n){const r=new Array(e);for(let i=0;i<n.length;++i){const e=n[i].shape;for(let n=0;n<t[i].length;++n)void 0===r[t[i][n]]?r[t[i][n]]=e[n]:SZ(r[t[i][n]]===e[n],(()=>`Expected dimension ${r[t[i][n]]} at axis ${n} of input shaped ${JSON.stringify(e)}, but got dimension ${e[n]}`))}}function Bee(e,t){const n=e,r=[];let i=0;0===e.length&&n.push(-1),i=e.length+1;for(let a=0;a<i;++a)r.push([]);const o=[];for(let a=0;a<n.length;++a){const e=Wee(t,n[a]);for(const t of e)-1===o.indexOf(t)&&(r[a].push(t),o.push(t))}return{path:n,steps:r}}function Uee(e){return e.every(((e,t)=>e===t))}function Wee(e,t){const n=[];for(let r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function Vee(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)SZ(e.shape[n]%t===0,(()=>"Number of splits must evenly divide the axis.")),r=new Array(t).fill(e.shape[n]/t);else{const i=t.reduce(((e,t)=>(-1===t&&(e+=1),e)),0);SZ(i<=1,(()=>"There should be only one negative value in split array."));const o=t.indexOf(-1);if(-1!==o){const r=t.reduce(((e,t)=>t>0?e+t:e));t[o]=e.shape[n]-r}SZ(e.shape[n]===t.reduce(((e,t)=>e+t)),(()=>"The sum of sizes must match the size of the axis dimension.")),r=t}return r}function Gee(e){return`Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ${e}`}function Hee(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function qee(e,t,n){return`indices(${e}, 0) is invalid: ${t} >= ${n}`}function Kee(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function Xee(e,t){return`size ${e} must be non-negative, not ${t}`}function Yee(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function Qee(e,t){return`Input to reshape is a SparseTensor with ${TZ(e)}\n  dense values, but the requested shape requires a multiple of ${TZ(t)}. inputShape=${e} outputShape= ${t}`}function Jee(e,t){return`Input to reshape is a tensor with ${TZ(e)} dense values, but the requested shape has ${TZ(t)}. inputShape=${e} outputShape=${t}`}function Zee(){return"segment ids must be >= 0"}function ete(){return"segment ids are not increasing"}function tte(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function nte(e,t,n){return`Bad: indices[${e}] == ${t} out of range [0, ${n})`}function rte(e,t){let n,r=!1;for(e<=aee?(n=e,r=!0):n=WZ(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=WZ(e,n+1);return n}function ite(e,t,n){const r=[],i=e.length;for(let o=0;o<i;o++)o!==t?r.push(e[o]):r.push(n);return r}function ote(e,t,n,r){const i=t.shape.length,o=e.shape.length;if(0!==r&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>o)throw new Error(`batchDims (${r}) must be less than rank(x) (\n    ${o}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let h=0;h<r;++h)if(e.shape[h]!==t.shape[h])throw new Error(`x.shape[${h}]: ${e.shape[h]} should be equal to indices.shape[${h}]: ${t.shape[h]}.`);const a=e.shape[n],s=[];let l=1,u=1,c=1;for(let h=0;h<r;++h)s.push(e.shape[h]),l*=e.shape[h];for(let h=r;h<n;h++)s.push(e.shape[h]),u*=e.shape[h];for(let h=r;h<i;h++)s.push(t.shape[h]);for(let h=n+1;h<o;h++)s.push(e.shape[h]),c*=e.shape[h];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:a,outputShape:s}}function ate(e){try{return e.map((e=>K3(e)))}catch(hNe){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${hNe}`)}}function ste(e){return e.map((e=>q3(e)))}function lte(e,t){const n=[];for(let o=0;o<t.length;o++)t[o]&&n.push(o);const r=P5(e,"int32"),i=P5([n.length,e.length],"int32");for(let o=0;o<n.length;o++){const t=r.indexToLoc(n[o]),a=o*e.length;i.values.set(t,a)}return i.toTensor()}!function(){for(const e of m6)J5(e)}();const ute={kernelName:l0,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>U5(e,t8(M5(n,"float32"),-1))}}},cte={kernelName:u0,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=V5(M5(n,"float32")),r=W5(i6(q5(1),t));return c7(B5(e,r))}}}},hte={kernelName:c0,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=W5(i6(V5(M5(n,"float32")),1));return B5(e,t)}}}},dte={kernelName:h0,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=u6(n.shape,r.shape);return{a:()=>{let t=e;const r=l6(n.shape,i);return r.length>0&&(t=G9(t,r)),s9(t,n.shape)},b:()=>{let t=e;const n=l6(r.shape,i);return n.length>0&&(t=G9(t,n)),s9(t,r.shape)}}}},pte={kernelName:d0,saveAllInputs:!0,gradFunc:(e,t)=>{const n={};return t.forEach(((t,r)=>{n[r]=()=>e.clone()})),n}},fte={kernelName:m0,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>G5(n)}}},mte={kernelName:g0,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>G5(n)}}},gte={kernelName:y0,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>B5(e,W5(i6(q5(1),V5(M5(n,"float32")))))}}},yte={kernelName:v0,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=W5(j5(q5(1),V5(M5(n,"float32"))));return B5(e,t)}}}},vte={kernelName:w0,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=u6(n.shape,r.shape);return{a:()=>{const t=j5(V5(n),V5(r));let o=U5(e,B5(r,t));const a=l6(n.shape,i);return a.length>0&&(o=G9(o,a)),s9(o,n.shape)},b:()=>{const t=j5(V5(n),V5(r));let o=c7(U5(e,B5(n,t)));const a=l6(r.shape,i);return a.length>0&&(o=G9(o,a)),s9(o,r.shape)}}}},bte={kernelName:b0,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>B5(e,j5(V5(M5(n,"float32")),1))}}},xte={kernelName:x0,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>B5(e,i6(q5(1),V5(M5(n,"float32"))))}}};const wte=B4({avgPool3dGrad_:function(e,t,n,r,i,o){const a=j4(e,"dy","avgPool3dGrad"),s=j4(t,"input","avgPool3dGrad");let l=a,u=s,c=!1;4===s.rank&&(c=!0,l=s9(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),u=s9(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),SZ(5===l.rank,(()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`)),SZ(5===u.rank,(()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`)),a9("avgPool3dGrad",i,o);const h={dy:l,input:u},d={filterSize:n,strides:r,pad:i,dimRoundingMode:o},p=N4.runKernel(I0,h,d);return c?s9(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}}),kte={kernelName:E0,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:i,strides:o,pad:a,dimRoundingMode:s}=n;return{x:()=>wte(e,r,i,o,a,s)}}};const Ste=B4({avgPoolGrad_:function(e,t,n,r,i){const o=j4(e,"dy","avgPoolGrad"),a=j4(t,"input","avgPoolGrad");SZ(a.rank===o.rank,(()=>`Rank of input (${a.rank}) does not match rank of dy (${o.rank})`));let s=a,l=o,u=!1;3===a.rank&&(u=!0,s=s9(a,[1,a.shape[0],a.shape[1],a.shape[2]]),l=s9(o,[1,o.shape[0],o.shape[1],o.shape[2]])),SZ(4===l.rank,(()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`)),SZ(4===s.rank,(()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${s.rank}.`));const c={dy:l,input:s},h={filterSize:n,strides:r,pad:i},d=N4.runKernel(S0,c,h);return u?s9(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),Ete={kernelName:k0,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{filterSize:i,strides:o,pad:a}=n;return{x:()=>Ste(e,r,i,o,a)}}},Ite={kernelName:T0,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{const[r,i]=t,{transposeA:o,transposeB:a}=n;return o||a?!o&&a?{a:()=>r7(e,i,!1,!1),b:()=>r7(e,r,!0,!1)}:o&&!a?{a:()=>r7(i,e,!1,!0),b:()=>r7(r,e,!1,!1)}:{a:()=>r7(i,e,!0,!0),b:()=>r7(e,r,!0,!0)}:{a:()=>r7(e,i,!1,!0),b:()=>r7(r,e,!0,!1)}}};const Tte=B4({spaceToBatchND_:function(e,t,n){const r=j4(e,"x","spaceToBatchND");SZ(r.rank>=1+t.length,(()=>`input rank ${r.rank} should be > than [blockShape] ${t.length}`)),SZ(n.length===t.length,(()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`)),SZ(r.shape.reduce(((e,r,i)=>i>0&&i<=t.length?e&&(r+n[i-1][0]+n[i-1][1])%t[i-1]===0:e),!0),(()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`));const i={x:r},o={blockShape:t,paddings:n};return N4.runKernel(B2,i,o)}}),Cte={kernelName:C0,gradFunc:(e,t,n)=>{const{blockShape:r,crops:i}=n;return{x:()=>Tte(e,r,i)}}},Ate={kernelName:"BroadcastTo",gradFunc:(e,t,n)=>{const r=n,i=r.inputShape,o=r.shape,a=Array.from(o);for(let l=i.length-1;l>=0;l--)if(i[l]===o[l])a[l]=1;else if(1!==i[l])throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${o}].`);const s=[];for(let l=0;l<a.length;l++)a[l]>1&&s.push(l);return{x:()=>G9(e,s,!0)}}},_te={kernelName:O0,gradFunc:e=>({x:()=>e.clone()})},Nte={kernelName:R0,gradFunc:e=>({x:()=>G5(e)})},Ote={kernelName:$0,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{clipValueMin:i,clipValueMax:o}=n;return{x:()=>V7(n7(z9(r,i),P8(r,o)),e,G5(e))}}},Rte={kernelName:P0,inputsToSave:["x"],gradFunc:ute.gradFunc},$te={kernelName:M0,saveAllInputs:!0,gradFunc:(e,t,n)=>{const r=t.map((e=>e.shape)),{axis:i}=n,o=$Z(i,t[0].shape)[0],a=r.map((e=>e[o]));return M7(e,a,o).map((e=>()=>e))}},Dte={kernelName:F0,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,i]=t,{dilations:o,strides:a,pad:s,dataFormat:l}=n;return SZ(n9(o),(()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`)),{x:()=>S9(r.shape,e,i,a,s,l),filter:()=>Z7(r,e,i.shape,a,s,l)}}},Pte={kernelName:j0,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{const[r,i]=t,{strides:o,pad:a,dataFormat:s,dimRoundingMode:l}=n;return{dy:()=>w9(e,i,o,a,s,1,l),filter:()=>Z7(e,r,i.shape,o,a,s,l)}}};const Mte=B4({conv3DBackpropFilter_:function(e,t,n,r,i){let o=e;4===e.rank&&(o=s9(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let a=t;4===a.rank&&(a=s9(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),SZ(5===o.rank,(()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${o.shape}.`)),SZ(5===a.rank,(()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${a.shape}.`)),SZ(5===n.length,(()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`)),SZ(o.shape[4]===n[3],(()=>`Error in conv3dDerFilter: depth of input ${o.shape[4]}) must match input depth in filter (${n[3]}.`)),SZ(a.shape[4]===n[4],(()=>`Error in conv3dDerFilter: depth of dy (${a.shape[4]}) must match output depth for filter (${n[4]}).`));const s={x:o,dy:a},l={strides:r,pad:i,filterShape:n};return N4.runKernel(B0,s,l)}}),Fte={kernelName:z0,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:i,pad:o}=n;SZ(n9(r),(()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`));const[a,s]=t;return{x:()=>T9(a.shape,e,s,i,o),filter:()=>Mte(a,e,s.shape,i,o)}}};const Lte=B4({sin_:function(e){const t={x:j4(e,"x","sin","float32")};return N4.runKernel(D2,t)}}),jte={kernelName:W0,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>U5(c7(Lte(M5(n,"float32"))),e)}}};const zte=B4({sinh_:function(e){const t={x:j4(e,"x","sinh")};return N4.runKernel(P2,t)}}),Bte={kernelName:V0,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>U5(zte(M5(n,"float32")),e)}}};const Ute=B4({cumsum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i={x:j4(e,"x","cumsum")},o={axis:t,exclusive:n,reverse:r};return N4.runKernel(H0,i,o)}}),Wte={kernelName:H0,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:i,exclusive:o,reverse:a}=n;return{x:()=>{const t=J9([i],r.rank);let n=Ute(e,i,o,!a);return null!=t&&(n=q7(n,t)),n}}}},Vte={kernelName:Y0,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:r,strides:i,pad:o,dimRoundingMode:a}=n,s=null==r?[1,1]:r;SZ(n9(s),(()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`));const[l,u]=t;return SZ(4===l.rank,(()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`)),SZ(4===u.rank,(()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`)),SZ(l.shape[3]===u.shape[2],(()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`)),SZ(r9(i,s),(()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${s}'.`)),a9("depthwiseConv2d",o,a),{x:()=>l8(l.shape,e,u,i,o,s,a),filter:()=>s8(l,e,u.shape,i,o,s,a)}}},Gte={kernelName:e1,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[r,i]=t,o={x:r,filter:i,dy:e},a={x:r,filter:i,dy:e};return{x:()=>N4.runKernel(t1,o,n),filter:()=>N4.runKernel(n1,a,n)}}},Hte={kernelName:a1,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t,r={dy:e,y:n};return{x:()=>N4.runKernel(s1,r)}}},qte={kernelName:l1,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=U5($9(c7(V5(n))),2/Math.sqrt(Math.PI));return{x:()=>U5(e,r)}}},Kte={kernelName:c1,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>U5(e,n)}}},Xte={kernelName:h1,inputsToSave:["input"],gradFunc:(e,t)=>{const[n]=t;return{input:()=>s9(e,n.shape)}}},Yte={kernelName:d1,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>U5(e,$9(n))}}},Qte={kernelName:g1,gradFunc:e=>({x:()=>G5(e)})},Jte={kernelName:y1,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=u6(n.shape,r.shape);return{a:()=>{const t=B5(e,M5(r,"float32")),o=l6(n.shape,i);return o.length>0?s9(G9(t,o),n.shape):t},b:()=>{let t=U5(e,M5(n,"float32"));const o=l6(r.shape,i);o.length>0&&(t=s9(G9(t,o),r.shape));const a=V5(r);return c7(B5(t,M5(a,"float32")))}}}};const Zte=B4({rsqrt_:function(e){const t={x:j4(e,"x","rsqrt","float32")};return N4.runKernel(C2,t)}}),ene={kernelName:v1,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{const{varianceEpsilon:r}=n,[i,o,a,s]=t,l=null==s?q5(1):s,u=l6(o.shape,i.shape),c=[];if(1===o.rank){for(let e=0;e<i.shape.length-1;++e)c.push(i.shape[e]);c.push(1)}const h=i6(i,o),d=U5(e,l),p=Zte(j5(a,q5(r))),f=U5(U5(U5(p,p),p),q5(-.5));return{x:()=>1===o.rank?s9(U5(U5(e,P9(s9(p,[1,1,1,o.shape[0]]),c)),l),i.shape):s9(U5(U5(e,p),l),i.shape),mean:()=>{let e=U5(U5(p,q5(-1)),d);return 1===o.rank&&(e=G9(e,u)),s9(e,o.shape)},variance:()=>{let e=U5(U5(f,h),d);return 1===o.rank&&(e=G9(e,u)),s9(e,o.shape)},scale:()=>{const t=U5(h,p);let n=U5(e,t);return 1===o.rank&&(n=G9(n,u)),s9(n,o.shape)},offset:()=>{let t=e;return 1===o.rank&&(t=G9(t,u)),s9(t,o.shape)}}}};const tne=B4({unsortedSegmentSum_:function(e,t,n){const r=j4(e,"x","unsortedSegmentSum"),i=j4(t,"segmentIds","unsortedSegmentSum","int32");SZ(AZ(n),(()=>"numSegments must be of dtype int"));const o={x:r,segmentIds:i},a={numSegments:n};return N4.runKernel(h3,o,a)}}),nne={kernelName:b1,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{const[r,i]=t,{axis:o,batchDims:a}=n,s=$Z(o,r.shape)[0],l=(e,t,n)=>()=>{const r=e.shape,i=t.size,a=r.slice(0,s),l=a.length,u=r.slice(o,r.length).slice(1),c=u.length,h=rne(0,l),d=rne(l+1,l+1+c),p=ine([a,[i],u]),f=s9(n,p),m=s9(t,[i]),g=ine([[l],h,d]),y=q7(f,g);let v=tne(y,m,e.shape[s]);const b=Z9(g);return v=q7(v,b),v};if(1===a){const t=r.shape[0],n=r.split(t,0);return{x:()=>{const t=L7(n.map(((t,n)=>l(t,i.slice(n,1),e.slice(n,1))())));return t.reshape(r.shape)},indices:()=>i}}return{x:l(r,i,e),indices:()=>i}}};function rne(e,t){const n=[];for(let r=e;r<t;++r)n.push(r);return n}function ine(e){const t=[];for(let n=0;n<e.length;++n)for(let r=0;r<e[n].length;++r)t.push(e[n][r]);return t}const one={kernelName:k1,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>G5(n),b:()=>G5(r)}}},ane={kernelName:S1,gradFunc:e=>({x:()=>M5(e,"float32")})},sne={kernelName:T1,gradFunc:e=>({x:()=>G5(e)})},lne={kernelName:C1,gradFunc:e=>({x:()=>G5(e)})},une={kernelName:A1,gradFunc:e=>({x:()=>G5(e)})},cne={kernelName:_1,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{alpha:i}=n,o=j9(r,0);return{x:()=>V7(o,e,U5(e,i))}}},hne={kernelName:D1,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>B5(e,j5(n,1))}}},dne={kernelName:$1,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>B5(e,M5(n,"float32"))}}},pne={kernelName:"LogSoftmax",inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{axis:i}=n;return{logits:()=>{const t=$9(r);return i6(e,U5(G9(e,i,!0),t))}}}};const fne=B4({localResponseNormalizationBackprop_:function(e,t,n){const r={x:e,y:t,dy:n},i={depthRadius:arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,bias:arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,alpha:arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,beta:arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5};return N4.runKernel(j1,r,i)}}),mne={kernelName:L1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,i]=t,{depthRadius:o,bias:a,alpha:s,beta:l}=n;return{x:()=>fne(r,i,e,o,a,s,l)}}};function gne(e,t,n,r){return t.rank<n.rank&&(t=s9(t,Y9(t.shape,r))),e.rank<n.rank&&(e=s9(e,Y9(e.shape,r))),{x:()=>U5(e,M5(O9(n,t),e.dtype))}}const yne={kernelName:z1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{reductionIndices:i}=r,o=t[0],a=gne(e,t[1],o,$Z(i,o.shape));return{x:()=>a.x()}}},vne={kernelName:B1,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>U5(e,M5(z9(n,r),"float32")),b:()=>U5(e,M5(j8(n,r),"float32"))}}};const bne=B4({maxPool3dGrad_:function(e,t,n,r,i,o,a){const s=j4(e,"dy","maxPool3dGrad"),l=j4(t,"input","maxPool3dGrad"),u=j4(n,"output","maxPool3dGrad");let c=s,h=l,d=u,p=!1;4===l.rank&&(p=!0,c=s9(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),h=s9(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),d=s9(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),SZ(5===c.rank,(()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`)),SZ(5===h.rank,(()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${h.rank}.`)),SZ(5===d.rank,(()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${d.rank}.`)),a9("maxPool3dGrad",o,a);const f={dy:c,input:h,output:d},m={filterSize:r,strides:i,pad:o,dimRoundingMode:a},g=N4.runKernel(G1,f,m);return p?s9(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}}),xne={kernelName:V1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,i]=t,{filterSize:o,strides:a,pad:s,dimRoundingMode:l}=n;return{x:()=>bne(e,r,i,o,a,s,l)}}};const wne=B4({maxPoolGrad_:function(e,t,n,r,i,o,a){const s=j4(e,"dy","maxPoolGrad"),l=j4(t,"input","maxPoolGrad"),u=j4(n,"output","maxPoolGrad");SZ(l.rank===s.rank,(()=>`Rank of input (${l.rank}) does not match rank of dy (${s.rank})`)),SZ(4===s.rank,(()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${s.rank}.`)),SZ(4===l.rank,(()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`)),a9("maxPoolGrad",o,a);const c={dy:s,input:l,output:u},h={filterSize:r,strides:i,pad:o,dimRoundingMode:a};return N4.runKernel(W1,c,h)}}),kne={kernelName:U1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r,i]=t,{filterSize:o,strides:a,pad:s}=n;return{x:()=>wne(e,r,i,o,a,s)}}},Sne={kernelName:q1,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:i}=n,o=$Z(i,r.shape),a=TZ(X9(r.shape,o)[1]);return{x:()=>{const t=r.shape.slice();o.forEach((e=>{t[e]=1}));const n=s9(e,t);return B5(U5(n,f7(r.shape,"float32")),a)}}}},Ene={kernelName:K1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const r=n,{axis:i}=r,[o,a]=t,s=gne(e,a,o,$Z(i,o.shape));return{x:()=>s.x()}}},Ine={kernelName:X1,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t;return{a:()=>U5(e,M5(P8(n,r),"float32")),b:()=>U5(e,M5(j9(n,r),"float32"))}}},Tne={kernelName:Y1,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:i}=n,o=i.map((e=>e[0]));return{x:()=>_7(e,o,r.shape)}}},Cne={kernelName:Q1,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=u6(n.shape,r.shape);return{a:()=>{const t=l6(n.shape,i);return t.length>0?s9(G9(e,t),n.shape):e},b:()=>{const t=U5(e,c7(F9(B5(n,r)))),o=l6(r.shape,i);return o.length>0?s9(G9(t,o),r.shape):t}}}},Ane={kernelName:Z1,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=u6(n.shape,r.shape);return{a:()=>{const t=U5(e,M5(r,"float32")),o=l6(n.shape,i);return o.length>0?s9(G9(t,o),n.shape):t},b:()=>{const t=U5(e,M5(n,"float32")),o=l6(r.shape,i);return o.length>0?s9(G9(t,o),r.shape):t}}}},_ne={kernelName:e2,gradFunc:e=>({x:()=>c7(e)})},Nne={kernelName:a2,inputsToSave:["indices"],gradFunc:(e,t)=>{const n=t[0];return{indices:()=>p7(n.shape,"float32")}}},One={kernelName:o2,gradFunc:e=>({x:()=>G5(e)})},Rne={kernelName:s2,saveAllInputs:!0,gradFunc:(e,t,n)=>{const{axis:r}=n;return W7(e,r).map((e=>()=>e))}},$ne={kernelName:l2,inputsToSave:["x"],gradFunc:(e,t,n)=>{const r=t[0],{paddings:i}=n,o=i.map((e=>e[0]));return{x:()=>_7(e,o,r.shape)}}},Dne={kernelName:u2,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{const[n,r,i]=t,o=n,a=r,s=u6(o.shape,a.shape);return{a:()=>{const t=M5(a,"float32");let n=U5(e,U5(t,r6(o,i6(t,q5(1)))));const r=l6(o.shape,s);return r.length>0&&(n=G9(n,r)),s9(n,o.shape)},b:()=>{const t=j9(o,0),n=V7(t,U9(o),G5(o));let r=U5(e,U5(i,n));const l=l6(a.shape,s);return l.length>0&&(r=G9(r,l)),s9(r,a.shape)}}}},Pne={kernelName:c2,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{const[n,r]=t,i=j9(n,0);return{x:()=>V7(i,e,U5(e,r)),alpha:()=>{let t=V7(i,G5(e),U5(e,n));const o=l6(r.shape,e.shape);return o.length>0&&(t=G9(t,o)),s9(t,r.shape)}}}};const Mne=B4({cumprod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i={x:j4(e,"x","cumprod")},o={axis:t,exclusive:n,reverse:r};return N4.runKernel(G0,i,o)}});function Fne(e,t,n){const r=e.shape.length,i=r-n.length,o=J9(n,r);let a=e;null!=o&&(a=q7(e,o));const s=a.shape.slice(),l=s.splice(r-n.length,n.length).reduce(((e,t)=>e*t),1);s.push(l);let u=function(e,t,n){const r=e.shape.slice();r[n]=1;const i=s9(t,r),o=Mne(e,n,!0,!1),a=Mne(e,n,!0,!0),s=U5(o,a);return U5(i,s)}(a.reshape(s),t,i);if(u=u.reshape(a.shape),null!=o){const e=Z9(o);u=q7(u,e)}return u}const Lne={kernelName:h2,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{axis:i}=n;let o=[];return o=void 0===i||null===i?r.shape.map(((e,t)=>t)):"number"===typeof i?[i]:i,{x:()=>Fne(r,e,o)}}},jne={kernelName:i1,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=u6(n.shape,r.shape);return{a:()=>{const t=B5(e,M5(r,"float32")),o=l6(n.shape,i);return o.length>0?s9(G9(t,o),n.shape):t},b:()=>{let t=U5(e,M5(n,"float32"));const o=l6(r.shape,i);o.length>0&&(t=s9(G9(t,o),r.shape));const a=V5(r);return c7(B5(t,M5(a,"float32")))}}}},zne={kernelName:y2,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>B5(e,c7(V5(n)))}}},Bne={kernelName:E2,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,r=U5(P8(n,6),t8(n));return{x:()=>U5(e,M5(r,"float32"))}}},Une={kernelName:v2,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>U5(e,M5(t8(n),"float32"))}}},Wne={kernelName:b2,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>s9(e,n.shape)}}},Vne={kernelName:k2,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,i={dy:e,images:r};return{images:()=>N4.runKernel(S2,i,n)}}},Gne={kernelName:x2,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[r]=t,i={dy:e,images:r};return{images:()=>N4.runKernel(w2,i,n)}}},Hne={kernelName:I2,gradFunc:(e,t,n)=>{const{dims:r}=n,i=$Z(r,e.shape);return{x:()=>I7(e,i)}}},qne={kernelName:T2,gradFunc:e=>({x:()=>G5(e)})},Kne={kernelName:C2,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>c7(B5(e,U5(r6(n,1.5),2)))}}};const Xne=B4({logicalNot_:function(e){const t={x:j4(e,"x","logicalNot","bool")};return N4.runKernel(M1,t)}}),Yne={kernelName:O2,inputsToSave:["condition"],gradFunc:(e,t)=>{const[n]=t;return{condition:()=>M5(G5(n),"float32"),t:()=>U5(e,M5(n,e.dtype)),e:()=>U5(e,M5(Xne(n),e.dtype))}}},Qne={kernelName:R2,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=j9(n,q5(0)),r=q5(vee),i=q5(bee),o=U5(e,i),a=U5(U5(e,r),$9(M5(n,"float32")));return V7(t,o,a)}}}},Jne={kernelName:F2,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>U5(e,U5(n,i6(q5(1),n)))}}},Zne={kernelName:M2,gradFunc:e=>({x:()=>G5(e)})};const ere=B4({cos_:function(e){const t={x:j4(e,"x","cos","float32")};return N4.runKernel(W0,t)}}),tre={kernelName:D2,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>U5(ere(M5(n,"float32")),e)}}};const nre=B4({cosh_:function(e){const t={x:j4(e,"x","cosh","float32")};return N4.runKernel(V0,t)}}),rre={kernelName:P2,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>U5(nre(M5(n,"float32")),e)}}},ire={kernelName:$2,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{begin:i,size:o}=n,a=r.shape,[s,l]=z6(r,i,o),u=[];for(let c=0;c<e.rank;c++)u.push([s[c],a[c]-s[c]-l[c]]);return{x:()=>g7(e,u)}}},ore={kernelName:W2,outputsToSave:[!0],gradFunc:(e,t,n)=>{const[r]=t,{dim:i}=n,o=U5(e,r);return{logits:()=>i6(o,U5(G9(o,[i],true),r))}}},are={kernelName:L2,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>U5(e,A7(n))}}};const sre=B4({batchToSpaceND_:function(e,t,n){const r=j4(e,"x","batchToSpaceND"),i=t.reduce(((e,t)=>e*t));SZ(r.rank>=1+t.length,(()=>`input rank is ${r.rank} but should be > than blockShape.length ${t.length}`)),SZ(n.length===t.length,(()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`)),SZ(r.shape[0]%i===0,(()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${i}`));const o={x:r},a={blockShape:t,crops:n};return N4.runKernel(C0,o,a)}}),lre={kernelName:B2,gradFunc:(e,t,n)=>{const{blockShape:r,paddings:i}=n;return{x:()=>sre(e,r,i)}}},ure={kernelName:U2,gradFunc:(e,t,n)=>{const{axis:r}=n;return{x:()=>g9(e,r)}}},cre={kernelName:j2,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>B5(e,U5(W5(M5(n,"float32")),2))}}},hre={kernelName:Y2,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>U5(e,U5(M5(n,"float32"),2))}}},dre={kernelName:X2,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=q5(2);return{a:()=>U5(e,U5(i,i6(n,r))),b:()=>U5(e,U5(i,i6(r,n)))}}},pre={kernelName:n3,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,r]=t,i=u6(n.shape,r.shape);return{a:()=>{let t=e;const r=l6(n.shape,i);return r.length>0&&(t=G9(t,r)),s9(t,n.shape)},b:()=>{let t=e;const n=l6(r.shape,i);return n.length>0&&(t=G9(t,n)),s9(c7(t),r.shape)}}}},fre={kernelName:z2,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,i=r.shape.slice(),{axis:o}=n;$Z(o,r.shape).forEach((e=>{i[e]=1}));const a=s9(e,i),s=U5(a,f7(r.shape,"float32"));return{x:()=>s}}},mre={kernelName:r3,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>B5(e,V5(ere(n)))}}},gre={kernelName:o3,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[r]=t,{reps:i}=n;return{x:()=>{let t=G5(r);if(1===r.rank)for(let n=0;n<i[0];++n)t=j5(t,_7(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(let n=0;n<i[0];++n)for(let o=0;o<i[1];++o)t=j5(t,_7(e,[n*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(let n=0;n<i[0];++n)for(let o=0;o<i[1];++o)for(let a=0;a<i[2];++a)t=j5(t,_7(e,[n*r.shape[0],o*r.shape[1],a*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);for(let n=0;n<i[0];++n)for(let o=0;o<i[1];++o)for(let a=0;a<i[2];++a)for(let s=0;s<i[3];++s)t=j5(t,_7(e,[n*r.shape[0],o*r.shape[1],a*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},yre={kernelName:h3,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>function(e,t){const n=c6(t,G5(t)),r=L9(e,n);let i=z9(t,q5(0,"int32"));const o=r.rank-i.rank;for(let s=0;s<o;++s)i=D9(i,s+1);i=n7(i,f7(r.shape,"bool"));const a=G5(r);return V7(i,r,a)}(e,n)}}};const vre=[ute,cte,hte,dte,pte,fte,mte,gte,yte,vte,bte,xte,kte,Ete,Ite,Cte,Ate,_te,Nte,Ote,Rte,$te,Pte,Dte,Fte,jte,Bte,Wte,Vte,Gte,jne,Hte,qte,Kte,Xte,Yte,Jte,Qte,ene,nne,one,ane,sne,lne,une,cne,hne,dne,pne,mne,yne,yne,vne,xne,kne,Sne,Ene,Ine,Tne,Cne,Ane,_ne,Nne,One,Rne,$ne,$ne,Dne,Pne,Lne,zne,Bne,Une,Wne,Vne,Gne,Hne,qne,Kne,Yne,Qne,Jne,Zne,tre,rre,ire,ore,are,lre,lre,ure,ure,cre,dre,hre,{kernelName:p3,gradFunc:e=>({x:()=>G5(e)})},pre,fre,mre,{kernelName:i3,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>U5(i6(q5(1),V5(n)),e)}}},gre,{kernelName:l3,gradFunc:(e,t,n)=>{const r=n,{perm:i}=r,o=Z9(i);return{x:()=>q7(e,o)}}},{kernelName:c3,gradFunc:(e,t,n)=>{const r=n,{axis:i}=r;return{value:()=>L7(e,i)}}},yre,{kernelName:d3,gradFunc:e=>({x:()=>G5(e)})}];for(const n of vre)C3(n);c4().prototype.abs=function(){return this.throwIfDisposed(),a6(this)};const bre=B4({acos_:function(e){const t={x:j4(e,"x","acos")};return N4.runKernel(u0,t)}});c4().prototype.acos=function(){return this.throwIfDisposed(),bre(this)};const xre=B4({acosh_:function(e){const t={x:j4(e,"x","acosh")};return N4.runKernel(c0,t)}});c4().prototype.acosh=function(){return this.throwIfDisposed(),xre(this)},c4().prototype.add=function(e){return this.throwIfDisposed(),j5(this,e)},c4().prototype.all=function(e,t){return this.throwIfDisposed(),W6(this,e,t)},c4().prototype.any=function(e,t){return this.throwIfDisposed(),V6(this,e,t)},c4().prototype.argMax=function(e){return this.throwIfDisposed(),G6(this,e)};const wre=B4({argMin_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={x:j4(e,"x","argMin")},r={axis:t};return N4.runKernel(g0,n,r)}});c4().prototype.argMin=function(e){return this.throwIfDisposed(),wre(this,e)},c4().prototype.asScalar=function(){return this.throwIfDisposed(),SZ(1===this.size,(()=>"The array must have only 1 element.")),s9(this,[])},c4().prototype.asType=function(e){return this.throwIfDisposed(),M5(this,e)},c4().prototype.as1D=function(){return this.throwIfDisposed(),s9(this,[this.size])},c4().prototype.as2D=function(e,t){return this.throwIfDisposed(),s9(this,[e,t])},c4().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),s9(this,[e,t,n])},c4().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),s9(this,[e,t,n,r])},c4().prototype.as5D=function(e,t,n,r,i){return this.throwIfDisposed(),s9(this,[e,t,n,r,i])};const kre=B4({asin_:function(e){const t={x:j4(e,"x","asin")};return N4.runKernel(y0,t)}});c4().prototype.asin=function(){return this.throwIfDisposed(),kre(this)};const Sre=B4({asinh_:function(e){const t={x:j4(e,"x","asinh")};return N4.runKernel(v0,t)}});c4().prototype.asinh=function(){return this.throwIfDisposed(),Sre(this)};const Ere=B4({atan_:function(e){const t={x:j4(e,"x","atan")};return N4.runKernel(b0,t)}});c4().prototype.atan=function(){return this.throwIfDisposed(),Ere(this)};const Ire=B4({atan2_:function(e,t){let n=j4(e,"a","atan2"),r=j4(t,"b","atan2");[n,r]=k4(n,r);const i={a:n,b:r};return N4.runKernel(w0,i)}});c4().prototype.atan2=function(e){return this.throwIfDisposed(),Ire(this,e)};const Tre=B4({atanh_:function(e){const t={x:j4(e,"x","atanh")};return N4.runKernel(x0,t)}});c4().prototype.atanh=function(){return this.throwIfDisposed(),Tre(this)},c4().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),l9(this,e,t,n,r)},c4().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),sre(this,e,t)},c4().prototype.batchNorm=function(e,t,n,r,i){return this.throwIfDisposed(),c9(this,e,t,n,r,i)},c4().prototype.broadcastTo=function(e){return this.throwIfDisposed(),f9(this,e)},c4().prototype.cast=function(e){return this.throwIfDisposed(),M5(this,e)};const Cre=B4({ceil_:function(e){const t={x:j4(e,"x","ceil","float32")};return N4.runKernel(R0,t)}});c4().prototype.ceil=function(){return this.throwIfDisposed(),Cre(this)},c4().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),m9(this,e,t)},c4().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof u4&&(e=[e]),g9([this,...e],t)},c4().prototype.conv1d=function(e,t,n,r,i,o){return this.throwIfDisposed(),k9(this,e,t,n,r,i,o)},c4().prototype.conv2dTranspose=function(e,t,n,r,i){return this.throwIfDisposed(),E9(this,e,t,n,r,i)},c4().prototype.conv2d=function(e,t,n,r,i,o){return this.throwIfDisposed(),w9(this,e,t,n,r,i,o)},c4().prototype.cos=function(){return this.throwIfDisposed(),ere(this)},c4().prototype.cosh=function(){return this.throwIfDisposed(),nre(this)},c4().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),Mne(this,e,t,n)},c4().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),Ute(this,e,t,n)};const Are=B4({depthToSpace_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC";const r=j4(e,"x","depthToSpace","float32"),i="NHWC"===n?r.shape[1]:r.shape[2],o="NHWC"===n?r.shape[2]:r.shape[3],a="NHWC"===n?r.shape[3]:r.shape[1];SZ(t>1,(()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`)),SZ(i*t>=0,(()=>`Negative dimension size caused by overflow when multiplying\n    ${i} and ${t}  for depthToSpace with input shape\n    ${r.shape}`)),SZ(o*t>=0,(()=>`Negative dimension size caused by overflow when multiplying\n    ${o} and ${t} for depthToSpace with input shape\n        ${r.shape}`)),SZ(a%(t*t)===0,(()=>`Dimension size must be evenly divisible by ${t*t} but is ${a} for depthToSpace with input shape ${r.shape}`));const s={x:r},l={blockSize:t,dataFormat:n};return N4.runKernel(X0,s,l)}});c4().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),Are(this,e,t)},c4().prototype.depthwiseConv2d=function(e,t,n,r,i,o){return this.throwIfDisposed(),_9(this,e,t,n,r,i,o)};const _re=B4({dilation2d_:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC";const a=j4(e,"x","dilation2d"),s=j4(t,"filter","dilation2d");SZ(3===a.rank||4===a.rank,(()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${a.rank}.`)),SZ(3===s.rank,(()=>`Error in dilation2d: filter must be rank 3, but got rank ${s.rank}.`)),SZ("NHWC"===o,(()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${o}`));let l=a,u=!1;3===a.rank&&(l=s9(a,[1,a.shape[0],a.shape[1],a.shape[2]]),u=!0),SZ(l.shape[3]===s.shape[2],(()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${s.shape[2]}`));const c={x:l,filter:s},h={strides:n,pad:r,dilations:i},d=N4.runKernel(e1,c,h);return u?s9(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});c4().prototype.dilation2d=function(e,t,n,r,i){return this.throwIfDisposed(),_re(this,e,t,n,r,i)};const Nre=B4({divNoNan_:function(e,t){let n=j4(e,"a","div"),r=j4(t,"b","div");[n,r]=k4(n,r);const i=B5(n,r),o=G5(i),a=O9(r,o);return V7(a,o,i)}});c4().prototype.divNoNan=function(e){return this.throwIfDisposed(),Nre(this,e)},c4().prototype.div=function(e){return this.throwIfDisposed(),B5(this,e)};const Ore=B4({dot_:function(e,t){const n=j4(e,"t1","dot"),r=j4(t,"t2","dot");SZ((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),(()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`));const i=1===n.rank?n.size:n.shape[1],o=1===r.rank?r.size:r.shape[0];if(SZ(i===o,(()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${o}.`)),1===n.rank&&1===r.rank){const e=s9(n,[1,-1]),t=s9(r,[-1,1]),i=r7(e,t);return s9(i,[])}if(1===n.rank&&2===r.rank){const e=s9(n,[1,-1]),t=s9(r,[r.shape[0],r.shape[1]]),i=r7(e,t);return s9(i,[i.size])}if(2===n.rank&&1===r.rank){const e=s9(r,[-1,1]),t=r7(n,e);return s9(t,[t.size])}{const e=s9(r,[r.shape[0],r.shape[1]]);return r7(n,e)}}});c4().prototype.dot=function(e){return this.throwIfDisposed(),Ore(this,e)},c4().prototype.elu=function(){return this.throwIfDisposed(),N9(this)},c4().prototype.equal=function(e){return this.throwIfDisposed(),O9(this,e)},c4().prototype.erf=function(){return this.throwIfDisposed(),R9(this)};const Rre=B4({euclideanNorm_:function(e){return U8(e,"euclidean",arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}});c4().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),Rre(this,e,t)},c4().prototype.exp=function(){return this.throwIfDisposed(),$9(this)},c4().prototype.expandDims=function(e){return this.throwIfDisposed(),D9(this,e)};const $re=B4({expm1_:function(e){const t={x:j4(e,"x","expm1")};return N4.runKernel(d1,t)}});c4().prototype.expm1=function(){return this.throwIfDisposed(),$re(this)},c4().prototype.fft=function(){return this.throwIfDisposed(),X7(this)},c4().prototype.flatten=function(){return this.throwIfDisposed(),s9(this,[this.size])},c4().prototype.floor=function(){return this.throwIfDisposed(),F9(this)},c4().prototype.floorDiv=function(e){return this.throwIfDisposed(),z5(this,e)},c4().prototype.gather=function(e,t,n){return this.throwIfDisposed(),L9(this,e,t,n)},c4().prototype.greaterEqual=function(e){return this.throwIfDisposed(),z9(this,e)},c4().prototype.greater=function(e){return this.throwIfDisposed(),j9(this,e)},c4().prototype.ifft=function(){return this.throwIfDisposed(),Q7(this)},c4().prototype.irfft=function(){return this.throwIfDisposed(),J7(this)};const Dre=B4({isFinite_:function(e){const t={x:j4(e,"x","isFinite")};return N4.runKernel(T1,t)}});c4().prototype.isFinite=function(){return this.throwIfDisposed(),Dre(this)};const Pre=B4({isInf_:function(e){const t={x:j4(e,"x","isInf")};return N4.runKernel(C1,t)}});c4().prototype.isInf=function(){return this.throwIfDisposed(),Pre(this)};const Mre=B4({isNaN_:function(e){const t={x:j4(e,"x","isNaN")};return N4.runKernel(A1,t)}});c4().prototype.isNaN=function(){return this.throwIfDisposed(),Mre(this)},c4().prototype.leakyRelu=function(e){return this.throwIfDisposed(),B9(this,e)},c4().prototype.lessEqual=function(e){return this.throwIfDisposed(),P8(this,e)},c4().prototype.less=function(e){return this.throwIfDisposed(),j8(this,e)};const Fre=B4({localResponseNormalization_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;const o=j4(e,"x","localResponseNormalization");SZ(4===o.rank||3===o.rank,(()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${o.rank}.`)),SZ(AZ(t),(()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`));let a=o,s=!1;3===o.rank&&(s=!0,a=s9(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const l={x:a},u={depthRadius:t,bias:n,alpha:r,beta:i},c=N4.runKernel(L1,l,u);return s?s9(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});c4().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),Fre(this,e,t,n,r)};const Lre=B4({logSigmoid_:function(e){const t=j4(e,"x","logSigmoid"),n=H5((e=>({value:c7(P7(c7(e))),gradFunc:t=>U5(t,A7(c7(e)))})));return n(t)}});c4().prototype.logSigmoid=function(){return this.throwIfDisposed(),Lre(this)},c4().prototype.logSoftmax=function(e){return this.throwIfDisposed(),H9(this,e)},c4().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),t7(this,e,t)},c4().prototype.log=function(){return this.throwIfDisposed(),U9(this)},c4().prototype.log1p=function(){return this.throwIfDisposed(),W9(this)},c4().prototype.logicalAnd=function(e){return this.throwIfDisposed(),n7(this,e)},c4().prototype.logicalNot=function(){return this.throwIfDisposed(),Xne(this)};const jre=B4({logicalOr_:function(e,t){const n=j4(e,"a","logicalOr","bool"),r=j4(t,"b","logicalOr","bool");u6(n.shape,r.shape);const i={a:n,b:r};return N4.runKernel(F1,i)}});c4().prototype.logicalOr=function(e){return this.throwIfDisposed(),jre(this,e)};const zre=B4({logicalXor_:function(e,t){const n=j4(e,"a","logicalXor","bool"),r=j4(t,"b","logicalXor","bool");return u6(n.shape,r.shape),n7(jre(e,t),Xne(n7(e,t)))}});c4().prototype.logicalXor=function(e){return this.throwIfDisposed(),zre(this,e)},c4().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),r7(this,e,t,n)},c4().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),i7(this,e,t,n,r)},c4().prototype.max=function(e,t){return this.throwIfDisposed(),V9(this,e,t)},c4().prototype.maximum=function(e){return this.throwIfDisposed(),c6(this,e)},c4().prototype.mean=function(e,t){return this.throwIfDisposed(),a7(this,e,t)},c4().prototype.min=function(e,t){return this.throwIfDisposed(),s7(this,e,t)},c4().prototype.minimum=function(e){return this.throwIfDisposed(),l7(this,e)};const Bre=B4({mirrorPad_:function(e,t,n){SZ("reflect"===n||"symmetric"===n,(()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`));const r=j4(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");SZ(t.length===r.rank,(()=>`Padding doesn't match input. Must be ${r.rank}. Got ${t.length}.`));const i="reflect"===n?1:0;for(let s=0;s<r.rank;s++)SZ(2===t[s].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),SZ(t[s][0]>=0&&t[s][0]<=r.shape[s]-i&&t[s][1]>=0&&t[s][1]<=r.shape[s]-i,(()=>`Padding in dimension ${s} cannot be greater than or equal to ${r.shape[s]-i} or less than 0 for input of shape ${r.shape}`));const o={paddings:t,mode:n},a={x:r};return N4.runKernel(Y1,a,o)}});c4().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),Bre(this,e,t)};const Ure=B4({mod_:function(e,t){let n=j4(e,"a","mod"),r=j4(t,"b","mod");[n,r]=k4(n,r);const i={a:n,b:r};return N4.runKernel(Q1,i)}});c4().prototype.mod=function(e){return this.throwIfDisposed(),Ure(this,e)},c4().prototype.mul=function(e){return this.throwIfDisposed(),U5(this,e)},c4().prototype.neg=function(){return this.throwIfDisposed(),c7(this)},c4().prototype.norm=function(e,t,n){return this.throwIfDisposed(),U8(this,e,t,n)},c4().prototype.notEqual=function(e){return this.throwIfDisposed(),h7(this,e)},c4().prototype.oneHot=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),d7(this,e,t,n)},c4().prototype.onesLike=function(){return this.throwIfDisposed(),m7(this)},c4().prototype.pad=function(e,t){return this.throwIfDisposed(),g7(this,e,t)};const Wre=B4({pool_:function(e,t,n,r,i,o,a){null==i&&(i=[1,1]),null==o&&(o=1),0===r&&(r="valid");const s=j4(e,"x","maxPool");let l=s,u=!1;3===s.rank&&(u=!0,l=s9(s,[1,s.shape[0],s.shape[1],s.shape[2]])),SZ(r9(o,i),(()=>`Error in pool: Either strides or dilations must be 1. Got strides ${o} and dilations '${i}'`));const c=q6(l.shape,t,o,i,r),h=[c.dilationHeight,c.dilationWidth];let d;d="same"===r?function(e,t){const n=e.map(((e,n)=>e+(e-1)*(t[n]-1))),r=n.map((e=>e-1)),i=r.map((e=>Math.floor(e/2))),o=r.map(((e,t)=>e-i[t]));return r.map(((e,t)=>[i[t],o[t]]))}([c.filterHeight,c.filterWidth],h):[[0,0],[0,0]];const p=1===h[0]&&1===h[1],[f,m]=function(e,t,n){const r=n.map((e=>e[0])),i=n.map((e=>e[1])),o=e.concat(r,i),a=t.map(((e,t)=>(e-o[t]%e)%e)),s=i.map(((e,t)=>e+a[t])),l=t.map(((e,t)=>[r[t],s[t]])),u=t.map(((e,t)=>[0,a[t]]));return[l,u]}([c.inHeight,c.inWidth],h,d),g=p?r:"valid",y=p?l:Tte(l,h,f),v=("avg"===n?()=>l9(y,t,o,g,a):()=>i7(y,t,o,g,a))(),b=p?v:sre(v,h,m);return u?s9(b,[b.shape[1],b.shape[2],b.shape[3]]):b}});c4().prototype.pool=function(e,t,n,r,i,o){return this.throwIfDisposed(),Wre(this,e,t,n,r,i,o)},c4().prototype.pow=function(e){return this.throwIfDisposed(),r6(this,e)},c4().prototype.prelu=function(e){return this.throwIfDisposed(),y7(this,e)};const Vre=B4({prod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=j4(e,"x","prod");"bool"===r.dtype&&(r=M5(r,"int32"));const i={x:r},o={axis:t,keepDims:n};return N4.runKernel(h2,i,o)}});c4().prototype.prod=function(e,t){return this.throwIfDisposed(),Vre(this,e,t)};const Gre=B4({reciprocal_:function(e){const t={x:j4(e,"x","reciprocal")};return N4.runKernel(y2,t)}});c4().prototype.reciprocal=function(){return this.throwIfDisposed(),Gre(this)},c4().prototype.relu=function(){return this.throwIfDisposed(),E7(this)},c4().prototype.relu6=function(){return this.throwIfDisposed(),e8(this)},c4().prototype.reshapeAs=function(e){return this.throwIfDisposed(),s9(this,e.shape)},c4().prototype.reshape=function(e){return this.throwIfDisposed(),s9(this,e)},c4().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),R8(this,e,t,n)},c4().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),$8(this,e,t,n)},c4().prototype.reverse=function(e){return this.throwIfDisposed(),I7(this,e)},c4().prototype.rfft=function(){return this.throwIfDisposed(),Y7(this)},c4().prototype.round=function(){return this.throwIfDisposed(),M8(this)},c4().prototype.rsqrt=function(){return this.throwIfDisposed(),Zte(this)},c4().prototype.selu=function(){return this.throwIfDisposed(),T7(this)},c4().prototype.separableConv2d=function(e,t,n,r,i,o){return this.throwIfDisposed(),C7(this,e,t,n,r,i,o)},c4().prototype.sigmoid=function(){return this.throwIfDisposed(),A7(this)};const Hre=B4({sign_:function(e){const t={x:j4(e,"x","sign")};return N4.runKernel(M2,t)}});c4().prototype.sign=function(){return this.throwIfDisposed(),Hre(this)},c4().prototype.sin=function(){return this.throwIfDisposed(),Lte(this)},c4().prototype.sinh=function(){return this.throwIfDisposed(),zte(this)},c4().prototype.slice=function(e,t){return this.throwIfDisposed(),_7(this,e,t)},c4().prototype.softmax=function(e){return this.throwIfDisposed(),D7(this,e)},c4().prototype.softplus=function(){return this.throwIfDisposed(),P7(this)},c4().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),Tte(this,e,t)},c4().prototype.split=function(e,t){return this.throwIfDisposed(),M7(this,e,t)},c4().prototype.sqrt=function(){return this.throwIfDisposed(),W5(this)},c4().prototype.square=function(){return this.throwIfDisposed(),V5(this)},c4().prototype.squaredDifference=function(e){return this.throwIfDisposed(),q8(this,e)},c4().prototype.squeeze=function(e){return this.throwIfDisposed(),F7(this,e)},c4().prototype.stack=function(e,t){this.throwIfDisposed();const n=e instanceof u4?[this,e]:[this,...e];return L7(n,t)},c4().prototype.step=function(e){return this.throwIfDisposed(),t8(this,e)};const qre=B4({stridedSlice_:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;const u={x:j4(e,"x","stridedSlice","string_or_numeric")},c={begin:t,end:n,strides:r,beginMask:i,endMask:o,ellipsisMask:a,newAxisMask:s,shrinkAxisMask:l};return N4.runKernel(J2,u,c)}});c4().prototype.stridedSlice=function(e,t,n,r,i,o,a,s){return this.throwIfDisposed(),qre(this,e,t,n,r,i,o,a,s)},c4().prototype.sub=function(e){return this.throwIfDisposed(),i6(this,e)},c4().prototype.sum=function(e,t){return this.throwIfDisposed(),G9(this,e,t)};const Kre=B4({tan_:function(e){const t={x:j4(e,"x","tan","float32")};return N4.runKernel(r3,t)}});c4().prototype.tan=function(){return this.throwIfDisposed(),Kre(this)},c4().prototype.tanh=function(){return this.throwIfDisposed(),j7(this)},c4().prototype.tile=function(e){return this.throwIfDisposed(),P9(this,e)},c4().prototype.toBool=function(){return this.throwIfDisposed(),M5(this,"bool")},c4().prototype.toFloat=function(){return this.throwIfDisposed(),M5(this,"float32")},c4().prototype.toInt=function(){return this.throwIfDisposed(),M5(this,"int32")};const Xre=B4({topk_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=j4(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${t}`);const o={x:r},a={k:t,sorted:n},[s,l]=N4.runKernel(a3,o,a);return{values:s,indices:l}}});c4().prototype.topk=function(e,t){return this.throwIfDisposed(),Xre(this,e,t)},c4().prototype.transpose=function(e){return this.throwIfDisposed(),q7(this,e)};const Yre=B4({unique_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=j4(e,"x","unique","string_or_numeric");SZ(n.rank>0,(()=>"The input tensor must be at least 1D"));const r={x:n},i={axis:t},[o,a]=N4.runKernel(u3,r,i);return{values:o,indices:a}}});c4().prototype.unique=function(e){return this.throwIfDisposed(),Yre(this,e)},c4().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),tne(this,e,t)},c4().prototype.unstack=function(e){return this.throwIfDisposed(),W7(this,e)},c4().prototype.where=function(e,t){return this.throwIfDisposed(),V7(e,this,t)},c4().prototype.zerosLike=function(){return this.throwIfDisposed(),G5(this)};class Qre extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Qre.prototype)}}class Jre extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Jre.prototype)}}class Zre extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Zre.prototype)}}class eie extends Error{constructor(e){super(e),Object.setPrototypeOf(this,eie.prototype)}}class tie extends Error{constructor(e){super(e),Object.setPrototypeOf(this,tie.prototype)}}Error;class nie{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){const e=this.cache.keys().next().value;this.cache.delete(e)}this.maxEntries=e}}function rie(e,t){if(Array.isArray(e)){let n=[];for(let r=0;r<t;r++)n=n.concat(e);return n}{const n=new Array(t);return n.fill(e),n}}function iie(e,t){if(!e)throw new tie(t)}function oie(e,t){let n=0;for(const r of e)r===t&&n++;return n}function aie(e){return 1===e.length?e[0]:e}function sie(e){return Array.isArray(e)?e:[e]}function lie(e){const t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function uie(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,((e,t)=>t.toUpperCase()))}let cie={};function hie(e){if(null===e||void 0===e)return null;const t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function die(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach((e=>die(e)));else{const t=Object.keys(e);for(const n of t){const t=e[n];null!=t&&"object"===typeof t&&(Array.isArray(t)||"ndarray"!==t.type||"number"!==typeof t.value?die(t):e[n]=t.value)}}}function pie(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){const i=e;let o;if(i in n)o=n[i];else if(i in cie)o=cie[i];else if(o=t[i],null==o)throw new Zre(`Unknown ${r}: ${e}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return o}{const o=e;if(null==o.className||null==o.config)throw new Zre(`${r}: Improper config format: ${JSON.stringify(o)}.\n'className' and 'config' must set.`);const a=o.className;let s,l;if(a in n?[s,l]=n[a]:a in cie?[s,l]=cie.className:a in t&&([s,l]=t[a]),null==s)throw new Zre(`Unknown ${r}: ${a}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(null!=l){const e={};for(const n of Object.keys(cie))e[n]=cie[n];for(const i of Object.keys(n))e[i]=n[i];o.config.customObjects=e;const t=Object.assign({},cie);for(const i of Object.keys(n))cie[i]=n[i];die(o.config);const r=l(s,o.config,n,i);return cie=Object.assign({},t),r}{const e=Object.assign({},cie);for(const r of Object.keys(n))cie[r]=n[r];const t=new s(o.config);return cie=Object.assign({},e),t}}}function fie(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function mie(e){if(null==e)return e;const t=[];for(const n of e)-1===t.indexOf(n)&&t.push(n);return t}function gie(e){if(null==e)throw new Zre(`Invalid value in obj: ${JSON.stringify(e)}`);for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function yie(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new Zre(`${n} is not a valid ${t}.  Valid values are ${e} or null/undefined.`)}function vie(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return iie(n>=0),iie(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((e=>typeof e===t))}function bie(e,t){Array.isArray(e)?(SZ(e.length>0,(()=>`${t} is unexpectedly an empty array.`)),e.forEach(((e,n)=>bie(e,`element ${n+1} of ${t}`)))):SZ(Number.isInteger(e)&&e>0,(()=>`Expected ${t} to be a positive integer, but got ${xie(e)}.`))}function xie(e){return null===e?"null":Array.isArray(e)?"["+e.map((e=>xie(e))).join(",")+"]":"string"===typeof e?`"${e}"`:`${e}`}function wie(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}let kie=0;function Sie(){return kie++}const Eie={};function Iie(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in Eie||(Eie[e]=0),Eie[e]+=1,e+Eie[e].toString()}const Tie=["channelsFirst","channelsLast"],Cie=["nearest","bilinear"],Aie=["valid","same","causal"],_ie=["max","avg"],Nie=["sum","mul","concat","ave"],Oie=new Map;function Rie(e){yie(Tie,"DataFormat",e)}function $ie(e){yie(Aie,"PaddingMode",e)}function Die(e){yie(_ie,"PoolMode",e)}const Pie=[];function Mie(e,t){Pie.push(e);try{const e=t();return Pie.pop(),e}catch(n){throw Pie.pop(),n}}function Fie(e){if(!zie(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===Pie.length?"":Pie.join("/")+"/")+e}function Lie(e){if(!zie(e))throw new Error("Not a valid tensor name: '"+e+"'");Oie.has(e)||Oie.set(e,0);const t=Oie.get(e);if(Oie.set(e,Oie.get(e)+1),t>0){const n=`${e}_${t}`;return Oie.set(n,1),n}return e}const jie=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function zie(e){return!!e.match(jie)}function Bie(e){return e===parseInt(e.toString(),10)}function Uie(e,t,n){null==t&&(t=0),null==n&&(n=e.length);let r=1;for(let i=t;i<n;++i)r*=e[i];return r}function Wie(e){if(0===e.length)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r<t&&(t=r)}return t}function Vie(e){if(0===e.length)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){const r=e[n];r>t&&(t=r)}return t}function Gie(e,t){if(t<e)throw new Zre(`end (${t}) < begin (${e}) is forbidden.`);const n=[];for(let r=e;r<t;++r)n.push(r);return n}let Hie;function qie(){return null==Hie&&(Hie=J4().epsilon()),Hie}function Kie(e,t){return M5(e,t)}function Xie(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),s9(e,n)}function Yie(e,t,n){return K4((()=>{switch(e.rank){case 1:return N7(e,t,n);case 2:return O7(e,[t,0],[n,e.shape[1]]);case 3:return R7(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return $7(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return _7(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return _7(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new Zre(`sliceAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}))}function Qie(e,t,n){return K4((()=>{switch(e.rank){case 1:return N7(e,t,n);case 2:return O7(e,[0,t],[e.shape[0],n]);case 3:return R7(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return $7(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new Zre(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}}))}function Jie(e,t,n,r){return K4((()=>{switch(e.rank){case 1:return N7(e,t,n);case 2:switch(r){case 1:return Yie(e,t,n);case 2:return Qie(e,t,n);default:throw new Zre(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return Yie(e,t,n);case 2:return R7(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return Qie(e,t,n);default:throw new Zre(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return Yie(e,t,n);case 2:return $7(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return $7(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return Qie(e,t,n);default:throw new Zre(`The axis is not within the rank of the tensor ${r}`)}default:throw new Zre(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}}))}function Zie(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(t=e[0].rank,n=0!==t?t:0),n===e[0].rank&&(n=-1),g9(e,n)}function eoe(e,t){switch(e.rank){case 1:return y9([e,t]);case 2:return v9([e,t],0);case 3:return b9([e,t],0);case 4:return x9([e,t],0);default:throw new Zre(`concatAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}function toe(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new Zre(`The length of input n (${t.length}) does not match the number of dimensions in input x (${e.rank})`);return P9(e,t)}function noe(e){return w7(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0)}function roe(e,t,n,r){if(e.rank<2||t.rank<2)throw new eie(`dot requires both inputs to be rank >= 2 but got x shape = ${e.shape} and y shape = ${t.shape}`);if(t.rank>=3){if(e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new eie(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${e.shape} and  y shape = ${t.shape}`)}if(2===e.rank&&2===t.rank){return u8({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?aoe(e.rank,r,"channelsLast"):null,activation:n})}{const i=e.shape.slice(),o=i.pop();e=s9(e,[-1,o]);const a=t.shape.slice(),s=a.pop(),l=a.pop(),u=[...a,s],c=Array.from({length:t.rank},((e,n)=>0===n?t.rank-2:n<=t.rank-2?n-1:n));t=s9(q7(t,c),[l,-1]);const h=[...i,...u];return s9(u8({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?aoe(e.rank,r,"channelsLast"):null,activation:n}),h)}}function ioe(e,t,n){return K4((()=>(t=Array.isArray(t)?z7(t,"int32"):M5(t,"int32"),L9(e,t,n))))}function ooe(e){return U5(e,e)}function aoe(e,t,n){const r=t.shape;if(1!==t.rank&&t.rank!==e)throw new Zre(`Unexpected bias dimensions: ${t.rank}; expected it to be 1 or ${e}`);if(5===e){if("channelsFirst"===n)return 1===r.length?s9(t,[1,r[0],1,1,1]):s9(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?s9(t,[1,1,1,1,r[0]]):s9(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?s9(t,[1,r[0],1,1]):s9(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?s9(t,[1,1,1,r[0]]):s9(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?s9(t,[1,r[0],1]):s9(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?s9(t,[1,1,r[0]]):s9(t,[1].concat(r))}else if(e<3)return t;throw new Zre(`Unsupported input rank by biasAdd: ${t.rank}`)}function soe(e,t,n){return K4((()=>(null==n&&(n="channelsLast"),Rie(n),j5(e,aoe(e.rank,t,n)))))}function loe(e,t,n,r){return K4((()=>K7(e,t,n,r)))}function uoe(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e():t()}const coe=["fanIn","fanOut","fanAvg"],hoe=["normal","uniform","truncatedNormal"];class doe extends Y5{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class poe extends doe{apply(e,t){return p7(e,t)}}poe.className="Zeros",J5(poe);class foe extends doe{apply(e,t){return f7(e,t)}}foe.className="Ones",J5(foe);class moe extends doe{constructor(e){if(super(),"object"!==typeof e)throw new Zre(`Expected argument of type ConstantConfig but got ${e}`);if(void 0===e.value)throw new Zre(`config must have value set but got ${e}`);this.value=e.value}apply(e,t){return K4((()=>U5(q5(this.value),f7(e,t))))}getConfig(){return{value:this.value}}}moe.className="Constant",J5(moe);class goe extends doe{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return k7(e,this.minval,this.maxval,t,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}goe.className="RandomUniform",J5(goe);class yoe extends doe{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new eie(`randomNormal does not support dType ${t}.`);return noe(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}yoe.className="RandomNormal",J5(yoe);class voe extends doe{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new eie(`truncatedNormal does not support dType ${t}.`);return U7(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}voe.className="TruncatedNormal",J5(voe);class boe extends doe{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(e,t){return K4((()=>{if(2!==e.length||e[0]!==e[1])throw new Zre("Identity matrix initializer can only be used for 2D square matrices.");return U5(this.gain,M9(e[0]))}))}getConfig(){return{gain:this.gain}}}boe.className="Identity",J5(boe);class xoe extends doe{constructor(e){if(super(),e.scale<0)throw new Zre(`scale must be a positive float. Got: ${e.scale}`);this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,function(e){yie(coe,"FanMode",e)}(this.mode),this.distribution=null==e.distribution?"normal":e.distribution,function(e){yie(hoe,"Distribution",e)}(this.distribution),this.seed=e.seed}apply(e,t){const n=function(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(Rie(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){const r=Uie(e,2);t=e[1]*r,n=e[0]*r}else if("channelsLast"===r){const r=Uie(e,0,e.length-2);t=e[e.length-2]*r,n=e[e.length-1]*r}}else{const r=Uie(e);t=Math.sqrt(r),n=Math.sqrt(r)}return[t,n]}(e),r=n[0],i=n[1];let o=this.scale;if("fanIn"===this.mode?o/=Math.max(1,r):"fanOut"===this.mode?o/=Math.max(1,i):o/=Math.max(1,(r+i)/2),"normal"===this.distribution){const n=Math.sqrt(o);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new eie(`${this.getClassName()} does not support dType ${t}.`);return U7(e,0,n,t,this.seed)}{const n=Math.sqrt(3*o);return k7(e,-n,n,t,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}xoe.className="VarianceScaling",J5(xoe);class woe extends xoe{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return xoe.className}}woe.className="GlorotUniform",J5(woe);class koe extends xoe{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return xoe.className}}koe.className="GlorotNormal",J5(koe);class Soe extends xoe{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return xoe.className}}Soe.className="HeNormal",J5(Soe);class Eoe extends xoe{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return xoe.className}}Eoe.className="HeUniform",J5(Eoe);class Ioe extends xoe{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return xoe.className}}Ioe.className="LeCunNormal",J5(Ioe);class Toe extends xoe{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return xoe.className}}Toe.className="LeCunUniform",J5(Toe);class Coe extends doe{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,t){return K4((()=>{if(e.length<2)throw new eie("Shape must be at least 2D.");if("int32"!==t&&"float32"!==t&&void 0!==t)throw new TypeError(`Unsupported data type ${t}.`);const n=TZ(e.slice(0,-1)),r=e[e.length-1],i=n*r;i>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${i}) elements: Slowness may result.`);const o=noe([Math.max(r,n),Math.min(r,n)],0,1,t,this.seed),a=X8.qr(o,!1);let s=a[0];const l=a[1].flatten().stridedSlice([0],[Math.min(r,n)*Math.min(r,n)],[Math.min(r,n)+1]);return s=U5(s,l.sign()),n<r&&(s=s.transpose()),U5(q5(this.gain),s.reshape(e))}))}getConfig(){return{gain:this.gain,seed:this.seed}}}Coe.className="Orthogonal",J5(Coe);const Aoe={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function _oe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return pie(e,Q5.getMap().classNameMap,t,"initializer")}function Noe(e){return hie(e)}function Ooe(e){if("string"===typeof e){const t=e in Aoe?Aoe[e]:e;if("GlorotNormal"===t)return new koe;if("GlorotUniform"===t)return new woe;if("HeNormal"===t)return new Soe;if("HeUniform"===t)return new Eoe;if("LeCunNormal"===t)return new Ioe;if("LeCunUniform"===t)return new Toe;{const e={};return e.className=t,e.config={},_oe(e)}}return e instanceof doe?e:_oe(e)}function Roe(e){return Array.isArray(e)&&Array.isArray(e[0])}function $oe(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function Doe(e){let t;if(Array.isArray(e)){if(1!==e.length)throw new Zre(`Expected Tensor length to be 1; got ${e.length}`);t=e[0]}else t=e;return t}function Poe(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new Zre(`Expected exactly 1 Shape; got ${e.length}`)}return e}function Moe(e){let t=0;for(const n of e)0===n.shape.length?t+=1:t+=n.shape.reduce(((e,t)=>e*t));return t}const Foe="Variable";class Loe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Foe,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.dtype=null==t?"float32":t,this.shape=e.shape,this.id=Sie(),n=null==n?Foe:n,this.originalName=Fie(n),this.name=Lie(this.originalName),this.trainable_=r,this.constraint=i,this.val=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return N4.makeVariable(e,t,n,r)}(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function joe(e){return e.map((e=>e.read()))}function zoe(e){e.forEach((e=>{e[0].write(e[1])}))}class Boe{constructor(e){this.dtype=e.dtype,this.shape=e.shape,null!=e.shape?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class Uoe{constructor(e,t,n,r,i,o,a){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=i,this.outputTensorIndex=a,this.id=Sie(),null!=o&&(this.originalName=Fie(o),this.name=Lie(this.originalName)),this.rank=t.length}}let Woe=0;class Voe{constructor(e,t){this.callArgs=t,this.id=Woe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const n of e.inboundLayers)null!=n&&n.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const t of this.inboundLayers)null!=t?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let Goe=0;class Hoe extends Y5{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=Goe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){const e=this.getClassName();t=lie(e)+"_"+Iie(e)}if(this.name=t,this.trainable_=null==e.trainable||e.trainable,null!=e.inputShape||null!=e.batchInputShape){let t;if(null!=e.batchInputShape)t=e.batchInputShape;else if(null!=e.inputShape){let n=null;null!=e.batchSize&&(n=e.batchSize),t=[n].concat(e.inputShape)}this.batchInputShape=t;let n=e.dtype;null==n&&(n=e.inputDType),null==n&&(n="float32"),this.dtype=n}null!=e.weights?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(0===this.inboundNodes.length)throw new Jre(`The layer has never been called and thus has no defined ${t}.`);if(this.inboundNodes.length<=e)throw new Zre(`Asked to get ${t} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return aie(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return aie(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Qre(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(0===this.inboundNodes.length)throw new Qre(`Layer ${this.name} is not connected, no input to return.`);return aie(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new Qre(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Qre(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return aie(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map((e=>e()))}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach((t=>t.trainable=e)),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter((e=>e.trainable)):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter((e=>!e.trainable)).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const t=sie(e);if(null==this.inputSpec||0===this.inputSpec.length)return;const n=sie(this.inputSpec);if(t.length!==n.length)throw new Zre(`Layer ${this.name} expects ${n.length} inputs, but it received ${t.length} input tensors. Input received: ${e}`);for(let r=0;r<t.length;r++){const e=t[r],i=n[r];if(null==i)continue;const o=e.rank;if(null!=i.ndim&&o!==i.ndim)throw new Zre(`Input ${r} is incompatible with layer ${this.name}: expected ndim=${i.ndim}, found ndim=${o}`);if(null!=i.maxNDim&&o>i.maxNDim)throw new Zre(`Input ${r} is incompatible with layer ${this.name}: expected max_ndim=${i.maxNDim}, found ndim=${o}`);if(null!=i.minNDim&&o<i.minNDim)throw new Zre(`Input ${r} is incompatible with layer ${this.name}: expected min_ndim=${i.minNDim}, found ndim=${o}.`);if(null!=i.dtype&&e.dtype!==i.dtype)throw new Zre(`Input ${r} is incompatible with layer ${this.name} : expected dtype=${i.dtype}, found dtype=${e.dtype}.`);if(i.axes){const t=e.shape;for(const e in i.axes){const n=Number(e),o=i.axes[e],a=n>=0?t[n]:t[t.length+n];if(null!=o&&-1===[o,null].indexOf(a))throw new Zre(`Input ${r} is incompatible with layer ${this.name}: expected axis ${n} of input shape to have value ${o} but got shape ${t}.`)}}if(null!=i.shape)for(let t=0;t<i.shape.length;++t){const n=i.shape[t],o=e.shape[t];if(null!=n&&null!=o&&n!==o)throw new Zre(`Input ${r} is incompatible with layer ${this.name}: expected shape=${i.shape}, found shape=${e.shape}.`)}}}call(e,t){return e}invokeCallHook(e,t){null!=this._callHook&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();const n=sie(e),r=function(e){let t=!0;for(const n of sie(e))if(!(n instanceof Uoe)){t=!1;break}return t}(e),i=function(e){let t=!0;for(const n of sie(e))if(n instanceof Uoe){t=!1;break}return t}(e);if(r===i)throw new Zre("Arguments to apply() must be all SymbolicTensors or all Tensors");return Mie(this.name,(()=>{if(!this.built){this.assertInputCompatibility(e);const t=[];for(const n of sie(e))t.push(n.shape);this.build(aie(t)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&i&&(this._refCount=1)}if(this.assertInputCompatibility(e),i){let r=this.call(e,t);this.supportsMasking&&this.setMaskMetadata(e,r);const i=sie(r),o=[];for(let e of i)-1!==n.indexOf(e)&&(e=e.clone()),o.push(e);if(r=aie(o),null!=this.activityRegularizer)throw new eie("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}{const n=function(e){e=sie(e);const t=[];for(const n of e)t.push(n.shape);return aie(t)}(e),r=this.computeOutputShape(n);let i;const o="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(e)?n[0]:n),i=null!=r&&r.length>0&&Array.isArray(r[0])?r.map(((n,r)=>new Uoe(o,n,this,sie(e),t,this.name,r))):new Uoe(o,r,this,sie(e),t,this.name),this.addInboundNode(e,i,null,null,n,r,t),this._refCount++,null!=this.activityRegularizer)throw new eie("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}}))}warnOnIncompatibleInputShape(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let t=!1;this.batchInputShape.forEach(((n,r)=>{null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new Qre(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const t of this.inboundNodes){const n=JSON.stringify(t.outputShapes);-1===e.indexOf(n)&&e.push(n)}if(1===e.length){const e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&1===e.length?e[0]:e}throw new Qre(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Jre(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return Moe(this.weights)}build(e){this.built=!0}getWeights(){return joe(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.trainableWeights:this.weights)}setWeights(e){K4((()=>{const t=this.weights;if(t.length!==e.length)throw new Zre(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${t.length} weights. Provided weights: ${e}...`);if(0===t.length)return;const n=[],r=joe(t);for(let i=0;i<r.length;++i){const o=r[i],a=t[i],s=e[i];if(!CZ(o.shape,s.shape))throw new Zre(`Layer weight shape ${o.shape} not compatible with provided weight shape ${s.shape}`);n.push([a,s])}zoe(n)}))}addWeight(e,t,n,r,i,o,a,s){if(-1!==this._addedWeightNames.indexOf(e))throw new Zre(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=s?s():Ooe("zeros"));const l=r.apply(t,n),u=new Loe(l,n,e,o,a);return l.dispose(),null!=i&&this.addLoss((()=>i.apply(u.read()))),null==o&&(o=!0),o?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){null==e||Array.isArray(e)&&0===e.length||(e=sie(e),void 0!==this._losses&&null!==this._losses&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);t.forEach((e=>{if(null!=e)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)}))}return null}return t}setMaskMetadata(e,t,n){if(!this.supportsMasking)return;const r=this.computeMask(e,n),i=sie(t),o=sie(r);if(i.length!==o.length)throw new Error(`${this.name} outputs ${i.length} tensors but ${i.length} masks for those tensors`);for(let a=0;a<i.length;a++)i[a].kerasMask=o[a]}addInboundNode(e,t,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;const s=sie(e);t=sie(t),n=sie(n),r=sie(r),i=$oe(i),o=$oe(o);const l=[],u=[],c=[];for(const h of s)l.push(h.sourceLayer),u.push(h.nodeIndex),c.push(h.tensorIndex);new Voe({outboundLayer:this,inboundLayers:l,nodeIndices:u,tensorIndices:c,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:i,outputShapes:o},a);for(let h=0;h<t.length;h++)t[h].sourceLayer=this,t[h].nodeIndex=this.inboundNodes.length-1,t[h].tensorIndex=h}getConfig(){const e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach((e=>e.dispose())),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(null===this._refCount)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function qoe(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];{const e=t.inboundNodes[n];if(0===e.inboundLayers.length)return e.inputTensors;{const t=[];for(let n=0;n<e.inboundLayers.length;n++){const r=qoe(e.inputTensors[n],e.inboundLayers[n],e.nodeIndices[n]);for(const e of r)-1===t.indexOf(e)&&t.push(e)}return t}}}class Koe extends Hoe{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:Iie("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new Zre("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(null==t){if(null==e.inputShape)throw new Zre("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new Zre("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];const r=new Uoe(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new Voe({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new Zre(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}function Xoe(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new Zre("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));let n=e.dtype;null==n&&(n="float32");return new Koe({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}Koe.className="InputLayer",J5(Koe);class Yoe{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Yoe)for(const t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(null==e)return;for(const t of e)this.add(t.key,t.value)}}add(e,t,n){if(null!=this.id2Value[e.id])throw new Zre(`Duplicate key: name=${e.name}, id=${e.id}`);return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return M5(t,e.dtype)}catch(hNe){throw new Zre(`The dtype of the feed (${t.dtype}) can not be cast to the dtype of the key '${e.name}' (${e.dtype}).`)}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return null!=this.id2Value[e.id]}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof Uoe){if(null==this.id2Value[e.id])throw new Zre(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}{const t=this.name2Id[e];if(null==t)throw new Zre(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[t]}}getMask(e){if(e instanceof Uoe){if(null==this.id2Value[e.id])throw new Zre(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}{const t=this.name2Id[e];if(null==t)throw new Zre(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[t]}}disposeMasks(){null!=this.id2Mask&&X4(this.id2Mask)}}const Qoe=new nie,Joe=new nie;function Zoe(e,t,n,r){const i=null!=n&&n.training,o=Array.isArray(e),a=o?e:[e],s=a.map((e=>e.name)),l=[],u=t.names();for(const f of s)-1!==u.indexOf(f)?l.push(t.getValue(f)):l.push(null);null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const c=s.join(",")+"|"+t.names().sort().join(",");let h,d=Qoe.get(c);if(null==d){const e=function(e,t){SZ(null!=e&&e.length>0,(()=>"Expected at least one fetch, got none"));let n=[],r={};if(1===e.length){const i=tae(e[0],t);n=i.sorted,r=i.recipientMap}else{const i=new Set;for(const o of e){const{sorted:e,recipientMap:a}=tae(o,t);for(const t of e)i.has(t.name)||(n.push(t),i.add(t.name));for(const t in a)null==r[t]&&(r[t]=new Set),a[t].forEach((e=>r[t].add(e)))}}return{sorted:n,recipientCounts:eae(r)}}(a,t);d=e.sorted,h=e.recipientCounts,Qoe.put(c,d),Joe.put(c,h)}h={},i||Object.assign(h,Joe.get(c));const p=new Yoe(t);for(let f=0;f<d.length;++f){if(null!=r){const e=q4().numTensors;e>r.maxNumTensors&&(r.maxNumTensors=e),e<r.minNumTensors&&(r.minNumTensors=e)}const e=d[f],o=e.sourceLayer;if(o instanceof Koe)continue;const a=[],u=[],c=[];let m=!1;for(const n of e.inputs){const e=p.getValue(n),r=p.getMask(n);a.push(e),u.push(r),null!=r&&(m=!0),i||(h[n.name]--,0!==h[n.name]||t.hasKey(n)||-1!==s.indexOf(n.name)||e.isDisposed||!0===n.sourceLayer.stateful||c.push(e))}m&&((n=n||{}).mask=u[0]);const g=sie(o.apply(a,n));let y=null;o.supportsMasking&&(y=o.computeMask(a,u));const v=nae(e),b=Array.isArray(v)?v:[v];for(let t=0;t<b.length;++t){p.hasKey(b[t])||p.add(b[t],g[t],Array.isArray(y)?y[0]:y);const e=s.indexOf(b[t].name);-1!==e&&(l[e]=g[t])}i||X4(c)}return p.disposeMasks(),o?l:l[0]}function eae(e){const t={};for(const n in e)t[n]=e[n].size;return t}function tae(e,t){const n=new Set,r=[],i={};for(const s of t.names())n.add(s);const o=[],a=[];for(o.push(e);o.length>0;){const e=o[o.length-1];if(n.has(e.name)){o.pop();continue}const t=a[a.length-1]===o.length-1;if(0===e.inputs.length||t)o.pop(),r.push(e),n.add(e.name),t&&a.pop();else{a.push(o.length-1);for(const t of e.inputs)null==i[t.name]&&(i[t.name]=new Set),i[t.name].add(e.name),n.has(t.name)||o.push(t)}}return{sorted:r,recipientMap:i}}function nae(e){let t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{let n=null;for(let t=0;t<e.sourceLayer.inboundNodes.length;++t)for(const r of e.sourceLayer.inboundNodes[t].outputTensors)if(r.id===e.id){n=t;break}t=e.sourceLayer.getOutputAt(n)}return t}function rae(e,t){return K4((()=>W5(G9(U5(e,e),t,!0))))}r0().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",(()=>100),(function(e){null!=Qoe&&Qoe.setMaxEntries(e),null!=Joe&&Joe.setMaxEntries(e)}));class iae extends Y5{getConfig(){return{}}}class oae extends iae{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return K4((()=>{const t=rae(e,this.axis),n=m9(t,0,this.maxValue);return U5(e,B5(n,j5(qie(),t)))}))}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}oae.className="MaxNorm",J5(oae);class aae extends iae{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return K4((()=>B5(e,j5(qie(),rae(e,this.axis)))))}getConfig(){return{axis:this.axis}}}aae.className="UnitNorm",J5(aae);class sae extends iae{apply(e){return E7(e)}}sae.className="NonNeg",J5(sae);class lae extends iae{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return K4((()=>{const t=rae(e,this.axis),n=j5(U5(this.rate,m9(t,this.minValue,this.maxValue)),U5(1-this.rate,t));return U5(e,B5(n,j5(qie(),t)))}))}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}lae.className="MinMaxNorm",J5(lae);const uae={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function cae(e){return hie(e)}function hae(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return pie(e,Q5.getMap().classNameMap,t,"constraint")}function dae(e){if(null==e)return null;if("string"===typeof e){return hae({className:e in uae?uae[e]:e,config:{}})}return e instanceof iae?e:hae(e)}async function pae(e){if(null==e)return;const t=[],n=[],r=[];for(const i in e){const o=e[i];if("number"!==typeof o){const e=o;t.push(e.data()),n.push(i),r.push(e)}}if(t.length>0){const i=await Promise.all(t);for(let t=0;t<i.length;++t)e[n[t]]=i[t][0];X4(r)}}function fae(e){if(null!=e)for(const t in e){const n=e[t];"number"!==typeof n&&n.dispose()}}var mae;!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(mae||(mae={}));class gae{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class yae{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;null==e&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(const t of this.callbacks)t.setParams(e)}setModel(e){for(const t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochBegin(e,t)}async onEpochEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochEnd(e,t)}async onBatchBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchBegin(e,t)}async onBatchEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchEnd(e,t)}async onTrainBegin(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainEnd(e)}}class vae extends gae{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){null==t&&(t={});const n=null==t.size?0:t.size;this.seen+=n;for(const r in t){const e=t[r];if("number"===typeof e)this.totals.hasOwnProperty(r)||(this.totals[r]=0),this.totals[r]=this.totals[r]+e*n;else{let t;r in this.totals?t=this.totals[r]:this.totals[r]=0;const i=K4((()=>j5(this.totals[r],U5(e,n))));this.totals[r]=i,null!=t&&t.dispose()}}}async onEpochEnd(e,t){if(null!=t)for(const n of this.params.metrics)null!=this.totals[n]&&("number"===typeof this.totals[n]?t[n]=this.totals[n]/this.seen:K4((()=>{const e=U5(B5(1,this.seen),this.totals[n]);t[n]=e,this.totals[n].dispose(),Y4(t[n])})))}}class bae extends gae{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){null==t&&(t={}),this.epoch.push(e);for(const n in t)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(t[n])}async syncData(){const e=[],t=[],n=[];for(const i in this.history){const r=this.history[i];for(let o=0;o<r.length;++o)if("number"!==typeof r[o]){const a=r[o];e.push(a.data()),t.push(i),n.push(o)}}const r=await Promise.all(e);for(let i=0;i<r.length;++i){this.history[t[i]][n[i]].dispose(),this.history[t[i]][n[i]]=r[i][0]}}}class xae extends gae{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||J8,this.yieldEvery=t||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");zZ(this.yieldEvery)&&(this.maybeWait=function(e,t,n){let r,i=null!=n?n():H3();return function(){const o=null!=n?n():H3();return o-i<t||(i=o,r=e(...arguments)),r}}(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){const r=[];null!=this.yield&&(await pae(n),r.push(this.yield(e,t,n))),r.push(this.nextFrameFunc()),await Promise.all(r)}async onEpochBegin(e,t){this.currentEpoch=e,null!=this.epochBegin&&(await pae(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){const n=[];null!=this.epochEnd&&(await pae(t),n.push(this.epochEnd(e,t))),"epoch"===this.yieldEvery&&n.push(this.nextFrameFunc()),await Promise.all(n)}async onBatchBegin(e,t){null!=this.batchBegin&&(await pae(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){const n=[];null!=this.batchEnd&&(await pae(t),n.push(this.batchEnd(e,t))),"batch"===this.yieldEvery?n.push(this.nextFrameFunc()):zZ(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){null!=this.trainBegin&&(await pae(e),await this.trainBegin(e))}async onTrainEnd(e){null!=this.trainEnd&&(await pae(e),await this.trainEnd(e))}}function wae(e,t){if(null==e&&(e={}),e instanceof gae)return[e];if(Array.isArray(e)&&e[0]instanceof gae)return e;return sie(e).map((e=>new xae(e,t)))}class kae{constructor(){}static registerCallbackConstructor(e,t){SZ(e>=0&&Number.isInteger(e),(()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`)),kae.checkForDuplicate(t),null==kae.constructors[e]&&(kae.constructors[e]=[]),kae.constructors[e].push(t)}static checkForDuplicate(e){for(const t in kae.constructors){kae.constructors[+t].forEach((t=>{if(t===e)throw new Zre("Duplicate callback constructor.")}))}}static clear(){kae.constructors={}}static createCallbacks(e){const t=[];for(const n in kae.constructors){const r=+n;e>=r&&t.push(...kae.constructors[r])}return t.map((e=>new e))}}function Sae(e,t,n,r,i,o,a,s,l){const u=new bae,c=[new vae,...kae.createCallbacks(t)];null!=e&&c.push(...e),c.push(u);const h=new yae(c);return h.setParams({epochs:n,initialEpoch:r,samples:i,steps:o,batchSize:a,verbose:t,doValidation:s,metrics:l}),{callbackList:h,history:u}}function Eae(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return pie(e,Q5.getMap().classNameMap,t,"layer",n)}function Iae(e,t){return K4((()=>{"float32"!==e.dtype&&(e=M5(e,"float32"));const n=G9(ooe(e),t,!0),r=t6(n.shape,qie()),i=W5(c6(n,r));return B5(e,i)}))}function Tae(e,t){return K4((()=>a7(ooe(i6(t,e)),-1)))}function Cae(e,t){return K4((()=>a7(a6(i6(t,e)),-1)))}function Aae(e,t){return K4((()=>{const n=i6(e,t),r=m9(a6(e),qie(),Number.MAX_VALUE),i=a6(B5(n,r));return U5(100,a7(i,-1))}))}function _ae(e,t){return K4((()=>{const n=m9(t,qie(),Number.MAX_VALUE),r=U9(j5(1,n)),i=m9(e,qie(),Number.MAX_VALUE),o=U9(j5(1,i));return a7(ooe(i6(r,o)),-1)}))}function Nae(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return K4((()=>{if(n)t=D7(t);else{const e=G9(t,t.shape.length-1,!0);t=B5(t,e)}return t=m9(t,qie(),1-qie()),c7(G9(U5(M5(e,"float32"),U9(t)),t.shape.length-1))}))}function Oae(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return K4((()=>{const r=M5(F9(function(e){const t=[Uie(e.shape)];return s9(e,t)}(e)),"int32"),i=(t=m9(t,qie(),1-qie())).shape;return Nae(s9(d7(r,i[i.length-1]),i),t,n)}))}function Rae(e,t){return K4((()=>{let n;return n=m9(t,qie(),1-qie()),n=U9(B5(n,i6(1,n))),a7(function(e,t){if(!CZ(e.shape,t.shape))throw new Zre(`logits and labels must have the same shape, but got shapes ${JSON.stringify(e.shape)} and ${JSON.stringify(t.shape)}`);return K4((()=>{const n=E7(t),r=c7(a6(t));return j5(i6(n,U5(t,e)),W9($9(r)))}))}(e,n),-1)}))}function $ae(e,t){return K4((()=>{const n=m9(e,qie(),1),r=m9(t,qie(),1);return G9(U5(e,U9(B5(n,r))),-1)}))}function Dae(e,t){return K4((()=>{const n=Iae(e,-1),r=Iae(t,-1),i=U5(n,r);return c7(G9(i,-1))}))}kae.constructors={};const Pae={meanSquaredError:Tae,meanAbsoluteError:Cae,meanAbsolutePercentageError:Aae,meanSquaredLogarithmicError:_ae,squaredHinge:function(e,t){return K4((()=>{const n=c6(0,i6(1,U5(e,t)));return a7(ooe(n),-1)}))},hinge:function(e,t){return K4((()=>{const n=c6(0,i6(1,U5(e,t)));return a7(n,-1)}))},categoricalHinge:function(e,t){return K4((()=>{const n=G9(U5(e,t),-1),r=V9(U5(i6(1,e),t),-1);return c6(0,j5(1,i6(r,n)))}))},logcosh:function(e,t){return K4((()=>{const n=Math.log(2),r=i6(t,e),i=i6(j5(r,P7(U5(-2,r))),n);return a7(i,-1)}))},categoricalCrossentropy:Nae,sparseCategoricalCrossentropy:Oae,binaryCrossentropy:Rae,kullbackLeiblerDivergence:$ae,poisson:function(e,t){return K4((()=>{const n=U9(j5(qie(),t));return a7(i6(t,U5(e,n)),-1)}))},cosineProximity:Dae};function Mae(e){if("string"===typeof e){if(e in Pae)return Pae[e];let t=`Unknown loss ${e}`;throw e.toLowerCase().includes("softmaxcrossentropy")&&(t=`Unknown loss ${e}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new Zre(t)}return e}function Fae(e,t){return K4((()=>{const n=U5(.5,m7(t)),r=Kie(j9(t,n),e.dtype);return a7(O9(e,r),-1)}))}function Lae(e,t){return K4((()=>Kie(O9(G6(e,-1),G6(t,-1)),"float32")))}function jae(e,t){return K4((()=>M5(G9(n7(O9(e,1),O9(t,1))),"float32")))}function zae(e,t){return Rae(e,t)}function Bae(e,t){return e.rank===t.rank&&(e=F7(e,[e.rank-1])),(t=G6(t,-1)).dtype!==e.dtype&&(t=M5(t,e.dtype)),M5(O9(e,t),"float32")}const Uae=Nae,Wae=Oae,Vae={binaryAccuracy:Fae,categoricalAccuracy:Lae,precision:function(e,t){return K4((()=>{const n=jae(e,t),r=function(e,t){return K4((()=>M5(G9(n7(O9(e,0),O9(t,1))),"float32")))}(e,t),i=j5(n,r);return M5(V7(j9(i,0),B5(n,i),0),"float32")}))},categoricalCrossentropy:Uae,sparseCategoricalCrossentropy:Wae,mse:Tae,MSE:Tae,mae:Cae,MAE:Cae,mape:Aae,MAPE:Aae,cosine:Dae};function Gae(e){if("string"===typeof e&&e in Vae)return Vae[e];if("string"!==typeof e&&null!=e)return e;throw new Zre(`Unknown metric ${e}`)}function Hae(e){if(iie(null!==e,`Unknown LossOrMetricFn ${e}`),"string"===typeof e)return e;{let t;for(const n of Object.keys(Pae))if(Pae[n]===e){t=n;break}if(void 0!==t)return t;for(const n of Object.keys(Vae))if(Vae[n]===e){t=n;break}return void 0!==t?t:e.name}}const qae=1048576;function Kae(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!Xae(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const n=JSON.stringify(e);n.length>qae&&console.warn(`User-defined metadata of model "${t}" is too large in size (length=${n.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.`)}}function Xae(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);for(const n of t){if("string"!==typeof n)return!1;if(!Xae(e[n]))return!1}return!0}if(Array.isArray(e)){for(const t of e)if(!Xae(t))return!1;return!0}return!1}{const t=typeof e;return"string"===t||"number"===t||"boolean"===t}}function Yae(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log;const i=function(e){let t=!0;const n=[],r=[];for(const i in e.nodesByDepth)n.push(e.nodesByDepth[i]);for(const i of n){if(i.length>1||1===i.length&&i[0].inboundLayers.length>1){t=!1;break}r.push(...i)}if(t)for(const i of e.layers){let e=!1;for(const n of i.inboundNodes)if(-1!==r.indexOf(n)){if(e){t=!1;break}e=!0}if(!t)break}return t}(e),o=["Layer (type)","Input Shape","Output shape","Param #"];let a;if(i?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map((e=>Math.floor(t*e)))),!i){o.push("Receives inputs"),a=[];for(const t in e.nodesByDepth)a.push(...e.nodesByDepth[t])}r("_".repeat(t)),Qae(o,n,r),r("=".repeat(t));const s=e.layers;for(let c=0;c<s.length;++c)i?Jae(s[c],n,r):Zae(s[c],n,a,r),r((c===s.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();const l=function(e){let t;t=null!=e.collectedTrainableWeights?Moe(e.collectedTrainableWeights):Moe(e.trainableWeights);return t}(e),u=Moe(e.nonTrainableWeights);r(`Total params: ${l+u}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${u}`),r("_".repeat(t))}function Qae(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="";for(let i=0;i<e.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r+=e[i],r=r.slice(0,t[i]),r+=" ".repeat(t[i]-r.length);n(r)}function Jae(e,t,n){let r,i;try{i=e.inboundNodes.map((e=>JSON.stringify(e.inputShapes))).join(",")}catch(hNe){i="multiple"}try{r=JSON.stringify(e.outputShape)}catch(hNe){r="multiple"}Qae([`${e.name} (${e.getClassName()})`,i,r,e.countParams().toString()],t,n)}function Zae(e,t,n,r){let i,o;try{o=e.inboundNodes.map((e=>JSON.stringify(e.inputShapes))).join(",")}catch(hNe){o="multiple"}try{i=JSON.stringify(e.outputShape)}catch(hNe){i="multiple"}const a=[];for(const c of e.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(c)))for(let e=0;e<c.inboundLayers.length;++e){const t=c.inboundLayers[e].name,n=c.nodeIndices[e],r=c.tensorIndices[e];a.push(`${t}[${n}][${r}]`)}const s=e.name,l=e.getClassName(),u=0===a.length?"":a[0];Qae([`${s} (${l})`,o,i,e.countParams().toString(),u],t,r);for(let c=1;c<a.length;++c)Qae(["","","","",a[c]],t,r)}function ese(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function tse(e,t){if(null===e)return null;if("string"===typeof e)return uie(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let i=0;i<r;++i){const r=e[i];ese(t,i,r)?n.push(r):n.push(tse(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n];if("name"===n&&"string"===typeof r)t[n]=r;else{const e=uie(n);t[e]=tse(r,e)}}return t}}function nse(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return lie(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){const n=[],r=e.length;for(let i=0;i<r;++i){const r=e[i];ese(t,i,r)?n.push(r):n.push(nse(r,t))}return n}{const t={};for(const n of Object.keys(e)){const r=e[n],i=lie(n);t[i]="name"!==n&&"className"!==n||"string"!==typeof r?nse(r,n):r}return t}}const rse="4.21.0";class ise extends Hoe{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,null==this.name){const e=this.getClassName().toLowerCase();this.name=Iie(e)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],mie(this.inputs).length!==this.inputs.length)throw new Zre(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map((e=>e.name))}`);mie(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map((e=>e.name))}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const y of this.outputs){const e=y.sourceLayer,t=y.nodeIndex,n=y.tensorIndex;this.outputLayers.push(e),this.outputLayersNodeIndices.push(t),this.outputLayersTensorIndices.push(n)}for(const y of this.inputs){const e=y.sourceLayer,t=y.nodeIndex,n=y.tensorIndex;iie(0===t,"input layer has >1 nodes"),iie(0===n,"input layer has >1 tensors"),this.inputLayers.push(e),this.inputLayersNodeIndices.push(t),this.inputLayersTensorIndices.push(n)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let y=0;y<this.inputLayers.length;y++){const t=this.inputLayers[y];if(!(t instanceof Koe))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${y} (0-based) originates from layer type ${t.getClassName()}.`);this.inputNames.push(t.name),this.feedInputShapes.push(t.batchInputShape),this.feedInputNames.push(t.name)}for(const y of this.outputLayers)this.outputNames.push(y.name);this.internalInputShapes=this.inputs.map((e=>e.shape)),this.internalOutputShapes=this.outputs.map((e=>e.shape));const t={},n={},r={},i={},o={},a=[],s=(e,t,n,r,i,l)=>{null!=r&&null!=i&&null!=l||(r=e.sourceLayer,i=e.nodeIndex,l=e.tensorIndex);const u=r.inboundNodes[i];if(-1!==n.indexOf(u))throw new Jre(`The tensor ${e.name} at layer "${r.name}" is part of a cycle.`);if(-1!==t.indexOf(u))return;this.containerNodes.add(ise.nodeKey(r,i)),r.id in o||(o[r.id]=Object.keys(o).length),-1===n.indexOf(u)&&n.push(u);const c=u.inboundLayers.length;for(let o=0;o<c;o++){const e=u.inputTensors[o],r=u.inboundLayers[o],i=u.nodeIndices[o],a=u.tensorIndices[o];s(e,t,n,r,i,a)}for(t.push(u);n.indexOf(u)>=0;)n.splice(n.indexOf(u),1);a.push(u)},l=[],u=[];for(const y of this.outputs)s(y,l,u);const c=a.slice().reverse();for(const y of c){n[y.id]=y,y.id in t||(t[y.id]=0);let e=t[y.id];const o=null==r[y.outboundLayer.id]?0:r[y.outboundLayer.id];e=Math.max(e,o),r[y.outboundLayer.id]=e,i[y.outboundLayer.id]=y.outboundLayer,t[y.id]=e;for(let r=0;r<y.inboundLayers.length;r++){const i=y.inboundLayers[r],o=y.nodeIndices[r],a=i.inboundNodes[o],s=null==t[a.id]?0:t[a.id];t[a.id]=Math.max(e+1,s),n[a.id]=a}}const h={};for(const y in t){const e=t[y];e in h||(h[e]=[]),h[e].push(n[y])}const d={};for(const y in r){const e=r[y];e in d||(d[e]=[]),d[e].push(i[y])}let p=Object.keys(d).map((e=>parseInt(e,10))).sort(fie);this.layers=[];for(const y of p){const e=d[y];e.sort(((e,t)=>{const n=o[e.id],r=o[t.id];return n<r?-1:n>r?1:0}));for(const t of e)t instanceof ise&&this.internalContainerRefs.push(t),this.layers.push(t)}this.layersByDepth=d,p=Object.keys(h).map((e=>parseInt(e,10))).sort(fie);const f=this.inputs.slice(),m=[];for(const y of p)for(const e of h[y]){const t=e.outboundLayer;if(null!=t){for(const n of e.inputTensors)if(-1===f.indexOf(n))throw new Jre(`Graph disconnected: cannot obtain value for tensor ${n} at layer "${t.name}". The following previous layers were accessed without issue: ${m}`);for(const t of e.outputTensors)f.push(t);m.push(t.name)}}this.nodesByDepth=h;const g=this.layers.map((e=>e.name));for(const y of g){const e=g.filter((e=>e===y)).length;if(1!==e)throw new Jre(`The name "${y}" is used ${e} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new Voe({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map((e=>null)),outputMasks:this.outputs.map((e=>null)),inputShapes:this.inputs.map((e=>e.shape)),outputShapes:this.outputs.map((e=>e.shape))}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){for(const t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(const t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach((t=>{t._trainableWeights.forEach((t=>t.trainable=e))})),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new Zre("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.layers)t.push(...e.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n={};let r=0;const i=(e=>{const t=Object.keys(e);if(0===t.length)return!1;const n=t[0].split("/");return!isNaN(parseInt(n[n.length-1],10))})(e);i&&this.parseWeights(e);for(const a of this.layers)for(const[e,t]of a.weights.entries()){const o=i?`${t.name.split("/").slice(0,-1).join("/")+"/"}${e}`:t.originalName;if(null!=n[o])throw new Zre(`Duplicate weight name: ${o}`);n[o]=t,r++}const o=[];for(const a in e){let r=a;if(null==n[a]){const e=a.split("/");r=e.slice(0,-2).concat([e[e.length-1]]).join("/")}if(null!=n[r])o.push([n[r],e[a]]);else if(t)throw new Zre(`Provided weight data has no target variable: ${a}`);delete n[r]}if(t){const e=[];for(const t in n)e.push(t);if(e.length>0)throw new Zre(`${e.length} of ${r} weights are not set: ${e}`)}zoe(o)}parseWeights(e){for(const t in Object.keys(e)){const n=t.split("/"),r=["vars","layer_checkpoint_dependencies"],i=n.map((e=>e.startsWith("_")?e.slice(1):e)).filter((e=>!r.includes(e))).join("/");i!==t&&(e[i]=e[t],delete e[t])}}updatedConfig(){const e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion=`tfjs-layers ${rse}`,t.backend="TensorFlow.js",t}toJSON(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=nse(this.updatedConfig());return t?JSON.stringify(n):n}call(e,t){return K4((()=>{e=sie(e);const n=new Yoe;for(let t=0;t<this.inputs.length;++t)n.add(this.inputs[t],e[t]);return Zoe(this.outputs,n,t)}))}computeMask(e,t){return K4((()=>{let n;return e=sie(e),n=null==t?rie(null,e.length):sie(t),this.runInternalGraph(e,n)[1]}))}computeOutputShape(e){const t=$oe(e);if(t.length!==this.inputLayers.length)throw new Zre(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const n={};for(let a=0;a<t.length;a++){const e=this.inputLayers[a],r=t[a];n[e.name+"_0_0"]=r}const r=Object.keys(this.nodesByDepth).map((e=>parseInt(e,10))).sort(fie);if(r.length>1)for(const a of r){const e=this.nodesByDepth[a];for(const t of e){const e=t.outboundLayer;if(-1!==this.inputLayers.map((e=>e.id)).indexOf(e.id))continue;const r=[];for(let a=0;a<t.inboundLayers.length;a++){const e=t.inboundLayers[a],i=t.nodeIndices[a],o=t.tensorIndices[a],s=n[`${e.name}_${i}_${o}`];r.push(s)}const i=$oe(e.computeOutputShape(aie(r))),o=e.inboundNodes.indexOf(t);for(let t=0;t<i.length;t++){n[`${e.name}_${o}_${t}`]=i[t]}}}const i=[],o=[];for(let a=0;a<this.outputLayers.length;a++){const e=this.outputLayers[a],t=this.outputLayersNodeIndices[a],n=this.outputLayersTensorIndices[a],r=`${e.name}_${t}_${n}`;o.push(r)}for(let a=0;a<o.length;a++){const e=o[a];iie(e in n),i.push(n[e])}return aie(i)}runInternalGraph(e,t){null==t&&(t=rie(null,e.length));const n={};for(let s=0;s<this.inputs.length;++s){const r=this.inputs[s],i=e[s],o=t[s];n[r.id]=[i,o]}const r=Object.keys(this.nodesByDepth).map((e=>parseInt(e,10))).sort(fie);for(const s of r){const e=this.nodesByDepth[s];for(const t of e){const e=t.outboundLayer,r=t.inputTensors,i=t.outputTensors,o=new Array;for(const t of r)t.id in n&&o.push(n[t.id]);if(o.length===r.length){let r,a,s,l,u={};if(null!=t.callArgs&&(u=t.callArgs),1===o.length){const[t,n]=o[0];null==u.mask&&(u.mask=n),s=sie(e.call(t,u)),l=sie(e.computeMask(t,n)),r=[t],a=[n]}else r=o.map((e=>e[0])),a=o.map((e=>e[1])),null==u.mask&&(u.mask=a),s=sie(e.call(r,u)),l=sie(e.computeMask(r,a));if(e.activityRegularizer)throw new eie("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let e=0;e<i.length;++e){const t=i[e],r=s[e],o=l[e];n[t.id]=[r,o]}}}}const i=[],o=[],a=[];for(const s of this.outputs){iie(s.id in n,`Could not compute output ${s.name} : ${s.id}`);const[e,t]=n[s.id];a.push(e.shape),i.push(e),o.push(t)}return[i,o,a]}buildNodeConversionMap(e){const t={};let n;for(const r of this.layers){n=r instanceof ise?1:0;for(let e=0;e<r.inboundNodes.length;e++){const i=ise.nodeKey(r,e);this.containerNodes.has(i)&&(t[i]=n,n+=1)}}return t}getLayer(e,t){if(null!=t)return this.findLayer(t);if(null==e)throw new Zre("Provide either a layer name or layer index");if("number"===typeof e)return this.findLayer(e);for(const n of this.layers)if(n.name===e)return n;throw new Zre(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new Zre(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return K4((()=>{const e=[];for(const t of this.layers)for(let n=0;n<t.inboundNodes.length;++n){const r=ise.nodeKey(t,n);this.containerNodes.has(r)&&e.push(...t.calculateLosses())}return e}))}getConfig(){const e={name:this.name},t=this.buildNodeConversionMap(this.layers),n=[];for(const o of this.layers){const e=o.getClassName(),r=o.getConfig(),i=[];for(let n=0;n<o.inboundNodes.length;n++){const e=o.inboundNodes[n],r=ise.nodeKey(o,n);let a={};if(this.containerNodes.has(r)){if(e.callArgs)try{JSON.stringify(e.callArgs),a=e.callArgs}catch(hNe){console.warn(`Layer ${o.name} was passed non-serializable keyword arguments: ${e.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),a={}}if(e.inboundLayers.length>0){const n=[];for(let r=0;r<e.inboundLayers.length;r++){const i=e.inboundLayers[r],o=e.nodeIndices[r],s=e.tensorIndices[r];let l=t[ise.nodeKey(i,o)];null==l&&(l=0),n.push([i.name,l,s,a])}i.push(n)}}}const a={};a.name=o.name,a.className=e,a.config=r,a.inboundNodes=i,n.push(a)}e.layers=n;const r=[];for(let o=0;o<this.inputLayers.length;o++){const e=this.inputLayers[o],n=this.inputLayersNodeIndices[o],i=ise.nodeKey(e,n);if(!this.containerNodes.has(i))continue;let a=t[i];null!==a&&void 0!==a||(a=0);const s=this.inputLayersTensorIndices[o];r.push([e.name,a,s])}e.inputLayers=r;const i=[];for(let o=0;o<this.outputLayers.length;o++){const e=this.outputLayers[o],n=this.outputLayersNodeIndices[o],r=ise.nodeKey(e,n);if(!this.containerNodes.has(r))continue;let a=t[r];null!==a&&void 0!==a||(a=0);const s=this.outputLayersTensorIndices[o];i.push([e.name,a,s])}return e.outputLayers=i,e}static fromConfig(e,t){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r={},i={};function o(e,t){e.name in i?i[e.name].push(t):i[e.name]=[t]}function a(e,t){const n=[];let i;for(const a of t){const s=a[0],l=a[1],u=a[2];if(i=null==a[3]?{}:a[3],!(s in r))return void o(e,t);const c=r[s];if(c.inboundNodes.length<=l)return void o(e,t);const h=c.inboundNodes[l];n.push(h.outputTensors[u])}n.length>0&&e.apply(aie(n),i)}function s(e){const i=e.name,a=Eae(e,null!=t.customObjects?t.customObjects:{});a.setFastWeightInitDuringBuild(n),r[i]=a;e.inboundNodes.forEach((e=>{if(!(e instanceof Array))throw new Zre(`Corrupted configuration, expected array for nodeData: ${e}`);o(a,e)}))}const l=t.name,u=t.layers;for(const f of u)s(f);for(;!gie(i);)for(const e of u){const t=r[e.name];if(t.name in i){const e=i[t.name];delete i[t.name];for(const n of e)a(t,n)}}const c=[],h=[],d=t.inputLayers;for(const f of d){const e=f[0],t=f[1],n=f[2];iie(e in r);const i=r[e].inboundNodes[t].outputTensors;c.push(i[n])}const p=t.outputLayers;for(const f of p){const e=f[0],t=f[1],n=f[2];iie(e in r);const i=r[e].inboundNodes[t].outputTensors;h.push(i[n])}return new e({inputs:c,outputs:h,name:l})}get stateful(){if(this._stateful)throw new Zre("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){K4((()=>{this.layers.forEach((e=>{e.stateful&&e.resetStates()}))}))}}function ose(e,t,n){const r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((e=>null));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error(`Provided ${n} is an array of ${e.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){const n=[];return t.forEach((t=>{t in e?n.push(e[t]):n.push(null)})),n}throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${t} keys. Provided ${n} not understood: ${JSON.stringify(e)}`)}function ase(e,t){return ose(e,t,"classWeight")}async function sse(e,t,n,r){if(null!=t||null!=r)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){const t=K4((()=>{if(1===e.shape.length)return F5(e);if(2===e.shape.length){if(e.shape[1]>1){return G6(e,1)}if(1===e.shape[1])return s9(e,[e.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${e.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}throw new Error(`Unexpected rank of target (y) tensor (${e.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)})),r=Array.from(await t.data());X4(t);const i=[];return r.forEach((e=>{if(null==n[e])throw new Error(`classWeight must contain all classes in the training data. The class ${e} exists in the data but not in classWeight`);i.push(n[e])})),z7(i,"float32")}return null}function lse(e,t){return U5(e,t)}function use(e,t){let n,r;const i=t;n=i.xs,r=i.ys,SZ(null!=n&&null!=r,(()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${t}`));const o=cse("input",e.inputNames,n),a=cse("output",e.outputNames,r),s=o[0].shape[0];SZ(o.length===e.inputs.length,(()=>`LayersModel has ${e.inputs.length} inputs, but the dataset provides ${o.length} inputs.  (Expected input keys: ${JSON.stringify(e.inputNames)})`)),SZ(a.length===e.outputs.length,(()=>`LayersModel has ${e.outputs.length} outputs, but the dataset provides ${a.length} outputs.  (Expected output keys: ${JSON.stringify(e.outputNames)})`));for(let l=0;l<o.length;l++)SZ(o[l].shape[0]===s,(()=>`Batch size mismatch: input ${e.inputNames[l]} has ${o[l].shape[0]}; expected  ${s} based on input ${e.inputNames[0]}.`));for(let l=0;l<a.length;l++)SZ(a[l].shape[0]===s,(()=>`Batch size mismatch: output ${e.outputNames[l]} has ${a[l].shape[0]}; expected  ${s} based on input ${e.inputNames[0]}.`));return{xs:o,ys:a}}function cse(e,t,n){if(n instanceof u4)return[n];if(Array.isArray(n))return SZ(n.length===t.length,(()=>`Received an array of ${n.length} Tensors, but expected ${t.length} to match the ${e} keys ${t}.`)),n;{const r=[];for(const i of t){if(null==n[i])throw new Zre(`The feature data generated by the dataset lacks the required ${e} key '${i}'.`);r.push(n[i])}return r}}async function hse(e,t,n){const r=null!=n.batchesPerEpoch;if(SZ(null!=e.optimizer,(()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig).")),SZ(null!=n,(()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call.")),SZ(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),(()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`)),SZ(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),(()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`)),SZ(null==n.validationSplit,(()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead.")),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{const i=null!=n.validationData;let o,a;if(i)if(dse(n.validationData))SZ(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),(()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`));else{const e=function(e){if(3===e.length)throw new eie("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}(n.validationData);o=e.xs,a=e.ys}const s=e.makeTrainFunction(),l=e.getDedupedMetricsNames();let u;u=i?l.slice().concat(l.map((e=>"val_"+e))):l.slice();const c=wae(n.callbacks,n.yieldEvery),h=null==n.verbose?1:n.verbose,{callbackList:d,history:p}=Sae(c,h,n.epochs,null,null,function(e,t){let n=null;null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size);return n}(t,n),null,i,u);d.setModel(e),e.history=p,await d.onTrainBegin(),e.stopTraining_=!1;let f=null==n.initialEpoch?0:n.initialEpoch,m=await t.iterator();for(;f<n.epochs;){const u={};await d.onEpochBegin(f);let c=0,h=0;for(r||(m=await t.iterator());!r||c<n.batchesPerEpoch;){const t=await m.next();if(r&&t.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${c} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, `+n.batchesPerEpoch*n.epochs+" batches). You may need to use the repeat() function when building your dataset.");break}if(null!=t.value){const{xs:r,ys:i}=use(e,t.value),o={};o.batch=h,o.size=r[0].shape[0],await d.onBatchBegin(h,o);const a=[];if(null!=n.classWeight){const t=ase(n.classWeight,e.outputNames);for(let e=0;e<t.length;++e)a.push(await sse(i[e],null,t[e]))}const u=r.concat(i).concat(a),p=s(u);X4(u);for(let e=0;e<l.length;++e){const t=l[e],n=p[e];o[t]=n,Y4(n)}await d.onBatchEnd(h,o),fae(o),h++,c++}if(r?c>=n.batchesPerEpoch:t.done){if(i){let t;t=dse(n.validationData)?sie(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):sie(e.evaluate(o,a,{batchSize:null==n.validationBatchSize?32:n.validationBatchSize,verbose:0}));for(let n=0;n<e.metricsNames.length;++n)u[`val_${e.metricsNames[n]}`]=t[n]}break}if(e.stopTraining_)break}if(await d.onEpochEnd(f,u),f++,e.stopTraining_)break}return await d.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function dse(e){return"function"===typeof e.iterator}function pse(e){SZ(e>0&&Number.isInteger(e),(()=>`batchSize is required to be a positive integer, but got ${e}`))}function fse(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((e=>Yie(e,t,n-t))):Yie(e,t,n-t)}function mse(e,t){return K4((()=>null==e?null:Array.isArray(e)?e.map((e=>mse(e,t))):ioe(e,"int32"===t.dtype?t:M5(t,"int32"))))}function gse(e,t){const n=[];let r=0,i=null;for(;r<e;)i=r+t,i>=e&&(i=e),n.push([r,i]),r=i;return n}function yse(e){const t=[];e instanceof u4&&(e=[e]);for(let n=0;n<e.length;++n){const r=e[n];if(1===r.rank)t.push(Xie(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function vse(e,t){if(null==e)return;const n=[];if(t instanceof u4)n.push(t.id);else if(Array.isArray(t))t.forEach((e=>n.push(e.id)));else if(null!=t)for(const i in t){const e=t[i];n.push(e.id)}const r=[];if(e instanceof u4)-1===n.indexOf(e.id)&&r.push(e);else if(Array.isArray(e))e.forEach((e=>{-1===n.indexOf(e.id)&&r.push(e)}));else if(null!=e)for(const i in e){const t=e[i];-1===n.indexOf(t.id)&&r.push(t)}r.forEach((e=>{e.isDisposed||e.dispose()}))}function bse(e){return Array.isArray(e)}function xse(e){return!function(e){return e instanceof u4}(e)&&!bse(e)}function wse(e,t,n){let r,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){let t=!1;if(bse(e)&&e.length>0)t=!0;else if(xse(e)){for(const n in e)if(e.hasOwnProperty(n)){t=!0;break}}else t=!0;if(t)throw new Zre(`Error when checking model ${o} expected no data, but got ${e}`)}return[]}if(null==e)return t.map((e=>null));if(xse(e)){r=[];for(const n of t){if(null==e[n])throw new Zre(`No data provided for "${n}". Need data for each key in: ${t}`);r.push(e[n])}}else if(bse(e)){if(e.length!==t.length)throw new Zre(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${t.length} Tensor(s), but instead got the following list of Tensor(s): ${e}`);r=e}else{if(t.length>1)throw new Zre(`The model ${o} expects ${t.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${e.shape}`);r=[e]}if(r=yse(r),null!=n)for(let a=0;a<t.length;++a){if(null==n[a])continue;const e=r[a];if(e.shape.length!==n[a].length)throw new Zre(`Error when checking ${o}: expected ${t[a]} to have ${n[a].length} dimension(s). but got array with shape ${e.shape}`);for(let t=0;t<n[a].length;++t){if(0===t&&!i)continue;const r=e.shape[t],s=n[a][t];if(null!=s&&s>=0&&r!==s)throw new Zre(`${o} expected a batch of elements where each example has shape [${n[a].slice(1,n[a].length)}] (i.e.,tensor shape [*,${n[a].slice(1,n[a].length)}]) but the ${o} received an input with ${e.shape[0]} examples, each with shape [${e.shape.slice(1,e.shape.length)}] (tensor shape [${e.shape}])`)}}return r}function kse(e,t,n){let r,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new Zre(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${t.length} Tensor(s), but instead got ${e.length} Tensors(s).`);r=e}else{if(t.length>1)throw new Zre(`The model expects ${t.length} ${o} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(e.shape)}.`);r=[e]}if(null!=n)for(let a=0;a<t.length;++a){if(null==n[a])continue;const e=r[a];if(e.shape.length!==n[a].length)throw new Zre(`Error when checking ${o}: expected ${t[a]} to have ${n[a].length} dimension(s), but got array with shape ${JSON.stringify(e.shape)}`);for(let r=0;r<n[a].length;++r){if(0===r&&!i)continue;const s=e.shape[r],l=n[a][r];if(null!=l&&l!==s)throw new Zre(`Error when checking ${o}: expected ${t[a]} to have shape ${JSON.stringify(n[a])} but got array with shape ${JSON.stringify(e.shape)}.`)}}}class Sse extends ise{constructor(e){super(e),this.isTraining=!1}summary(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new Zre("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");Yae(this,e,t,n)}compile(e){if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){const t={Adagrad:()=>Y8.adagrad(.01),Adadelta:()=>Y8.adadelta(1,.95,qie()),Adam:()=>Y8.adam(.001,.9,.999,qie()),Adamax:()=>Y8.adamax(.002,.9,.999,qie(),0),RMSProp:()=>Y8.rmsprop(.001,.9,0,qie()),SGD:()=>Y8.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new Zre(`Unknown Optimizer ${e}`)}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Z5))throw new Zre("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new Zre(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);const n=e.loss;t=n.map((e=>Mae(e)))}else{const n=Mae(e.loss);this.outputs.forEach((e=>{t.push(n)}))}else{e.loss=e.loss;for(const t in e.loss)if(-1===this.outputNames.indexOf(t))throw new Zre(`Unknown entry in loss dictionary: "${t}". Only expected the following keys: ${this.outputNames}`);for(const n of this.outputNames)null==e.loss[n]&&console.warn(`Output "${n}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${n} during training`),t.push(Mae(e.loss[n]))}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let o=0;o<this.outputs.length;++o){const e=this.internalOutputShapes[o],t=this.outputNames[o];this.feedOutputNames.push(t),this.feedOutputShapes.push(e),this.feedLossFns.push(this.lossFunctions[o])}const n=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Mie("loss",(()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;const t=this.lossFunctions[e];this.outputs.length>1&&(this.metricsTensors.push([t,e]),this.metricsNames.push(this.outputNames[e]+"_loss"))}}));const r=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((e=>[]));let n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${e}`);n=e}if(Array.isArray(n))return t.map((e=>n));{const e=[];for(const r of t){let t=n.hasOwnProperty(r)?n[r]:[];Array.isArray(t)||(t=[t]),e.push(t)}return e}}(e.metrics,this.outputNames),i=(e,t,n)=>{this.outputNames.length>1&&(t=this.outputNames[e]+"_"+t),this.metricsNames.push(t),this.metricsTensors.push([n,e])};Mie("metric",(()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;(t=>{let n,r,o;for(const a of t){if("string"===typeof a&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(a)){const t=this.internalOutputShapes[e];let i;1===t[t.length-1]||this.lossFunctions[e]===Rae?-1!==["accuracy","acc"].indexOf(a)?r=Fae:-1!==["crossentropy","ce"].indexOf(a)&&(r=zae):this.lossFunctions[e]===Oae?-1!==["accuracy","acc"].indexOf(a)?r=Bae:-1!==["crossentropy","ce"].indexOf(a)&&(r=Wae):-1!==["accuracy","acc"].indexOf(a)?r=Lae:-1!==["crossentropy","ce"].indexOf(a)&&(r=Uae),-1!==["accuracy","acc"].indexOf(a)?i="acc":-1!==["crossentropy","ce"].indexOf(a)&&(i="ce"),o=r,n=""+i}else{const e=Gae(a);o=e,n=""+Hae(a)}let t;Mie(n,(()=>{t=o})),i(e,n,t)}})(r[e])}})),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=null==n.batchSize?32:n.batchSize;pse(r);const i=this.standardizeUserDataXY(e,t,!0,r);try{const e=i[0].concat(i[1]);this.makeTestFunction();const t=this.testFunction;return aie(this.testLoop(t,e,r,n.verbose,n.steps))}finally{vse(i[0],e),vse(i[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),async function(e,t,n){const r=null!=(n=n||{}).batches,i=e.testFunction;let o=[];if(n.verbose>0)throw new eie("Verbose mode is not implemented yet.");SZ(!r||n.batches>0&&Number.isInteger(n.batches),(()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`));const a="function"===typeof t.next?t:await t.iterator();let s=0,l=0;for(;!r||l<n.batches;){const t=await a.next();if(o=K4((()=>{if(t.value){const{xs:n,ys:r}=use(e,t.value),a=n.concat(r),u=K4((()=>i(a)));if(X4(a),0===l)for(let e=0;e<u.length;++e)o.push(q5(0));const c=a[0].shape[0];for(let e=0;e<u.length;++e){const t=u[e],n=o[e];o[e]=K4((()=>j5(o[e],U5(c,t)))),l>0&&X4(n)}X4(u),s+=c,++l}return o})),t.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<o.length;++u){const e=o[u];o[u]=B5(o[u],s),X4(e)}return aie(o)}(this,e,t)}checkNumSamples(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new Zre(`If ${i} is set, batchSize must be null or undefined.Got batchSize = ${t}`)}else{if(null==e)throw new Zre(`Either the input data should have a defined shape, or ${i} shoud be specified.`);r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}execute(e,t){if(Array.isArray(t)&&0===t.length)throw new Zre("`outputs` is an empty Array, which is not allowed.");const n=Array.isArray(t),r=n?t:[t],i=this.retrieveSymbolicTensors(r),o=new Yoe;if(e instanceof u4&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new Zre(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let t=0;t<this.inputs.length;++t)o.add(this.inputs[t],e[t])}else for(const s of this.inputs){const t=e[s.name];if(null==t)throw new Zre(`No value is provided for the model's input ${s.name}`);o.add(s,t)}const a=Zoe(i,o);return n?a:a[0]}retrieveSymbolicTensors(e){const t=rie(null,e.length);let n=e.length;for(const r of this.layers){const i=Array.isArray(r.output)?r.output:[r.output],o=i.map((e=>e.name));for(let r=0;r<e.length;++r){const a=o.indexOf(e[r]);if(-1!==a&&(t[r]=i[a],n--),0===n)break}if(0===n)break}if(n>0){const n=[];throw t.forEach(((t,r)=>{null==t&&n.push(e[r])})),new Zre(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(n)}`)}return t}predictLoop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return K4((()=>{const r=this.checkNumSamples(e);if(n)throw new eie("Verbose predictLoop() is not implemented yet.");const i=gse(r,t),o=this.outputs.map((e=>[]));for(let t=0;t<i.length;++t){K4((()=>{const n=i[t][0],r=i[t][1],o=fse(e,n,r),a=[];if(Array.isArray(o))for(let e=0;e<o.length;++e)a.push({key:this.inputs[e],value:o[e]});else a.push({key:this.inputs[0],value:o});const s=new Yoe(a);return Zoe(this.outputs,s)})).forEach(((e,t)=>o[t].push(e)))}return aie(o.map((e=>g9(e,0))))}))}predict(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=yse(e);kse(n,this.inputNames,this.feedInputShapes,!1);try{const e=null==t.batchSize?32:t.batchSize;return pse(e),this.predictLoop(n,e)}finally{vse(n,e)}}predictOnBatch(e){kse(e,this.inputNames,this.feedInputShapes,!0);const t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t){let n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new Jre("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const r=[];for(let i=0;i<this.feedOutputShapes.length;++i){const e=this.feedOutputShapes[i];this.feedLossFns[i]===Oae?r.push(e.slice(0,e.length-1).concat([1])):r.push(e)}if(function(e,t){const n=mie(e.map((e=>e.shape[0])));n.sort();const r=mie(t.map((e=>e.shape[0])));if(r.sort(),n.length>1)throw new Zre(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map((e=>e.shape)))}`);if(r.length>1)throw new Zre(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map((e=>e.shape)))}`);if(n.length>0&&r.length>0&&!CZ(n,r))throw new Zre(`Input Tensors should have the same number of samples as target Tensors. Found ${n[0]} input sample(s) and ${r[0]} target sample(s).`)}(e=wse(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=wse(t,this.feedOutputNames,r,!1,"target")),function(e,t,n){const r=[Tae,Rae,Nae];for(let i=0;i<e.length;++i){const o=e[i],a=t[i],s=n[i];if(null!=a){if(a===Nae&&1===o.shape[o.shape.length-1])throw new Zre(`You are passing a target array of shape ${o.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(-1!==r.indexOf(a)){const e=o.shape.slice(1),t=s.slice(1);for(let n=0;n<e.length;++n){const r=e[n],i=t[n];if(null!=i&&r!==i)throw new Zre(`A target Tensor with shape ${o.shape} was passed for an output of shape ${s}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new Zre(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${n}. Found: ${e[0].shape[0]} sample(s).`);return[e,t]}async standardizeUserData(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5?arguments[5]:void 0;const[a,s]=this.standardizeUserDataXY(e,t,i,o);if(null!=n)throw new Error("sample weight is not supported yet.");let l=null;if(null!=r){const e=ase(r,this.outputNames);l=[];for(let t=0;t<e.length;++t)l.push(await sse(s[t],null,e[t]))}return[a,s,l]}testLoop(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;return K4((()=>{const o=this.checkNumSamples(t,n,i,"steps"),a=[];if(r>0)throw new eie("Verbose mode is not implemented yet.");if(null!=i)throw new eie("steps mode in testLoop() is not implemented yet");{const r=gse(o,n),i=z7(Gie(0,o));for(let n=0;n<r.length;++n){const o=r[n][0],s=r[n][1],l=Yie(i,o,s-o),u=mse(t,l),c=e(u);if(0===n)for(let e=0;e<c.length;++e)a.push(q5(0));for(let e=0;e<c.length;++e){const t=c[e];a[e]=j5(a[e],U5(s-o,t))}}for(let e=0;e<a.length;++e)a[e]=B5(a[e],o)}return a}))}getDedupedMetricsNames(){const e=this.metricsNames,t=[];for(let n=0;n<e.length;++n){const r=e[n];let i=r;if(oie(e,r)>1){i+=`_${oie(e.slice(0,n),r)}`}t.push(i)}return t}makeTrainFunction(){return e=>{const t=[],n=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),o=[],a=this.collectedTrainableWeights.map((e=>e.read()));return[this.optimizer_.minimize((()=>{const e=[];for(let t=0;t<this.inputs.length;++t)e.push({key:this.inputs[t],value:n[t]});const a=new Yoe(e),s=Zoe(this.outputs,a,{training:!0});let l;for(let n=0;n<this.lossFunctions.length;++n){let e=(0,this.lossFunctions[n])(r[n],s[n]);null!=i[n]&&(e=lse(e,i[n]));const o=a7(e);t.push(o),l=0===n?e:j5(l,e)}for(let n=0;n<this.metricsTensors.length;++n){let e;if(this.outputs.length>1&&n<this.outputs.length)e=t[n];else{const t=this.metricsTensors[n][0],i=this.metricsTensors[n][1];e=a7(t(r[i],s[i]))}Y4(e),o.push(e)}return l=a7(l),this.calculateLosses().forEach((e=>{l=j5(l,e)})),l}),!0,a)].concat(o)}}makeTestFunction(){this.testFunction=e=>K4((()=>{const t=[];let n;const r=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let e=0;e<this.inputs.length;++e)o.push({key:this.inputs[e],value:r[e]});const a=new Yoe(o),s=Zoe(this.outputs,a);for(let e=0;e<this.lossFunctions.length;++e){const r=this.lossFunctions[e],o=a7(r(i[e],s[e]));n=0===e?o:j5(n,o),t.push(n)}for(let e=0;e<this.metricsTensors.length;++e){const n=this.metricsTensors[e][0],r=this.metricsTensors[e][1],o=a7(n(i[r],s[r]));t.push(o)}return t}))}async fit(e,t){let n,r,i,o,a,s,l,u,c,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;try{const d=null==h.batchSize?32:h.batchSize;pse(d);const p=!1,f=await this.standardizeUserData(e,t,h.sampleWeight,h.classWeight,p,d);n=f[0],r=f[1],c=f[2];let m,g=!1;if(null!=h.validationData&&h.validationData.length>0){if(g=!0,2!==h.validationData.length)throw 3===h.validationData.length?new eie("validationData including sample weights is not supported yet."):new Zre(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${h.validationData} is invalid.`);a=h.validationData[0],s=h.validationData[1];const e=!0,t=await this.standardizeUserData(a,s,null,null,e,d);l=t[0],u=t[1],m=l.concat(u)}else if(null!=h.validationSplit&&h.validationSplit>0&&h.validationSplit<1){g=!0;const e=Math.floor(n[0].shape[0]*(1-h.validationSplit)),t=n[0].shape[0];l=fse(n,e,t),i=n,n=fse(n,0,e),u=fse(r,e,t),o=r,r=fse(r,0,e),m=l.concat(u)}else null!=h.validationSteps&&(g=!0);const y=n.concat(r).concat(c);this.checkTrainableWeightsConsistency();const v=this.makeTrainFunction(),b=this.getDedupedMetricsNames();let x,w;g?(this.makeTestFunction(),x=this.testFunction,w=b.slice().concat(b.map((e=>"val_"+e)))):(x=null,m=[],w=b.slice());const k=wae(h.callbacks,h.yieldEvery);return await this.fitLoop(v,y,b,d,h.epochs,h.verbose,k,x,m,h.shuffle,w,h.initialEpoch,null,null)}finally{this.isTraining=!1,vse(n,e),vse(r,t),vse(i,e),vse(o,t),vse(l,a),vse(u,s),null!=c&&X4(c)}}async fitLoop(e,t,n,r,i,o,a,s,l,u,c,h,d,p){null==r&&(r=32),null==i&&(i=1),null==u&&(u=!0),null==h&&(h=0);let f=!1;if(null!=s&&null!=l&&(f=!0),null!=p&&(f=!0,null==d))throw new Zre("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const m=this.checkNumSamples(t,r,d,"steps_per_epoch");let g;null!=m&&(g=Gie(0,m)),null==o&&(o=1);const{callbackList:y,history:v}=Sae(a,o,i,h,m,d,r,f,c);y.setModel(this),this.history=v,await y.onTrainBegin(),this.stopTraining_=!1;for(let b=h;b<i;++b){await y.onEpochBegin(b);const i={};if(null!=d)throw new eie("stepsPerEpoch mode is not implemented yet.");{if("batch"===u)throw new eie("batch shuffling is not implemneted yet");u&&bZ(g);const o=z7(g),a=gse(m,r);for(let u=0;u<a.length;++u){const c={};if(await y.onBatchBegin(u,c),K4((()=>{const h=a[u][0],d=a[u][1],p=Yie(o,h,d-h);c.batch=u,c.size=d-h;const m=mse(t,p),g=e(m);for(let e=0;e<n.length;++e){const t=n[e],r=g[e];c[t]=r,Y4(r)}if(u===a.length-1&&f){const e=this.testLoop(s,l,r);for(let t=0;t<n.length;++t){const r=n[t],o=e[t];Y4(o),i["val_"+r]=o}}})),await y.onBatchEnd(u,c),fae(c),this.stopTraining_)break}o.dispose()}if(await y.onEpochEnd(b,i),this.stopTraining_)break}return await y.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,t){return hse(this,e,t)}async trainOnBatch(e,t){const n=await this.standardizeUserData(e,t),r=n[0],i=n[1],o=this.makeTrainFunction()(r.concat(i)),a=[];for(const s of o){const e=await s.data();a.push(e[0])}return X4(o),vse(n[0],e),vse(n[1],t),aie(a)}getNamedWeights(e){const t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,i=this.getWeights(n);for(let o=0;o<r.length;++o)n&&!r[o].trainable||t.push({name:r[o].originalName,tensor:i[o]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const t=q4().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-q4().numTensors}return e}getLossIdentifiers(){let e;if("string"===typeof this.loss)e=lie(this.loss);else if(Array.isArray(this.loss)){for(const e of this.loss)if("string"!==typeof e)throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map((e=>lie(e)))}else{const t=Object.keys(this.loss);e={};const n=this.loss;for(const r of t){if("string"!==typeof n[r])throw new Error("Serialization of non-string loss is not supported.");e[r]=lie(n[r])}}return e}getMetricIdentifiers(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[lie(Hae(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((e=>lie(Hae(e))));{const e={};for(const t in this.metrics)e[t]=lie(Hae(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const t=Eae(tse(e.optimizer_config));let n,r;if("string"===typeof e.loss)n=uie(e.loss);else if(Array.isArray(e.loss))n=e.loss.map((e=>uie(e)));else if(null!=e.loss){n={};for(const t in e.loss)n[t]=uie(e.loss[t])}if(Array.isArray(e.metrics))r=e.metrics.map((e=>uie(e)));else if(null!=e.metrics){r={};for(const t in e.metrics)r[t]=uie(e.metrics[t])}this.compile({loss:n,metrics:r,optimizer:t})}async save(e,t){if("string"===typeof e){const t=(n=e,s5.getSaveHandlers(n));if(0===t.length)throw new Zre(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw new Zre(`Found more than one (${t.length}) save handlers for URL '${e}'`);e=t[0]}var n;if(null==e.save)throw new Zre("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await Z4(this.getNamedWeights(t)),i={modelTopology:this.toJSON(null,!1),format:"layers-model",generatedBy:`TensorFlow.js tfjs-layers v${rse}`,convertedBy:null};if(null!=t&&t.includeOptimizer&&null!=this.optimizer){i.trainingConfig=this.getTrainingConfig();const e="optimizer",{data:t,specs:n}=await Z4(await this.optimizer.getWeights(),e);r.specs.push(...n),r.data=(o=[r.data,t],G4.join(o))}var o;if(null!=this.userDefinedMetadata){const e=!0;Kae(this.userDefinedMetadata,this.name,e),i.userDefinedMetadata=this.userDefinedMetadata}return i.weightData=r.data,i.weightSpecs=r.specs,e.save(i)}setUserDefinedMetadata(e){Kae(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}Sse.className="Model",J5(Sse);class Ese extends Sse{}Ese.className="Functional",J5(Ese);class Ise extends Sse{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:Iie("sequential_"),null!=e.layers)for(const t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some((e=>e<0)))throw new Zre(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const t=e instanceof Ise||e instanceof Sse;let n;if(t){if(n=e,1!==n.outputs.length)throw new Zre("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new Zre("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new Zre("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const t=Xoe({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(t)}if(t)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==e.inboundNodes.length)throw new Zre(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(1!==e.inboundNodes[0].outputTensors.length)throw new Zre("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=qoe(this.outputs[0])}this.inboundNodes=[],new Voe({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:rie(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((e=>e.shape)),outputShapes:this.outputs[0].shape})}else{const t=e.apply(this.outputs[0]);if(Array.isArray(t))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[t],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return null==this.model&&this.build(),this.model.call(e,t)}build(e){if(Poe(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Sse({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),super.summary(e,t,n)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new Jre("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}async evaluateDataset(e,t){if(!this.built)throw new Jre("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new Jre("The model needs to be compiled before being used.");return this.model.fit(e,t,n)}async fitDataset(e,t){if(!this.built)throw new Jre("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t){let n,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new Zre("Legacy serialization format not supported yet.");n=t}else SZ(null!=t.layers,(()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field.")),n=t.layers,delete t.layers,i=t;const o=new e(i);if(!(o instanceof Ise))throw new eie(`Sequential.fromConfig called on non-Sequential input: ${o}`);for(const a of n){const e=Eae(a,void 0,r);r&&e.setFastWeightInitDuringBuild(!0),o.add(e)}return o}set stopTraining(e){if(null==this.model)throw new Zre("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new Zre("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const t of this.layers){const n={};n.className=t.getClassName(),n.config=t.getConfig(),e.push(n)}return{name:this.name,layers:e}}}Ise.className="Sequential",J5(Ise);class Tse extends Y5{getConfig(){return{}}}class Cse extends Tse{apply(e){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new eie(`Support for alpha values other than 1 (${t}) is not implemented yet.`);return N9(e)}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}}Cse.className="elu",J5(Cse);class Ase extends Tse{apply(e){return T7(e)}}Ase.className="selu",J5(Ase);class _se extends Tse{apply(e){return E7(e)}}_se.className="relu",J5(_se);class Nse extends Tse{apply(e){return K4((()=>l7(6,E7(e))))}}Nse.className="relu6",J5(Nse);class Ose extends Tse{apply(e){return e}}Ose.className="linear",J5(Ose);class Rse extends Tse{apply(e){return A7(e)}}Rse.className="sigmoid",J5(Rse);class $se extends Tse{apply(e){return function(e){return K4((()=>{const t=j5(.5,U5(.2,e));return m9(t,0,1)}))}(e)}}$se.className="hardSigmoid",J5($se);class Dse extends Tse{apply(e){return P7(e)}}Dse.className="softplus",J5(Dse);class Pse extends Tse{apply(e){return function(e){return K4((()=>B5(e,j5(a6(e),1))))}(e)}}Pse.className="softsign",J5(Pse);class Mse extends Tse{apply(e){return j7(e)}}Mse.className="tanh",J5(Mse);class Fse extends Tse{apply(e){return D7(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}Fse.className="softmax",J5(Fse);class Lse extends Tse{apply(e){return H9(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}}Lse.className="logSoftmax",J5(Lse);class jse extends Tse{apply(e){return K4((()=>K4((()=>{const t=Math.sqrt(2),n=U5(.5,j5(1,R9(B5(e,t))));return U5(e,n)}))))}}jse.className="gelu",J5(jse);class zse extends Tse{apply(e){return K4((()=>U5(.5,U5(e,j5(1,j7(U5(W5(B5(2,Math.PI)),j5(e,U5(.044715,r6(e,3))))))))))}}zse.className="gelu_new",J5(zse);class Bse extends Tse{apply(e){return K4((()=>U5(e,j7(P7(e)))))}}Bse.className="mish",J5(Bse);class Use extends Tse{apply(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return K4((()=>U5(A7(U5(e,t)),e)))}}function Wse(e){return e.getClassName()}function Vse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return pie(e,Q5.getMap().classNameMap,t,"activation")}function Gse(e){if(null==e){const e={className:"linear",config:{}};return Vse(e)}if("string"===typeof e){const t={};return t.className=e,t.config={},Vse(t)}return e instanceof Tse?e:Vse(e)}function Hse(e){if(null!=e&&"object"!==typeof e)throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${e}`)}Use.className="swish",J5(Use);class qse extends Y5{}class Kse extends qse{constructor(e){super(),Hse(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(e){return K4((()=>{let t=p7([1]);return this.hasL1&&(t=j5(t,G9(U5(this.l1,a6(e))))),this.hasL2&&(t=j5(t,G9(U5(this.l2,ooe(e))))),s9(t,[])}))}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}}Kse.className="L1L2",J5(Kse);const Xse={l1l2:"L1L2"};function Yse(e){return hie(e)}function Qse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return pie(e,Q5.getMap().classNameMap,t,"regularizer")}function Jse(e){if(null==e)return null;if("string"===typeof e){return Qse({className:e in Xse?Xse[e]:e,config:{}})}return e instanceof qse?e:Qse(e)}class Zse extends Hoe{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(e,t){e=Doe(e);let n=E7(e);return null!=this.maxValue&&(n=m9(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}}Zse.className="ReLU",J5(Zse);class ele extends Hoe{constructor(e){super(null==e?{}:e),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=Doe(e);return B9(n,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}ele.className="LeakyReLU",J5(ele);class tle extends Hoe{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Ooe(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Jse(e.alphaRegularizer),this.alphaConstraint=dae(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new Zre(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`);this.sharedAxes=[e.sharedAxes]}}build(e){const t=(e=Poe(e)).slice(1);if(null!=this.sharedAxes)for(const r of this.sharedAxes)t[r-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const n={};if(null!=this.sharedAxes)for(let r=1;r<e.length;++r)n[r]=e[r];this.inputSpec=[new Boe({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=Doe(e),y7(e,this.alpha.read())}getConfig(){const e={alphaInitializer:Noe(this.alphaInitializer),alphaRegularizer:Yse(this.alphaRegularizer),alphaConstraint:cae(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}}tle.className="PReLU",J5(tle);class nle extends Hoe{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new eie(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=Doe(e);return N9(n)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}nle.className="ELU",J5(nle);class rle extends Hoe{constructor(e){super(null==e?{}:e),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,t){const n=Doe(e);return U5(n,M5(j9(n,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}}rle.className="ThresholdedReLU",J5(rle);class ile extends Hoe{constructor(e){super(null==e?{}:e),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=(new Fse).apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,t){return K4((()=>{let n=Doe(e);const r=t.mask;if(null!=r){const e=U5(i6(f7(n.shape),M5(r,n.dtype)),q5(-1e9));n=j5(n,e)}return this.axis instanceof Array?this.axis.length>1?$9(i6(n,t7(n,this.axis,!0))):this.softmax(n,this.axis[0]):this.softmax(n,this.axis)}))}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function ole(e,t,n){if("number"===typeof e)return rie(e,t);if(e.length!==t)throw new Zre(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${e.length} elements.`);for(let r=0;r<t;++r){const i=e[r];if(!Bie(i))throw new Zre(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${JSON.stringify(e)} including a non-integer number ${i}`)}return e}function ale(e,t,n,r){if(null==e)return e;let i;return i="same"===n?e:e-(t+(t-1)*((arguments.length>4&&void 0!==arguments[4]?arguments[4]:1)-1))+1,Math.floor((i+r-1)/r)}function sle(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+Vie([n-t,0]);else{if("same"!==r)throw new Zre(`Unsupport padding mode: ${r}.`);e*=t}return e}function lle(e,t){return K4((()=>(Rie(t),"channelsFirst"===t?q7(e,[0,2,3,1]):e)))}function ule(e,t){return K4((()=>(Rie(t),"channelsFirst"===t?q7(e,[0,2,3,4,1]):e)))}function cle(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return K4((()=>{if(null==o&&(o="channelsLast"),Rie(o),3!==e.shape.length)throw new Zre(`The input of a conv1dWithBias operation should be 3, but is ${e.shape.length} instead.`);if(3!==t.shape.length)throw new Zre(`The kernel for a conv1dWithBias operation should be 3, but is ${t.shape.length} instead`);if(null!=n&&1!==n.shape.length)throw new Zre(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if("channelsFirst"===o&&(e=q7(e,[0,2,1])),"causal"===i)throw new eie("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let s=k9(e,t,r,"same"===i?"same":"valid","NWC",a);return null!=n&&(s=soe(s,n)),s}))}function hle(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return K4((()=>{if(null==o&&(o="channelsLast"),Rie(o),3!==e.rank&&4!==e.rank)throw new Zre(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${e.rank}.`);if(3!==t.rank&&4!==t.rank)throw new Zre(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${e.rank}.`);let l=lle(e,o);if("causal"===i)throw new eie("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=a8({x:l,filter:t,strides:r,pad:"same"===i?"same":"valid",dilations:a,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===o&&(l=q7(l,[0,3,1,2])),l}))}function dle(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0;return K4((()=>{if(null==o&&(o="channelsLast"),Rie(o),4!==e.rank&&5!==e.rank)throw new Zre(`conv3dWithBias expects input to be of rank 4 or 5, but received ${e.rank}.`);if(4!==t.rank&&5!==t.rank)throw new Zre(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${e.rank}.`);let s=ule(e,o);if("causal"===i)throw new eie("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=I9(s,t,r,"same"===i?"same":"valid","NDHWC",a),null!=n&&(s=soe(s,n)),"channelsFirst"===o&&(s=q7(s,[0,4,1,2,3])),s}))}ile.className="Softmax",J5(ile);class ple extends Hoe{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",ple.verifyArgs(t),this.rank=e,bie(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new eie(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=ole(t.kernelSize,e,"kernelSize"),this.strides=ole(null==t.strides?1:t.strides,e,"strides"),this.padding=null==t.padding?"valid":t.padding,$ie(this.padding),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,Rie(this.dataFormat),this.activation=Gse(t.activation),this.useBias=null==t.useBias||t.useBias,this.biasInitializer=Ooe(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=dae(t.biasConstraint),this.biasRegularizer=Jse(t.biasRegularizer),this.activityRegularizer=Jse(t.activityRegularizer),this.dilationRate=ole(null==t.dilationRate?1:t.dilationRate,e,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new Zre(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(2===this.rank){if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new Zre(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(3===this.rank)if("number"===typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new Zre(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}static verifyArgs(e){if(iie("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!vie(e.kernelSize,"number",1,3))throw new Zre(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Wse(this.activation),useBias:this.useBias,biasInitializer:Noe(this.biasInitializer),biasRegularizer:Yse(this.biasRegularizer),activityRegularizer:Yse(this.activityRegularizer),biasConstraint:cae(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}class fle extends ple{constructor(e,t){super(e,t),this.kernel=null,fle.verifyArgs(t),this.filters=t.filters,bie(this.filters,"filters"),this.kernelInitializer=Ooe(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=dae(t.kernelConstraint),this.kernelRegularizer=Jse(t.kernelRegularizer)}build(e){e=Poe(e);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new Zre(`The channel dimension of the input should be defined. Found ${e[t]}`);const n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:n}}],this.built=!0}call(e,t){return K4((()=>{let t;e=Doe(e);const n=null==this.bias?null:this.bias.read(),r=wie(this.activation.getClassName());if(null!=r&&2===this.rank)t=hle(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)t=cle(e,this.kernel.read(),n,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)t=hle(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new eie("convolutions greater than 3D are not implemented yet.");t=dle(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(t=this.activation.apply(t))}return t}))}computeOutputShape(e){e=Poe(e);const t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2);for(let i=0;i<n.length;++i){const e=ale(n[i],this.kernelSize[i],this.padding,this.strides[i],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[i]);t.push(e)}let r=[e[0]];return"channelsLast"===this.dataFormat?(r=r.concat(t),r.push(this.filters)):(r.push(this.filters),r=r.concat(t)),r}getConfig(){const e={filters:this.filters,kernelInitializer:Noe(this.kernelInitializer),kernelRegularizer:Yse(this.kernelRegularizer),kernelConstraint:cae(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new Zre(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class mle extends fle{constructor(e){super(2,e),mle.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&!vie(e.kernelSize,"number",1,2))throw new Zre(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}mle.className="Conv2D",J5(mle);class gle extends fle{constructor(e){super(3,e),gle.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new Zre(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}gle.className="Conv3D",J5(gle);class yle extends mle{constructor(e){if(super(e),this.inputSpec=[new Boe({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new Zre(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(4!==(e=Poe(e)).length)throw new Zre("Input should have rank 4; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new Zre("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Boe({ndim:4,axes:{[t]:n}})],this.built=!0}call(e,t){return K4((()=>{let t=Doe(e);if(4!==t.shape.length)throw new Zre(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${t.shape.length}`);const n=t.shape,r=n[0];let i,o;"channelsFirst"===this.dataFormat?(i=2,o=3):(i=1,o=2);const a=n[i],s=n[o],l=this.kernelSize[0],u=this.kernelSize[1],c=this.strides[0],h=this.strides[1],d=[r,sle(a,c,l,this.padding),sle(s,h,u,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=q7(t,[0,2,3,1]));let p=E9(t,this.kernel.read(),d,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(p=q7(p,[0,3,1,2])),null!=this.bias&&(p=soe(p,this.bias.read(),this.dataFormat)),null!=this.activation&&(p=this.activation.apply(p)),p}))}computeOutputShape(e){const t=(e=Poe(e)).slice();let n,r,i;"channelsFirst"===this.dataFormat?(n=1,r=2,i=3):(n=3,r=1,i=2);const o=this.kernelSize[0],a=this.kernelSize[1],s=this.strides[0],l=this.strides[1];return t[n]=this.filters,t[r]=sle(t[r],s,o,this.padding),t[i]=sle(t[i],l,a,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}yle.className="Conv2DTranspose",J5(yle);class vle extends gle{constructor(e){if(super(e),this.inputSpec=[new Boe({ndim:5})],"same"!==this.padding&&"valid"!==this.padding)throw new Zre(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(5!==(e=Poe(e)).length)throw new Zre("Input should have rank 5; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new Zre("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Boe({ndim:5,axes:{[t]:n}})],this.built=!0}call(e,t){return K4((()=>{let t=Doe(e);if(5!==t.shape.length)throw new Zre(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${t.shape.length}`);const n=t.shape,r=n[0];let i,o,a;"channelsFirst"===this.dataFormat?(a=2,i=3,o=4):(a=1,i=2,o=3);const s=n[a],l=n[i],u=n[o],c=this.kernelSize[0],h=this.kernelSize[1],d=this.kernelSize[2],p=this.strides[0],f=this.strides[1],m=this.strides[2],g=[r,sle(s,p,c,this.padding),sle(l,f,h,this.padding),sle(u,m,d,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=q7(t,[0,2,3,4,1]));let y=C9(t,this.kernel.read(),g,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(y=q7(y,[0,4,1,2,3])),null!==this.bias&&(y=soe(y,this.bias.read(),this.dataFormat)),null!==this.activation&&(y=this.activation.apply(y)),y}))}computeOutputShape(e){const t=(e=Poe(e)).slice();let n,r,i,o;"channelsFirst"===this.dataFormat?(n=1,r=2,i=3,o=4):(n=4,r=1,i=2,o=3);const a=this.kernelSize[0],s=this.kernelSize[1],l=this.kernelSize[2],u=this.strides[0],c=this.strides[1],h=this.strides[2];return t[n]=this.filters,t[r]=sle(t[r],u,a,this.padding),t[i]=sle(t[i],c,s,this.padding),t[o]=sle(t[o],h,l,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}vle.className="Conv3DTranspose",J5(vle);class ble extends fle{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==t.filters)throw new Zre("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=t.kernelInitializer||null!=t.kernelRegularizer||null!=t.kernelConstraint)throw new Zre("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=t.padding&&"same"!==t.padding&&"valid"!==t.padding)throw new Zre(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(t.padding)}`);this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=Ooe(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Jse(t.depthwiseRegularizer),this.depthwiseConstraint=dae(t.depthwiseConstraint),this.pointwiseInitializer=Ooe(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Jse(t.pointwiseRegularizer),this.pointwiseConstraint=dae(t.pointwiseConstraint)}build(e){if((e=Poe(e)).length<this.rank+2)throw new Zre(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new Zre(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[t])}`);const n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),i=[];for(let a=0;a<this.rank;++a)i.push(1);i.push(n*this.depthMultiplier,this.filters);const o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new Boe({ndim:this.rank+2,axes:{[t]:n}})],this.built=!0}call(e,t){return K4((()=>{let t;if(e=Doe(e),1===this.rank)throw new eie("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(e=q7(e,[0,2,3,1])),t=C7(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(t=soe(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),"channelsFirst"===this.dataFormat&&(t=q7(t,[0,3,1,2])),t}))}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Noe(this.depthwiseInitializer),e.pointwiseInitializer=Noe(this.pointwiseInitializer),e.depthwiseRegularizer=Yse(this.depthwiseRegularizer),e.pointwiseRegularizer=Yse(this.pointwiseRegularizer),e.depthwiseConstraint=cae(this.depthwiseConstraint),e.pointwiseConstraint=cae(this.pointwiseConstraint),e}}ble.className="SeparableConv";class xle extends ble{constructor(e){super(2,e)}}xle.className="SeparableConv2D",J5(xle);class wle extends fle{constructor(e){super(1,e),wle.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if("number"!==typeof e.kernelSize&&!vie(e.kernelSize,"number",1,1))throw new Zre(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}wle.className="Conv1D",J5(wle);class kle extends Hoe{constructor(e){super(e),"number"===typeof e.cropping?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return K4((()=>{if(e=Doe(e),"channelsLast"===this.dataFormat){const t=Jie(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Jie(t,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const t=Jie(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Jie(t,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}}))}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}kle.className="Cropping2D",J5(kle);class Sle extends Hoe{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==e.size?this.DEFAULT_SIZE:e.size,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Rie(this.dataFormat),this.interpolation=null==e.interpolation?"nearest":e.interpolation,function(e){yie(Cie,"InterpolationFormat",e)}(this.interpolation)}computeOutputShape(e){if("channelsFirst"===this.dataFormat){const t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}{const t=null==e[1]?null:this.size[0]*e[1],n=null==e[2]?null:this.size[1]*e[2];return[e[0],t,n,e[3]]}}call(e,t){return K4((()=>{let t=Doe(e);const n=t.shape;if("channelsFirst"===this.dataFormat){t=q7(t,[0,2,3,1]);const e=this.size[0]*n[2],r=this.size[1]*n[3],i="nearest"===this.interpolation?K8.resizeNearestNeighbor(t,[e,r]):K8.resizeBilinear(t,[e,r]);return q7(i,[0,3,1,2])}{const e=this.size[0]*n[1],r=this.size[1]*n[2];return"nearest"===this.interpolation?K8.resizeNearestNeighbor(t,[e,r]):K8.resizeBilinear(t,[e,r])}}))}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}}Sle.className="UpSampling2D",J5(Sle);class Ele extends ple{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=Ooe(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=dae(e.depthwiseConstraint),this.depthwiseRegularizer=Jse(e.depthwiseRegularizer)}build(e){if((e=Poe(e)).length<4)throw new Zre(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new Zre(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[t]}).`);const n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return K4((()=>{let t=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;return K4((()=>{null==i&&(i="channelsLast"),Rie(i);let a=lle(e,i);if(4!==e.rank)throw new Zre(`Input for depthwiseConv2d is required to be 4-D, but is instead ${e.rank}-D`);if(4!==t.rank)throw new Zre(`depthwiseKernel is required to be 4-D, but is instead ${t.rank}-D`);return a=_9(a,t,n,"same"===r?"same":"valid","NHWC",o),"channelsFirst"===i&&(a=q7(a,[0,3,1,2])),a}))}(e=Doe(e),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(t=soe(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),t}))}computeOutputShape(e){e=Poe(e);const t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,i=ale(t,this.kernelSize[0],this.padding,this.strides[0]),o=ale(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,i,o]:[e[0],i,o,r]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Noe(this.depthwiseInitializer),e.depthwiseRegularizer=Yse(this.depthwiseRegularizer),e.depthwiseConstraint=cae(this.depthwiseRegularizer),e}}function Ile(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new Zre("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function i(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=i(t),constants:n=i(n)}}function Tle(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return K4((()=>{const l=t.shape.length;if(l<3)throw new Zre(`Input should be at least 3D, but is ${l}D.`);const u=[1,0].concat(Gie(2,l));if(t=q7(t,u),null!=o)throw new eie("The rnn() functoin of the deeplearn.js backend does not support constants yet.");a&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=i&&(i=M5(M5(i,"bool"),"float32"),i.rank===l-1&&(i=D9(i,-1)),i=q7(i,u)),r&&(t=I7(t,0),null!=i&&(i=I7(i,0)));const c=[];let h,d=n;const p=t.shape[0],f=W7(t);let m,g;null!=i&&(m=W7(i));for(let t=0;t<p;++t){const n=f[t],r=K4((()=>e(n,d)));if(null==i)h=r[0],d=r[1];else{const e=K4((()=>{const e=m[t],n=i6(m7(e),e);return{output:j5(U5(r[0],e),U5(d[0],n)),newStates:d.map(((t,i)=>j5(U5(r[1][i],e),U5(t,n))))}}));h=e.output,d=e.newStates}s&&c.push(h)}if(s){g=L7(c,1)}return[h,g,d]}))}Ele.className="DepthwiseConv2D",J5(Ele);class Cle extends Hoe{constructor(e){let t;if(super(e),null==e.cell)throw new Zre("cell property is missing for the constructor of RNN.");if(t=Array.isArray(e.cell)?new Ple({cells:e.cell}):e.cell,null==t.stateSize)throw new Zre("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=null!=e.returnSequences&&e.returnSequences,this.returnState=null!=e.returnState&&e.returnState,this.goBackwards=null!=e.goBackwards&&e.goBackwards,this._stateful=null!=e.stateful&&e.stateful,this.unroll=null!=e.unroll&&e.unroll,this.supportsMasking=!0,this.inputSpec=[new Boe({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(null==this.states_){return Gie(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((e=>null))}return this.states_}setStates(e){this.states_=e}computeOutputShape(e){Roe(e)&&(e=e[0]);let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);const n=t[0];let r;if(r=this.returnSequences?[e[0],e[1],n]:[e[0],n],this.returnState){const n=[];for(const r of t)n.push([e[0],r]);return[r].concat(n)}return r}computeMask(e,t){return K4((()=>{Array.isArray(t)&&(t=t[0]);const e=this.returnSequences?t:null;if(this.returnState){const t=this.states.map((e=>null));return[e].concat(t)}return e}))}get states(){if(null==this.states_){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let n=0;n<e;++n)t.push(null);return t}return this.states_}set states(e){this.states_=e}build(e){if(null!=this.numConstants)throw new eie("Constants support is not implemented in RNN yet.");Roe(e)&&(e=e[0]);const t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new Boe({shape:[t,null,...n]});const r=[e[0]].concat(e.slice(2));let i;if(this.cell.build(r),i=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!CZ(this.stateSpec.map((e=>e.shape[e.shape.length-1])),i))throw new Zre(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=i.map((e=>new Boe({shape:[null,e]})));this.stateful&&this.resetStates()}resetStates(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];K4((()=>{if(!this.stateful)throw new Qre("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape[0];if(null==n)throw new Zre("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((e=>p7([n,e]))):this.states_=[p7([n,this.cell.stateSize])];else if(null==e)X4(this.states_),null!=this.keptStates&&(X4(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((e=>p7([n,e]))):this.states_[0]=p7([n,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Zre(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);!0===t?this.keptStates.push(this.states_.slice()):X4(this.states_);for(let t=0;t<this.states_.length;++t){const r=e[t],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[t]:this.cell.stateSize,o=[n,i];if(!CZ(r.shape,o))throw new Zre(`State ${t} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${r.shape}`);this.states_[t]=r}}this.states_=this.states_.map((e=>Y4(e.clone())))}))}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const i=Ile(e,n,r,this.numConstants);e=i.inputs,n=i.initialState,r=i.constants;let o=[],a=[];if(null!=n){t.initialState=n,o=o.concat(n),this.stateSpec=[];for(const e of n)this.stateSpec.push(new Boe({shape:e.shape}));a=a.concat(this.stateSpec)}null!=r&&(t.constants=r,o=o.concat(r),this.numConstants=r.length);if(o[0]instanceof Uoe){const n=[e].concat(o),r=this.inputSpec.concat(a),i=this.inputSpec;this.inputSpec=r;const s=super.apply(n,t);return this.inputSpec=i,s}return super.apply(e,t)}call(e,t){return K4((()=>{const n=null==t?null:t.mask,r=null==t?null:t.training;let i=null==t?null:t.initialState;e=Doe(e),null==i&&(i=this.stateful?this.states_:this.getInitialState(e));const o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==o)throw new Zre(`RNN Layer has ${o} state(s) but was passed ${i.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:r},s=Tle(((e,t)=>{const n=this.cell.call([e].concat(t),a);return[n[0],n.slice(1)]}),e,i,this.goBackwards,n,null,this.unroll,this.returnSequences),l=s[0],u=s[1],c=s[2];this.stateful&&this.resetStates(c,r);const h=this.returnSequences?u:l;return this.returnState?[h].concat(c):h}))}getInitialState(e){return K4((()=>{let t=p7(e.shape);return t=G9(t,[1,2]),t=Xie(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map((e=>e>1?toe(t,[1,e]):t)):this.cell.stateSize>1?[toe(t,[1,this.cell.stateSize])]:[t]}))}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);const n=this.cell.getConfig();return this.getClassName()===Cle.className&&(t.cell={className:this.cell.getClassName(),config:n}),Object.assign(Object.assign(Object.assign({},n),e),t)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=Eae(t.cell,n);return new e(Object.assign(t,{cell:r}))}}Cle.className="RNN",J5(Cle);class Ale extends Hoe{}class _le extends Ale{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,bie(this.units,"units"),this.activation=Gse(null==e.activation?this.DEFAULT_ACTIVATION:e.activation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=Ooe(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Ooe(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Ooe(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Jse(e.kernelRegularizer),this.recurrentRegularizer=Jse(e.recurrentRegularizer),this.biasRegularizer=Jse(e.biasRegularizer),this.kernelConstraint=dae(e.kernelConstraint),this.recurrentConstraint=dae(e.recurrentConstraint),this.biasConstraint=dae(e.biasConstraint),this.dropout=Wie([1,Vie([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=Wie([1,Vie([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Poe(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return K4((()=>{if(2!==e.length)throw new Zre(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let n=e[1];e=e[0];const r=null!=t.training&&t.training;let i;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=Mle({ones:()=>m7(e),rate:this.dropout,training:r,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=Mle({ones:()=>m7(n),rate:this.recurrentDropout,training:r,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,a=this.recurrentDropoutMask;i=roe(null!=o?U5(e,o):e,this.kernel.read()),null!=this.bias&&(i=soe(i,this.bias.read())),null!=a&&(n=U5(n,a));let s=j5(i,roe(n,this.recurrentKernel.read()));return null!=this.activation&&(s=this.activation.apply(s)),[s,s]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:Wse(this.activation),useBias:this.useBias,kernelInitializer:Noe(this.kernelInitializer),recurrentInitializer:Noe(this.recurrentInitializer),biasInitializer:Noe(this.biasInitializer),kernelRegularizer:Yse(this.kernelRegularizer),recurrentRegularizer:Yse(this.recurrentRegularizer),biasRegularizer:Yse(this.biasRegularizer),activityRegularizer:Yse(this.activityRegularizer),kernelConstraint:cae(this.kernelConstraint),recurrentConstraint:cae(this.recurrentConstraint),biasConstraint:cae(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}}_le.className="SimpleRNNCell",J5(_le);class Nle extends Cle{constructor(e){e.cell=new _le(e),super(e)}call(e,t){return K4((()=>{null!=this.cell.dropoutMask&&(X4(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(X4(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,i=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:i})}))}static fromConfig(e,t){return new e(t)}}Nle.className="SimpleRNN",J5(Nle);class Ole extends Ale{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new Zre("GRUCell does not support reset_after parameter set to true.");this.units=e.units,bie(this.units,"units"),this.activation=Gse(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Gse(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=Ooe(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Ooe(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Ooe(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Jse(e.kernelRegularizer),this.recurrentRegularizer=Jse(e.recurrentRegularizer),this.biasRegularizer=Jse(e.biasRegularizer),this.kernelConstraint=dae(e.kernelConstraint),this.recurrentConstraint=dae(e.recurrentConstraint),this.biasConstraint=dae(e.biasConstraint),this.dropout=Wie([1,Vie([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=Wie([1,Vie([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){const t=(e=Poe(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return K4((()=>{if(2!==e.length)throw new Zre(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const n=null!=t.training&&t.training;let r=e[1];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=Mle({ones:()=>m7(e),rate:this.dropout,training:n,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=Mle({ones:()=>m7(r),rate:this.recurrentDropout,training:n,count:3,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,o=this.recurrentDropoutMask;let a,s,l;0<this.dropout&&this.dropout<1&&(e=U5(e,i[0]));let u=roe(e,this.kernel.read());this.useBias&&(u=soe(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=U5(r,o[0]));const c=this.recurrentKernel.read(),[h,d]=M7(c,[2*this.units,this.units],c.rank-1),p=roe(r,h),[f,m,g]=M7(u,3,u.rank-1),[y,v]=M7(p,2,p.rank-1);a=this.recurrentActivation.apply(j5(f,y)),s=this.recurrentActivation.apply(j5(m,v));const b=roe(U5(s,r),d);l=this.activation.apply(j5(g,b));const x=j5(U5(a,r),U5(j5(1,c7(a)),l));return[x,x]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:Wse(this.activation),recurrentActivation:Wse(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Noe(this.kernelInitializer),recurrentInitializer:Noe(this.recurrentInitializer),biasInitializer:Noe(this.biasInitializer),kernelRegularizer:Yse(this.kernelRegularizer),recurrentRegularizer:Yse(this.recurrentRegularizer),biasRegularizer:Yse(this.biasRegularizer),activityRegularizer:Yse(this.activityRegularizer),kernelConstraint:cae(this.kernelConstraint),recurrentConstraint:cae(this.recurrentConstraint),biasConstraint:cae(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}}Ole.className="GRUCell",J5(Ole);class Rle extends Cle{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Ole(e),super(e)}call(e,t){return K4((()=>{null!=this.cell.dropoutMask&&(X4(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(X4(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,i=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:i})}))}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}Rle.className="GRU",J5(Rle);class $le extends Ale{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,bie(this.units,"units"),this.activation=Gse(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Gse(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=Ooe(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Ooe(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Ooe(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=Jse(e.kernelRegularizer),this.recurrentRegularizer=Jse(e.recurrentRegularizer),this.biasRegularizer=Jse(e.biasRegularizer),this.kernelConstraint=dae(e.kernelConstraint),this.recurrentConstraint=dae(e.recurrentConstraint),this.biasConstraint=dae(e.biasConstraint),this.dropout=Wie([1,Vie([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=Wie([1,Vie([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;const n=(e=Poe(e))[e.length-1];let r;if(this.kernel=this.addWeight("kernel",[n,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const e=this.biasInitializer,n=this.units;r=new((t=class extends doe{apply(t,r){const i=e.apply([n]),o=(new foe).apply([n]),a=e.apply([2*n]);return eoe(eoe(i,o),a)}}).className="CustomInit",t)}else r=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,r,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return K4((()=>{const n=null!=t.training&&t.training;if(3!==e.length)throw new Zre(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let r=e[1];const i=e[2];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=Mle({ones:()=>m7(e),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=Mle({ones:()=>m7(r),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,a=this.recurrentDropoutMask;let s,l,u,c;0<this.dropout&&this.dropout<1&&(e=U5(e,o[0]));let h=roe(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=U5(r,a[0])),h=j5(h,roe(r,this.recurrentKernel.read())),this.useBias&&(h=soe(h,this.bias.read()));const[d,p,f,m]=M7(h,4,h.rank-1);s=this.recurrentActivation.apply(d),l=this.recurrentActivation.apply(p),u=j5(U5(l,i),U5(s,this.activation.apply(f))),c=this.recurrentActivation.apply(m);const g=U5(c,this.activation.apply(u));return[g,g,u]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:Wse(this.activation),recurrentActivation:Wse(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Noe(this.kernelInitializer),recurrentInitializer:Noe(this.recurrentInitializer),biasInitializer:Noe(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Yse(this.kernelRegularizer),recurrentRegularizer:Yse(this.recurrentRegularizer),biasRegularizer:Yse(this.biasRegularizer),activityRegularizer:Yse(this.activityRegularizer),kernelConstraint:cae(this.kernelConstraint),recurrentConstraint:cae(this.recurrentConstraint),biasConstraint:cae(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}}$le.className="LSTMCell",J5($le);class Dle extends Cle{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new $le(e),super(e)}call(e,t){return K4((()=>{null!=this.cell.dropoutMask&&(X4(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(X4(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,r=null==t?null:t.training,i=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:i})}))}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}Dle.className="LSTM",J5(Dle);class Ple extends Ale{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return K4((()=>{let n=e.slice(1);const r=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?r.push(n.splice(0,e.stateSize.length)):r.push(n.splice(0,1));r.reverse();const i=[];let o;for(let a=0;a<this.cells.length;++a){const s=this.cells[a];n=r[a],o=0===a?[e[0]].concat(n):[o[0]].concat(n),o=s.call(o,t),i.push(o.slice(1))}n=[];for(const e of i.slice().reverse())n.push(...e);return[o[0]].concat(n)}))}build(e){let t;Roe(e)&&(e=e[0]),this.cells.forEach(((n,r)=>{Mie(`RNNCell_${r}`,(()=>{n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}getConfig(){const e=super.getConfig(),t={cells:this.cells.map((e=>({className:e.getClassName(),config:e.getConfig()})))};return Object.assign(Object.assign({},e),t)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=[];for(const i of t.cells)r.push(Eae(i,n));return new e({cells:r})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.cells)t.push(...e.trainableWeights);return t.concat(e)}return e}getWeights(){const e=[];for(const t of this.cells)e.push(...t.weights);return joe(e)}setWeights(e){const t=[];for(const n of this.cells){const r=n.weights.length,i=e.splice(r);for(let e=0;e<n.weights.length;++e)t.push([n.weights[e],i[e]])}zoe(t)}}function Mle(e){const{ones:t,rate:n,training:r=!1,count:i=1,dropoutFunc:o}=e,a=()=>null!=o?o(t(),n):loe(t(),n),s=()=>uoe(a,t,r);if(!i||i<=1)return Y4(s().clone());return Array(i).fill(void 0).map(s).map((e=>Y4(e.clone())))}Ple.className="StackedRNNCells",J5(Ple);var Fle=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class Lle extends Cle{constructor(e){if(e.unroll)throw new eie("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new eie("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Boe({ndim:5})]}call(e,t){return K4((()=>{if(null!=this.cell.dropoutMask&&(X4(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(X4(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new Zre("ConvRNN2D cell does not support constants");const n=null==t?null:t.mask,r=null==t?null:t.training,i=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:i})}))}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return K4((()=>{const{stateSize:t}=this.cell,n=e.shape,r=this.computeSingleOutputShape(n),i=p7([r[0],...r.slice(2)]);return Array.isArray(t)?Array(t.length).fill(i):[i]}))}resetStates(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];K4((()=>{if(!this.stateful)throw new Qre("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape,r=this.computeSingleOutputShape(n),i=[r[0],...r.slice(2)];if(null==n[0])throw new Zre("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((()=>p7(i))):this.states_=[p7(i)];else if(null==e)X4(this.states_),null!=this.keptStates&&(X4(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((()=>p7(i))):this.states_[0]=p7(i);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Zre(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t?this.keptStates.push(this.states_.slice()):X4(this.states_);for(let t=0;t<this.states_.length;++t){const n=e[t],r=i;if(!CZ(n.shape,r))throw new Zre(`State ${t} is incompatible with layer ${this.name}: expected shape=${r}, received shape=${n.shape}`);this.states_[t]=n}}this.states_=this.states_.map((e=>Y4(e.clone())))}))}computeSingleOutputShape(e){const{dataFormat:t,filters:n,kernelSize:r,padding:i,strides:o,dilationRate:a}=this.cell,s="channelsFirst"===t,l=e[s?3:2],u=e[s?4:3],c=ale(l,r[0],i,o[0],a[0]),h=ale(u,r[1],i,o[1],a[1]);return[...e.slice(0,2),...s?[n,c,h]:[c,h,n]]}}Lle.className="ConvRNN2D";class jle extends $le{constructor(e){const{filters:t,kernelSize:n,strides:r,padding:i,dataFormat:o,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:t})),this.filters=t,bie(this.filters,"filters"),this.kernelSize=ole(n,2,"kernelSize"),this.kernelSize.forEach((e=>bie(e,"kernelSize"))),this.strides=ole(r||1,2,"strides"),this.strides.forEach((e=>bie(e,"strides"))),this.padding=i||"valid",$ie(this.padding),this.dataFormat=o||"channelsLast",Rie(this.dataFormat),this.dilationRate=ole(a||1,2,"dilationRate"),this.dilationRate.forEach((e=>bie(e,"dilationRate")))}build(e){var t;e=Poe(e);const n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new Zre(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],i=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const o=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let e;if(this.unitForgetBias){const n=this.biasInitializer,r=this.filters;e=new((t=class extends doe{apply(e,t){return Zie([n.apply([r]),f7([r]),n.apply([2*r])])}}).className="CustomInit",t)}else e=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,e,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return K4((()=>{if(3!==e.length)throw new Zre(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const n=t.training||!1,r=e[0],i=e[1],o=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=Mle({ones:()=>m7(r),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,s=(e,t,n)=>t&&t[n]?U5(t[n],e):e;let l=s(r,a,0),u=s(r,a,1),c=s(r,a,2),h=s(r,a,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=Mle({ones:()=>m7(i),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const d=this.recurrentDropoutMask;let p=s(i,d,0),f=s(i,d,1),m=s(i,d,2),g=s(i,d,3);const[y,v,b,x]=M7(this.kernel.read(),4,3),[w,k,S,E]=this.useBias?M7(this.bias.read(),4):[null,null,null,null];l=this.inputConv(l,y,w,this.padding),u=this.inputConv(u,v,k,this.padding),c=this.inputConv(c,b,S,this.padding),h=this.inputConv(h,x,E,this.padding);const[I,T,C,A]=M7(this.recurrentKernel.read(),4,3);p=this.recurrentConv(p,I),f=this.recurrentConv(f,T),m=this.recurrentConv(m,C),g=this.recurrentConv(g,A);const _=this.recurrentActivation.apply(j5(l,p)),N=this.recurrentActivation.apply(j5(u,f)),O=j5(U5(N,o),U5(_,this.activation.apply(j5(c,m)))),R=U5(this.recurrentActivation.apply(j5(h,g)),this.activation.apply(O));return[R,R,O]}))}getConfig(){const e=super.getConfig(),{units:t}=e,n=Fle(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,t,n,r){const i=w9(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?soe(i,n,this.dataFormat):i}recurrentConv(e,t){return w9(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}jle.className="ConvLSTM2DCell",J5(jle);class zle extends Lle{constructor(e){const t=new jle(e);super(Object.assign(Object.assign({},e),{cell:t}))}static fromConfig(e,t){return new e(t)}}zle.className="ConvLSTM2D",J5(zle);class Ble extends Hoe{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(null==this.noiseShape)return this.noiseShape;const t=e.shape,n=[];for(let r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}call(e,t){return K4((()=>{this.invokeCallHook(e,t);const n=Doe(e);if(0<this.rate&&this.rate<1){const e=null!=t.training&&t.training,r=this.getNoiseShape(n);return uoe((()=>loe(n,this.rate,r,this.seed)),(()=>n),e)}return e}))}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}}Ble.className="Dropout",J5(Ble);class Ule extends Ble{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const t=e.shape;return[t[0],1,t[2]]}}Ule.className="SpatialDropout1D",J5(Ule);class Wle extends Hoe{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){let t=null;null!=e.batchSize&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,bie(this.units,"units"),this.activation=Gse(e.activation),null!=e.useBias&&(this.useBias=e.useBias),this.kernelInitializer=Ooe(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Ooe(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=dae(e.kernelConstraint),this.biasConstraint=dae(e.biasConstraint),this.kernelRegularizer=Jse(e.kernelRegularizer),this.biasRegularizer=Jse(e.biasRegularizer),this.activityRegularizer=Jse(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){const t=(e=Poe(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){const t=(e=Poe(e)).slice();return t[t.length-1]=this.units,t}call(e,t){return K4((()=>{this.invokeCallHook(e,t);const n=Doe(e),r=wie(this.activation.getClassName());let i;return null!=r?i=roe(n,this.kernel.read(),r,this.bias?this.bias.read():null):(i=roe(n,this.kernel.read()),null!=this.bias&&(i=soe(i,this.bias.read())),null!=this.activation&&(i=this.activation.apply(i))),i}))}getConfig(){const e={units:this.units,activation:Wse(this.activation),useBias:this.useBias,kernelInitializer:Noe(this.kernelInitializer),biasInitializer:Noe(this.biasInitializer),kernelRegularizer:Yse(this.kernelRegularizer),biasRegularizer:Yse(this.biasRegularizer),activityRegularizer:Yse(this.activityRegularizer),kernelConstraint:cae(this.kernelConstraint),biasConstraint:cae(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}Wle.className="Dense",J5(Wle);class Vle extends Hoe{constructor(e){super(e=e||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=Poe(e);for(const t of e.slice(1))if(null==t)throw new Zre(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Uie(e,1)]}call(e,t){return K4((()=>{this.invokeCallHook(e,t);let n=Doe(e);if("channelsFirst"===this.dataFormat&&n.rank>1){const e=[0];for(let t=2;t<n.rank;++t)e.push(t);e.push(1),n=q7(n,e)}return function(e){if(e.rank<=1)throw new Zre(`batchFlatten requires a minimum rank of 2. Got rank: ${e.rank}.`);const t=[e.shape[0],Uie(e.shape,1)];return s9(e,t)}(n)}))}getConfig(){const e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);const t=super.getConfig();return Object.assign(e,t),e}}Vle.className="Flatten",J5(Vle);class Gle extends Hoe{constructor(e){super(e),this.supportsMasking=!0,this.activation=Gse(e.activation)}call(e,t){return K4((()=>{this.invokeCallHook(e,t);const n=Doe(e);return this.activation.apply(n)}))}getConfig(){const e={activation:Wse(this.activation)},t=super.getConfig();return Object.assign(e,t),e}}Gle.className="Activation",J5(Gle);class Hle extends Hoe{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return K4((()=>function(e,t){return K4((()=>{if(2!==e.shape.length)throw new Zre(`repeat() expects a rank-2 tensor, but received a rank-${e.shape.length} tensor.`);return toe(Xie(e,1),[1,t,1])}))}(e=Doe(e),this.n)))}getConfig(){const e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}}Hle.className="RepeatVector",J5(Hle);class qle extends Hoe{constructor(e){super(e),this.targetShape=e.targetShape;for(let t=0;t<this.targetShape.length;++t)this.isUnknown(this.targetShape[t])&&(this.targetShape[t]=null)}isUnknown(e){return e<0||null==e}fixUnknownDimension(e,t){const n="Total size of new array must be unchanged.",r=t.slice();let i=1,o=null;for(let s=0;s<r.length;++s){const e=r[s];if(this.isUnknown(e)){if(null!==o)throw new Zre("Can only specifiy one unknown dimension.");o=s}else i*=e}const a=Uie(e);if(null!==o){if(0===i||a%i!==0)throw new Zre(n);r[o]=a/i}else if(a!==i)throw new Zre(n);return r}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return K4((()=>{this.invokeCallHook(e,t);const n=Doe(e),r=n.shape,i=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return s9(n,i)}))}getConfig(){const e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}}qle.className="Reshape",J5(qle);class Kle extends Hoe{constructor(e){if(super(e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const t=Gie(1,e.dims.length+1);if(!CZ(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Boe({ndim:this.dims.length+1})]}computeOutputShape(e){const t=(e=Poe(e)).slice();return this.dims.forEach(((n,r)=>{t[r+1]=e[n]})),t}call(e,t){return q7(Doe(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}}Kle.className="Permute",J5(Kle);class Xle extends Hoe{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,this.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){const n=Doe(e);return V6(h7(n,this.maskValue),-1)}call(e,t){return K4((()=>{this.invokeCallHook(e,t);const n=Doe(e),r=V6(h7(n,this.maskValue),-1,!0);return U5(n,M5(r,n.dtype))}))}}Xle.className="Masking",J5(Xle);class Yle extends Hoe{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let t=null;null!=e.batchSize&&(t=e.batchSize),null==e.inputLength?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(sie(e.inputLength))}this.inputDim=e.inputDim,bie(this.inputDim,"inputDim"),this.outputDim=e.outputDim,bie(this.outputDim,"outputDim"),this.embeddingsInitializer=Ooe(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Jse(e.embeddingsRegularizer),this.activityRegularizer=Jse(e.activityRegularizer),this.embeddingsConstraint=dae(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return K4((()=>this.maskZero?(e=Doe(e),h7(e,G5(e))):null))}computeOutputShape(e){if(e=Poe(e),null==this.inputLength)return[...e,this.outputDim];const t=sie(this.inputLength);if(t.length!==e.length-1)throw new Zre(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let n=0;for(let r=0;r<t.length;++r){const i=t[r],o=e[r+1];if(null!=i&&null!=o&&i!==o)throw new Zre(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);null==i&&(t[n]=o),n++}}return[e[0],...t,this.outputDim]}call(e,t){return K4((()=>{this.invokeCallHook(e,t);let n=Doe(e);"int32"!==n.dtype&&(n=Kie(n,"int32"));const r=ioe(this.embeddings.read(),s9(n,[n.size]));return s9(r,Poe(this.computeOutputShape(n.shape)))}))}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Noe(this.embeddingsInitializer),embeddingsRegularizer:Yse(this.embeddingsRegularizer),activityRegularizer:Yse(this.activityRegularizer),embeddingsConstraint:cae(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}}Yle.className="Embedding",J5(Yle);class Qle extends Hoe{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new eie}computeElementwiseOpOutputShape(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;const n=e.slice(0,e.length-t.length);for(let r=0;r<t.length;++r){const i=e[e.length-t.length+r],o=t[r];if(null==i||null==o||i<0||o<0)n.push(null);else if(1===i)n.push(o);else if(1===o)n.push(i);else{if(i!==o)throw new Zre("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(i)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Poe(e)]),e.length<2)throw new Zre(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let t=[];for(const i of e)null!=i&&null!==i[0]&&t.push(i[0]);if(t=mie(t),t.length>1)throw new Zre(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let n=null==e[0]?null:e[0].slice(1);for(let i=1;i<e.length;++i){const t=null==e[i]?null:e[i].slice(1);n=this.computeElementwiseOpOutputShape(n,t)}const r=e.map((e=>e.length));-1===e.indexOf(null)&&1===mie(r).length?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return K4((()=>{if(this.reshapeRequired){const t=[],n=e.map((e=>e.rank));if(-1===n.indexOf(null)){const r=Vie(n);for(let n of e){const e=n.rank;for(let t=0;t<r-e;++t)n=Xie(n,1);t.push(n)}return this.mergeFunction(t)}{let n=!1;for(const o of e){const e=o.rank;if(null==e){const e=o.shape,r=e[0],i=e.slice(1).concat([r]);let a=s9(o,[r].concat(Uie(e.slice(1))));a=q7(a,[1,0]),a=s9(a,i),t.push(a),n=!0}else if(e>1){const r=Gie(1,e).concat([0]);t.push(q7(o,r)),n=!0}else t.push(o)}let r=this.mergeFunction(t);const i=r.rank;if(n)if(null==i){const e=r.shape,t=e[e.length-1],n=[t].concat(e.slice(0,e.length-1));r=s9(q7(s9(r,[-1,t]),[1,0]),n)}else if(i>1){const e=[i-1].concat(Gie(0,i-1));r=q7(r,e)}return r}}return this.mergeFunction(e)}))}computeOutputShape(e){let t;t=null==e[0]?null:e[0].slice(1);for(let r=1;r<e.length;++r){const n=null==e[r]?null:e[r].slice(1);t=this.computeElementwiseOpOutputShape(t,n)}let n=[];for(const r of e)null!=r&&null!==r[0]&&n.push(r[0]);return n=mie(n),t=1===n.length?n.concat(t):[null].concat(t),t}computeMask(e,t){return K4((()=>{if(null==t)return null;if(!Array.isArray(t))throw new Zre("`mask` should be an Array");if(!Array.isArray(e))throw new Zre("`inputs` should be an Array");if(t.length!==e.length)throw new Zre(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${t.length})`);if(t.every((e=>null==e)))return null;let n=(t=t.map((e=>null==e?e:D9(e,0))))[0];for(let e=1;e<t.length-1;++e)n=n7(n,t[e]);return n}))}}class Jle extends Qle{constructor(e){super(e)}mergeFunction(e){return K4((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=j5(t,e[n]);return t}))}}Jle.className="Add",J5(Jle);class Zle extends Qle{constructor(e){super(e)}mergeFunction(e){return K4((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=U5(t,e[n]);return t}))}}Zle.className="Multiply",J5(Zle);class eue extends Qle{constructor(e){super(e)}mergeFunction(e){return K4((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=j5(t,e[n]);return U5(1/e.length,t)}))}}eue.className="Average",J5(eue);class tue extends Qle{constructor(e){super(e)}mergeFunction(e){return K4((()=>{let t=e[0];for(let n=1;n<e.length;++n)t=c6(t,e[n]);return t}))}}tue.className="Maximum",J5(tue);class nue extends Qle{constructor(e){super(e)}mergeFunction(e){return K4((()=>{let t=e[0];for(let n=1;n<e.length;++n)t=l7(t,e[n]);return t}))}}nue.className="Minimum",J5(nue);class rue extends Qle{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new Zre("A `Concatenate` layer should be called on a list of at least 2 inputs");let t=!0;for(const r of e)if(null!=r){t=!1;break}if(t)return;const n=[];for(let r=0;r<e.length;++r){const t=e[r].slice();t.splice(this.axis,1);let i=!1;for(const e of n)if(CZ(e,t)){i=!0;break}i||n.push(t)}if(n.length>1)throw new Zre("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return K4((()=>Zie(e,this.axis)))}computeOutputShape(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new Zre("A `Concatenate` layer should be called on a list of inputs.");const t=e,n=t[0].slice(),r=this.axis<0?n.length+this.axis:this.axis;for(const i of t.slice(1)){if(null==n[r]||null==i[r]){n[r]=null;break}n[r]+=i[r]}return n}computeMask(e,t){if(null==t)return null;if(!Array.isArray(t))throw new Zre("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new Zre("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new Zre(`Mismatch in the length of mask (${t.length}) and the legnth of inputs (${e.length})`);return K4((()=>{let n=!0;if(t.forEach((e=>{null==e||(n=!1)})),n)return null;const r=[];for(let o=0;o<e.length;++o)null==t[o]?r.push(M5(m7(e[o]),"bool")):t[o].rank<e[o].rank?r.push(D9(t[o],-1)):r.push(t[o]);const i=g9(r,this.axis);return W6(i,-1,!1)}))}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function iue(e,t){for(;e<0;)e+=t;return e}rue.className="Concatenate",J5(rue);class oue extends Qle{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){SZ(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(()=>"A `Dot` layer should be called on a list of exactly 2 inputs."));const t=e[0],n=e[1];if(t.length>3||n.length>3)throw new eie("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new Zre(`Dimension incompatibility: ${t[r[0]]} !== ${n[r[1]]}`)}mergeFunction(e){if(2!==e.length)throw new Zre(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map(((t,n)=>iue(t,e[n].shape.length))):[iue(this.axes,n.shape.length),iue(this.axes,r.shape.length)],this.normalize&&(n=Iae(n,t[0]),r=Iae(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new eie("batchDot is not implemented for tensors of 4D or higher rank yet");if(SZ(e.shape.length>=2,(()=>`batchDot requires the rank of x to be >= 2, but got ${e.shape.length}`)),SZ(e.shape.length>=2,(()=>`batchDot requires the rank of y to be >= 2, but got ${t.shape.length}`)),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new eie("batchDot is not implemented for complex64-type Tensors yet.");const r=e.shape.length,i=t.shape.length;null==n&&(n=[r-1,i-2]);const o=n;return K4((()=>{let n,a;if(r>i){n=r-i;const e=[];for(let t=0;t<n;++t)e.push(1);t=s9(t,t.shape.concat(e))}else if(i>r){n=i-r;const t=[];for(let e=0;e<n;++e)t.push(1);e=s9(e,e.shape.concat(t))}else n=0;if(2===e.shape.length&&2===t.shape.length)a=o[0]===o[1]?G9(U5(e,t),o[0]):G9(U5(q7(e,[1,0]),t),o[1]);else{const n=o[0]!==e.shape.length-1,r=o[1]===t.shape.length-1;a=r7(e,t,n,r)}if(n>0){let e;e=r>i?r+i-3:r-1;const t=[];for(let r=e;r<e+n;++r)t.push(r);a=F7(a,t)}return 1===a.shape.length&&(a=D9(a,1)),a}))}(n,r,t)}interpretAxes(e,t){let n;return n=Array.isArray(this.axes)?this.axes:[iue(this.axes,e.length),iue(this.axes,t.length)],n}computeOutputShape(e){SZ(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(()=>"A `Dot` layer should be called on a list of exactly 2 inputs."));const t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new eie("Dot layer does not support tensors of 4D or higher rank yet.");const r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);const i=t.concat(n);return 1===i.length&&i.push(1),i}computeMask(e,t){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}}oue.className="Dot",J5(oue);class aue extends Hoe{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return K4((()=>{this.invokeCallHook(e,t);const n=Doe(e);return uoe((()=>j5(noe(n.shape,0,this.stddev),n)),(()=>n),t.training||!1)}))}}aue.className="GaussianNoise",J5(aue);class sue extends Hoe{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return K4((()=>{this.invokeCallHook(e,t);const n=Doe(e);if(this.rate>0&&this.rate<1){return uoe((()=>{const e=Math.sqrt(this.rate/(1-this.rate));return U5(n,noe(n.shape,1,e))}),(()=>n),t.training||!1)}return n}))}}sue.className="GaussianDropout",J5(sue);class lue extends Hoe{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Doe(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return K4((()=>{if(this.rate<1&&this.rate>0){const n=this._getNoiseShape(e),r=()=>{const t=Doe(e),r=-1.7580993408473766;let i=z9(k7(n),this.rate);i=Kie(i,"float32");const o=((1-this.rate)*(1+this.rate*r**2))**-.5,a=-o*r*this.rate,s=j5(U5(t,i),U5(j5(i,-1),r));return j5(U5(s,o),a)};return uoe(r,(()=>Doe(e)),t.training||!1)}return e}))}}function uue(e,t,n,r,i){let o,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)o=h9(e,t,n,r,i,a);else if(3===e.rank)o=d9(e,t,n,r,i,a);else{if(4!==e.rank)throw new eie(`batchNormalization is not implemented for array of rank ${e.rank} yet`);o=p9(e,t,n,r,i,a)}return o}function cue(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return CZ(r.slice().sort(),Gie(0,e.rank-1))?function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return K4((()=>{const o=u7(e,r),a=o.mean,s=o.variance;return[uue(e,a,s,n,t,i),a,s]}))}(e,t,n,r,i):function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return K4((()=>{const o=u7(e,r),a=o.mean,s=o.variance,l=[];for(const t of Gie(0,e.rank))-1!==r.indexOf(t)?l.push(1):l.push(e.shape[t]);const u=s9(a,l),c=s9(s,l),h=null==t?null:s9(t,l),d=null==n?null:s9(n,l);return[uue(e,u,c,d,h,i),a,s]}))}(e,t,n,r,i)}lue.className="AlphaDropout",J5(lue);class hue extends Hoe{constructor(e){null==e&&(e={}),super(e),this.supportsMasking=!0,this.axis=null==e.axis?-1:e.axis,this.momentum=null==e.momentum?.99:e.momentum,this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=Ooe(e.betaInitializer||"zeros"),this.gammaInitializer=Ooe(e.gammaInitializer||"ones"),this.movingMeanInitializer=Ooe(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Ooe(e.movingVarianceInitializer||"ones"),this.betaConstraint=dae(e.betaConstraint),this.gammaConstraint=dae(e.gammaConstraint),this.betaRegularizer=Jse(e.betaRegularizer),this.gammaRegularizer=Jse(e.gammaRegularizer)}build(e){e=Poe(e);const t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new Zre(`Axis ${t} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Boe({ndim:e.length,axes:{[t]:n}})];const r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return K4((()=>{const n=null!=t.training&&t.training,r=Doe(e),i=r.shape,o=i.length,a=Gie(0,o),s=this.axis>=0?this.axis:this.axis+o;a.splice(s,1);const l=rie(1,o);l[s]=i[s];const u=a.slice();u.sort();const c=!CZ(u,Gie(0,o).slice(0,o-1));if(!n)return(()=>{if(c){const e=s9(this.movingMean.read(),l),t=s9(this.movingVariance.read(),l),n=this.center?s9(this.beta.read(),l):null,i=this.scale?s9(this.gamma.read(),l):null;return uue(r,e,t,n,i,this.epsilon)}return uue(r,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();const[h,d,p]=cue(r,this.gamma.read(),this.beta.read(),a,this.epsilon),f=(e,t,n)=>{K4((()=>{const r=1-n,i=e.read(),o=U5(i6(i,t),r);e.write(i6(i,o))}))};return(()=>{f(this.movingMean,d,this.momentum),f(this.movingVariance,p,this.momentum)})(),h}))}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Noe(this.betaInitializer),gammaInitializer:Noe(this.gammaInitializer),movingMeanInitializer:Noe(this.movingMeanInitializer),movingVarianceInitializer:Noe(this.movingVarianceInitializer),betaRegularizer:Yse(this.betaRegularizer),gammaRegularizer:Yse(this.gammaRegularizer),betaConstraint:cae(this.betaConstraint),gammaConstraint:cae(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}}hue.className="BatchNormalization",J5(hue);class due extends Hoe{constructor(e){if(null==e&&(e={}),super(e),this.axis=null==e.axis?-1:e.axis,"number"===typeof this.axis){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else{if(!Array.isArray(this.axis))throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);for(const e of this.axis)if(!Number.isInteger(e))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=Ooe(e.betaInitializer||"zeros"),this.gammaInitializer=Ooe(e.gammaInitializer||"ones"),this.betaRegularizer=Jse(e.betaRegularizer),this.gammaRegularizer=Jse(e.gammaRegularizer),this.supportsMasking=!0}build(e){const t=(e=Poe(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(let i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=t);for(const i of this.axis)if(i<0||i>=t)throw new Error(`Invalid axis: ${i}`);if(this.axis.length!==mie(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const n=this.axis.map((t=>e[t])),r=!0;this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,r):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,r):this.beta=null,this.built=!0}call(e,t){const n=Doe(e),r=n.shape,i=r.length;return K4((()=>{let{mean:e,variance:t}=u7(n,this.axis,!0);const o=rie(1,i);for(const n of this.axis)o[n]=r[n];const a=e=>null!=e&&e.shape.length!==i?s9(e,o):e;let s=this.scale?a(this.gamma.read()):null,l=this.center?a(this.beta.read()):null;const u=[],c=[];for(let n=0;n<i;++n)-1!==this.axis.indexOf(n)?(u.push(r[n]),c.push(1)):(u.push(1),c.push(r[n]));return e=P9(e,u),t=P9(t,u),null!=s&&(s=P9(s,c)),null!=l&&(l=P9(l,c)),uue(n,e,t,l,s,this.epsilon)}))}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Noe(this.betaInitializer),gammaInitializer:Noe(this.gammaInitializer),betaRegularizer:Yse(this.betaRegularizer),gammaRegularizer:Yse(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}}due.className="LayerNormalization",J5(due);class pue extends Hoe{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new Zre(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let t,n;if("number"===typeof e.padding[0])t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new Zre(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(t=e.padding[0],2!==e.padding[1].length)throw new Zre(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new Boe({ndim:4})]}computeOutputShape(e){let t,n;return e=Poe(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}call(e,t){return K4((()=>function(e,t,n){return K4((()=>{if(4!==e.rank)throw new Zre(`temporalPadding expects input tensor to be 4-D, but received a ${e.rank}-D tensor.`);if(null==t&&(t=[[1,1],[1,1]]),2!==t.length||2!==t[0].length||2!==t[1].length)throw new Zre("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n="channelsLast"),"channelsLast"!==n&&"channelsFirst"!==n)throw new Zre(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return r="channelsFirst"===n?[[0,0],[0,0],t[0],t[1]]:[[0,0],t[0],t[1],[0,0]],g7(e,r)}))}(Doe(e),this.padding,this.dataFormat)))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}function fue(e,t,n,r,i,o){return K4((()=>{let a;Rie(i),Die(o),$ie(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==i&&(i="channelsLast"),null==o&&(o="max"),e=lle(e,i);const s="same"===r?"same":"valid";return a="max"===o?i7(e,t,n,s):l9(e,t,n,s),"channelsFirst"===i&&(a=q7(a,[0,3,1,2])),a}))}function mue(e,t,n,r,i,o){return K4((()=>{let a;Rie(i),Die(o),$ie(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==i&&(i="channelsLast"),null==o&&(o="max"),e=ule(e,i);const s="same"===r?"same":"valid";return a="max"===o?o7(e,t,n,s):u9(e,t,n,s),"channelsFirst"===i&&(a=q7(a,[0,4,1,2,3])),a}))}pue.className="ZeroPadding2D",J5(pue);class gue extends Hoe{constructor(e){if(null==e.poolSize&&(e.poolSize=2),super(e),"number"===typeof e.poolSize)this.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new Zre(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);this.poolSize=e.poolSize}if(bie(this.poolSize,"poolSize"),null==e.strides)this.strides=this.poolSize;else if("number"===typeof e.strides)this.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new Zre(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);this.strides=e.strides}bie(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,$ie(this.padding),this.inputSpec=[new Boe({ndim:3})]}computeOutputShape(e){const t=ale((e=Poe(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return K4((()=>{this.invokeCallHook(e,t),e=Xie(Doe(e),2);const n=this.poolingFunction(Doe(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return F7(n,[2])}))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}}class yue extends gue{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return Rie(i),$ie(r),fue(e,t,n,r,i,"max")}}yue.className="MaxPooling1D",J5(yue);class vue extends gue{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return Rie(i),$ie(r),fue(e,t,n,r,i,"avg")}}vue.className="AveragePooling1D",J5(vue);class bue extends Hoe{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new Zre(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];bie(this.poolSize,"poolSize"),bie(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Rie(this.dataFormat),$ie(this.padding),this.inputSpec=[new Boe({ndim:4})]}computeOutputShape(e){e=Poe(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=ale(t,this.poolSize[0],this.padding,this.strides[0]),n=ale(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return K4((()=>(this.invokeCallHook(e,t),this.poolingFunction(Doe(e),this.poolSize,this.strides,this.padding,this.dataFormat))))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class xue extends bue{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return Rie(i),$ie(r),fue(e,t,n,r,i,"max")}}xue.className="MaxPooling2D",J5(xue);class wue extends bue{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return Rie(i),$ie(r),fue(e,t,n,r,i,"avg")}}wue.className="AveragePooling2D",J5(wue);class kue extends Hoe{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new Zre(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];bie(this.poolSize,"poolSize"),bie(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Rie(this.dataFormat),$ie(this.padding),this.inputSpec=[new Boe({ndim:5})]}computeOutputShape(e){e=Poe(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=ale(t,this.poolSize[0],this.padding,this.strides[0]),n=ale(n,this.poolSize[1],this.padding,this.strides[1]),r=ale(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}call(e,t){return K4((()=>(this.invokeCallHook(e,t),this.poolingFunction(Doe(e),this.poolSize,this.strides,this.padding,this.dataFormat))))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class Sue extends kue{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return Rie(i),$ie(r),mue(e,t,n,r,i,"max")}}Sue.className="MaxPooling3D",J5(Sue);class Eue extends kue{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return Rie(i),$ie(r),mue(e,t,n,r,i,"avg")}}Eue.className="AveragePooling3D",J5(Eue);class Iue extends Hoe{constructor(e){super(e),this.inputSpec=[new Boe({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new eie}}class Tue extends Iue{constructor(e){super(e||{})}call(e,t){return K4((()=>{const t=Doe(e);return a7(t,1)}))}}Tue.className="GlobalAveragePooling1D",J5(Tue);class Cue extends Iue{constructor(e){super(e||{})}call(e,t){return K4((()=>{const t=Doe(e);return V9(t,1)}))}}Cue.className="GlobalMaxPooling1D",J5(Cue);class Aue extends Hoe{constructor(e){super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Rie(this.dataFormat),this.inputSpec=[new Boe({ndim:4})]}computeOutputShape(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new eie}getConfig(){const e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class _ue extends Aue{call(e,t){return K4((()=>{const t=Doe(e);return"channelsLast"===this.dataFormat?a7(t,[1,2]):a7(t,[2,3])}))}}_ue.className="GlobalAveragePooling2D",J5(_ue);class Nue extends Aue{call(e,t){return K4((()=>{const t=Doe(e);return"channelsLast"===this.dataFormat?V9(t,[1,2]):V9(t,[2,3])}))}}Nue.className="GlobalMaxPooling2D",J5(Nue);class Oue extends Hoe{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(e){null!=this.layer&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=Eae(t.layer,n);delete t.layer;const i={layer:r};return Object.assign(i,t),new e(i)}}class Rue extends Oue{constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=Poe(e)).length<3)throw new Zre(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){const t=[(e=Poe(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}call(e,t){return K4((()=>Tle(((e,n)=>[Doe(this.layer.call(e,t)),[]]),e=Doe(e),[],!1,null,null,!1,!0)[1]))}}Rue.className="TimeDistributed",J5(Rue);class $ue extends Oue{constructor(e){super(e);const t=e.layer.getConfig(),n={};n.className=e.layer.getClassName(),n.config=t,this.forwardLayer=Eae(n),t.goBackwards=!0!==t.goBackwards;const r={};if(r.className=e.layer.getClassName(),r.config=t,this.backwardLayer=Eae(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,function(e){yie(Nie,"BidirectionalMergeMode",e)}(this.mergeMode),e.weights)throw new eie("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}computeOutputShape(e){let t,n,r,i=this.forwardLayer.computeOutputShape(e);return Array.isArray(i)&&Array.isArray(i[0])||(i=[i]),this.returnState?(r=i.slice(1),t=i[0]):t=i[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):aie(n)}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});const i=Ile(e,n,r,this.numConstants);if(e=i.inputs,n=i.initialState,r=i.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(null==n||0===n.length)&&null==r)return super.apply(e,t);const o=[],a=[];if(null!=n){const e=n.length;if(e%2>0)throw new Zre("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=n,o.push(...n);const r=n.map((e=>new Boe({shape:e.shape})));this.forwardLayer.stateSpec=r.slice(0,e/2),this.backwardLayer.stateSpec=r.slice(e/2),a.push(...r)}if(null!=r)throw new eie("Support for constants in Bidirectional layers is not implemented yet.");const s=o[0]instanceof Uoe;for(const l of o)if(l instanceof Uoe!==s)throw new Zre("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(s){const n=[e].concat(o),r=this.inputSpec.concat(a),i=this.inputSpec;this.inputSpec=r;const s=super.apply(n,t);return this.inputSpec=i,s}return super.apply(e,t)}call(e,t){return K4((()=>{const n=t.initialState;let r,i,o,a;if(null==n)r=this.forwardLayer.call(e,t),i=this.backwardLayer.call(e,t);else{const o=n.slice(0,n.length/2),a=n.slice(n.length/2);r=this.forwardLayer.call(e,Object.assign(t,{initialState:o})),i=this.backwardLayer.call(e,Object.assign(t,{initialState:a}))}return this.returnState&&(Array.isArray(r)&&(o=r.slice(1).concat(i.slice(1))),r=r[0],i=i[0]),this.returnSequences&&(i=I7(i,1)),"concat"===this.mergeMode?a=Zie([r,i]):"sum"===this.mergeMode?a=j5(r,i):"ave"===this.mergeMode?a=U5(.5,j5(r,i)):"mul"===this.mergeMode?a=U5(r,i):null==this.mergeMode&&(a=[r,i]),this.returnState?null==this.mergeMode?a.concat(o):[a].concat(o):a}))}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Mie(this.forwardLayer.name,(()=>{this.forwardLayer.build(e)})),Mie(this.backwardLayer.name,(()=>{this.backwardLayer.build(e)})),this.built=!0}computeMask(e,t){let n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){const e=this.forwardLayer.states.map((e=>null));return Array.isArray(n)?n.concat(e).concat(e):[n].concat(e).concat(e)}return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){const n=Eae(t.layer);if(delete t.layer,null!=t.numConstants)throw new eie("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const r=t;return r.layer=n,new e(r)}}$ue.className="Bidirectional",J5($ue);class Due extends Hoe{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return K4((()=>("float32"!==(e=Doe(e)).dtype&&(e=Kie(e,"float32")),j5(U5(e,this.scale),this.offset))))}}Due.className="Rescaling",J5(Due);const{resizeBilinear:Pue,cropAndResize:Mue}=K8;class Fue extends Hoe{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,t,n,r,i,o,a,s){return K4((()=>{let l,u=!1;const c=[t/o,n/a,(r+t)/o,(i+n)/a],h=[];3===e.rank?(u=!0,l=L7([e])):l=e;for(let e=0;e<l.shape[0];e++)h.push(c);const d=V4(h,[h.length,4]),p=S7(0,h.length,1,"int32"),f=Mue(l,d,p,[r,i],"nearest");return Kie(u?Doe(W7(f)):f,s)}))}upsize(e,t,n,r){return K4((()=>Kie(Pue(e,[t,n]),r)))}call(e,t){return K4((()=>{const t=Doe(e),n=t.dtype,r=t.shape,i=r[r.length-3],o=r[r.length-2];let a=0;i!==this.height&&(a=Math.floor((i-this.height)/2));let s=0;return o!==this.width&&(s=Math.floor((o-this.width)/2),0===s&&(s=1)),a>=0&&s>=0?this.centerCrop(t,a,s,this.height,this.width,i,o,n):this.upsize(e,this.height,this.width,n)}))}getConfig(){const e={height:this.height,width:this.width},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){const t=(e=Poe(e)).length-3,n=e.length-2;return e[t]=this.height,e[n]=this.width,e}}Fue.className="CenterCrop",J5(Fue);class Lue extends Hoe{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){return null==(e=Poe(e))?[this.numTokens]:"oneHot"===this.outputMode&&1!==e[e.length-1]?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,t){return K4((()=>{let n;if("int32"!==(e=Doe(e)).dtype&&(e=Kie(e,"int32")),"undefined"!==typeof t.countWeights){if("count"!==this.outputMode)throw new Zre(`countWeights is not used when outputMode !== count.\n              Received countWeights=${t.countWeights}`);n=Doe(t.countWeights)}const r=V9(e),i=s7(e),o=j9(this.numTokens,r).bufferSync().get(0),a=z9(i,0).bufferSync().get(0);if(!o||!a)throw new Zre(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return function(e,t,n,r){let i=Doe(e);if("int32"!==i.dtype&&(i=Kie(i,"int32")),"int"===t)return i;const o=i.shape;if(0===i.rank&&(i=D9(i,-1)),"oneHot"===t&&1!==i.shape[i.shape.length-1]&&(i=D9(i,-1)),i.rank>2)throw new Zre(`When outputMode is not int, maximum output rank is 2 Received outputMode ${t} and input shape ${o} which would result in output rank ${i.rank}.`);const a=["multiHot","oneHot"].includes(t),s=i;let l;if(l=A9(s,"undefined"!==typeof r&&"count"===t?r:[],n,a),"tfIdf"!==t)return l;if(r)return U5(l,r);throw new Zre("When outputMode is 'tfIdf', weights must be provided.")}(e,this.outputMode,this.numTokens,n)}))}}Lue.className="CategoryEncoding",J5(Lue);const jue=new Set(["bilinear","nearest"]);class zue extends Hoe{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation){if(!jue.has(e.interpolation))throw new Zre(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);this.interpolation=e.interpolation}else this.interpolation="bilinear";this.cropToAspectRatio=Boolean(e.cropToAspectRatio)}computeOutputShape(e){const t=(e=Poe(e))[2];return[this.height,this.width,t]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return K4((()=>{const t=[this.height,this.width];if("bilinear"===this.interpolation)return K8.resizeBilinear(e,t,!this.cropToAspectRatio);if("nearest"===this.interpolation)return K8.resizeNearestNeighbor(e,t,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...jue]} are supported`)}))}}zue.className="Resizing",J5(zue);class Bue{constructor(e){this.seed=e}next(){if(void 0!==this.seed)return this.seed++}}Bue.className="RandomSeed";class Uue extends Hoe{constructor(e){super(e),this.randomGenerator=new Bue(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},t=super.getConfig();return Object.assign(e,t),e}}Uue.className="BaseRandomLayer";const Wue=new Set(["bilinear","nearest"]);class Vue extends Uue{constructor(e){super(e);const{factor:t,interpolation:n="bilinear"}=e;if(this.factor=t,Array.isArray(this.factor)&&2===this.factor.length)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else{if(Array.isArray(this.factor)||!(this.factor>0))throw new Zre(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);this.widthLower=-this.factor,this.widthUpper=this.factor}if(this.widthLower<-1||this.widthUpper<-1)throw new Zre(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new Zre(`factor cannot have upper bound less than lower bound.\n        Got upper bound: ${this.widthUpper}.\n        Got lower bound: ${this.widthLower}\n      `);if(n){if(!Wue.has(n))throw new Zre(`Invalid interpolation parameter: ${n} is not implemented`);this.interpolation=n}}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){const t=(e=Poe(e))[2];return[this.imgHeight,-1,t]}call(e,t){return K4((()=>{const t=Doe(e);this.imgHeight=t.shape[t.shape.length-3];const n=t.shape[t.shape.length-2];this.widthFactor=k7([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let r=this.widthFactor.dataSync()[0]*n;r=Math.round(r);const i=[this.imgHeight,r];switch(this.interpolation){case"bilinear":return K8.resizeBilinear(e,i);case"nearest":return K8.resizeNearestNeighbor(e,i);default:throw new Error(`Interpolation is ${this.interpolation}\n          but only ${[...Wue]} are supported`)}}))}}function Gue(e){return new Wle(e)}Vue.className="RandomWidth",J5(Vue);var Hue,que;r0().registerFlag("KEEP_INTERMEDIATE_TENSORS",(()=>!1),(e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(Hue||(Hue={})),function(e){let t;!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(que||(que={}));Error;new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Kue(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"===typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);const i=t(e);if(i.recurse&&null!==i.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(i.recurse){if(Jue(e)){const i=Array.isArray(e)?[]:{};r.add(e);for(const o in e){const a=Kue(e[o],t,n,r);i[o]=a}return r.delete(e),e.__proto__&&(i.__proto__=e.__proto__),i}throw new Error(`Can't recurse into non-iterable type: ${e}`)}return n.set(e,i.value),i.value}function Xue(e){return Yue(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Que)}function Yue(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;const r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");const i=t(e);if(i.recurse&&null!==i.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(i.recurse){if(Jue(r)){const i=Array.isArray(r)?[]:{};n.add(r);for(const o in r){const r=e.map((e=>e[o])),a=Yue(r,t,n);i[o]=a}return n.delete(r),i}throw new Error(`Can't recurse into non-iterable type: ${r}`)}return i.value}function Que(e){return null===e?null:Jue(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function Jue(e){let t=!1;if(r0().get("IS_BROWSER"))t=e instanceof TextDecoder;else{const{StringDecoder:r}=n(551);t=e instanceof r}return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof u4)&&!(e instanceof Promise)&&!t)}function Zue(e){return function(e,t){return Kue(e,t)}(e,ece)}function ece(e){return e instanceof u4?{value:e.clone(),recurse:!1}:Jue(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}class tce{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,null==e)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(const t of e)this.push(t)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}class nce extends tce{constructor(){super(nce.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){const e=2*this.capacity,t=new Array(e),n=this.length();for(let r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}function rce(e){return new sce(e)}function ice(e,t){return new vce(e,t)}nce.INITIAL_CAPACITY=32;class oce{async toArray(){const e=[];let t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){const e=this.prefetch(100),t=[];let n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),n=e(t.value);for(;!t.done&&n;)t=await this.next(),n=e(t.value)}handleErrors(e){return new fce(this,e)}filter(e){return new dce(this,e)}map(e){return new pce(this,e)}mapAsync(e){return new mce(this,e)}serialMapAsync(e){return new mce(this,e).serial()}flatmap(e){return new yce(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile((e=>!0===e))}rowMajorBatch(e){return new hce(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}columnMajorBatch(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Que;return this.rowMajorBatch(e,t).map((e=>Xue(e,n)))}concatenate(e,t){return new vce(new ace([this,e]),t)}take(e){return e<0||null==e?this:new cce(this,e)}skip(e){return e<0||null==e?this:new uce(this,e)}prefetch(e){return new xce(this,e)}shuffle(e,t){return new wce(this,e,t)}serial(){return new lce(this)}}class ace extends oce{constructor(e){super(),this.items=e,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const e=this.items[this.trav];return this.trav++,{value:Zue(e),done:!1}}}class sce extends oce{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(e){throw e.message=`Error thrown while iterating through a dataset: ${e.message}`,e}}}class lce extends oce{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Serial`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){return this.upstream.next()}}class uce extends oce{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Skip`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){const e=await this.upstream.next();if(e.done)return e;X4(e.value)}return this.upstream.next()}}class cce extends oce{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return`${this.upstream.summary()} -> Take`}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class hce extends oce{constructor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> RowMajorBatch`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){const e=[];for(;e.length<this.batchSize;){const t=await this.upstream.next();if(t.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(t.value)}return{value:e,done:!1}}}class dce extends oce{constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Filter`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;;){const e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;X4(e.value)}}}class pce extends oce{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Map`}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=E4(e.value),n=this.transform(e.value),r=E4(n);for(const i of t)S4(i,r)||i.dispose();return{value:n,done:!1}}}class fce extends oce{constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> handleErrors`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(e){if(!this.handler(e))return{value:null,done:!0}}}}class mce extends oce{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> AsyncMap`}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=E4(e.value),n=await this.transform(e.value),r=E4(n);for(const i of t)S4(i,r)||i.dispose();return{value:n,done:!1}}}class gce extends oce{constructor(){super(),this.outputQueue=new nce,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class yce extends gce{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Flatmap`}async pump(){const e=await this.upstream.next();if(e.done)return!1;const t=E4(e.value),n=this.transform(e.value),r=E4(n);this.outputQueue.pushAll(n);for(const i of t)S4(i,r)||i.dispose();return!0}}class vce extends oce{constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,null==this.iterator){const e=await this.moreIterators.next();if(e.done)return{value:null,done:!0};this.iterator=e.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}}var bce;!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(bce||(bce={}));class xce extends oce{constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new tce(t)}summary(){return`${this.upstream.summary()} -> Prefetch`}refill(){for(;!this.buffer.isFull();){const e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}}class wce extends xce{constructor(e,t,n){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=v7.alea(n||H3().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){const e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(!t.done)return this.refill(),t;this.upstreamExhausted=!0}return{value:null,done:!0}}}class kce{constructor(){this.size=null}batch(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this;let r;return SZ(e>0,(()=>`batchSize needs to be positive, but it is\n      ${e}`)),r=this.size===1/0||null==this.size?this.size:t?Math.ceil(this.size/e):Math.floor(this.size/e),Sce((async()=>(await n.iterator()).columnMajorBatch(e,t,Ece)),r)}concatenate(e){const t=this;let n;return n=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,Sce((async()=>(await t.iterator()).concatenate(await e.iterator())),n)}filter(e){const t=this;let n;return n=this.size===1/0?1/0:null,Sce((async()=>(await t.iterator()).filter((t=>K4((()=>e(t)))))),n)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){const t=this;return Sce((async()=>(await t.iterator()).map((t=>K4((()=>e(t)))))),this.size)}mapAsync(e){const t=this;return Sce((async()=>(await t.iterator()).mapAsync(e)),this.size)}prefetch(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const t=this;return Sce((async()=>(await t.iterator()).prefetch(e)),this.size)}repeat(e){const t=this;let n;return n=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,Sce((async()=>ice(rce((async()=>({value:await t.iterator(),done:!1}))).take(e))),n)}skip(e){const t=this;let n;return n=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,Sce((async()=>(await t.iterator()).skip(e)),n)}shuffle(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError(`\`Dataset.shuffle()\` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for \`tf.Tensor\`s), consider setting bufferSize to the dataset size (${this.size} elements)`);const r=this,i=v7.alea(t||H3().toString());return Sce((async()=>{let t=i.int32();return n&&(t+=i.int32()),(await r.iterator()).shuffle(e,t.toString())}),this.size)}take(e){const t=this;let n;return n=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,Sce((async()=>(await t.iterator()).take(e)),n)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function Sce(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new class extends kce{constructor(){super(...arguments),this.size=t}async iterator(){return e()}}}function Ece(e){if(null===e)return null;const t=e[0];if(null==(n=t)||function(e){return null===e||"object"!==typeof e&&"function"!==typeof e}(n)||Array.isArray(n)||"object"===typeof n&&n instanceof u4||X3(n)){return{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof u4?L7(e):V4(e)}(e),recurse:!1}}var n;return{value:null,recurse:!0}}kce.MAX_BUFFER_SIZE=1e4;Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");function Ice(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&SZ("complex64"!==e.dtype,(()=>`${t} does not support complex64 tensors in the CPU backend.`))}))}const Tce=lte;class Cce extends yZ{nextDataId(){return Cce.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new gZ(this,H4())}write(e,t,n){this.firstUse&&(this.firstUse=!1,r0().get("IS_NODE")&&b3("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));const r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&jZ(n[0])){const i=n.map((e=>q3(e)));r=this.write(i,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}refCount(e){if(this.data.has(e)){return this.data.get(e).refCount}return 0}incRef(e){this.data.get(e).refCount++}decRef(e){if(this.data.has(e)){this.data.get(e).refCount--}}move(e,t,n,r,i){this.data.set(e,{values:t,dtype:r,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:t,complexTensorInfos:n}=this.data.get(e);if("complex64"===t){return Tee(this.readSync(n.real.dataId),this.readSync(n.imag.dataId))}return function(e,t){if(Array.isArray(e))return e;if("float32"===t)return e instanceof Float32Array?e:new Float32Array(e);if("int32"===t)return e instanceof Int32Array?e:new Int32Array(e);if("bool"===t||"string"===t)return Uint8Array.from(new Int32Array(e));throw new Error(`Unknown dtype ${t}`)}(this.data.get(e).values,t)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map((e=>K3(e)));return P5(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return P5(e.shape,e.dtype,t)}makeOutput(e,t,n){return H4().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:n}=this.data.get(e);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const t=H3();e();return{kernelMs:H3()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Ice([e],"where");const t=this.readSync(e.dataId);return Tce(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}Cce.nextDataId=0;function Ace(e){return(t,n,r)=>{const i=MZ(n,t.length);for(let o=0;o<t.length;++o)i[o]=e(t[o],r);return i}}function _ce(e,t,n){return Nce(e,Ace(t),n)}function Nce(e,t,n){return r=>{let{inputs:i,attrs:o,backend:a}=r;const{x:s}=i;Ice(s,e);const l=a,u=l.data.get(s.dataId).values;let c;if("string"===s.dtype){if(!Array.isArray(u))throw new Error("String tensor's value was not an instance of Array");c=ate(u)}else c=u;const h=n||s.dtype,d=t(c,h,o);return l.makeTensorInfo(s.shape,h,d)}}Q4("cpu",(()=>new Cce),1);const Oce=_ce(a1,(e=>e>=0?e:Math.exp(e)-1)),Rce={kernelName:a1,backendName:"cpu",kernelFunc:Oce};function $ce(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const Dce={kernelName:S1,backendName:"cpu",kernelFunc:$ce};function Pce(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{alpha:o}=r;Ice([i],"leakyRelu");const a=TZ(i.shape),s=n.data.get(i.dataId).values,l=PZ("float32",a);for(let u=0;u<s.length;u++)l[u]=s[u]<0?o*s[u]:s[u];return n.makeTensorInfo(i.shape,"float32",l)}const Mce={kernelName:_1,backendName:"cpu",kernelFunc:Pce};function Fce(e){return(t,n,r,i,o)=>{const a=u6(t,n),s=a.length,l=VZ(a),u=PZ(o,TZ(a)),c=t.length,h=n.length,d=VZ(t),p=VZ(n),f=s6(t,a),m=s6(n,a);if(f.length+m.length===0)for(let g=0;g<u.length;++g)u[g]=e(r[g%r.length],i[g%i.length]);else for(let g=0;g<u.length;++g){const t=JZ(g,s,l),n=t.slice(-c);f.forEach((e=>n[e]=0));const o=QZ(n,c,d),a=t.slice(-h);m.forEach((e=>a[e]=0));const y=QZ(a,h,p);u[g]=e(r[o],i[y])}return[u,a]}}const Lce=Fce(((e,t)=>e<0?t*e:e));function jce(e){const{inputs:t,backend:n}=e,{x:r,alpha:i}=t;Ice([r,i],"prelu");const o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,[s,l]=Lce(r.shape,i.shape,o,a,"float32");return n.makeTensorInfo(l,"float32",s)}const zce={kernelName:c2,backendName:"cpu",kernelFunc:jce},Bce=_ce(v2,(e=>Math.max(0,e))),Uce={kernelName:v2,backendName:"cpu",kernelFunc:Bce},Wce=_ce(E2,(e=>Math.min(Math.max(0,e),6))),Vce={kernelName:E2,backendName:"cpu",kernelFunc:Wce},Gce=Ace((e=>1/(1+Math.exp(-e)))),Hce=_ce(F2,(e=>1/(1+Math.exp(-e)))),qce={kernelName:F2,backendName:"cpu",kernelFunc:Hce};function Kce(e,t,n,r,i){if("linear"===n)return $ce({inputs:{x:t},backend:e});if("relu"===n)return Bce({inputs:{x:t},backend:e});if("elu"===n)return Oce({inputs:{x:t},backend:e});if("relu6"===n)return Wce({inputs:{x:t},backend:e});if("prelu"===n)return jce({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return Pce({inputs:{x:t},backend:e,attrs:{alpha:i}});if("sigmoid"===n)return Hce({inputs:{x:t},backend:e});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}function Xce(e){const{inputs:t,backend:n}=e,{real:r,imag:i}=t,o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",o),imag:n.makeTensorInfo(i.shape,"float32",a)},s}const Yce={kernelName:D0,backendName:"cpu",kernelFunc:Xce};function Qce(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){return Xce({inputs:{real:Qce(e,t,"float32"),imag:Qce(e,t,"float32")},backend:e})}const r=KZ(TZ(t),n);return e.makeTensorInfo(t,n,r)}function Jce(e){const{inputs:t,backend:n}=e,{input:r}=t,i=n.data.get(r.dataId).complexTensorInfos.real,o=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,o)}const Zce={kernelName:g2,backendName:"cpu",kernelFunc:Jce};function ehe(e,t,n,r){if("int32"===r){return[t,"int32",Int32Array.from(e)]}if("bool"===r){const r=G3([0],n),[i,o]=Fce(((e,t)=>e!==t?1:0))(t,[],e,r,"bool");return[o,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function the(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dtype:o}=r;if("complex64"===o){if("complex64"===i.dtype)return $ce({inputs:{x:i},backend:n});const e=Qce(n,i.shape,i.dtype),t=the({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),r=Xce({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),r}if("complex64"===i.dtype){const e=Jce({inputs:{input:i},backend:n}),t=the({inputs:{x:e},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(e),t}if(!FZ(i.dtype,o)){const e=$ce({inputs:{x:i},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:o}}const a=n.data.get(i.dataId).values,[s,l,u]=ehe(a,i.shape,i.dtype,o);return n.makeTensorInfo(s,l,u)}const nhe={kernelName:O0,backendName:"cpu",kernelFunc:the};function rhe(e,t,n,r){return null==n?n=>{let{inputs:i,backend:o}=n;const{a:a,b:s}=i,l=o;Ice([a,s],e);const u=l.data.get(a.dataId).values,c=l.data.get(s.dataId).values,h="string"===a.dtype?ate(u):u,d="string"===a.dtype?ate(c):c,p=r||a.dtype,[f,m]=t(a.shape,s.shape,h,d,p);return l.makeTensorInfo(m,p,f)}:e=>{let{inputs:i,backend:o}=e;const{a:a,b:s}=i,l=o;if("complex64"===a.dtype||"complex64"===s.dtype){const e=the({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),t=l.data.get(e.dataId),r=t.complexTensorInfos.real,i=t.complexTensorInfos.imag,o=l.data.get(r.dataId).values,u=l.data.get(i.dataId).values,c=the({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),h=l.data.get(c.dataId),d=h.complexTensorInfos.real,p=h.complexTensorInfos.imag,f=l.data.get(d.dataId).values,m=l.data.get(p.dataId).values,[g,y,v]=n(a.shape,s.shape,o,u,f,m),b=l.makeTensorInfo(v,"float32",g),x=l.makeTensorInfo(v,"float32",y),w=Xce({inputs:{real:b,imag:x},backend:l});return l.disposeIntermediateTensorInfo(e),l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(b),l.disposeIntermediateTensorInfo(x),w}{const e=l.data.get(a.dataId).values,n=l.data.get(s.dataId).values,i=r||a.dtype,[o,u]=t(a.shape,s.shape,e,n,i);return l.makeTensorInfo(u,i,o)}}}function ihe(e){return(t,n,r,i,o,a)=>{const s=u6(t,n),l=TZ(s),u=s.length,c=VZ(s),h=PZ("float32",l),d=PZ("float32",l),p=s6(t,s),f=s6(n,s),m=Tee(r,i),g=Tee(o,a),y=t.length,v=VZ(t),b=n.length,x=VZ(n);if(p.length+f.length===0)for(let w=0;w<h.length;w++){const t=w%m.length,n=w%g.length,r=e(m[2*t],m[2*t+1],g[2*n],g[2*n+1]);h[w]=r.real,d[w]=r.imag}else for(let w=0;w<h.length;w++){const t=JZ(w,u,c),n=t.slice(-y);p.forEach((e=>n[e]=0));const r=QZ(n,y,v),i=t.slice(-b);f.forEach((e=>i[e]=0));const o=QZ(i,b,x),a=e(m[2*r],m[2*r+1],g[2*o],g[2*o+1]);h[w]=a.real,d[w]=a.imag}return[h,d,s]}}const ohe=Fce(((e,t)=>e+t)),ahe=ihe(((e,t,n,r)=>({real:e+n,imag:t+r}))),she=rhe(h0,ohe,ahe),lhe={kernelName:h0,backendName:"cpu",kernelFunc:she};function uhe(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{shape:o}=r,a=TZ(i.shape),s=RZ(o,a),l=TZ(s);SZ(a===l,(()=>`The new shape (${s}) has ${l} elements and the old shape (${i.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`)),n.incRef(i.dataId);const u=n.data.get(i.dataId);if(null!=u.complexTensorInfos){const e=u.complexTensorInfos.real,t=u.complexTensorInfos.imag;e.shape=s,t.shape=s}return{dataId:i.dataId,shape:s,dtype:i.dtype}}const che={kernelName:b2,backendName:"cpu",kernelFunc:uhe};function hhe(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:o}=t,{transposeA:a,transposeB:s}=r;Ice([i,o],"matMul");const l=i.shape.length,u=o.shape.length,c=a?i.shape[l-2]:i.shape[l-1],h=s?o.shape[u-1]:o.shape[u-2],d=a?i.shape[l-1]:i.shape[l-2],p=s?o.shape[u-2]:o.shape[u-1],f=i.shape.slice(0,-2),m=o.shape.slice(0,-2),g=TZ(f),y=TZ(m),v=u6(i.shape.slice(0,-2),o.shape.slice(0,-2)).concat([d,p]);SZ(c===h,(()=>`Error in matMul: inner shapes (${c}) and (${h}) of Tensors with shapes ${i.shape} and ${o.shape} and transposeA=${a} and transposeB=${s} must match.`));const b=s?[y,p,h]:[y,h,p],x=uhe({inputs:{x:i},backend:n,attrs:{shape:a?[g,c,d]:[g,d,c]}}),w=uhe({inputs:{x:o},backend:n,attrs:{shape:b}}),k=a?x.shape[1]:x.shape[2],S=a?x.shape[2]:x.shape[1],E=s?w.shape[1]:w.shape[2],I=Math.max(g,y),T=n.data.get(x.dataId).values,C=n.data.get(w.dataId).values,A=VZ(x.shape),_=VZ(w.shape),[N,O,R]=a?[A[0],1,A[1]]:[A[0],A[1],1],[$,D,P]=s?[1,_[1],_[0]]:[_[1],1,_[0]],M=S*E,F=P5([I,S,E],x.dtype),L=F.values,j=n.blockSize;for(let z=0;z<I;z++){const e=z%g,t=z%y;for(let n=0;n<S;n+=j){const r=Math.min(n+j,S);for(let i=0;i<E;i+=j){const o=Math.min(i+j,E);for(let a=0;a<k;a+=j){const s=Math.min(a+j,k);for(let l=n;l<r;l++)for(let n=i;n<o;n++){let r=0;for(let i=a;i<s;i++){r+=T[e*N+l*O+i*R]*C[i*$+n*D+t*P]}L[z*M+(l*E+n)]+=r}}}}}return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w),n.makeTensorInfo(v,F.dtype,F.values)}const dhe={kernelName:T0,backendName:"cpu",kernelFunc:hhe};const phe={kernelName:g3,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:o,bias:a,preluActivationWeights:s}=t,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:h}=r;let d,p,f;const m=[];d=hhe({inputs:{a:i,b:o},attrs:{transposeA:l,transposeB:u},backend:n}),a&&(p=she({inputs:{a:d,b:a},backend:n}),m.push(d),d=p),c&&(f=Kce(n,d,c,s,h),m.push(d),d=f);for(const g of m)n.disposeIntermediateTensorInfo(g);return d}};function fhe(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}const mhe={kernelName:l0,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend;Ice(t,"abs");let r=new Float32Array(TZ(t.shape));return r=fhe(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}},ghe=_ce(u0,(e=>Math.acos(e))),yhe={kernelName:u0,backendName:"cpu",kernelFunc:ghe},vhe=_ce(c0,(e=>Math.acosh(e))),bhe={kernelName:c0,backendName:"cpu",kernelFunc:vhe};const xhe={kernelName:d0,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,r=t;Ice(t,"addN");const i=r.map((e=>n.data.get(e.dataId).values)),o=P5(r[0].shape,r[0].dtype),a=o.values;for(let s=0;s<r.length;s++){const e=i[s];for(let t=0;t<a.length;t++)a[t]+=e[t]}return n.makeTensorInfo(o.shape,o.dtype,o.values)}};function whe(e,t,n,r,i){const o=t.length,a=TZ(t),s=VZ(t),l=VZ(i),u=PZ(n,TZ(i));for(let c=0;c<a;++c){const t=JZ(c,o,s),n=new Array(t.length);for(let e=0;e<n.length;e++)n[e]=t[r[e]];u[QZ(n,o,l)]=e[c]}return u}function khe(e){const{inputs:t,attrs:n,backend:r}=e,{x:i}=t,{perm:o}=n;Ice(i,"transpose");const a=i.shape.length,s=new Array(a);for(let u=0;u<s.length;u++)s[u]=i.shape[o[u]];const l=whe(r.data.get(i.dataId).values,i.shape,i.dtype,o,s);return{dataId:r.write(l,s,i.dtype),shape:s,dtype:i.dtype}}const She={kernelName:l3,backendName:"cpu",kernelFunc:khe};const Ehe={kernelName:p0,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r;Ice(i,"all");const s=$Z(o,i.shape);let l=s;const u=J9(l,i.shape.length);let c=i;null!=u&&(c=khe({inputs:{x:i},backend:n,attrs:{perm:u}}),l=e7(l.length,i.shape.length)),Q9("all",l,c.shape.length);const[h,d]=X9(c.shape,l),p=TZ(d),f=KZ(TZ(h),c.dtype),m=n.data.get(c.dataId).values;for(let y=0;y<f.length;++y){const e=y*p;let t=m[e];for(let n=0;n<p;++n){const r=m[e+n];t=t&&r}f[y]=t}null!=u&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(h,c.dtype,f);if(a){const e=uhe({inputs:{x:g},backend:n,attrs:{shape:Y9(h,s)}});return n.disposeIntermediateTensorInfo(g),e}return g}};const Ihe={kernelName:f0,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r;Ice(i,"any");const s=$Z(o,i.shape);let l=s;const u=J9(l,i.shape.length);let c=i;null!=u&&(c=khe({inputs:{x:i},backend:n,attrs:{perm:u}}),l=e7(l.length,i.shape.length)),Q9("any",l,c.shape.length);const[h,d]=X9(c.shape,l),p=TZ(d),f=KZ(TZ(h),c.dtype),m=n.data.get(c.dataId).values;for(let y=0;y<f.length;++y){const e=y*p;let t=m[e];for(let n=0;n<p;++n){const r=m[e+n];t=t||r}f[y]=t}null!=u&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(h,c.dtype,f);if(a){const e=uhe({inputs:{x:g},backend:n,attrs:{shape:Y9(h,s)}});return n.disposeIntermediateTensorInfo(g),e}return g}};const The={kernelName:m0,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o}=r;Ice(i,"argMax");let a=$Z(o,i.shape);const s=J9(a,i.shape.length);let l=i;const u=[];null!=s&&(l=khe({inputs:{x:i},backend:n,attrs:{perm:s}}),u.push(l),a=e7(a.length,l.shape.length)),a=[a[0]],Q9("argMax",a,l.shape.length);const[c,h]=X9(l.shape,a),d=KZ(TZ(c),"int32"),p=TZ(h),f=n.data.get(l.dataId).values;for(let m=0;m<d.length;++m){const e=m*p;let t=f[e],n=0;for(let r=0;r<p;++r){const i=f[e+r];i>t&&(t=i,n=r)}d[m]=n}return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(c,"int32",d)}};const Che={kernelName:g0,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o}=r;Ice(i,"argMin");let a=$Z(o,i.shape);const s=J9(a,i.shape.length);let l=i;const u=[];null!=s&&(l=khe({inputs:{x:i},backend:n,attrs:{perm:s}}),u.push(l),a=e7(a.length,l.shape.length)),a=[a[0]],Q9("argMin",a,l.shape.length);const[c,h]=X9(l.shape,a),d=KZ(TZ(c),"int32"),p=TZ(h),f=n.data.get(l.dataId).values;for(let m=0;m<d.length;++m){const e=m*p;let t=f[e],n=0;for(let r=0;r<p;++r){const i=f[e+r];i<t&&(t=i,n=r)}d[m]=n}return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(c,"int32",d)}},Ahe=_ce(y0,(e=>Math.asin(e))),_he={kernelName:y0,backendName:"cpu",kernelFunc:Ahe},Nhe=_ce(v0,(e=>Math.asinh(e))),Ohe={kernelName:v0,backendName:"cpu",kernelFunc:Nhe},Rhe=_ce(b0,(e=>Math.atan(e))),$he={kernelName:b0,backendName:"cpu",kernelFunc:Rhe},Dhe=Fce(((e,t)=>Math.atan2(e,t))),Phe=rhe(w0,Dhe),Mhe={kernelName:w0,backendName:"cpu",kernelFunc:Phe},Fhe=_ce(x0,(e=>Math.atanh(e))),Lhe={kernelName:x0,backendName:"cpu",kernelFunc:Fhe};function jhe(e,t,n,r,i,o){const a=i.strideHeight,s=i.strideWidth,l=i.dilationHeight,u=i.dilationWidth,c=i.effectiveFilterHeight,h=i.effectiveFilterWidth,d=i.padInfo.top,p=i.padInfo.left,f="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=P5(i.outShape,n),g=m.values,y=i.outShape[1]*i.outShape[2]*i.outShape[3],v=i.outShape[2]*i.outShape[3],b=i.outShape[3];for(let x=0;x<i.batchSize;++x){const t=x*y,n=x*r[0];for(let m=0;m<i.inChannels;++m)for(let y=0;y<i.outHeight;++y){const x=y*a-d,w=Math.max(0,x),k=Math.min(i.inHeight,c+x),S=t+y*v;for(let t=0;t<i.outWidth;++t){const a=t*s-p,c=Math.max(0,a),d=Math.min(i.inWidth,h+a);let y=f,v=0,x=0;for(let t=w;t<k;t+=l){const i=n+t*r[1];for(let t=c;t<d;t+=u){const n=e[i+t*r[2]+m];"max"===o&&n>y?y=n:"avg"===o&&(v+=n,x++)}if(isNaN(y))break}g[S+t*b+m]="avg"===o?v/x:y}}}return m}function zhe(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const a=P5(r.outShape,"int32"),s=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,h=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.top,f=r.padInfo.left,m=P5(t,n,e);for(let g=0;g<r.batchSize;++g)for(let e=0;e<r.inChannels;++e)for(let t=0;t<r.outHeight;++t){const n=t*s-p;let y=n;for(;y<0;)y+=u;const v=Math.min(r.inHeight,h+n);for(let s=0;s<r.outWidth;++s){const h=s*l-f;let p=h;for(;p<0;)p+=c;const b=Math.min(r.inWidth,d+h);let x=Number.NEGATIVE_INFINITY,w=-1;for(let t=y;t<v;t+=u){const a=t-n;for(let n=p;n<b;n+=c){const s=n-h,l=m.get(g,t,n,e);l>x&&(x=l,w=i?o?((g*r.inHeight+t)*r.inWidth+n)*r.inChannels+e:(t*r.inWidth+n)*r.inChannels+e:a*d+s)}}a.set(w,g,t,s,e)}}return a}function Bhe(e,t,n,r,i,o){const a=i.strideDepth,s=i.strideHeight,l=i.strideWidth,u=i.dilationDepth,c=i.dilationHeight,h=i.dilationWidth,d=i.effectiveFilterDepth,p=i.effectiveFilterHeight,f=i.effectiveFilterWidth,m=i.padInfo.front,g=i.padInfo.top,y=i.padInfo.left,v="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=P5(i.outShape,n),x=b.values,w=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],k=i.outShape[2]*i.outShape[3]*i.outShape[4],S=i.outShape[3]*i.outShape[4],E=i.outShape[4];for(let I=0;I<i.batchSize;++I){const t=I*w,n=I*r[0];for(let b=0;b<i.inChannels;++b)for(let w=0;w<i.outDepth;++w){const I=w*a-m;let T=I;for(;T<0;)T+=u;const C=Math.min(i.inDepth,d+I),A=t+w*k;for(let t=0;t<i.outHeight;++t){const a=t*s-g;let d=a;for(;d<0;)d+=c;const m=Math.min(i.inHeight,p+a),w=A+t*S;for(let t=0;t<i.outWidth;++t){const a=t*l-y;let s=a;for(;s<0;)s+=h;const p=Math.min(i.inWidth,f+a),g=w+t*E;let k=v,S=0,I=0;for(let t=T;t<C;t+=u){const i=n+t*r[1];for(let t=d;t<m;t+=c){const n=i+t*r[2];for(let t=s;t<p;t+=h){const i=e[n+t*r[3]+b];if("max"===o&&i>k?k=i:"avg"===o&&(S+=i,I++),isNaN(k))break}if(isNaN(k))break}if(isNaN(k))break}x[g+b]="avg"===o?S/Math.max(I,1):k}}}}return b}const Uhe={kernelName:k0,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;Ice(i,"avgPool");const{filterSize:o,strides:a,pad:s,dimRoundingMode:l}=r;SZ(r9(a,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '1'`));const u=q6(i.shape,o,a,1,s,l);let c;if(1===u.filterWidth&&1===u.filterHeight&&CZ(u.inShape,u.outShape))c=$ce({inputs:{x:i},backend:n});else{const e=n.data.get(i.dataId).values,t=VZ(i.shape),r=jhe(e,i.shape,i.dtype,t,u,"avg");c=n.makeTensorInfo(u.outShape,i.dtype,r.values)}return c}};const Whe={kernelName:E0,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:o,strides:a,pad:s,dimRoundingMode:l,dataFormat:u}=r;Ice(i,"avgPool3d");const c=K6(i.shape,o,a,1,s,l,u),h=Bhe(n.data.get(i.dataId).values,i.shape,i.dtype,VZ(i.shape),c,"avg");return n.makeTensorInfo(h.shape,"float32",h.values)}};const Vhe={kernelName:I0,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,{filterSize:a,strides:s,pad:l,dimRoundingMode:u}=r;Ice([i,o],"avgPool3DGrad");const c=K6(o.shape,a,s,1,l,u),h=c.strideDepth,d=c.strideHeight,p=c.strideWidth,f=c.filterDepth,m=c.filterHeight,g=c.filterWidth,y=c.dilationDepth,v=c.dilationHeight,b=c.dilationWidth,x=c.effectiveFilterDepth,w=c.effectiveFilterHeight,k=c.effectiveFilterWidth,S=x-1-c.padInfo.front,E=k-1-c.padInfo.left,I=w-1-c.padInfo.top,T=P5(o.shape,"float32"),C=1/(f*m*g),A=n.bufferSync(i);for(let _=0;_<c.batchSize;++_)for(let e=0;e<c.inChannels;++e)for(let t=0;t<c.inDepth;++t)for(let n=0;n<c.inHeight;++n)for(let r=0;r<c.inWidth;++r){const i=t-S,o=n-I,a=r-E;let s=0;for(let t=0;t<x;t+=y){const n=(i+t)/h;if(!(n<0||n>=c.outDepth||Math.floor(n)!==n))for(let t=0;t<w;t+=v){const r=(o+t)/d;if(!(r<0||r>=c.outHeight||Math.floor(r)!==r))for(let t=0;t<k;t+=b){const i=(a+t)/p;if(i<0||i>=c.outWidth||Math.floor(i)!==i)continue;s+=A.get(_,n,r,i,e)}}}T.set(s*C,_,t,n,r,e)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}};const Ghe={kernelName:S0,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,a=o;Ice([i,o],"avgPoolGrad");const{filterSize:s,strides:l,pad:u}=r,c=q6(a.shape,s,l,1,u),h=c.strideHeight,d=c.strideWidth,p=c.filterHeight,f=c.filterWidth,m=c.dilationHeight,g=c.dilationWidth,y=c.effectiveFilterHeight,v=c.effectiveFilterWidth,b=v-1-c.padInfo.left,x=y-1-c.padInfo.top,w=P5(a.shape,"float32"),k=1/(p*f),S=n.data.get(i.dataId).values,E=P5(i.shape,"float32",S);for(let I=0;I<c.batchSize;++I)for(let e=0;e<c.inChannels;++e)for(let t=0;t<c.inHeight;++t)for(let n=0;n<c.inWidth;++n){const r=t-x,i=n-b;let o=0;for(let t=0;t<y;t+=m){const n=(r+t)/h;if(!(n<0||n>=c.outHeight||Math.floor(n)!==n))for(let t=0;t<v;t+=g){const r=(i+t)/d;if(r<0||r>=c.outWidth||Math.floor(r)!==r)continue;o+=E.get(I,n,r,e)}}w.set(o*k,I,t,n,e)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};const Hhe={kernelName:v1,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,scale:o,offset:a,mean:s,variance:l}=t;SZ(s.shape.length===l.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),SZ(null==a||s.shape.length===a.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),SZ(null==o||s.shape.length===o.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks.")),Ice([i,s,l,o,a],"batchNorm");let{varianceEpsilon:u}=r;null==u&&(u=.001);const c=n.data.get(i.dataId).values,h=n.data.get(s.dataId).values,d=n.data.get(l.dataId).values,p=o?n.data.get(o.dataId).values:new Float32Array([1]),f=a?n.data.get(a.dataId).values:new Float32Array([0]),m=new Float32Array(c.length),g=f.length,y=p.length,v=d.length,b=h.length;let x=0,w=0,k=0,S=0;for(let E=0;E<c.length;++E)m[E]=f[x++]+(c[E]-h[w++])*p[k++]/Math.sqrt(d[S++]+u),x>=g&&(x=0),w>=b&&(w=0),k>=y&&(k=0),S>=v&&(S=0);return n.makeTensorInfo(i.shape,i.dtype,m)}};function qhe(e,t,n,r,i){const o=L6(r,t,n),a=TZ(n),s=VZ(r);if(o){const n=j6(t,s);return"string"===i?e.slice(n,n+a):e.subarray(n,n+a)}const l=P5(r,i,"string"===i?ate(e):e),u=P5(n,i);for(let c=0;c<u.size;++c){const e=u.indexToLoc(c),n=e.map(((e,n)=>e+t[n]));u.set(l.get(...n),...e)}return"string"===i?ste(u.values):u.values}function Khe(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:o,size:a}=r;Ice(i,"slice");const[s,l]=z6(i,o,a);T6(i,s,l);const u=qhe(n.data.get(i.dataId).values,s,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,u)}const Xhe={kernelName:$2,backendName:"cpu",kernelFunc:Khe};const Yhe={kernelName:C0,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:o,crops:a}=r;Ice([i],"batchToSpaceND");const s=o.reduce(((e,t)=>e*t)),l=uee(i.shape,o,s),u=cee(l.length,o.length),c=hee(i.shape,o,s),h=dee(a,o.length),d=pee(c,a,o.length),p=uhe({inputs:{x:i},backend:n,attrs:{shape:l}}),f=khe({inputs:{x:p},backend:n,attrs:{perm:u}}),m=uhe({inputs:{x:f},backend:n,attrs:{shape:c}}),g=Khe({inputs:{x:m},backend:n,attrs:{begin:h,size:d}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}};function Qhe(e,t,n,r,i){const o=TZ(r),a=KZ(i,n);for(let s=0;s<e.length;s++){const n=e[s];if(n<0)throw new Error("Input x must be non-negative!");n>=i||(a[n]+=o>0?t[s]:1)}return a}function Jhe(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=e.shape[0],o=e.shape[1],a=P5([i,n],t.dtype);for(let s=0;s<i;s++)for(let i=0;i<o;i++){const o=e.get(s,i);if(o<0)throw new Error("Input x must be non-negative!");o>=n||(r?a.set(1,s,o):t.size>0?a.set(a.get(s,o)+t.get(s,i),s,o):a.set(a.get(s,o)+1,s,o))}return a}const Zhe={kernelName:A0,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:o}=t,{size:a}=r,s=Qhe(n.data.get(i.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,a);return n.makeTensorInfo([a],o.dtype,s)}},ede=Fce(((e,t)=>e&t)),tde={kernelName:_0,backendName:"cpu",kernelFunc:rhe(_0,ede)};const nde={kernelName:N0,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:i}=t,o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,s=u6(Array.from(o),Array.from(a));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},rde=Ace((e=>Math.ceil(e))),ide=Nce(R0,rde),ode={kernelName:R0,backendName:"cpu",kernelFunc:ide},ade=_ce($0,((e,t)=>{const n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),sde={kernelName:$0,backendName:"cpu",kernelFunc:ade},lde={kernelName:P0,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend,r=new Float32Array(TZ(t.shape)),i=n.data.get(t.dataId),o=i.complexTensorInfos.real,a=i.complexTensorInfos.imag,s=n.data.get(o.dataId).values,l=n.data.get(a.dataId).values;for(let u=0;u<s.length;u++){const e=s[u],t=l[u];r[u]=Math.hypot(e,t)}return n.makeOutput(r,t.shape,"float32")}};function ude(e,t,n,r){const i=MZ(n,TZ(t));if(r&&"string"!==n){let t=0;e.forEach((e=>{const n=TZ(e.shape);i.set(e.vals,t),t+=n}))}else{let r=0;e.forEach((e=>{const o="string"===n?ate(e.vals):e.vals;let a=0;for(let n=0;n<e.shape[0];++n){const s=n*t[1]+r;for(let t=0;t<e.shape[1];++t)i[s+t]=o[a++]}r+=e.shape[1]}))}return i}function cde(e){const{inputs:t,backend:n}=e,{input:r}=t,i=n.data.get(r.dataId).complexTensorInfos.imag,o=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,o)}const hde={kernelName:I1,backendName:"cpu",kernelFunc:cde};function dde(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r,o=$Z(i,t[0].shape)[0];Z8(t.map((e=>e.shape)),o);let a=eee(t.map((e=>e.shape)),o);if(0===TZ(a))return n.makeTensorInfo(a,t[0].dtype,[]);const s=t.filter((e=>TZ(e.shape)>0));if(1===s.length)return $ce({inputs:{x:s[0]},backend:n});if("complex64"===s[0].dtype){const e=s.map((e=>Jce({inputs:{input:e},backend:n}))),t=s.map((e=>cde({inputs:{input:e},backend:n}))),r=dde({inputs:e,backend:n,attrs:{axis:o}}),i=dde({inputs:t,backend:n,attrs:{axis:o}}),a=Xce({inputs:{real:r,imag:i},backend:n});return e.forEach((e=>n.disposeIntermediateTensorInfo(e))),t.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),a}const l=s.map((e=>{const t=TZ(e.shape.slice(o));return uhe({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),u=l.map((e=>({vals:n.data.get(e.dataId).values,shape:e.shape})));a=eee(l.map((e=>e.shape)),1);const c=1===l[0].shape[0],h=ude(u,a,t[0].dtype,c),d=eee(s.map((e=>e.shape)),o),p=n.makeTensorInfo(d,t[0].dtype,h);return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),p}const pde={kernelName:M0,backendName:"cpu",kernelFunc:dde};function fde(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:a,pad:s,dataFormat:l,dilations:u,dimRoundingMode:c}=r;Ice([i,o],"conv2d");const h=o9(l),d=X6(i.shape,o.shape,a,u,s,c,!1,h),p=d.filterHeight,f=d.filterWidth,m=d.dilationHeight,g=d.dilationWidth,y=d.padInfo.left,v=d.padInfo.top,b="channelsLast"===d.dataFormat,x=new o4(d.outShape,i.dtype),w=VZ(i.shape),k=VZ(o.shape),S=w[0],E=b?w[1]:w[2],I=b?w[2]:1,T=b?1:w[1],C=x.strides[0],A=b?x.strides[1]:x.strides[2],_=b?x.strides[2]:1,N=b?1:x.strides[1],O=n.data.get(i.dataId).values,R=n.data.get(o.dataId).values,$=x.values;for(let D=0;D<d.batchSize;++D){const e=D*S,t=D*C;for(let n=0;n<d.outHeight;++n){const r=t+n*A,i=n*d.strideHeight-v;for(let t=0;t<p;++t){const n=i+t*m;if(n<0||n>=d.inHeight)continue;const o=t*k[0],a=e+n*E;for(let e=0;e<d.outWidth;++e){const t=r+e*_,n=e*d.strideWidth-y;for(let e=0;e<f;++e){const r=n+e*g;if(r<0||r>=d.inWidth)continue;const i=a+r*I;let s=o+e*k[1];for(let e=0;e<d.inChannels;++e){const n=O[i+e*T];for(let e=0;e<d.outChannels;++e)$[t+e*N]+=n*R[s+e];s+=d.outChannels}}}}}}return n.makeTensorInfo(x.shape,x.dtype,$)}const mde={kernelName:F0,backendName:"cpu",kernelFunc:fde};const gde={kernelName:L0,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:a,pad:s,dataFormat:l,dimRoundingMode:u,filterShape:c}=r;Ice([i,o],"conv2dBackpropFilter");const h=o9(l),d=X6(i.shape,c,a,1,s,u,!1,h),{strideHeight:p,strideWidth:f,filterHeight:m,filterWidth:g}=d,y="channelsLast"===d.dataFormat,v=new o4(d.filterShape,"float32"),b=d.padInfo.left,x=d.padInfo.top,w=n.data.get(i.dataId).values,k=n.data.get(o.dataId).values,S=new o4(i.shape,i.dtype,w),E=new o4(o.shape,o.dtype,k);for(let I=0;I<m;++I){const e=Math.max(0,Math.ceil((x-I)/p)),t=Math.min(d.outHeight,(d.inHeight+x-I)/p);for(let n=0;n<g;++n){const r=Math.max(0,Math.ceil((b-n)/f)),i=Math.min(d.outWidth,(d.inWidth+b-n)/f);for(let o=0;o<d.inChannels;++o)for(let a=0;a<d.outChannels;++a){let s=0;for(let l=0;l<d.batchSize;++l)for(let u=e;u<t;++u){const e=I+u*p-x;for(let t=r;t<i;++t){const r=n+t*f-b;s+=y?S.get(l,e,r,o)*E.get(l,u,t,a):S.get(l,o,e,r)*E.get(l,a,u,t)}}v.set(s,I,n,o,a)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};const yde={kernelName:j0,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{inputShape:a,strides:s,pad:l,dataFormat:u,dimRoundingMode:c}=r;Ice([i,o],"conv2dBackpropInput");const h=VZ(o.shape),d=VZ(i.shape);let p=o9(u);const f=X6(a,o.shape,s,1,l,c,!1,p),m=new o4(f.inShape,"float32"),g=m.values,y=n.data.get(i.dataId).values,v=n.data.get(o.dataId).values,[b,x,w]=h,{batchSize:k,filterHeight:S,filterWidth:E,inChannels:I,inHeight:T,inWidth:C,outChannels:A,outHeight:_,outWidth:N,strideHeight:O,strideWidth:R}=f;p=f.dataFormat;const $=S-1-f.padInfo.top,D=E-1-f.padInfo.left,P="channelsLast"===p,M=m.strides[0],F=P?m.strides[1]:m.strides[2],L=P?m.strides[2]:1,j=P?1:m.strides[1],z=d[0],B=P?d[1]:d[2],U=P?d[2]:1,W=P?1:d[1];for(let V=0;V<k;++V)for(let e=0;e<I;++e)for(let t=0;t<T;++t){const n=t-$,r=Math.max(0,Math.ceil(n/O)),i=Math.min(_,(S+n)/O);for(let o=0;o<C;++o){const a=o-D,s=Math.max(0,Math.ceil(a/R)),l=Math.min(N,(E+a)/R);let u=0;for(let t=r;t<i;++t){const r=t*O-n;for(let n=s;n<l;++n){const i=z*V+B*t+U*n,o=b*(S-1-r)+x*(E-1-(n*R-a))+w*e;for(let e=0;e<A;++e){u+=y[i+W*e]*v[o+e]}}}g[M*V+F*t+L*o+j*e]=u}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};const vde={kernelName:z0,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:a,pad:s,dilations:l}=r;Ice([i,o],"conv3d");const u=Y6(i.shape,o.shape,a,l,s),{filterDepth:c,filterHeight:h,filterWidth:d,dilationDepth:p,dilationHeight:f,dilationWidth:m,padInfo:g}=u,y=g.front,v=g.left,b=g.top,x=new o4(u.outShape,i.dtype),w=n.data.get(i.dataId).values,k=n.data.get(o.dataId).values,S=x.values,E=VZ(i.shape),I=VZ(o.shape);for(let T=0;T<u.batchSize;++T){const e=T*E[0],t=T*x.strides[0];for(let n=0;n<u.outDepth;++n){const r=t+n*x.strides[1],i=n*u.strideDepth-y;for(let t=0;t<c;++t){const n=i+t*p;if(n<0||n>=u.inDepth)continue;const o=t*I[0],a=e+n*E[1];for(let e=0;e<u.outHeight;++e){const t=r+e*x.strides[2],n=e*u.strideHeight-b;for(let e=0;e<h;++e){const r=n+e*f;if(r<0||r>=u.inHeight)continue;const i=o+e*I[1],s=a+r*E[2];for(let e=0;e<u.outWidth;++e){const n=t+e*u.outChannels,r=e*u.strideWidth-v;for(let e=0;e<d;++e){const t=r+e*m;if(t<0||t>=u.inWidth)continue;const o=i+e*I[2],a=s+t*u.inChannels;let l=o;for(let e=0;e<u.inChannels;++e){const t=w[a+e];for(let e=0;e<u.outChannels;++e)S[n+e]+=t*k[l+e];l+=u.outChannels}}}}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};const bde={kernelName:B0,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:a,pad:s,filterShape:l}=r;Ice([i,o],"conv3dBackpropFilterV2");const u=VZ(i.shape),c=VZ(o.shape),h=Y6(i.shape,l,a,1,s),d=h.strideDepth,p=h.strideHeight,f=h.strideWidth,m=h.filterDepth,g=h.filterHeight,y=h.filterWidth,v=new o4(h.filterShape,"float32"),b=v.values,[x,w,k,S]=v.strides,E=n.data.get(o.dataId).values,[I,T,C,A]=c,_=n.data.get(i.dataId).values,[N,O,R,$]=u,D=h.padInfo.front,P=h.padInfo.left,M=h.padInfo.top;for(let F=0;F<m;++F){const e=Math.max(0,Math.ceil((D-F)/d)),t=Math.min(h.outDepth,(h.inDepth+D-F)/d),n=F*x;for(let r=0;r<g;++r){const i=Math.max(0,Math.ceil((M-r)/p)),o=Math.min(h.outHeight,(h.inHeight+M-r)/p),a=r*w+n;for(let n=0;n<y;++n){const s=Math.max(0,Math.ceil((P-n)/f)),l=Math.min(h.outWidth,(h.inWidth+P-n)/f),u=n*k+a;for(let a=0;a<h.inChannels;++a){const c=a*S+u;for(let u=0;u<h.outChannels;++u){let m=0;for(let c=0;c<h.batchSize;++c){const h=c*N,g=c*I;for(let c=e;c<t;++c){const e=(F+c*d-D)*O+h,t=c*T+g;for(let c=i;c<o;++c){const i=(r+c*p-M)*R+e,o=c*C+t;for(let e=s;e<l;++e){const t=e*A+o;m+=_[(n+e*f-P)*$+i+a]*E[t+u]}}}}b[c+u]=m}}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};const xde={kernelName:U0,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{pad:a,strides:s,inputShape:l}=r;Ice([i],"conv3dBackpropInputV2");const u=VZ(i.shape),c=VZ(o.shape),h=Y6(l,o.shape,s,1,a),d=new o4(h.inShape,"float32"),p=d.values,[f,m,g,y]=d.strides,v=n.data.get(i.dataId).values,[b,x,w,k]=u,S=n.data.get(o.dataId).values,[E,I,T,C]=c,{batchSize:A,filterDepth:_,filterHeight:N,filterWidth:O,inChannels:R,inDepth:$,inHeight:D,inWidth:P,outChannels:M,outDepth:F,outHeight:L,outWidth:j,strideDepth:z,strideHeight:B,strideWidth:U}=h,W=_-1-h.padInfo.front,V=N-1-h.padInfo.top,G=O-1-h.padInfo.left;for(let H=0;H<A;++H)for(let e=0;e<R;++e)for(let t=0;t<$;++t){const n=t-W,r=Math.max(0,Math.ceil(n/z)),i=Math.min(F,(_+n)/z);for(let o=0;o<D;++o){const a=o-V,s=Math.max(0,Math.ceil(a/B)),l=Math.min(L,(N+a)/B);for(let u=0;u<P;++u){const c=u-G,h=Math.max(0,Math.ceil(c/U)),d=Math.min(j,(O+c)/U);let A=0;for(let t=r;t<i;++t){const r=t*z-n;for(let n=s;n<l;++n){const i=n*B-a;for(let o=h;o<d;++o){const a=b*H+x*t+w*n+k*o,s=E*(_-1-r)+I*(N-1-i)+T*(O-1-(o*U-c))+C*e;for(let e=0;e<M;++e){A+=v[a+e]*S[s+e]}}}}p[f*H+m*t+g*o+y*u+e]=A}}}return n.makeTensorInfo(d.shape,d.dtype,d.values)}},wde=_ce(W0,(e=>Math.cos(e))),kde={kernelName:W0,backendName:"cpu",kernelFunc:wde},Sde=_ce(V0,(e=>Math.cosh(e))),Ede={kernelName:V0,backendName:"cpu",kernelFunc:Sde};const Ide={kernelName:q0,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:i,boxes:o,boxInd:a}=t,{cropSize:s,method:l,extrapolationValue:u}=r,[c,h,d,p]=i.shape,f=o.shape[0],[m,g]=s,y=P5([f,m,g,p],"float32"),v=n.data.get(o.dataId).values,b=n.data.get(a.dataId).values,x=n.data.get(i.dataId).values,w=VZ(i.shape),k=VZ(y.shape);for(let S=0;S<f;S++){const e=4*S,t=v[e],n=v[e+1],r=v[e+2],i=v[e+3],o=b[S];if(o>=c)continue;const a=m>1?(r-t)*(h-1)/(m-1):0,s=g>1?(i-n)*(d-1)/(g-1):0;for(let c=0;c<m;c++){const e=m>1?t*(h-1)+c*a:.5*(t+r)*(h-1);if(e<0||e>h-1)for(let t=0;t<g;t++)for(let e=0;e<p;e++){const n=e+t*k[2]+c*k[1]+S*k[0];y.values[n]=u}else if("bilinear"===l){const t=Math.floor(e),r=Math.ceil(e),a=e-t;for(let e=0;e<g;e++){const l=g>1?n*(d-1)+e*s:.5*(n+i)*(d-1);if(l<0||l>d-1){for(let t=0;t<p;t++){const n=t+e*k[2]+c*k[1]+S*k[0];y.values[n]=u}continue}const h=Math.floor(l),f=Math.ceil(l),m=l-h;for(let n=0;n<p;n++){let i=n+h*w[2]+t*w[1]+o*w[0];const s=x[i];i=n+f*w[2]+t*w[1]+o*w[0];const l=x[i];i=n+h*w[2]+r*w[1]+o*w[0];const u=x[i];i=n+f*w[2]+r*w[1]+o*w[0];const d=s+(l-s)*m,p=u+(x[i]-u)*m;i=n+e*k[2]+c*k[1]+S*k[0],y.values[i]=d+(p-d)*a}}}else for(let t=0;t<g;++t){const r=g>1?n*(d-1)+t*s:.5*(n+i)*(d-1);if(r<0||r>d-1){for(let e=0;e<p;e++){const n=e+t*k[2]+c*k[1]+S*k[0];y.values[n]=u}continue}const a=Math.round(r),l=Math.round(e);for(let e=0;e<p;e++){const n=e+a*w[2]+l*w[1]+o*w[0],r=e+t*k[2]+c*k[1]+S*k[0];y.values[r]=x[n]}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};const Tde={kernelName:G0,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,exclusive:a,reverse:s}=r;Ice(i,"cumprod");const l=J9([o],i.shape.length);let u=i;null!=l&&(u=khe({inputs:{x:i},backend:n,attrs:{perm:l}}));const c=e7(1,i.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const h=v4(u.dtype,"int32"),d=qZ(TZ(u.shape),h),p=n.data.get(u.dataId).values,f=u.shape[u.shape.length-1],m=s?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let y=0;y<p.length;y+=f)for(let e=0;e<f;e++){const t=m(y,e);if(0===e)d[t]=a?1:p[t];else{const n=m(y,e-1);d[t]=a?p[n]*d[n]:p[t]*d[n]}}const g=n.makeTensorInfo(u.shape,h,d);if(null!=l){const e=khe({inputs:{x:g},backend:n,attrs:{perm:Z9(l)}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),e}return g}};const Cde={kernelName:H0,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,exclusive:a,reverse:s}=r;Ice(i,"cumsum");const l=J9([o],i.shape.length);let u=i;null!=l&&(u=khe({inputs:{x:i},backend:n,attrs:{perm:l}}));const c=e7(1,i.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const h=v4(u.dtype,"int32"),d=KZ(TZ(u.shape),h),p=n.data.get(u.dataId).values,f=u.shape[u.shape.length-1],m=s?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let y=0;y<p.length;y+=f)for(let e=0;e<f;e++){const t=m(y,e);if(0===e)d[t]=a?0:p[t];else{const n=m(y,e-1);d[t]=a?p[n]+d[n]:p[t]+d[n]}}const g=n.makeTensorInfo(u.shape,h,d);if(null!=l){const e=khe({inputs:{x:g},backend:n,attrs:{perm:Z9(l)}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),e}return g}};const Ade={kernelName:K0,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:o}=t,{size:a,binaryOutput:s}=r;if(1===i.shape.length){const e=Qhe(n.data.get(i.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,a);return n.makeTensorInfo([a],o.dtype,e)}if(2===i.shape.length){const e=Jhe(n.bufferSync(i),n.bufferSync(o),a,s);return n.makeTensorInfo(e.shape,o.dtype,e.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}};const _de={kernelName:X0,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockSize:o,dataFormat:a}=r;SZ("NHWC"===a,(()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${a}`));const s=i.shape[0],l=i.shape[1],u=i.shape[2],c=i.shape[3],h=l*o,d=u*o,p=c/(o*o),f=n.data.get(i.dataId).values,m=new Float32Array(s*h*d*p);let g=0;for(let y=0;y<s;++y)for(let e=0;e<h;++e){const t=Math.floor(e/o),n=e%o;for(let e=0;e<d;++e){const r=Math.floor(e/o),i=(n*o+e%o)*p;for(let e=0;e<p;++e){const n=e+i+c*(r+u*(t+l*y));m[g++]=f[n]}}}return n.makeTensorInfo([s,h,d,p],i.dtype,m)}};function Nde(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:a,pad:s,dilations:l,dimRoundingMode:u}=r;Ice([i,o],"depthwiseConv2DNative");const c=VZ(i.shape),h=VZ(o.shape);let d=l;null==d&&(d=[1,1]),SZ(r9(a,d),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${d}'`));const p=X6(i.shape,o.shape,a,d,s,u,!0),{filterHeight:f,filterWidth:m,dilationHeight:g,dilationWidth:y,padInfo:v}=p,b=v.left,x=v.top,w=p.outChannels/p.inChannels,k=new o4(p.outShape,i.dtype),S=n.data.get(i.dataId).values,E=n.data.get(o.dataId).values,I=k.values;for(let T=0;T<p.batchSize;++T){const e=T*c[0],t=T*k.strides[0];for(let n=0;n<p.outHeight;++n){const r=t+n*k.strides[1],i=n*p.strideHeight-x;for(let t=0;t<f;++t){const n=i+t*g;if(n<0||n>=p.inHeight)continue;const o=t*h[0],a=e+n*c[1];for(let e=0;e<p.outWidth;++e){const t=r+e*k.strides[2],n=e*p.strideWidth-b;for(let e=0;e<m;++e){const r=n+e*y;if(r<0||r>=p.inWidth)continue;const i=o+e*h[1],s=a+r*p.inChannels;let l=t,u=i;for(let e=0;e<p.inChannels;++e){const t=S[s+e];for(let e=0;e<w;++e)I[l+e]+=t*E[u+e];l+=w,u+=w}}}}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const Ode={kernelName:Y0,backendName:"cpu",kernelFunc:Nde};const Rde={kernelName:Q0,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:a,dilations:s,pad:l,dimRoundingMode:u,filterShape:c}=r;Ice([i,o],"depthwiseConv2dNativeBackpropFilter");const h=X6(i.shape,c,a,s,l,u,!0),{strideHeight:d,strideWidth:p,filterHeight:f,filterWidth:m}=h,g=new o4(h.filterShape,"float32"),y=h.padInfo.left,v=h.padInfo.top,b=h.outChannels/h.inChannels,x=n.data.get(i.dataId).values,w=new o4(i.shape,i.dtype,x),k=n.data.get(o.dataId).values,S=new o4(o.shape,o.dtype,k);for(let E=0;E<f;++E){const e=Math.max(0,Math.ceil((v-E)/d)),t=Math.min(h.outHeight,(h.inHeight+v-E)/d);for(let n=0;n<m;++n){const r=Math.max(0,Math.ceil((y-n)/p)),i=Math.min(h.outWidth,(h.inWidth+y-n)/p);for(let o=0;o<h.outChannels;++o){const a=Math.trunc(o/b),s=o%b;let l=0;for(let u=0;u<h.batchSize;++u)for(let s=e;s<t;++s){const e=E+s*d-v;for(let t=r;t<i;++t){const r=n+t*p-y;l+=w.get(u,e,r,a)*S.get(u,s,t,o)}}g.set(l,E,n,a,s)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};const $de={kernelName:J0,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{strides:a,dilations:s,pad:l,dimRoundingMode:u,inputShape:c}=r;Ice([i,o],"depthwiseConv2DNativeBackpropInput");const h=VZ(i.shape),d=VZ(o.shape),p=X6(c,o.shape,a,s,l,u,!0),f=new o4(p.inShape,"float32"),m=f.values,[g,y,v]=f.strides,b=n.data.get(i.dataId).values,[x,w,k]=h,S=n.data.get(o.dataId).values,[E,I,T]=d,{batchSize:C,filterHeight:A,filterWidth:_,inChannels:N,inHeight:O,inWidth:R,outChannels:$,outHeight:D,outWidth:P,strideHeight:M,strideWidth:F}=p,L=A-1-p.padInfo.top,j=_-1-p.padInfo.left,z=$/N;for(let B=0;B<C;++B)for(let e=0;e<N;++e)for(let t=0;t<O;++t){const n=t-L,r=Math.max(0,Math.ceil(n/M)),i=Math.min(D,(A+n)/M);for(let o=0;o<R;++o){const a=o-j,s=Math.max(0,Math.ceil(a/F)),l=Math.min(P,(_+a)/F);let u=0;for(let t=r;t<i;++t){const r=t*M-n;for(let n=s;n<l;++n){const i=x*B+w*t+k*n,o=E*(A-1-r)+I*(_-1-(n*F-a))+T*e;for(let t=0;t<z;++t){u+=b[i+(e*z+t)]*S[o+t]}}}m[g*B+y*t+v*o+e]=u}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}};const Dde={kernelName:Z0,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,i=TZ(r.shape),o=n.data.get(r.dataId).values,a=P5([i,i],r.dtype),s=a.values;for(let u=0;u<o.length;u++)s[u*i+u]=o[u];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,a.dtype,a.values)}},Pde={kernelName:e1,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:i,filter:o}=t,{strides:a,pad:s,dilations:l}=r,u=n,c=u.data.get(i.dataId).values,h=i.shape.length,d=u.data.get(o.dataId).values,p=o.shape.length,{batchSize:f,inHeight:m,inWidth:g,inChannels:y,outHeight:v,outWidth:b,padInfo:x,strideHeight:w,strideWidth:k,filterHeight:S,filterWidth:E,dilationHeight:I,dilationWidth:T,outShape:C}=H6(i.shape,o.shape,a,s,"NHWC",l),A=TZ(C),_=C.length,N=MZ(i.dtype,A);for(let O=0;O<f;++O)for(let e=0;e<v;++e){const t=e*w-x.top;for(let n=0;n<b;++n){const r=n*k-x.left;for(let a=0;a<y;++a){let s=Number.MIN_SAFE_INTEGER;for(let e=0;e<S;++e){const n=t+e*I;if(n>=0&&n<m)for(let t=0;t<E;++t){const l=r+t*T;if(l>=0&&l<g){const r=QZ([O,n,l,a],h,VZ(i.shape)),u=QZ([e,t,a],p,VZ(o.shape)),f=c[r]+d[u];f>s&&(s=f)}}}N[QZ([O,e,n,a],_,VZ(C))]=s}}}return{dataId:u.write(G3(N,i.dtype),C,i.dtype),shape:C,dtype:i.dtype}}},Mde={kernelName:n1,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:i,filter:o,dy:a}=t,{strides:s,pad:l,dilations:u}=r,c=n,h=HZ(i.shape,c.data.get(i.dataId).values),d=HZ(o.shape,c.data.get(o.dataId).values),{batchSize:p,inHeight:f,inWidth:m,inChannels:g,outHeight:y,outWidth:v,padInfo:b,strideHeight:x,strideWidth:w,filterHeight:k,filterWidth:S,dilationHeight:E,dilationWidth:I,outShape:T}=H6(i.shape,o.shape,s,l,"NHWC",u);SZ(a.rank===T.length,(()=>`Error in ${n1}, dy must have the same rank as output ${T.length}, but got ${a.rank}`));const C=HZ(T,c.data.get(a.dataId).values),A=XZ(o.shape,o.dtype);for(let _=0;_<p;++_)for(let e=0;e<y;++e){const t=e*x-b.top;for(let n=0;n<v;++n){const r=n*w-b.left;for(let i=0;i<g;++i){let o=Number.MIN_SAFE_INTEGER,a=0,s=0;for(let e=0;e<k;++e){const n=t+e*E;if(n>=0&&n<f)for(let t=0;t<S;++t){const l=r+t*I;if(l>=0&&l<m){const r=h[_][n][l][i]+d[e][t][i];r>o&&(o=r,a=e,s=t)}}}A[a][s][i]+=C[_][e][n][i]}}}return{dataId:c.write(G3(A,i.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}},Fde={kernelName:t1,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:i,filter:o,dy:a}=t,{strides:s,pad:l,dilations:u}=r,c=n,h=HZ(i.shape,c.data.get(i.dataId).values),d=HZ(o.shape,c.data.get(o.dataId).values),{batchSize:p,inHeight:f,inWidth:m,inChannels:g,outHeight:y,outWidth:v,padInfo:b,strideHeight:x,strideWidth:w,filterHeight:k,filterWidth:S,dilationHeight:E,dilationWidth:I,outShape:T}=H6(i.shape,o.shape,s,l,"NHWC",u);SZ(a.rank===T.length,(()=>`Error in ${t1}, dy must have the same rank as output ${T.length}, but got ${a.rank}`));const C=HZ(T,c.data.get(a.dataId).values),A=XZ(i.shape,i.dtype);for(let _=0;_<p;++_)for(let e=0;e<y;++e){const t=e*x-b.top;for(let n=0;n<v;++n){const r=n*w-b.left;for(let i=0;i<g;++i){let o=Number.MIN_SAFE_INTEGER,a=t<0?0:t,s=r<0?0:r;for(let e=0;e<k;++e){const n=t+e*E;if(n>=0&&n<f)for(let t=0;t<S;++t){const l=r+t*I;if(l>=0&&l<m){const r=h[_][n][l][i]+d[e][t][i];r>o&&(o=r,a=n,s=l)}}}A[_][a][s][i]+=C[_][e][n][i]}}}return{dataId:c.write(G3(A,i.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};const Lde={kernelName:r1,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:i}=t,{canvas:o,options:a}=r,{contextOptions:s,imageOptions:l}=a||{},u=(null===l||void 0===l?void 0:l.alpha)||1,c=(null===s||void 0===s?void 0:s.contextType)||"2d";if("2d"!==c)throw new Error(`Context type ${s.contextType} is not supported by the CPU backend.`);const h=o.getContext(c,(null===s||void 0===s?void 0:s.contextAttributes)||{});if(null==h)throw new Error(`Could not get the context with ${c} type.`);const[d,p]=i.shape.slice(0,2),f=2===i.shape.length?1:i.shape[2],m=n.data.get(i.dataId).values,g="float32"===i.dtype?255:1,y=new Uint8ClampedArray(p*d*4);for(let b=0;b<d*p;++b){const e=[0,0,0,255*u];for(let n=0;n<f;n++){const t=m[b*f+n];if("float32"===i.dtype){if(t<0||t>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${t}.`)}else if("int32"===i.dtype&&(t<0||t>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${t}.`);1===f?(e[0]=t*g,e[1]=t*g,e[2]=t*g):e[n]=t*g}const t=4*b;y[t+0]=Math.round(e[0]),y[t+1]=Math.round(e[1]),y[t+2]=Math.round(e[2]),y[t+3]=Math.round(e[3])}o.width=p,o.height=d;const v=new ImageData(y,p,d);return h.putImageData(v,0,0),i}},jde=Fce(((e,t)=>e*t)),zde=ihe(((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n}))),Bde=rhe(Z1,jde,zde),Ude={kernelName:Z1,backendName:"cpu",kernelFunc:Bde};function Wde(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r;let s;Ice(i,"sum"),s="bool"===i.dtype?the({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):$ce({inputs:{x:i},backend:n});const l=s.shape.length,u=$Z(o,s.shape),c=J9(u,l);let h=u,d=s;null!=c&&(d=khe({inputs:{x:s},backend:n,attrs:{perm:c}}),h=e7(h.length,l)),Q9("sum",h,d.shape.length);const[p,f]=X9(d.shape,h);let m=Qce(n,p,v4(d.dtype,"int32"));const g=TZ(f),y=n.data.get(m.dataId).values,v=n.data.get(d.dataId).values;for(let b=0;b<y.length;++b){const e=b*g;let t=0;for(let n=0;n<g;++n)t+=v[e+n];y[b]=t}if(a){const e=m;m=uhe({inputs:{x:m},backend:n,attrs:{shape:Y9(m.shape,u)}}),n.disposeIntermediateTensorInfo(e)}return n.disposeIntermediateTensorInfo(s),null!=c&&n.disposeIntermediateTensorInfo(d),m}const Vde={kernelName:z2,backendName:"cpu",kernelFunc:Wde};const Gde={kernelName:o1,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:i}=r,o=t,{allDims:a,summedDims:s,idDims:l}=Lee(i,o.length);zee(a.length,l,o);const{path:u,steps:c}=Bee(s,l),h=c.length;let d=null,p=a.length;const f=[];for(let m=0;m<h;++m){for(const e of c[m]){const{permutationIndices:t,expandDims:r}=jee(p,l[e]);let i;Uee(t)?i=o[e]:(i=khe({inputs:{x:o[e]},backend:n,attrs:{perm:t}}),f.push(i));const a=i.shape.slice();for(let e=0;e<r.length;++e)a.splice(r[e],0,1);CZ(i.shape,a)||(i=uhe({inputs:{x:i},backend:n,attrs:{shape:a}}),f.push(i)),null===d?d=i:(d=Bde({inputs:{a:i,b:d},backend:n}),f.push(d))}m<h-1&&(u[m]>=0&&(d=Wde({inputs:{x:d},backend:n,attrs:{axis:u[m]-(a.length-p),keepDims:!1}}),f.push(d)),p--)}for(const m of f)m!==d&&n.disposeIntermediateTensorInfo(m);return d}};const Hde={kernelName:s1,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{dy:r,y:i}=t;Ice([r,i],"eluGrad");const o=new Float32Array(TZ(i.shape)),a=n.data.get(i.dataId).values,s=n.data.get(r.dataId).values;for(let l=0;l<a.length;++l){const e=a[l];o[l]=e>=0?s[l]:s[l]*(e+1)}return n.makeTensorInfo(i.shape,"float32",o)}},qde=Fce(((e,t)=>e===t?1:0)),Kde=rhe(u1,qde,null,"bool"),Xde={kernelName:u1,backendName:"cpu",kernelFunc:Kde},Yde=xee,Qde=wee,Jde=kee,Zde=See,epe=Eee,tpe=Iee,npe=_ce(l1,(e=>{const t=Math.sign(e),n=Math.abs(e),r=1/(1+Yde*n);return t*(1-((((tpe*r+epe)*r+Zde)*r+Jde)*r+Qde)*r*Math.exp(-n*n))})),rpe={kernelName:l1,backendName:"cpu",kernelFunc:npe},ipe=Ace((e=>Math.exp(e))),ope=Nce(c1,ipe,"float32"),ape={kernelName:c1,backendName:"cpu",kernelFunc:ope};function spe(e){const{inputs:t,backend:n,attrs:r}=e,{input:i}=t,{dim:o}=r,a=i.shape.length,s=i.shape.slice();let l=o;return o<0&&(SZ(-(a+1)<=o,(()=>`Axis must be in the interval [${-(a+1)}, ${a}]`)),l=a+o+1),s.splice(l,0,1),uhe({inputs:{x:i},backend:n,attrs:{shape:s}})}const lpe={kernelName:h1,backendName:"cpu",kernelFunc:spe},upe=Ace((e=>Math.expm1(e))),cpe=Nce(d1,upe),hpe={kernelName:d1,backendName:"cpu",kernelFunc:cpe},dpe=Fce(((e,t)=>e/t)),ppe=rhe(i1,dpe),fpe={kernelName:i1,backendName:"cpu",kernelFunc:ppe},mpe=Fce(((e,t)=>e-t)),gpe=ihe(((e,t,n,r)=>({real:e-n,imag:t-r}))),ype=rhe(n3,mpe,gpe),vpe={kernelName:n3,backendName:"cpu",kernelFunc:ype};function bpe(e,t,n){const r=e.shape,i=r[0],o=r[1],a=n.data.get(e.dataId),s=a.complexTensorInfos.real,l=a.complexTensorInfos.imag,u=[i,o],c=TZ(u),h=PZ("float32",c),d=PZ("float32",c);for(let g=0;g<i;g++){const e=Khe({inputs:{x:s},backend:n,attrs:{begin:[g,0],size:[1,o]}}),r=Khe({inputs:{x:l},backend:n,attrs:{begin:[g,0],size:[1,o]}}),i=Xce({inputs:{real:e,imag:r},backend:n}),{real:a,imag:u}=xpe(i,t,n),c=Tee(a,u);for(let t=0;t<o;t++){const e=Nee(c,t);h[g*o+t]=e.real,d[g*o+t]=e.imag}n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i)}const p=n.makeTensorInfo(u,"float32",h),f=n.makeTensorInfo(u,"float32",d),m=Xce({inputs:{real:p,imag:f},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}function xpe(e,t,n){const r=TZ(e.shape),i=n.data.get(e.dataId),o=n.data.get(i.complexTensorInfos.real.dataId).values,a=n.data.get(i.complexTensorInfos.imag.dataId).values;if(0===((s=r)&s-1)){const i=wpe(o,a,r,t,n),s=[e.shape[0],e.shape[1]];if(t){const e=n.makeTensorInfo(s,"float32",i.real),t=n.makeTensorInfo(s,"float32",i.imag),o=n.makeTensorInfo([],"float32",V3(r,"float32")),a=$ce({inputs:{x:o},backend:n}),l=fpe.kernelFunc({inputs:{a:e,b:o},backend:n}),u=fpe.kernelFunc({inputs:{a:t,b:a},backend:n}),c=n.data.get(l.dataId).values,h=n.data.get(u.dataId).values;return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),{real:c,imag:h}}return i}{const e=function(e,t,n){const r=new Float32Array(2*t);for(let i=0;i<t;i++){let o=0,a=0;for(let r=0;r<t;r++){const s=$ee(i*r,t,n),l=Nee(e,r);o+=l.real*s.real-l.imag*s.imag,a+=l.real*s.imag+l.imag*s.real}n&&(o/=t,a/=t),Oee(r,o,a,i)}return r}(Tee(o,a),r,t);return Cee(e)}var s}function wpe(e,t,n,r,i){if(1===n)return{real:e,imag:t};const o=Tee(e,t),a=n/2,s=Aee(o),l=s.real,u=s.imag,c=[l.length],h=i.makeTensorInfo(c,"float32",l),d=i.makeTensorInfo(c,"float32",u),p=Xce({inputs:{real:h,imag:d},backend:i}),f=_ee(o),m=f.real,g=f.imag,y=[m.length],v=i.makeTensorInfo(y,"float32",m),b=i.makeTensorInfo(y,"float32",g),x=Xce({inputs:{real:v,imag:b},backend:i}),w=wpe(l,u,a,r,i),k=w.real,S=w.imag,E=[k.length],I=i.makeTensorInfo(E,"float32",k),T=i.makeTensorInfo(E,"float32",S),C=Xce({inputs:{real:I,imag:T},backend:i}),A=wpe(m,g,a,r,i),_=A.real,N=A.imag,O=[_.length],R=i.makeTensorInfo(O,"float32",_),$=i.makeTensorInfo(O,"float32",N),D=Xce({inputs:{real:R,imag:$},backend:i}),P=Ree(n,r),M=[P.real.length],F=i.makeTensorInfo(M,"float32",P.real),L=i.makeTensorInfo(M,"float32",P.imag),j=Xce({inputs:{real:F,imag:L},backend:i}),z=Bde({inputs:{a:j,b:D},backend:i}),B=she({inputs:{a:C,b:z},backend:i}),U=ype({inputs:{a:C,b:z},backend:i}),W=Jce({inputs:{input:B},backend:i}),V=Jce({inputs:{input:U},backend:i}),G=cde({inputs:{input:B},backend:i}),H=cde({inputs:{input:U},backend:i}),q=dde({inputs:[W,V],backend:i,attrs:{axis:0}}),K=dde({inputs:[G,H],backend:i,attrs:{axis:0}}),X=i.data.get(q.dataId).values,Y=i.data.get(K.dataId).values;return i.disposeIntermediateTensorInfo(h),i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(p),i.disposeIntermediateTensorInfo(v),i.disposeIntermediateTensorInfo(b),i.disposeIntermediateTensorInfo(x),i.disposeIntermediateTensorInfo(I),i.disposeIntermediateTensorInfo(T),i.disposeIntermediateTensorInfo(C),i.disposeIntermediateTensorInfo(R),i.disposeIntermediateTensorInfo($),i.disposeIntermediateTensorInfo(D),i.disposeIntermediateTensorInfo(F),i.disposeIntermediateTensorInfo(L),i.disposeIntermediateTensorInfo(j),i.disposeIntermediateTensorInfo(z),i.disposeIntermediateTensorInfo(B),i.disposeIntermediateTensorInfo(U),i.disposeIntermediateTensorInfo(W),i.disposeIntermediateTensorInfo(G),i.disposeIntermediateTensorInfo(V),i.disposeIntermediateTensorInfo(H),i.disposeIntermediateTensorInfo(q),i.disposeIntermediateTensorInfo(K),{real:X,imag:Y}}const kpe={kernelName:p1,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,i=TZ(r.shape),o=r.shape[r.shape.length-1],a=uhe({inputs:{x:r},backend:n,attrs:{shape:[i/o,o]}}),s=bpe(a,!1,n),l=uhe({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),l}};function Spe(e){const{backend:t,attrs:n}=e,{shape:r,value:i,dtype:o}=n,a=o||BZ(i),s=MZ(a,TZ(r));return function(e,t){e.fill(t)}(s,i),t.makeTensorInfo(r,a,s)}const Epe={kernelName:f1,backendName:"cpu",kernelFunc:Spe};const Ipe={kernelName:m1,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:i}=t,o=r,a=PZ(i.dtype,TZ(i.shape)),[s,l,u,c]=i.shape,h=o.data.get(i.dataId).values;for(let d=0;d<s;d++){const e=d*u*l*c;for(let t=0;t<l;t++){const n=t*(u*c);for(let t=0;t<u;t++){const r=t*c;for(let i=0;i<c;i++){const o=Math.round(u-t-1),s=e+n+r+i;let l=h[s];if(o>=0&&o<u){l=h[e+n+o*c+i]}a[s]=l}}}}return{dataId:o.write(a,i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},Tpe=Ace((e=>Math.floor(e))),Cpe=Nce(g1,Tpe),Ape={kernelName:g1,backendName:"cpu",kernelFunc:Cpe},_pe=Fce(((e,t)=>Math.floor(e/t))),Npe=rhe(y1,_pe,null,"int32"),Ope={kernelName:y1,backendName:"cpu",kernelFunc:Npe};const Rpe={kernelName:y3,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o,bias:a,preluActivationWeights:s}=t,{strides:l,pad:u,dataFormat:c,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r;let m=fde({inputs:{x:i,filter:o},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:h,dimRoundingMode:d}});if(a){const e=m;if("NCHW"===c&&1===a.shape.length&&1!==a.shape[0]){const e=uhe({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});m=she({inputs:{a:m,b:e},backend:n}),n.disposeIntermediateTensorInfo(e)}else m=she({inputs:{a:m,b:a},backend:n});n.disposeIntermediateTensorInfo(e)}if(p){const e=m;if("NCHW"===c&&"prelu"===p&&1===s.shape.length&&1!==s.shape[0]){const e=uhe({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});m=Kce(n,m,p,e,f),n.disposeIntermediateTensorInfo(e)}else m=Kce(n,m,p,s,f);n.disposeIntermediateTensorInfo(e)}return m}};const $pe={kernelName:v3,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o,bias:a,preluActivationWeights:s}=t,{strides:l,pad:u,dataFormat:c,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r;let m=Nde({inputs:{x:i,filter:o},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:h,dimRoundingMode:d}});if(a){const e=m;m=she({inputs:{a:m,b:a},backend:n}),n.disposeIntermediateTensorInfo(e)}if(p){const e=m;m=Kce(n,m,p,s,f),n.disposeIntermediateTensorInfo(e)}return m}};function Dpe(e,t,n,r,i,o,a,s,l){const u=P5([r,o],n);for(let c=0;c<r;c++){const n=[];let r=0;for(let t=0;t<i;t++){const o=e[c*i+t];r+=o*a[t],n.push(o)}if(r<0||r>=l/o)throw new Error(`Invalid indices: ${n} does not index into ${s}`);for(let e=0;e<o;e++)u.values[c*o+e]=t.get(...t.indexToLoc(r*o+e))}return u}const Ppe={kernelName:x1,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:i}=t,o=TZ(r.shape),a=i.shape,s=a[a.length-1],[l,u,c,h]=fee(r,i);if(0===u)return n.makeTensorInfo(l,r.dtype,[]);const d=Dpe(n.data.get(i.dataId).values,n.bufferSync(r),r.dtype,u,s,c,h,r.shape,o);return n.makeTensorInfo(l,r.dtype,d.values)}};function Mpe(e,t,n){const r=P5(n,e.dtype);for(let i=0;i<r.size;++i){const n=r.indexToLoc(i).slice(),o=n[0],a=n[2],s=t.locToIndex([o,a]);n[2]=t.values[s];const l=e.locToIndex(n);0<=l&&l<e.values.length&&(r.values[i]=e.values[l])}return r}const Fpe={kernelName:b1,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,indices:o}=t,{axis:a,batchDims:s}=r;Ice([i,o],"gatherV2");const l=$Z(a,i.shape)[0],u=n.data.get(o.dataId).values,c=i.shape[l];for(let b=0;b<u.length;++b){const e=u[b];SZ(e<=c-1&&e>=0,(()=>`GatherV2: the index value ${e} is not in [0, ${c-1}]`))}let h=s;null==s&&(h=0);const d=TZ(o.shape),p=ote(i,o,l,h),f=uhe({inputs:{x:i},backend:n,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),m=uhe({inputs:{x:o},backend:n,attrs:{shape:[p.batchSize,d/p.batchSize]}}),g=[p.batchSize,p.outerSize,d/p.batchSize,p.sliceSize],y=n.bufferSync(m),v=Mpe(n.bufferSync(f),y,g);return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(p.outputShape,v.dtype,v.values)}},Lpe=Fce(((e,t)=>e>t?1:0)),jpe=rhe(w1,Lpe,null,"bool"),zpe={kernelName:w1,backendName:"cpu",kernelFunc:jpe},Bpe=Fce(((e,t)=>e>=t?1:0)),Upe=rhe(k1,Bpe,null,"bool"),Wpe={kernelName:k1,backendName:"cpu",kernelFunc:Upe};const Vpe={kernelName:E1,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t,i=TZ(r.shape),o=r.shape[r.shape.length-1],a=uhe({inputs:{x:r},backend:n,attrs:{shape:[i/o,o]}}),s=bpe(a,!0,n),l=uhe({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),l}},Gpe=_ce(T1,(e=>Number.isFinite(e)?1:0),"bool"),Hpe={kernelName:T1,backendName:"cpu",kernelFunc:Gpe},qpe=_ce(C1,(e=>Math.abs(e)===1/0?1:0),"bool"),Kpe={kernelName:C1,backendName:"cpu",kernelFunc:qpe},Xpe=_ce(A1,(e=>Number.isNaN(e)?1:0),"bool"),Ype={kernelName:A1,backendName:"cpu",kernelFunc:Xpe},Qpe=Fce(((e,t)=>e<t?1:0)),Jpe=rhe(N1,Qpe,null,"bool"),Zpe={kernelName:N1,backendName:"cpu",kernelFunc:Jpe},efe=Fce(((e,t)=>e<=t?1:0)),tfe=rhe(O1,efe,null,"bool"),nfe={kernelName:O1,backendName:"cpu",kernelFunc:tfe};function rfe(e,t,n){const r=(t-e)/(n-1),i=KZ(n,"float32");i[0]=e;for(let o=1;o<i.length;o++)i[o]=i[o-1]+r;return i}const ife={kernelName:R1,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:i,num:o}=n,a=rfe(r,i,o);return t.makeTensorInfo([a.length],"float32",a)}},ofe=Ace((e=>Math.log(e))),afe=Nce($1,ofe),sfe={kernelName:$1,backendName:"cpu",kernelFunc:afe},lfe=_ce(D1,(e=>Math.log1p(e))),ufe={kernelName:D1,backendName:"cpu",kernelFunc:lfe},cfe=Fce(((e,t)=>e&&t)),hfe=rhe(P1,cfe,null,"bool"),dfe={kernelName:P1,backendName:"cpu",kernelFunc:hfe},pfe=_ce(M1,(e=>e?0:1),"bool"),ffe={kernelName:M1,backendName:"cpu",kernelFunc:pfe},mfe=Fce(((e,t)=>e||t)),gfe=rhe(F1,mfe,null,"bool"),yfe={kernelName:F1,backendName:"cpu",kernelFunc:gfe};const vfe={kernelName:L1,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{depthRadius:o,bias:a,alpha:s,beta:l}=r;Ice(i,"LRN");const u=i.shape[3],c=u-1,h=n.data.get(i.dataId).values,d=TZ(i.shape),p=new Float32Array(d);function f(e){const t=e%u;let n=e-t+Math.max(0,t-o);const r=e-t+Math.min(t+o,c);let i=0;for(;n<=r;n++){const e=h[n];i+=e*e}return i}for(let m=0;m<d;m++){const e=f(m),t=h[m]*Math.pow(a+s*e,-l);p[m]=t}return n.makeTensorInfo(i.shape,i.dtype,p)}};const bfe={kernelName:j1,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,y:o,dy:a}=t,{depthRadius:s,bias:l,alpha:u,beta:c}=r;Ice(a,"LRNGrad");const h=TZ(a.shape),d=a.shape[3],p=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values,m=n.data.get(o.dataId).values,g=new Float32Array(h),y=h;for(let v=0;v<y;v++){const e=v%d,t=v-e+Math.max(0,e-s),n=v-e+Math.min(d,e+s+1);let r=0;for(let i=t;i<n;i++)r+=Math.pow(f[i],2);r=u*r+l;for(let i=t;i<n;i++){let e=-2*u*c*f[i]*m[v]/r;v===i&&(e+=Math.pow(r,-c)),e*=p[v],g[i]+=e}}return n.makeTensorInfo(a.shape,i.dtype,g)}};function xfe(e,t,n,r){const i=PZ(r,TZ(n));for(let o=0;o<i.length;++o){const n=o*t;let r=e[n];for(let i=0;i<t;++i){const t=e[n+i];(Number.isNaN(t)||t>r)&&(r=t)}i[o]=r}return i}function wfe(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reductionIndices:o,keepDims:a}=r,s=n;let l=i.shape;const u=l.length,c=$Z(o,l);let h=c;const d=J9(h,u);let p=s.data.get(i.dataId).values;if(null!=d){const e=new Array(u);for(let t=0;t<e.length;t++)e[t]=l[d[t]];p=whe(p,l,i.dtype,d,e),h=e7(h.length,u),l=e}Ice(i,"max"),Q9("max",h,u);const[f,m]=X9(l,h),g=xfe(p,TZ(m),f,i.dtype),y=s.write(g,f,i.dtype);let v=f;if(a){v=Y9(f,c)}return{dataId:y,shape:v,dtype:i.dtype}}const kfe={kernelName:z1,backendName:"cpu",kernelFunc:wfe},Sfe=Fce(((e,t)=>Math.max(e,t))),Efe=rhe(B1,Sfe),Ife={kernelName:B1,backendName:"cpu",kernelFunc:Efe};const Tfe={kernelName:U1,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;Ice(i,"maxPool");const{filterSize:o,strides:a,pad:s,dimRoundingMode:l}=r;SZ(r9(a,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '1'`));const u=q6(i.shape,o,a,1,s,l);let c;if(1===u.filterWidth&&1===u.filterHeight&&CZ(u.inShape,u.outShape))c=$ce({inputs:{x:i},backend:n});else{const e=n.data.get(i.dataId).values,t=VZ(i.shape),r=jhe(e,i.shape,i.dtype,t,u,"max");c=n.makeTensorInfo(u.outShape,i.dtype,r.values)}return c}};const Cfe={kernelName:V1,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:o,strides:a,pad:s,dimRoundingMode:l,dataFormat:u}=r;Ice(i,"maxPool3d");const c=K6(i.shape,o,a,1,s,l,u),h=Bhe(n.data.get(i.dataId).values,i.shape,i.dtype,VZ(i.shape),c,"max");return n.makeTensorInfo(h.shape,"float32",h.values)}};const Afe={kernelName:G1,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,{filterSize:a,strides:s,pad:l,dimRoundingMode:u}=r;Ice([i,o],"maxPool3DGrad");const c=K6(o.shape,a,s,1,l,u),h=function(e,t){const n=P5(t.outShape,"int32"),r=t.strideDepth,i=t.strideHeight,o=t.strideWidth,a=t.dilationDepth,s=t.dilationHeight,l=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=t.padInfo.front,p=t.padInfo.top,f=t.padInfo.left;for(let m=0;m<t.batchSize;++m)for(let g=0;g<t.inChannels;++g)for(let y=0;y<t.outDepth;++y){const v=y*r-d;let b=v;for(;b<0;)b+=a;const x=Math.min(t.inDepth,u+v);for(let r=0;r<t.outHeight;++r){const u=r*i-p;let d=u;for(;d<0;)d+=s;const w=Math.min(t.inHeight,c+u);for(let i=0;i<t.outWidth;++i){const p=i*o-f;let k=p;for(;k<0;)k+=l;const S=Math.min(t.inWidth,h+p);let E=Number.NEGATIVE_INFINITY,I=-1;for(let t=b;t<x;t+=a){const n=t-v;for(let r=d;r<w;r+=s){const i=r-u;for(let o=k;o<S;o+=l){const a=o-p,s=e.get(m,t,r,o,g);s>=E&&(E=s,I=n*c*h+i*c+a)}}}n.set(I,m,y,r,i,g)}}}return n}(n.bufferSync(o),c),d=c.strideDepth,p=c.strideHeight,f=c.strideWidth,m=c.dilationDepth,g=c.dilationHeight,y=c.dilationWidth,v=c.effectiveFilterDepth,b=c.effectiveFilterHeight,x=c.effectiveFilterWidth,w=v-1-c.padInfo.front,k=x-1-c.padInfo.left,S=b-1-c.padInfo.top,E=P5(o.shape,"float32"),I=n.bufferSync(i);for(let T=0;T<c.batchSize;++T)for(let e=0;e<c.inChannels;++e)for(let t=0;t<c.inDepth;++t)for(let n=0;n<c.inHeight;++n)for(let r=0;r<c.inWidth;++r){const i=t-w,o=n-S,a=r-k;let s=0;for(let t=0;t<v;t+=m){const n=(i+t)/d;if(!(n<0||n>=c.outDepth||Math.floor(n)!==n))for(let r=0;r<b;r+=g){const i=(o+r)/p;if(!(i<0||i>=c.outHeight||Math.floor(i)!==i))for(let o=0;o<x;o+=y){const l=(a+o)/f;if(l<0||l>=c.outWidth||Math.floor(l)!==l)continue;const u=v*b*x-1-h.get(T,n,i,l,e)===t*b*x+r*x+o?1:0;if(0===u)continue;s+=I.get(T,n,i,l,e)*u}}}E.set(s,T,t,n,r,e)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}};const _fe={kernelName:W1,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o,output:a}=t,s=o;Ice([o,a],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:h}=r,d=q6(s.shape,l,u,1,c,h),p=n.data.get(s.dataId).values,f=P5(d.outShape,s.dtype,zhe(p,s.shape,s.dtype,d).values),m=d.strideHeight,g=d.strideWidth,y=d.dilationHeight,v=d.dilationWidth,b=d.effectiveFilterHeight,x=d.effectiveFilterWidth,w=x-1-d.padInfo.left,k=b-1-d.padInfo.top,S=P5(s.shape,"float32"),E=n.data.get(i.dataId).values,I=P5(i.shape,"float32",E);for(let T=0;T<d.batchSize;++T)for(let e=0;e<d.inChannels;++e)for(let t=0;t<d.inHeight;++t)for(let n=0;n<d.inWidth;++n){const r=t-k,i=n-w;let o=0;for(let t=0;t<b;t+=y){const n=(r+t)/m;if(!(n<0||n>=d.outHeight||Math.floor(n)!==n))for(let r=0;r<x;r+=v){const a=(i+r)/g;if(a<0||a>=d.outWidth||Math.floor(a)!==a)continue;const s=b*x-1-f.get(T,n,a,e)===t*x+r?1:0;if(0===s)continue;o+=I.get(T,n,a,e)*s}}S.set(o,T,t,n,e)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}};const Nfe={kernelName:H1,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:i}=t,{filterSize:o,strides:a,pad:s,includeBatchInIndex:l}=n,u=r;Ice(i,"MaxPoolWithArgmax");const c=u.data.get(i.dataId).values,h=q6(i.shape,o,a,[1,1],s),[d,p]=function(e,t,n,r,i){const o=jhe(e,0,n,VZ(t),i,"max"),a=zhe(e,t,n,i,!0,r);return[o.values,a.values]}(c,i.shape,i.dtype,l,h),f=u.write(d,h.outShape,i.dtype),m=u.write(p,h.outShape,i.dtype);return[{dataId:f,shape:h.outShape,dtype:i.dtype},{dataId:m,shape:h.outShape,dtype:"int32"}]}};const Ofe={kernelName:q1,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r,s=$Z(o,i.shape),l=TZ(X9(i.shape,s)[1]),u=[],c=n.makeTensorInfo([],"float32",new Float32Array([l]));u.push(c);const h=the({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});u.push(h);const d=ppe({inputs:{a:h,b:c},backend:n});u.push(d);const p=Wde({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:a}});return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),p}};const Rfe={kernelName:K1,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r;Ice(i,"min");const s=$Z(o,i.shape);let l=s;const u=J9(l,i.shape.length);let c=i;null!=u&&(c=khe({inputs:{x:i},backend:n,attrs:{perm:u}}),l=e7(l.length,i.shape.length)),Q9("min",l,c.shape.length);const[h,d]=X9(c.shape,l),p=TZ(d),f=KZ(TZ(h),c.dtype),m=n.data.get(c.dataId).values;for(let y=0;y<f.length;++y){const e=y*p;let t=m[e];for(let n=0;n<p;++n){const r=m[e+n];(Number.isNaN(r)||r<t)&&(t=r)}f[y]=t}null!=u&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(h,c.dtype,f);if(a){const e=uhe({inputs:{x:g},backend:n,attrs:{shape:Y9(h,s)}});return n.disposeIntermediateTensorInfo(g),e}return g}},$fe=Fce(((e,t)=>Math.min(e,t))),Dfe=rhe(X1,$fe),Pfe={kernelName:X1,backendName:"cpu",kernelFunc:Dfe};const Mfe={kernelName:Y1,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:o,mode:a}=r;Ice(i,"mirrorPad");const s=o.map(((e,t)=>e[0]+i.shape[t]+e[1])),l=o.map((e=>e[0])),u=o.map(((e,t)=>e[0]+i.shape[t])),c="reflect"===a?0:1,h=n.data.get(i.dataId).values,d=i.shape.length,p=VZ(i.shape),f=TZ(s),m=s.length,g=VZ(s),y=PZ(i.dtype,f);for(let v=0;v<f;v++){let e=JZ(v,m,g);for(let n=0;n<m;n++)e[n]<l[n]?e[n]=2*l[n]-e[n]-c:e[n]>=u[n]&&(e[n]=2*(u[n]-1)-e[n]+c);e=e.map(((e,t)=>e-l[t]));const t=QZ(e,d,p);y[v]=h[t]}return{dataId:n.write(y,s,i.dtype),shape:s,dtype:i.dtype}}},Ffe=Fce(((e,t)=>{const n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),Lfe=rhe(Q1,Ffe),jfe={kernelName:Q1,backendName:"cpu",kernelFunc:Lfe};function zfe(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{dim:o}=r,a=i.shape.length;let s=o;if(-1===s&&(s=a-1),s!==a-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${a} and dim was ${s}`);const l=$Z([s],i.shape),u=wfe({inputs:{x:i},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=Y9(u.shape,l),h=uhe({inputs:{x:u},backend:n,attrs:{shape:c}}),d=ype({inputs:{a:i,b:h},backend:n}),p=ope({inputs:{x:d},backend:n}),f=Wde({inputs:{x:p},backend:n,attrs:{axis:l,keepDims:!1}}),m=uhe({inputs:{x:f},backend:n,attrs:{shape:c}}),g=ppe({inputs:{a:p,b:m},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}const Bfe={kernelName:W2,backendName:"cpu",kernelFunc:zfe};const Ufe={kernelName:J1,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{numSamples:o,seed:a,normalized:s}=r;Ice(i,"multinomial");const l=s?i:zfe({inputs:{logits:i},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],h=n.data.get(l.dataId).values,d=[u,o],p=KZ(TZ(d),"int32");for(let f=0;f<u;++f){const e=f*c,t=new Float32Array(c-1);t[0]=h[e];for(let i=1;i<t.length;++i)t[i]=t[i-1]+h[e+i];const n=v7.alea(a.toString()),r=f*o;for(let i=0;i<o;++i){const e=n();p[r+i]=t.length;for(let n=0;n<t.length;n++)if(e<t[n]){p[r+i]=n;break}}}return s||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(d,"int32",p)}};function Wfe(e,t,n){const r=V3(-1,n);return jde([],t,r,e,n)}const Vfe={kernelName:e2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;Ice(r,"neg");const i=n.data.get(r.dataId).values,[o,a]=Wfe(i,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,o)}},Gfe=x8;const Hfe={kernelName:n2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:o}=t,{maxOutputSize:a,iouThreshold:s,scoreThreshold:l}=r;Ice(i,"NonMaxSuppression");const u=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values,{selectedIndices:h}=Gfe(u,c,a,s,l);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}},qfe=w8;const Kfe={kernelName:r2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:o}=t,{maxOutputSize:a,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:u}=r;Ice(i,"NonMaxSuppressionPadded");const c=n.data.get(i.dataId).values,h=n.data.get(o.dataId).values,{selectedIndices:d,validOutputs:p}=qfe(c,h,a,s,l,u);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},Xfe=k8;const Yfe={kernelName:i2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:o}=t,{maxOutputSize:a,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}=r;Ice(i,"NonMaxSuppressionWithScore");const c=n.data.get(i.dataId).values,h=n.data.get(o.dataId).values,d=a,p=s,f=l,m=u,{selectedIndices:g,selectedScores:y}=Xfe(c,h,d,p,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}},Qfe=Fce(((e,t)=>e!==t?1:0)),Jfe=rhe(t2,Qfe,null,"bool"),Zfe={kernelName:t2,backendName:"cpu",kernelFunc:Jfe};const eme={kernelName:a2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:i}=t,{dtype:o,depth:a,onValue:s,offValue:l}=r;Ice(i,"oneHot");const u=TZ(i.shape),c=new Float32Array(u*a);c.fill(l);const h=n.data.get(i.dataId).values;for(let d=0;d<u;++d)h[d]>=0&&h[d]<a&&(c[d*a+h[d]]=s);return n.makeTensorInfo([...i.shape,a],o,c)}};function tme(e){const{inputs:t,backend:n}=e,{x:r}=t;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){const e=Jce({inputs:{input:r},backend:n}),t=tme({inputs:{x:e},backend:n}),i=cde({inputs:{input:r},backend:n}),o=tme({inputs:{x:i},backend:n}),a=Xce({inputs:{real:t,imag:o},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),a}return Spe({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const nme={kernelName:d3,backendName:"cpu",kernelFunc:tme};const rme={kernelName:o2,backendName:"cpu",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:i}=n;if("string"===i.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===i.dtype){const t=Jce({inputs:{input:i},backend:r}),n=e({inputs:{x:t},backend:r}),o=cde({inputs:{input:i},backend:r}),a=tme({inputs:{x:o},backend:r}),s=Xce({inputs:{real:n,imag:a},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(a),s}return Spe({backend:r,attrs:{shape:i.shape,value:1,dtype:i.dtype}})}};function ime(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r;if(1===t.length)return spe({inputs:{input:t[0]},backend:n,attrs:{dim:i}});const o=t[0].shape,a=t[0].dtype;t.forEach((e=>{EZ(o,e.shape,"All tensors passed to stack must have matching shapes"),SZ(a===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const s=[],l=dde({inputs:t.map((e=>{const t=spe({inputs:{input:e},backend:n,attrs:{dim:i}});return s.push(t),t})),backend:n,attrs:{axis:i}});return s.forEach((e=>n.disposeIntermediateTensorInfo(e))),l}const ome={kernelName:s2,backendName:"cpu",kernelFunc:ime};const ame={kernelName:l2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:o,constantValue:a}=r;Ice(i,"pad");const s=o.map(((e,t)=>e[0]+i.shape[t]+e[1])),l=o.map((e=>e[0])),u=n.data.get(i.dataId).values,c=TZ(i.shape),h=i.shape.length,d=VZ(i.shape),p=TZ(s),f=s.length,m=VZ(s),g=PZ(i.dtype,p);0!==a&&g.fill(a);for(let y=0;y<c;y++){const e=JZ(y,h,d).map(((e,t)=>e+l[t]));g[QZ(e,f,m)]=u[y]}return{dataId:n.write(g,s,i.dtype),shape:s,dtype:i.dtype}}},sme=Fce(((e,t)=>Math.pow(e,t))),lme=rhe(u2,sme),ume={kernelName:u2,backendName:"cpu",kernelFunc:lme};function cme(e,t,n,r){const[i,o]=X9(e,r),a=v4(t,"int32"),s=KZ(TZ(i),a),l=TZ(o);for(let u=0;u<s.length;++u){const e=u*l;let t=1;for(let r=0;r<l;++r)t*=n[e+r];s[u]=t}return{outVals:s,outShape:i,outDtype:a}}const hme={kernelName:h2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r;Ice(i,"prod");const s=i.shape.length,l=$Z(o,i.shape),u=J9(l,s);let c=l,h=i;const d=[];null!=u&&(h=khe({inputs:{x:i},backend:n,attrs:{perm:u}}),d.push(h),c=e7(c.length,s));const p=n.data.get(h.dataId).values,{outVals:f,outShape:m,outDtype:g}=cme(h.shape,h.dtype,p,c);let y=m;return a&&(y=Y9(m,l)),d.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(y,g,f)}};function dme(e,t,n,r){const i=[];let o=0;const a=t.length-1+n.length,s=new Array(a).fill(null).map((()=>[0]));!function(e,t){for(let n=0;n<e.length;++n){const r=e[n],i=n===e.length-1?t:e[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let e=1;e<r.length;++e)if(r[e-1]>r[e])throw new Error("Ragged splits must be sorted in ascending order")}}(n,r);let l=1;for(let u=0;u<t.length-1;++u){l*=t[u];const e=t[u+1];for(let t=1;t<l+1;++t)s[u].push(t*e)}for(let u=0;u<e.length;++u){let r=e[u],a=e[u]+1;for(let e=0;e<n.length;++e){const i=n[e],o=e+t.length-1;if(o>=0){const e=s[o],t=e[e.length-1]-i[r];for(let n=r;n<a;++n)s[o].push(i[n+1]+t)}r=i[r],a=i[a]}a!==r&&(i.push([r,a]),o+=a-r)}return{outSplits:s,valueSlices:i,numValues:o}}function pme(e,t){const n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let r=t;r<e.length;r++)n[t-1]*=e[r];return n}function fme(e,t,n,r,i){const o=t.slice();o[0]=i;const a=MZ(n,TZ(o)),s=e.length;return function(e,t,n,r,i,o){const a=pme(t,2)[1],s=pme(o,2)[1];let l=0;for(const u of n)for(let t=u[0];t<u[1];++t){for(let n=0;n<r;++n)i[l*s+n]=e[t*a+n];++l}}(e,t,r,0===s?0:s/t[0],a,o),[a,o]}function mme(e,t,n,r,i,o,a,s){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach(((e,r)=>{if(e<0||e>=n){const i=JZ(r,t.length,VZ(t)).join(",");throw new Error(`indices[${i}] = ${e} is not in [0, ${n})`)}}))}(o,a,t[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");const l=r[0],{outSplits:u,valueSlices:c,numValues:h}=dme(o,a,e,l),d=function(e){const t=[];for(let n=0;n<e.length;++n){const r=MZ("int32",e[n].length);t.push(r),e[n].forEach(((e,t)=>r[t]=e))}return t}(u),p=fme(n,r,i,c,h);return[d,p[0],p[1]]}const gme={kernelName:d2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:i,paramsDenseValues:o,indices:a}=t,{outputRaggedRank:s}=r,l=i.map((e=>n.data.get(e.dataId).values)),u=i.map((e=>e.shape)),c=n.data.get(o.dataId).values,h=n.data.get(a.dataId).values,[d,p,f]=mme(l,u,c,o.shape,o.dtype,h,a.shape),m=d.map((e=>n.makeTensorInfo([e.length],"int32",e))),g=n.makeTensorInfo(f,o.dtype,p);return m.concat([g])}},yme=2147483647;function vme(e,t,n,r,i,o,a){if(t.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(a.length>1)throw new Error("deltas must be a scalar or vector");const s=0===t.length,l=0===i.length,u=0===a.length,c=[];s||c.push(t[0]),l||c.push(i[0]),u||c.push(a[0]);for(let m=1;m<c.length;++m)if(c[m]!==c[m-1])throw new Error("starts, limits, and deltas must have the same shape");const h=0===c.length?1:c[0],d=MZ("int32",h+1);d[0]=0;for(let m=0;m<h;++m){const t=s?e[0]:e[m],n=l?r[0]:r[m],i=u?o[0]:o[m];if(0===i)throw new Error("Requires delta != 0");let a;if(i>0&&n<t||i<0&&n>t)a=0;else if(a=Math.ceil(Math.abs((n-t)/i)),a>yme)throw new Error(`Requires ((limit - start) / delta) <= ${yme}`);d[m+1]=d[m]+a}const p=MZ(n,d[h]);let f=0;for(let m=0;m<h;++m){const t=d[m+1]-d[m];let n=s?e[0]:e[m];const r=u?o[0]:o[m];for(let e=0;e<t;++e)p[f++]=n,n+=r}return[d,p]}const bme={kernelName:p2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:r,limits:i,deltas:o}=t,a=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,[u,c]=vme(a,r.shape,r.dtype,s,i.shape,l,o.shape);return[n.makeTensorInfo([u.length],"int32",u),n.makeTensorInfo([c.length],r.dtype,c)]}};var xme=tee;class wme{constructor(e,t,n,r,i,o,a,s,l,u){this.shape=e,this.shapeShape=t,this.values=n,this.valuesShape=r,this.valuesDType=i,this.defaultValue=o,this.defaultValueShape=a,this.rowPartitionValues=s,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=ree(u),this.raggedRank=iee(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===xme.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===xme.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case xme.VALUE_ROWIDS:return wme.getMaxWidthValueRowID(t);case xme.ROW_SPLITS:return wme.getMaxWidthRowSplit(t);default:throw new Error(`Cannot handle partition type ${xme[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const t=e.length;if(0===t||1===t)return 0;let n=0;for(let r=0;r<t-1;++r){const t=e[r+1]-e[r];t>n&&(n=t)}return n}static getMaxWidthValueRowID(e){const t=e.length;if(0===t)return 0;let n=0,r=e[0],i=0;for(let o=1;o<t;++o){const t=e[o];t!==r&&(r=t,i=Math.max(o-n,i),n=o)}return Math.max(t-n,i)}tensorShapeFromTensor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return Sme(e,n)}calculateOutputSize(e){const t=this.valuesShape;oee(this.defaultValueShape,t);const n=this.tensorShapeFromTensor(this.shape,this.shapeShape),r=nee(this.raggedRank,n,t);r[0]<0&&(r[0]=e);for(let i=1;i<=this.raggedRank;++i)r[i]<0&&(r[i]=this.getMaxWidth(i));return r}calculateFirstParentOutputIndex(e,t,n){const r=Math.min(e,n),i=[];let o=0;for(let a=0;a<r;++a,o+=t)i.push(o);for(let a=r;a<e;++a)i.push(-1);return SZ(i.length===e,(()=>"Final length of result must be equal to firstDimension.")),i}calculateOutputIndexRowSplit(e,t,n,r){const i=e.length,o=[];for(let a=0;a<i-1;++a){const i=e[a+1]-e[a];let s=Math.min(r,i),l=t[a];-1===l&&(s=0);for(let e=0;e<s;++e)o.push(l),l+=n;for(let e=0;e<i-s;++e)o.push(-1)}if(i>0&&o.length!==e[i-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,t,n,r){const i=e.length,o=[];if(0===i)return[];let a=0,s=e[0];if(s>=t.length)throw new Error(`Got currentValueRowId=${s}, which is not less than ${t.length}`);let l=t[s];o.push(l);for(let u=1;u<i;++u){const i=e[u];if(i===s)l>=0&&(++a,a<r?l+=n:l=-1);else{if(a=0,s=i,i>=t.length)throw new Error(`Got nextValueRowId=${i} which is not less than ${t.length}`);l=t[i]}o.push(l)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,t,n,r){const i=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case xme.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,t,n,r);case xme.ROW_SPLITS:if(i.length-1>t.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${t.length}`);return this.calculateOutputIndexRowSplit(i,t,n,r);default:throw new Error(`Unsupported partition type: ${xme[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");const t=this.rowPartitionTypes[0];switch(t){case xme.FIRST_DIM_SIZE:return e[0];case xme.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case xme.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${xme[t]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(let o=n.length-2;o>=0;--o)n[o]=n[o+1]*t[o+1];const r=Sme(t,!1),i=MZ(this.valuesDType,TZ(r));if(n[0]*t[0]>0){let o=this.calculateFirstParentOutputIndex(e,n[0],t[0]);for(let e=1;e<=this.raggedRank;++e){o=this.calculateOutputIndex(e-1,o,n[e],t[e])}this.setOutput(this.raggedRank,o,i,r)}return[r,i]}setOutput(e,t,n,r){if(0===n.length)return;const i=this.values,o=n;let a=r.slice();a=a.slice(e+1);const s=TZ(a),l=t.length;let u=this.defaultValue;if(u.length!==s&&1!==u.length){const e=this.defaultValueShape;K4((()=>{const t=s9(u,e),n=f9(t,a);u=n.dataSync()}))}let c=0,h=0,d=0;for(let p=0;p<=l;++p){let e=p<l?t[p]:-1;if(e!==d){if(h<d){const e=i.subarray(c*s);kme(o.subarray(h*s),e,(d-h)*s)}if(p>=l){const t=n.length;e=Math.floor(t/s)}if(e>d)if(1===this.defaultValue.length)o.subarray(d*s,e*s).fill(this.defaultValue[0]),d=e;else for(;e>d;){kme(o.slice(d*s),u,s),++d}e<0?(c=p+1,h=d):(c=p,h=d,d=h+1)}else++d}}}function kme(e,t,n){for(let r=0;r<n;r++)e[r]=t[r]}function Sme(e,t){const n=[];for(let r of e){if(r<0){if(!t)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function Eme(e,t,n,r,i,o,a,s,l,u){return new wme(e,t,n,r,i,o,a,s,l,u).compute()}const Ime={kernelName:f2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{shape:i,values:o,defaultValue:a,rowPartitionTensors:s}=t,{rowPartitionTypes:l}=r,u=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values,h=n.data.get(a.dataId).values,d=s.map((e=>n.data.get(e.dataId).values)),p=s.map((e=>e.shape)),[f,m]=Eme(u,i.shape,c,o.shape,o.dtype,h,a.shape,d,p,l);return n.makeTensorInfo(f,o.dtype,m)}};function Tme(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return KZ(0,r);const i=KZ(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),i[0]=e;for(let o=1;o<i.length;o++)i[o]=i[o-1]+n;return i}const Cme={kernelName:m2,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:i,dtype:o,step:a}=n,s=Tme(r,i,a,o);return t.makeTensorInfo([s.length],o,s)}},Ame=_ce(y2,(e=>1/e)),_me={kernelName:y2,backendName:"cpu",kernelFunc:Ame};const Nme={kernelName:k2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:o,halfPixelCenters:a,size:s}=r;Ice(i,"resizeBilinear");const l=VZ(i.shape),[u,c]=s,[h,d,p,f]=i.shape,m=n.data.get(i.dataId).values,g=new Float32Array(TZ([h,u,c,f])),y=[o&&u>1?d-1:d,o&&c>1?p-1:p],v=[o&&u>1?u-1:u,o&&c>1?c-1:c];let b=0;const x=y[0]/v[0],w=y[1]/v[1];for(let k=0;k<h;k++)for(let e=0;e<u;e++){let t;t=a?x*(e+.5)-.5:x*e;const n=Math.max(0,Math.floor(t)),r=t-n,i=Math.min(d-1,Math.ceil(t)),o=k*l[0]+n*l[1],s=k*l[0]+i*l[1];for(let e=0;e<c;e++){let t;t=a?w*(e+.5)-.5:w*e;const n=Math.max(0,Math.floor(t)),i=t-n,u=Math.min(p-1,Math.ceil(t)),c=o+n*l[2],h=s+n*l[2],d=o+u*l[2],y=s+u*l[2];for(let e=0;e<f;e++){const t=m[c+e],n=m[h+e],o=t+(m[d+e]-t)*i,a=o+(n+(m[y+e]-n)*i-o)*r;g[b++]=a}}}return n.makeTensorInfo([h,u,c,f],"float32",g)}};const Ome={kernelName:S2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:o}=t,{alignCorners:a}=r;Ice([o,i],"resizeBilinearGrad");const s=VZ(i.shape),[l,u,c,h]=i.shape,[,d,p]=o.shape,f=new Float32Array(l*u*c*h),m=[a&&d>1?u-1:u,a&&p>1?c-1:c],g=[a&&d>1?d-1:d,a&&p>1?p-1:p],y=m[0]/g[0],v=m[1]/g[1],b=n.data.get(o.dataId).values;let x=0;for(let w=0;w<l;w++){const e=w*s[0];for(let t=0;t<d;t++){const n=t*y,r=Math.floor(n),i=Math.min(Math.ceil(n),u-1),o=e+r*s[1],a=e+i*s[1],l=n-r,d=1-l;for(let e=0;e<p;e++){const t=e*v,n=Math.floor(t),r=Math.min(Math.ceil(t),c-1),i=t-n,u=1-i,p=o+n*s[2],m=o+r*s[2],g=a+n*s[2],y=a+r*s[2],w=d*u,k=d*i,S=l*u,E=l*i;for(let e=0;e<h;e++){const t=b[x++];f[p+e]+=t*w,f[m+e]+=t*k,f[g+e]+=t*S,f[y+e]+=t*E}}}}return n.makeTensorInfo([l,c,u,h],"float32",f)}};const Rme={kernelName:x2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:o,halfPixelCenters:a,size:s}=r;Ice(i,"resizeNearestNeighbor");const l=VZ(i.shape),[u,c]=s,[h,d,p,f]=i.shape,m=n.data.get(i.dataId).values,g=new Float32Array(h*u*c*f),y=[o&&u>1?d-1:d,o&&c>1?p-1:p],v=[o&&u>1?u-1:u,o&&c>1?c-1:c],b=y[0]/v[0],x=y[1]/v[1];let w=0;for(let k=0;k<h;k++){const e=k*l[0];for(let t=0;t<u;t++){const n=a?b*(t+.5):b*t;let r=Math.min(d-1,o?Math.round(n):Math.floor(n));a&&(r=Math.max(0,r));const i=e+r*l[1];for(let e=0;e<c;e++){const t=a?x*(e+.5):x*e;let n=Math.min(p-1,o?Math.round(t):Math.floor(t));a&&(n=Math.max(0,n));const r=i+n*l[2];for(let e=0;e<f;e++){const t=m[r+e];g[w++]=t}}}}return n.makeTensorInfo([h,u,c,f],i.dtype,g)}};const $me={kernelName:w2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:o}=t,{alignCorners:a}=r;Ice([o,i],"resizeNearestNeighborGrad");const s=VZ(i.shape),l=VZ(o.shape),[u,c,h,d]=i.shape,[,p,f]=o.shape,m=new Float32Array(u*c*h*d),g=n.data.get(o.dataId).values,y=[a&&p>1?c-1:c,a&&f>1?h-1:h],v=[a&&p>1?p-1:p,a&&f>1?f-1:f],b=y[0]/v[0],x=y[1]/v[1],w=1/b,k=1/x,S=2*Math.ceil(w)+2,E=2*Math.ceil(k)+2;for(let I=0;I<u;I++){const e=I*s[0];for(let t=0;t<c;t++){const n=e+t*s[1],r=Math.floor(t*w),i=Math.floor(r-S/2);for(let o=0;o<h;o++){const r=n+o*s[2],u=Math.floor(o*k),y=Math.floor(u-E/2);for(let n=0;n<d;n++){let s=0;for(let r=0;r<S;r++){const u=r+i;if(u<0||u>=p)continue;const d=e+u*l[1],m=u*b;if(t===Math.min(c-1,a?Math.round(m):Math.floor(m)))for(let e=0;e<E;e++){const t=e+y;if(t<0||t>=f)continue;const r=d+t*l[2],i=t*x;o===Math.min(h-1,a?Math.round(i):Math.floor(i))&&(s+=g[r+n])}}m[r+n]=s}}}}return n.makeTensorInfo(i.shape,i.dtype,m)}};const Dme={kernelName:I2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dims:o}=r;Ice(i,"reverse");const a=i.shape.length,s=$Z(o,i.shape);if(0===a)return $ce({inputs:{x:i},backend:n});const l=new o4(i.shape,i.dtype),u=n.bufferSync(i);for(let c=0;c<l.size;c++){const e=l.indexToLoc(c),t=e.slice();s.forEach((e=>t[e]=i.shape[e]-1-t[e])),l.set(u.get(...t),...e)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}},Pme={kernelName:m3,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:i}=t,{radians:o,fillValue:a,center:s}=n,l=r,u=PZ(i.dtype,TZ(i.shape)),[c,h,d,p]=i.shape,[f,m]=lee(s,h,d),g=Math.sin(o),y=Math.cos(o),v=l.data.get(i.dataId).values;for(let b=0;b<c;b++){const e=b*d*h*p;for(let t=0;t<h;t++){const n=t*(d*p);for(let r=0;r<d;r++){const i=r*p;for(let o=0;o<p;o++){const s=[c,t,r,o],l=s[2],b=s[1];let x=(l-f)*y-(b-m)*g,w=(l-f)*g+(b-m)*y;x=Math.round(x+f),w=Math.round(w+m);let k=a;if("number"!==typeof a&&(k=3===o?255:a[o]),x>=0&&x<d&&w>=0&&w<h){k=v[e+w*(d*p)+x*p+o]}u[e+n+i+o]=k}}}}return{dataId:l.write(u,i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},Mme=_ce(T2,(e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),Fme={kernelName:T2,backendName:"cpu",kernelFunc:Mme},Lme=Ace((e=>1/Math.sqrt(e))),jme=Nce(C2,Lme),zme={kernelName:C2,backendName:"cpu",kernelFunc:jme};function Bme(e,t,n,r,i,o,a,s,l,u){const c=[r/i,i],h=e.values,d=t.values;if(0===r)return P5(n,t.dtype);const p=l instanceof o4?l:P5(c,t.dtype);"string"===typeof l||"number"===typeof l?p.values.fill(l):"boolean"===typeof l&&p.values.fill(+l);for(let f=0;f<o;f++){const e=[];let o=0;for(let t=0;t<a;t++){const n=h[f*a+t];e.push(n),o+=n*s[t]}if(o<0||o>=r/i)throw new Error(`Invalid indices: ${e} does not index into ${n}`);for(let n=0;n<i;n++)u?p.values[o*i+n]+=d[f*i+n]:p.values[o*i+n]=0===t.rank?d[0]:d[f*i+n]}return p}const Ume={kernelName:A2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:i,updates:o}=t,{shape:a}=r,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:h}=yee(0,i,a),d=Bme(n.bufferSync(i),n.bufferSync(o),a,h,u,l,s,c,0,!0);return n.makeTensorInfo(a,d.dtype,d.values)}};function Wme(e,t){let n=0,r=e.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),e[i]<t?n=i+1:r=i;return r}function Vme(e,t){let n=0,r=e.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),e[i]<=t?n=i+1:r=i;return r}const Gme={kernelName:N2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:i,values:o}=t,{side:a}=r,s=function(e,t,n,r,i,o){const a=MZ("int32",n*i);for(let s=0;s<n;++s){const n=e.slice(s*r,(s+1)*r),l=s*i;for(let e=0;e<i;++e)a[l+e]="left"===o?Wme(n,t[e+l]):Vme(n,t[e+l])}return a}(n.data.get(i.dataId).values,n.data.get(o.dataId).values,i.shape[0],i.shape[1],o.shape[1],a);return n.makeTensorInfo(o.shape,"int32",s)}};const Hme={kernelName:O2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:i,e:o}=t;Ice([r,i,o],"select");const a=r.shape.length,s=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values,c=v4(i.dtype,o.dtype),h=KZ(TZ(i.shape),c);let d=0;const p=0===a||a>1||1===i.shape.length?1:TZ(i.shape.slice(1));for(let f=0;f<s.length;f++)for(let e=0;e<p;e++)1===s[f]?h[d++]=l[f]:h[d++]=u[f];return n.makeTensorInfo(i.shape,c,h)}},qme=vee,Kme=bee,Xme=_ce(R2,(e=>e>=0?Kme*e:qme*(Math.exp(e)-1))),Yme={kernelName:R2,backendName:"cpu",kernelFunc:Xme},Qme=_ce(M2,(e=>e<0?-1:e>0?1:0)),Jme={kernelName:M2,backendName:"cpu",kernelFunc:Qme},Zme=_ce(D2,(e=>Math.sin(e))),ege={kernelName:D2,backendName:"cpu",kernelFunc:Zme},tge=_ce(P2,(e=>Math.sinh(e))),nge={kernelName:P2,backendName:"cpu",kernelFunc:tge},rge=Math.log(1.1920928955078125e-7)+2,ige=_ce(L2,(e=>{const t=e>-rge,n=e<rge,r=Math.exp(e);let i;return i=n?r:t?e:Math.log(1+r),i})),oge={kernelName:L2,backendName:"cpu",kernelFunc:ige};const age={kernelName:B2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:o,paddings:a}=r;Ice([i],"spaceToBatchND");const s=TZ(o),l=[[0,0]];l.push(...a);for(let g=1+o.length;g<i.shape.length;++g)l.push([0,0]);const u=ame.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),c=uee(u.shape,o,s,!1),h=cee(c.length,o.length,!1),d=hee(u.shape,o,s,!1),p=uhe({inputs:{x:u},backend:n,attrs:{shape:c}}),f=khe({inputs:{x:p},backend:n,attrs:{perm:h}}),m=uhe({inputs:{x:f},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}};function sge(e,t,n,r,i,o,a){const s=t[0],l=o[0],u=new Array(l),c=new Array(s),h=t[1];if(0===l){if(0!==s)throw new Error(Gee(s));return[MZ(n,0),[0,h],MZ(i,0),u,c]}let d=!0,p=0;const f=new Array(l).fill(0);for(let g=0;g<s;++g){const t=e[g*h];if(t<0)throw new Error(Hee(g,t));if(t>=l)throw new Error(qee(g,t,l));++f[t],d=d&&t>=p,p=t}let m=!0;for(let g=0;g<l;++g){const e=0===f[g];u[g]=e,m=m&&!e,f[g]=Math.max(f[g],1),g>0&&(f[g]+=f[g-1])}if(m&&d){const t=e,n=r;for(let e=0;e<s;++e)c[e]=e;return[t,[s,h],n,u,c]}{const t=f[l-1],o=MZ(n,t*h),d=MZ(i,t),p=new Array(l).fill(0);for(let n=0;n<s;++n){const t=e[n*h],i=p[t],a=(0===t?0:f[t-1])+i;p[t]++;for(let r=0;r<h;++r)o[a*h+r]=e[n*h+r];d[a]=r[n],c[n]=a}for(let e=0;e<l;++e){if(0===p[e]){const t=0===e?0:f[e-1];o[t*h+0]=e;for(let e=1;e<h;++e)o[t*h+e]=0;d[t]=a}}return[o,[t,h],d,u,c]}}const lge={kernelName:V2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:i,denseShape:o,defaultValue:a}=t;if(1!==o.shape.length)throw new Error(`Dense shape must be a vector, saw:\n        ${o.shape}`);if(2!==r.shape.length)throw new Error(`Indices must be a matrix, saw:\n        ${r.shape}`);if(1!==i.shape.length)throw new Error(`Values must be a vector, saw:\n        ${i.shape}`);if(0!==a.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${a.shape}`);const s=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values,c=n.data.get(a.dataId).values[0],[h,d,p,f,m]=sge(s,r.shape,r.dtype,l,i.dtype,u,c);return[n.makeTensorInfo(d,r.dtype,h),n.makeTensorInfo([d[0]],i.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map((e=>Number(e))))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};function uge(e,t,n,r,i){const o=TZ(r),a=t[0],s=i.length,l=[];let u=1,c=-1;for(let m=0;m<s;++m){const e=i[m];if(-1===e){if(-1!==c)throw new Error(Kee(c,m));c=m,l.push(1)}else{if(e<0)throw new Error(Xee(m,e));u*=e,l.push(e)}}if(-1!==c){if(u<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");const e=Math.trunc(o/u);if(u*e!==o)throw new Error(Qee(r,l));l[c]=e}if(TZ(l)!==o)throw new Error(Jee(r,l));const h=r.length,d=[];if(h>0){d[h-1]=1;for(let e=h-2;e>=0;--e)d[e]=d[e+1]*r[e+1]}const p=[];if(s>0){p[s-1]=1;for(let e=s-2;e>=0;--e)p[e]=p[e+1]*l[e+1]}const f=MZ(n,a*s);for(let m=0;m<a;++m){let t=0;for(let n=0;n<h;++n)t+=e[m*h+n]*d[n];for(let e=0;e<s;++e)f[m*s+e]=Math.trunc(t/p[e]),t%=p[e]}return[f,[a,s],l]}const cge={kernelName:G2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:i,newShape:o}=t;if(2!==r.shape.length)throw new Error(`Input indices should be a matrix but received shape\n        ${r.shape}`);if(1!==i.shape.length)throw new Error(`Input shape should be a vector but received shape\n        ${i.shape}`);if(1!==o.shape.length)throw new Error(`Target shape should be a vector but received shape ${o.shape}`);const a=Array.from(n.data.get(i.dataId).values),s=n.data.get(r.dataId).values,l=Array.from(n.data.get(o.dataId).values),[u,c,h]=uge(s,r.shape,r.dtype,a,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([h.length],o.dtype,new Int32Array(h))]}};function hge(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;const s=r.length,l=[t[0],e.length/t[0]],u=l[1],c=s>0?i[s-1]+1:0;if(c<0)throw new Error("segment ids must be >= 0");const h=t.slice();h[0]=c;const d=h.reduce(((e,t)=>e*t),1),p=MZ(n,d);if(0===s)return c>0&&p.fill(a),[p,h];if(c<=0)throw new Error("segment ids must be >= 0");let f=0,m=1,g=0,y=i[f];for(;;){let t=0;if(m<s){if(t=i[m],y===t){++m;continue}if(y>=t)throw new Error("segment ids are not increasing")}if(y<0||y>=c)throw new Error(tte(y,c));y>g&&p.fill(a,g*u,y*u);for(let n=f;n<m;++n){const t=r[n];if(t<0||t>=l[0])throw new Error(nte(n,r[n],l[0]));for(let n=0;n<u;n++)p[y*u+n]+=e[t*u+n]}if(o)for(let e=0;e<u;e++)p[y*u+e]/=m-f;if(f=m,++m,g=y+1,y=t,m>s)break}return g<c&&p.fill(a,g*u,c*u),[p,h]}const dge={kernelName:H2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:o}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error(`Indices should be a vector but received shape\n          ${i.shape}`);if(1!==o.shape.length)throw new Error(`Segment ids should be a vector but received shape\n          ${o.shape}`);if(i.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");const a=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,[u,c]=hge(a,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(c,r.dtype,u)}};const pge={kernelName:q2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:o}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error(`Indices should be a vector but received shape\n         ${i.shape}`);if(1!==o.shape.length)throw new Error(`Segment ids should be a vector but received shape\n         ${o.shape}`);if(i.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");const a=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,[u,c]=hge(a,r.shape,r.dtype,s,l);return n.makeTensorInfo(c,r.dtype,u)}};const fge={kernelName:K2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:i,sparseValues:o,defaultValue:a}=t,{outputShape:s}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:h,outputSize:d}=yee(0,i,s),p=!1,f=n.bufferSync(i);let m;switch(o.dtype){case"bool":m=Bme(f,n.bufferSync(o),s,d,c,u,l,h,Boolean(n.data.get(a.dataId).values[0]),p);break;case"float32":m=Bme(f,n.bufferSync(o),s,d,c,u,l,h,n.data.get(a.dataId).values[0],p);break;case"int32":m=Bme(f,n.bufferSync(o),s,d,c,u,l,h,n.data.get(a.dataId).values[0],p);break;case"string":m=Bme(f,n.bufferSync(o),s,d,c,u,l,h,K3(n.data.get(a.dataId).values[0]),p);break;default:throw new Error(`Unsupported type ${o.dtype}`)}return n.makeTensorInfo(s,m.dtype,m.values)}};const mge={kernelName:U2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{numOrSizeSplits:o,axis:a}=r,s=$Z(a,i.shape)[0],l=Vee(i,o,s),u=new Array(i.shape.length).fill(0),c=i.shape.slice();return l.map((e=>{const t=[...c];t[s]=e;const r=Khe({inputs:{x:i},backend:n,attrs:{begin:u,size:t}});return u[s]+=e,r}))}},gge=Ace((e=>Math.sqrt(e))),yge=_ce(j2,(e=>Math.sqrt(e))),vge={kernelName:j2,backendName:"cpu",kernelFunc:yge},bge={kernelName:Y2,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n}=e;const{x:r}=t,i=n;Ice(r,"square");const o=i.data.get(r.dataId).values,a=new Float32Array(o.length);for(let s=0;s<o.length;++s){const e=o[s];a[s]=e*e}return{dataId:i.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},xge=Fce(((e,t)=>{const n=e-t;return n*n})),wge=rhe(X2,xge),kge={kernelName:X2,backendName:"cpu",kernelFunc:wge},Sge=Ace(((e,t)=>{const{pattern:n,replaceGlobal:r,rewrite:i}=t;return e.replace(new RegExp(n,r?"g":""),i)})),Ege=Nce(Q2,Sge),Ige={kernelName:Q2,backendName:"cpu",kernelFunc:Ege},Tge=_ce(p3,((e,t)=>{const n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),Cge={kernelName:p3,backendName:"cpu",kernelFunc:Tge};function Age(e,t,n,r){const i=P5(e,t.dtype);for(let o=0;o<i.size;o++){const e=i.indexToLoc(o),a=new Array(e.length);for(let t=0;t<a.length;t++)a[t]=e[t]*n[t]+r[t];i.set(t.get(...a),...e)}return i}const _ge={kernelName:J2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:o,end:a,strides:s,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:h,shrinkAxisMask:d}=r;Ice(i,"stridedSlice");const{finalShapeSparse:p,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:v,end:b,strides:x}=B6(i.shape,o,a,s,l,u,c,h,d);let w;if(m)w=uhe({inputs:{x:i},backend:n,attrs:{shape:f}});else if(g||y){SZ(i.shape.length>=1,(()=>`Input must have rank at least 1, got: ${i.shape.length}`));const e=A6(v,b,x),t=Khe({inputs:{x:i},backend:n,attrs:{begin:v,size:e}});w=uhe({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{const e=Age(p,n.bufferSync(i),x,v);w=n.makeTensorInfo(f,e.dtype,e.values)}return w}};class Nge{constructor(e,t,n,r,i,o){this.separator=q3(e),this.nGramWidths=t,this.leftPad=q3(n),this.rightPad=q3(r),this.padWidth=i,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,r,i,o){for(let a=0;a<i;++a){const s=this.getPadWidth(o),l=Math.max(0,s-a),u=Math.max(0,s-(i-(a+1))),c=o-(l+u),h=t+(l>0?0:a-s);let d=0;d+=l*this.leftPad.length;for(let t=0;t<c;++t)d+=e[h+t].length;d+=u*this.rightPad.length;d+=(l+u+c-1)*this.separator.length,n[r+a]=new Uint8Array(d);const p=n[r+a];let f=0;const m=e=>e.forEach((e=>p[f++]=e));for(let e=0;e<l;++e)m(this.leftPad),m(this.separator);for(let t=0;t<c-1;++t)m(e[h+t]),m(this.separator);if(c>0){m(e[h+c-1]);for(let e=0;e<u;++e)m(this.separator),m(this.rightPad)}else{for(let e=0;e<u-1;++e)m(this.rightPad),m(this.separator);m(this.rightPad)}}}compute(e,t){const n=e.length,r=t.length;if(r>0){let e=t[0];if(0!==e)throw new Error(`First split value must be 0, got ${e}`);for(let i=1;i<r;++i){let r=t[i]>=e;if(r=r&&t[i]<=n,!r)throw new Error(`Invalid split value ${t[i]}, must be in [${e}, ${n}]`);e=t[i]}if(e!==n)throw new Error(`Last split value must be data size. Expected ${n}, got ${e}`)}const i=r-1,o=MZ("int32",r);if(0===n||0===r){const e=new Array(n);for(let t=0;t<=i;++t)o[t]=0;return[e,o]}o[0]=0;for(let s=1;s<=i;++s){const e=t[s]-t[s-1];let n=0;this.nGramWidths.forEach((t=>{n+=this.getNumNGrams(e,t)})),this.preserveShort&&e>0&&0===n&&(n=1),o[s]=o[s-1]+n}const a=new Array(o[i]);for(let s=0;s<i;++s){const n=t[s];let r=o[s];if(this.nGramWidths.forEach((i=>{const o=t[s+1]-t[s],l=this.getNumNGrams(o,i);this.createNGrams(e,n,a,r,l,i),r+=l})),this.preserveShort&&r===o[s]){const i=t[s+1]-t[s];if(0===i)continue;const o=i+2*this.padWidth,l=1;this.createNGrams(e,n,a,r,l,o)}}return[a,o]}}function Oge(e,t,n,r,i,o,a,s){return new Nge(n,r,i,o,a,s).compute(e,t)}const Rge={kernelName:Z2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:i,nGramWidths:o,leftPad:a,rightPad:s,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:h}=t,d=n.data.get(c.dataId).values,p=n.data.get(h.dataId).values,[f,m]=Oge(d,p,i,o,a,s,l,u);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(h.shape,"int32",m)]}};function $ge(e,t,n,r){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)r.push(e.subarray(t,t+1));return}if(1===t.length){const i=t[0];let o=e.indexOf(i);for(;-1!==o;){const t=e.subarray(0,o);n&&0===t.length||r.push(t),o=(e=e.subarray(o+1)).indexOf(i)}return void(n&&0===e.length||r.push(e))}let i=0;for(let o=0;o<e.length+1;o++)if(o===e.length||-1!==t.indexOf(e[o])){const t=e.subarray(i,o);n&&0===t.length||r.push(t),i=o+1}}function Dge(e,t,n){const r=e.length,i=[];let o=0,a=0;const s=new Array(r);for(let d=0;d<r;++d){const r=i.length;$ge(e[d],t,n,i);const l=i.length-r;s[d]=l,o+=l,a=Math.max(a,l)}const l=MZ("int32",2*o),u=new Array(o),c=[r,a];let h=0;for(let d=0;d<r;++d)for(let e=0;e<s[d];++e)l[2*h]=d,l[2*h+1]=e,u[h]=i[h],++h;return[l,u,c]}const Pge={kernelName:e3,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:i}=r,{input:o,delimiter:a}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(1!==o.shape.length)throw new Error(`Input must be a vector, got shape: ${o.shape}`);if(0!==a.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const s=n.data.get(o.dataId).values,l=n.data.get(a.dataId).values[0],[u,c,h]=Dge(s,l,i),d=c.length;return[n.makeTensorInfo([d,2],"int32",u),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(h))]}};function Mge(e,t){const n=MZ("int32",e.length);for(let r=0;r<e.length;++r)n[r]=W3(e[r]).modulo(t).getLowBitsUnsigned();return n}const Fge={kernelName:t3,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:i}=r,{input:o}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const a=Mge(n.data.get(o.dataId).values,i);return n.makeTensorInfo(o.shape,"int32",a)}},Lge=_ce(r3,(e=>Math.tan(e))),jge={kernelName:r3,backendName:"cpu",kernelFunc:Lge},zge=_ce(i3,(e=>Math.tanh(e)));const Bge={kernelName:_2,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{tensor:r,indices:i,updates:o}=t,{sliceRank:a,numUpdates:s,sliceSize:l,strides:u,outputSize:c}=yee(0,i,r.shape),h=n.bufferSync(i),d=n.bufferSync(o),p=n.bufferSync(r),f=Bme(h,d,r.shape,c,l,s,a,u,p,!1);return n.makeTensorInfo(r.shape,f.dtype,f.values)}};function Uge(e,t){const n=new Array(e.rank);for(let i=0;i<n.length;i++)n[i]=e.shape[i]*t[i];const r=P5(n,e.dtype);for(let i=0;i<r.values.length;++i){const t=r.indexToLoc(i),n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=t[r]%e.shape[r];const o=e.locToIndex(n);r.values[i]=e.values[o]}return r}const Wge={kernelName:o3,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reps:o}=r;Ice(i,"tile");const a=Uge(n.bufferSync(i),o);return n.makeTensorInfo(a.shape,a.dtype,a.values)}},Vge=(e,t)=>{const n=t.value-e.value;return 0===n?e.index-t.index:n};function Gge(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;for(;r>n;){if(r-n>600){const i=r-n+1,o=t-n+1,a=Math.log(i),s=.5*Math.exp(2*a/3),l=.5*Math.sqrt(a*s*(i-s)/i)*Math.sign(o-i/2);Gge(e,t,Math.max(n,Math.floor(t-o*s/i+l)),Math.min(r,Math.floor(t+(i-o)*s/i+l)))}const i=e[t];let o=n,a=r;for(kZ(e,n,t),Vge(e[r],i)>0&&kZ(e,n,r);o<a;){for(kZ(e,o,a),o++,a--;Vge(e[o],i)<0;)o+=1;for(;Vge(e[a],i)>0;)a-=1}0===Vge(e[n],i)?kZ(e,n,a):(a+=1,kZ(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}}function Hge(e,t,n,r,i){const o=t[t.length-1],[a,s]=[e.length/o,o],l=PZ(n,a*r),u=PZ("int32",a*r);for(let h=0;h<a;h++){const t=h*s,n=e.subarray(t,t+s);let o=new Array(n.length);n.forEach(((e,t)=>o[t]={value:e,index:t})),r<o.length&&(Gge(o,r),o=o.slice(0,r)),i&&o.sort(Vge);const a=h*r,c=l.subarray(a,a+r),d=u.subarray(a,a+r);for(let e=0;e<r;e++)c[e]=o[e].value,d[e]=o[e].index}const c=t.slice();return c[c.length-1]=r,[P5(c,n,l),P5(c,"int32",u)]}const qge={kernelName:a3,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{k:o,sorted:a}=r;Ice(i,"topk");const s=n.data.get(i.dataId).values,[l,u]=Hge(s,i.shape,i.dtype,o,a);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}};const Kge={kernelName:s3,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{image:i,transforms:o}=t,{interpolation:a,fillMode:s,fillValue:l,outputShape:u}=n,[c,h,d,p]=i.shape,[f,m]=null!=u?u:[h,d],g=[c,f,m,p],y=VZ(i.shape),v=y[0],b=y[1],x=y[2],w=VZ(g),k=w[0],S=w[1],E=w[2],I=PZ(i.dtype,TZ(g));I.fill(l);const T=r.data.get(i.dataId).values,C=r.data.get(o.dataId).values;for(let A=0;A<c;++A){const e=1===o.shape[0]?C:C.subarray(8*A,8*A+8);for(let t=0;t<f;++t)for(let n=0;n<m;++n)for(let r=0;r<p;++r){let i;const o=e[6]*n+e[7]*t+1;if(0===o)continue;const u=(e[0]*n+e[1]*t+e[2])/o,c=(e[3]*n+e[4]*t+e[5])/o,p=Xge(u,d,s),f=Xge(c,h,s);switch(a){case"nearest":i=Qge(T,h,d,v,b,x,A,f,p,r,l);break;case"bilinear":i=Jge(T,h,d,v,b,x,A,f,p,r,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${a}`)}I[A*k+t*S+n*E+r]=i}return r.makeTensorInfo(g,i.dtype,I)}return{dataId:r.write(I,g,i.dtype),shape:i.shape,dtype:i.dtype}}};function Xge(e,t,n){switch(n){case"reflect":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=2*t;n<e&&(n=e*Math.trunc(-n/e)+n),n=n<-t?n+e:-n-1}else if(n>t-1)if(t<=1)n=0;else{const e=2*t;n-=e*Math.trunc(n/e),n>=t&&(n=e-n-1)}return xZ(0,n,t-1)}(e,t);case"wrap":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=t-1;n+=t*(Math.trunc(-n/e)+1)}else if(n>t-1)if(t<=1)n=0;else{const e=t-1;n-=t*Math.trunc(n/e)}return xZ(0,n,t-1)}(e,t);case"nearest":return function(e,t){return xZ(0,e,t-1)}(e,t);default:return function(e){return e}(e)}}function Yge(e,t,n,r,i,o,a,s,l,u,c){return 0<=s&&s<t&&0<=l&&l<n?e[a*r+s*i+l*o+u]:c}function Qge(e,t,n,r,i,o,a,s,l,u,c){return Yge(e,t,n,r,i,o,a,Math.round(s),Math.round(l),u,c)}function Jge(e,t,n,r,i,o,a,s,l,u,c){const h=Math.floor(s),d=Math.floor(l),p=h+1,f=d+1;return(p-s)*((f-l)*Yge(e,t,n,r,i,o,a,h,d,u,c)+(l-d)*Yge(e,t,n,r,i,o,a,h,f,u,c))+(s-h)*((f-l)*Yge(e,t,n,r,i,o,a,p,d,u,c)+(l-d)*Yge(e,t,n,r,i,o,a,p,f,u,c))}function Zge(e,t,n,r){const i=$Z(t,n)[0],o=[1,n[0],1];for(let f=0;f<i;f++)o[0]*=n[f];o[1]=n[i];for(let f=i+1;f<n.length;f++)o[2]*=n[f];const a=new Map,s=new Int32Array(n[i]),l=new o4(o,r,e),u=[],c=1===o[0]&&1===o[2];for(let f=0;f<n[i];f++){let t;if(c)t=e[f].toString();else{const e=[];for(let t=0;t<o[0];t++)for(let n=0;n<o[2];n++)e.push(l.get(t,f,n));t=e.join(",")}const n=a.get(t);if(null!=n)s[f]=n;else{const e=a.size;a.set(t,e),s[f]=e,u.push(f)}}const h=o.slice();h[1]=a.size;const d=new o4(h,r);u.forEach(((e,t)=>{for(let n=0;n<o[0];n++)for(let r=0;r<o[2];r++)d.set(l.get(n,e,r),n,t,r)}));const p=n.slice();return p[i]=h[1],{outputValues:d.values,outputShape:p,indices:s}}const eye={kernelName:u3,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:i}=n,{x:o}=t;Ice(o,"unique");const a=r.data.get(o.dataId).values,{outputValues:s,outputShape:l,indices:u}=Zge(a,i,o.shape,o.dtype);return[r.makeTensorInfo(l,o.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}};const tye={kernelName:c3,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:i}=t;let{axis:o}=r;o<0&&(o+=i.shape.length);const a=i.shape.length,s=i.shape[o],l=new Array(a-1);let u=0;for(let p=0;p<a;p++)p!==o&&(l[u++]=i.shape[p]);const c=new Array(a).fill(0),h=i.shape.slice();h[o]=1;const d=new Array(s);for(let p=0;p<d.length;p++){c[o]=p;const e=Khe({inputs:{x:i},backend:n,attrs:{begin:c,size:h}});d[p]=uhe({inputs:{x:e},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(e)}return d}};const nye={kernelName:h3,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,segmentIds:o}=t,{numSegments:a}=r;Ice(i,"unsortedSegmentSum");const s=[],l=[],u=i.shape.length-o.shape.length;let c=o;for(let d=0;d<u;++d){const e=spe({inputs:{input:c},backend:n,attrs:{dim:d+1}});c=e,l.push(e)}for(let d=0;d<a;++d){const e=V3(d,"int32"),t=n.makeTensorInfo([],"int32",e),r=Kde({inputs:{a:t,b:c},backend:n}),o=the({inputs:{x:r},backend:n,attrs:{dtype:"float32"}}),a=Bde({inputs:{a:o,b:i},backend:n}),u=Wde({inputs:{x:a},backend:n,attrs:{axis:0,keepDims:!1}});s.push(u),l.push(t),l.push(r),l.push(o),l.push(a),l.push(u)}const h=ime({inputs:s,backend:n,attrs:{axis:0}});return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),h}},rye=[phe,mhe,yhe,bhe,lhe,xhe,Ehe,Ihe,The,Che,_he,Ohe,$he,Mhe,Lhe,Uhe,Whe,Vhe,Ghe,dhe,Hhe,Yhe,Zhe,tde,nde,nhe,ode,sde,Yce,lde,pde,mde,gde,yde,vde,bde,xde,kde,Ede,Ide,Tde,Cde,Ade,_de,Ode,Rde,$de,Dde,Pde,Mde,Fde,Lde,Gde,Rce,Hde,Xde,rpe,ape,lpe,hpe,kpe,Epe,Ipe,Ape,Ope,Rpe,$pe,Ppe,Fpe,zpe,Wpe,Dce,Vpe,hde,Hpe,Kpe,Ype,Mce,Zpe,nfe,ife,sfe,ufe,dfe,ffe,yfe,vfe,bfe,kfe,Ife,Tfe,Cfe,Afe,_fe,Nfe,Ofe,Rfe,Pfe,Mfe,jfe,Ufe,Ude,Vfe,Hfe,Kfe,Yfe,Zfe,eme,rme,ome,ame,ume,zce,hme,gme,bme,Ime,Cme,Zce,fpe,_me,Uce,Vce,che,Nme,Ome,Rme,$me,Dme,Pme,Fme,zme,Ume,Gme,Hme,Yme,qce,Jme,ege,nge,Xhe,Bfe,oge,age,lge,cge,dge,pge,fge,mge,vge,bge,kge,Ige,Cge,_ge,Rge,Pge,Fge,vpe,Vde,jge,{kernelName:i3,backendName:"cpu",kernelFunc:zge},Bge,Wge,qge,Kge,She,eye,tye,nye,nme];for(const n of rye)T3(n);const iye={},oye={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function aye(e,t){if(!(e in iye)||null!=t){const n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=null==t?function(e){if(r0().getBool("IS_SAFARI")||"undefined"===typeof OffscreenCanvas||2!==e){if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}return new OffscreenCanvas(300,150)}(e):t;n.addEventListener("webglcontextlost",(t=>{t.preventDefault(),delete iye[e]}),!1),r0().getBool("SOFTWARE_WEBGL_ENABLED")&&(oye.failIfMajorPerformanceCaveat=!1);if(1===e)return n.getContext("webgl",oye)||n.getContext("experimental-webgl",oye);return n.getContext("webgl2",oye)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;iye[e]=n}const n=iye[e];return null==n||n.isContextLost()?(delete iye[e],aye(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),iye[e])}var sye,lye,uye;function cye(e,t){return[t,e]}function hye(e){const t=TZ(e);return _Z(Math.ceil(t/4))}function dye(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function pye(e,t){const n=e;let r,i,o,a,s,l,u,c,h,d;return 2===r0().getNumber("WEBGL_VERSION")?(r=n.R32F,i=n.R16F,o=n.RGBA16F,a=n.RGBA32F,s=n.RED,u=4,c=1,h=n.HALF_FLOAT,d=n.FLOAT,l=n.RGBA8):(r=e.RGBA,i=e.RGBA,o=e.RGBA,a=n.RGBA,s=e.RGBA,u=4,c=4,h=null!=t?t.HALF_FLOAT_OES:null,d=e.FLOAT,l=e.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:a,textureFormatFloat:s,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:h,textureTypeFloat:d}}function fye(e,t){const n=t();return r0().getBool("DEBUG")&&function(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(sye||(sye={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(lye||(lye={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(uye||(uye={}));function mye(e){return!!(r0().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function gye(e,t){return Iye(e,(()=>e.getExtension(t)),'Extension "'+t+'" not supported on this browser.')}const yye=/ERROR: [0-9]+:([0-9]+):/g;function vye(e,t){const n=yye.exec(t);if(null==n)return console.log(`Couldn't parse line number in error: ${t}`),void console.log(e);const r=+n[1],i=e.split("\n"),o=i.length.toString().length+2,a=i.map(((e,t)=>NZ((t+1).toString(),o)+e));let s=0;for(let h=0;h<a.length;h++)s=Math.max(a[h].length,s);const l=a.slice(0,r-1),u=a.slice(r-1,r),c=a.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log(`%c ${NZ(u[0],s)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join("\n"))}function bye(e,t){if(fye(e,(()=>e.validateProgram(t))),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function xye(e,t,n,r,i,o,a){const s=e.getAttribLocation(t,n);return-1!==s&&(fye(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,r))),fye(e,(()=>e.vertexAttribPointer(s,i,e.FLOAT,!1,o,a))),fye(e,(()=>e.enableVertexAttribArray(s))),!0)}function wye(e,t,n,r){fye(e,(()=>function(e,t,n){Tye(e,n),fye(e,(()=>e.activeTexture(e.TEXTURE0+n))),fye(e,(()=>e.bindTexture(e.TEXTURE_2D,t)))}(e,t,r))),fye(e,(()=>e.uniform1i(n,r)))}function kye(e,t,n){fye(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,n))),fye(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)))}function Sye(e,t){fye(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,t))),fye(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)))}function Eye(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}(e,t))}function Iye(e,t,n){const r=fye(e,(()=>t()));if(null==r)throw new Error(n);return r}function Tye(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){throw new Error(`textureUnit must be in ${`[gl.TEXTURE0, gl.TEXTURE${n}]`}.`)}}function Cye(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return TZ(e.slice(0,e.length-t))}function Aye(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function _ye(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[Cye(e),...Aye(e)]),t}function Nye(e){return e%2===0}function Oye(e,t){if(CZ(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){const n=e[e.length-1],r=t[t.length-1];if(n===r)return!0;if(Nye(n)&&Nye(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&Nye(e[0])&&Nye(t[0])}let Rye,$ye;function Dye(e,t){return null!=e.getExtension(t)}function Pye(e){try{if(null!=aye(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function Mye(e){if(0===e)return!1;const t=aye(e);if(1!==e){if(Dye(t,"EXT_color_buffer_float"))return Fye(t);const e="EXT_color_buffer_half_float";if(Dye(t,e)){const n=t.getExtension(e);return function(e,t){const n=pye(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);const i=1,o=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,i,o,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);const s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(a),s}(t,n)}return!1}if(!Dye(t,"OES_texture_float"))return!1;if(!Dye(t,"WEBGL_color_buffer_float"))return!1;return Fye(t)}function Fye(e){const t=pye(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),i}function Lye(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&SZ("complex64"!==e.dtype,(()=>`${t} does not support complex64 tensors in the WebGL backend.`))}))}const jye=r0();function zye(){let e,t,n,r,i,o,a,s,l,u;return 2===r0().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",i="texture",o="outputColor",a="out vec4 outputColor;",s=r0().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",l="",u="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",i="texture2D",o="gl_FragColor",a="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",u="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:i,output:o,defineOutput:a,defineSpecialNaN:s,defineSpecialInf:l,defineRound:u}}function Bye(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=VZ(t);return r.map(((t,i)=>`${`int ${e[i]} = ${n} / ${t}`}; ${i===r.length-1?`int ${e[i+1]} = ${n} - ${e[i]} * ${t}`:`index -= ${e[i]} * ${t}`};`)).join("")}function Uye(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=VZ(t);return r.map(((t,i)=>`${`int ${e[i]} = ${n} / outShapeStrides[${i}]`}; ${i===r.length-1?`int ${e[i+1]} = ${n} - ${e[i]} * outShapeStrides[${i}]`:`index -= ${e[i]} * outShapeStrides[${i}]`};`)).join("")}function Wye(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index";const r=function(e,t){const n=e.length,r=e.map((e=>`${t}[${e}]`)),i=new Array(n-1);i[n-2]=r[n-1];for(let o=n-3;o>=0;--o)i[o]=`(${i[o+1]} * ${r[o+1]})`;return i}(e.map(((e,t)=>t)),t);return r.map(((t,i)=>`${`int ${e[i]} = ${n} / ${r[i]}`}; ${i===r.length-1?`int ${e[i+1]} = ${n} - ${e[i]} * ${r[i]}`:`index -= ${e[i]} * ${r[i]}`};`)).join("")}function Vye(e){const t=VZ(e).map((e=>e.toString()));return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;\n  }\n`}jye.registerFlag("HAS_WEBGL",(()=>jye.getNumber("WEBGL_VERSION")>0)),jye.registerFlag("WEBGL_VERSION",(()=>Pye(2)?2:Pye(1)?1:0)),jye.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(()=>!1)),jye.registerFlag("WEBGL_BUFFER_SUPPORTED",(()=>2===jye.get("WEBGL_VERSION"))),jye.registerFlag("WEBGL_CPU_FORWARD",(()=>!0)),jye.registerFlag("WEBGL_FORCE_F16_TEXTURES",(()=>!1)),jye.registerFlag("WEBGL_PACK",(()=>jye.getBool("HAS_WEBGL"))),jye.registerFlag("WEBGL_PACK_NORMALIZATION",(()=>jye.getBool("WEBGL_PACK"))),jye.registerFlag("WEBGL_PACK_CLIP",(()=>jye.getBool("WEBGL_PACK"))),jye.registerFlag("WEBGL_PACK_DEPTHWISECONV",(()=>jye.getBool("WEBGL_PACK"))),jye.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(()=>jye.getBool("WEBGL_PACK"))),jye.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(()=>jye.getBool("WEBGL_PACK"))),jye.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(()=>jye.getBool("WEBGL_PACK"))),jye.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(()=>jye.getBool("WEBGL_PACK"))),jye.registerFlag("WEBGL_PACK_REDUCE",(()=>jye.getBool("WEBGL_PACK"))),jye.registerFlag("WEBGL_LAZILY_UNPACK",(()=>jye.getBool("WEBGL_PACK"))),jye.registerFlag("WEBGL_CONV_IM2COL",(()=>jye.getBool("WEBGL_PACK"))),jye.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",(()=>jye.getBool("WEBGL_PACK"))),jye.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(()=>function(e){if(null==Rye){const t=aye(e);Rye=t.getParameter(t.MAX_TEXTURE_SIZE)}return Rye}(jye.getNumber("WEBGL_VERSION")))),jye.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(()=>function(e){if(null==$ye){const t=aye(e);$ye=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,$ye)}(jye.getNumber("WEBGL_VERSION")))),jye.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(()=>{const e=jye.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;let t;const n=aye(e);return t=Dye(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:Dye(n,"EXT_disjoint_timer_query")?1:0,t}(e)})),jye.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(()=>jye.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!$4())),jye.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(()=>function(e){if(0===e)return!1;const t=aye(e);if(1===e){if(!Dye(t,"OES_texture_float"))return!1}else if(!Dye(t,"EXT_color_buffer_float"))return!1;return Fye(t)}(jye.getNumber("WEBGL_VERSION")))),jye.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(()=>!jye.getBool("WEBGL_FORCE_F16_TEXTURES")&&jye.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))),jye.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(()=>Mye(jye.getNumber("WEBGL_VERSION")))),jye.registerFlag("WEBGL_FENCE_API_ENABLED",(()=>{return 2===(e=jye.getNumber("WEBGL_VERSION"))&&null!=aye(e).fenceSync;var e})),jye.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(()=>jye.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0)),jye.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(()=>-1),(e=>{if("number"!==typeof e)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${e}.`);if(e<0&&-1!==e)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)})),jye.registerFlag("WEBGL_FLUSH_THRESHOLD",(()=>$4()?1:-1),(e=>{if("number"!==typeof e)throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${e}.`);if(e<0&&-1!==e)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)})),jye.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(()=>128)),jye.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(()=>!1)),jye.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(()=>1e5)),jye.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(()=>128)),jye.registerFlag("WEBGL_EXP_CONV",(()=>!1)),jye.registerFlag("SOFTWARE_WEBGL_ENABLED",(()=>jye.getBool("IS_TEST"))),jye.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",(()=>1/0)),jye.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",(()=>!1)),jye.registerFlag("WEBGL2_ISNAN_CUSTOM",(()=>!1)),jye.registerFlag("ENGINE_COMPILE_ONLY",(()=>!1));const Gye="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:Hye}=i;function qye(e,t,n){const r=[];if(e.forEach((e=>{const t=TZ(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push(`uniform float ${e.name}${t>1?`[${t}]`:""};`):(r.push(`uniform sampler2D ${e.name};`),r.push(`uniform int offset${e.name};`)),n.enableShapeUniforms){const{uniformShape:t}=ive(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape);switch(t.length){case 1:r.push(`uniform int ${e.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${e.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${e.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${e.name}Shape;`)}r.push(`uniform ivec2 ${e.name}TexShape;`)}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((e=>{r.push(`uniform ${e.type} ${e.name}${e.arrayIndex?`[${e.arrayIndex}]`:""};`)}));const i=r.join("\n"),o=e.map((e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i="";i+=n?Xye(e,r):Kye(e,r);const o=e.shapeInfo.logicalShape,a=t.logicalShape;o.length<=a.length&&(i+=n?function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",o=e.shapeInfo.logicalShape.length,a=t.logicalShape.length,s=Hye(e.shapeInfo.logicalShape,t.logicalShape),l=rve(a),u=a-o;let c;const h=["x","y","z","w","u","v"];c=0===o?"":a<2&&s.length>=1?"coords = 0;":s.map((e=>`coords.${h[e+u]} = 0;`)).join("\n");let d="";d=a<2&&o>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>`coords.${h[t+u]}`)).join(", ");let p="return outputValue;";const f=1===TZ(e.shapeInfo.logicalShape),m=TZ(t.logicalShape),g=1===m;if(1!==o||f||g){if(f&&!g)p=1===a?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(s.length){const e=o-2,t=o-1;s.indexOf(e)>-1&&s.indexOf(t)>-1?p="return vec4(outputValue.x);":s.indexOf(e)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(t)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${i}() {\n      ${l} coords = getOutputCoords();\n      ${c}\n      vec4 outputValue = get${r}(${d});\n      ${p}\n    }\n  `}(e,t):function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",o=t.texShape,a=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===l&&null==e.shapeInfo.flatOffset&&CZ(a,o))return`\n      float ${i}() {\n        return sampleTexture(${n}, resultUV);\n      }\n    `;const u=rve(l),c=Hye(e.shapeInfo.logicalShape,t.logicalShape),h=l-s;let d;const p=["x","y","z","w","u","v"];d=0===s?"":l<2&&c.length>=1?"coords = 0;":c.map((e=>`coords.${p[e+h]} = 0;`)).join("\n");let f="";f=l<2&&s>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>`coords.${p[t+h]}`)).join(", ");return`\n    float ${i}() {\n      ${u} coords = getOutputCoords();\n      ${d}\n      return get${r}(${f});\n    }\n  `}(e,t));return i}(e,t,n.packedInputs,n.enableShapeUniforms))).join("\n"),a=t.texShape,s=zye(),l=function(e){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${e.texture2D}(textureSampler, uv).r;\n    }\n  `}(s);let u,c,h=function(e){const t=`${e.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${e.varyingFs} vec2 resultUV;\n    ${e.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${e.defineSpecialNaN}\n    ${e.defineSpecialInf}\n    ${e.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${Yye}\n    ${Qye}\n    ${Jye}\n  `;return t}(s);t.isPacked?(u=function(e,t,n){switch(e.length){case 0:return eve();case 1:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${r[1]}.0);\n      }\n    `;if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${r[0]}.0);\n      }\n    `;if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);\n    }\n  `}(0,t,n);case 2:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(CZ(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));\n      }\n    `;const i=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],i=Math.ceil(e[2]/2),o=i*Math.ceil(e[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      int b = index / ${o};\n      index -= b * ${o};\n\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],i=Math.ceil(e[e.length-1]/2),o=i*Math.ceil(e[e.length-2]/2);let a=o,s="",l="b, r, c";for(let u=2;u<e.length-1;u++)a*=e[e.length-u-1],s=`\n      int b${u} = index / ${a};\n      index -= b${u} * ${a};\n    `+s,l=`b${u}, `+l;return`\n    ivec${e.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      ${s}\n\n      int b = index / ${o};\n      index -= b * ${o};\n\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec${e.length}(${l});\n    }\n  `}(e,t,n)}}(t.logicalShape,a,n.enableShapeUniforms),c=function(e){return`\n    void setOutput(vec4 val) {\n      ${e.output} = val;\n    }\n  `}(s)):(u=function(e,t,n){switch(e.length){case 0:return eve();case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.x * ${t[1]}.0);\n      }\n    `;if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.y * ${t[0]}.0);\n      }\n    `;if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      return resTexRC.x * ${t[1]} + resTexRC.y;\n    }\n  `}(0,t,n);case 2:return function(e,t,n){if(CZ(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));\n      }\n    `;if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `;if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `;if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      int r = index / ${e[1]};\n      int c = index - r * ${e[1]};\n      return ivec2(r, c);\n    }\n  `}(e,t,n);case 3:return function(e,t,n){if(n){return`\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ${Uye(["r","c","d"],e)}\n    return ivec3(r, c, d);\n  }\n`}const r=Bye(["r","c","d"],e);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${r}\n      return ivec3(r, c, d);\n    }\n  `}(e,t,n);case 4:return function(e,t,n){if(n){return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ${Uye(["r","c","d","d2"],e)}\n      return ivec4(r, c, d, d2);\n    }\n  `}const r=Bye(["r","c","d","d2"],e);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${r}\n      return ivec4(r, c, d, d2);\n    }\n  `}(e,t,n);case 5:return function(e,t){const n=Bye(["r","c","d","d2","d3"],e);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},\n                             ${t[1]}));\n\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}(e,t);case 6:return function(e,t){const n=Bye(["r","c","d","d2","d3","d4"],e);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}(e,t);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}(t.logicalShape,a,n.enableShapeUniforms),c=function(e){return`\n    void setOutput(float val) {\n      ${e.output} = vec4(val, 0, 0, 0);\n    }\n  `}(s)),n.packedInputs&&(h+=Zye);return[h,l,c,i,u,o,n.userCode].join("\n")}function Kye(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[i,o]=e.shapeInfo.texShape;if(1===i&&1===o)return`\n      float ${r}() {\n        return sampleTexture(${n}, halfCR);\n      }\n    `;const a=tve(n);if(t)return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${a});\n      return sampleTexture(${n}, uv);\n    }\n  `;const[s,l]=e.shapeInfo.texShape;return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${s}, ${l}, ${a});\n      return sampleTexture(${n}, uv);\n    }\n  `}(e,t);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`\n      float ${r}(int index) {\n        ${nve(e)}\n      }\n    `;const i=e.shapeInfo.texShape,o=i[0],a=i[1];if(1===a&&1===o)return`\n      float ${r}(int index) {\n        return sampleTexture(${n}, halfCR);\n      }\n    `;const s=tve(n);if(1===a)return t?`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / float(${n}TexShape[0]));\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / ${o}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(1===o)return t?`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${s}) + 0.5) / float(${n}TexShape[1]), 0.5);\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${s}) + 0.5) / ${a}.0, 0.5);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(t)return`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${s});\n      return sampleTexture(${n}, uv);\n    }\n  `;return`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${o}, ${a}, index + ${s});\n      return sampleTexture(${n}, uv);\n    }\n  `}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape;if(null!=o&&CZ(n,o)){if(t)return`\n      float ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `;const e=o[0];return`\n    float ${i}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${o[1]}.0, ${e}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `}const{newShape:a,keptDims:s}=DZ(n),l=a;if(l.length<n.length){const n=["row","col"];return`\n      ${Kye(ove(e,l),t)}\n      float ${i}(int row, int col) {\n        return ${i}(${ave(n,s)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${i}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));\n        ${nve(e)}\n      }\n    `;const u=o[0],c=o[1],h=tve(r);if(1===c)return t?`\n      float ${i}(int row, int col) {\n        float index = dot(vec3(row, col, ${h}), vec3(${r}Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${i}(int row, int col) {\n      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `;if(1===u)return t?`\n      float ${i}(int row, int col) {\n        float index = dot(vec3(row, col, ${h}), vec3(${r}Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${i}(int row, int col) {\n      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);\n      return sampleTexture(${r}, uv);\n    }\n  `;if(t)return`\n      float ${i}(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${r}Shape[1] + col + ${h};\n        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\n        return sampleTexture(${r}, uv);\n      }\n    `;return`\n  float ${i}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${n[1]} + col + ${h};\n    vec2 uv = uvFromFlat(${u}, ${c}, index);\n    return sampleTexture(${r}, uv);\n  }\n`}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[1]*n[2],a=n[2],{newShape:s,keptDims:l}=DZ(n),u=s;if(u.length<n.length){const n=["row","col","depth"];return`\n        ${Kye(ove(e,u),t)}\n        float ${i}(int row, int col, int depth) {\n          return ${i}(${ave(n,l)});\n        }\n      `}if(e.shapeInfo.isUniform)return`\n      float ${i}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${o}, ${a}, 1)));\n        ${nve(e)}\n      }\n    `;const c=e.shapeInfo.texShape,h=c[0],d=c[1],p=e.shapeInfo.flatOffset;if(d===o&&null==p)return t?`\n      float ${i}(int row, int col, int depth) {\n        int stride1 = ${r}Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n        float ${i}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${a}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${d}.0, ${h}.0);\n          return sampleTexture(${r}, uv);\n        }\n      `;if(d===a&&null==p)return t?`\n      float ${i}(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${i}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${h}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `;const f=tve(r);if(t)return`\n    float ${i}(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ${r}Shape[1] * ${r}Shape[2];\n      int stride1 = ${r}Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ${f};\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\n      return sampleTexture(${r}, uv);\n    }\n    `;return`\n      float ${i}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${o} + col * ${a} + depth + ${f};\n        vec2 uv = uvFromFlat(${h}, ${d}, index);\n        return sampleTexture(${r}, uv);\n      }\n  `}(e,t);case 4:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[3],a=n[2]*o,s=n[1]*a,{newShape:l,keptDims:u}=DZ(n);if(l.length<n.length){const n=["row","col","depth","depth2"];return`\n      ${Kye(ove(e,l),t)}\n      float ${i}(int row, int col, int depth, int depth2) {\n        return ${i}(${ave(n,u)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${i}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${s}, ${a}, ${o}, 1)));\n        ${nve(e)}\n      }\n    `;const c=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,d=h[0],p=h[1],f=`int stride2 = ${r}Shape[3];`,m=`int stride1 = ${r}Shape[2] * stride2;`,g=`int stride0 = ${r}Shape[1] * stride1;`;if(p===s&&null==c)return t?`\n      float ${i}(int row, int col, int depth, int depth2) {\n        ${f}\n        ${m}\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${a}, ${o}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${p}.0, ${d}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `;if(p===o&&null==c)return t?`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${n[1]*n[2]}, ${n[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${p}.0, ${d}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `;const y=tve(r);if(t)return`\n    float ${i}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ${f}\n      ${m}\n      ${g}\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${y});\n      return sampleTexture(${r}, uv);\n    }\n  `;return`\n    float ${i}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${s} + col * ${a} +\n          depth * ${o} + depth2;\n      vec2 uv = uvFromFlat(${d}, ${p}, index + ${y});\n      return sampleTexture(${r}, uv);\n    }\n  `}(e,t);case 5:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t[4],o=t[3]*i,a=t[2]*o,s=t[1]*a,{newShape:l,keptDims:u}=DZ(t);if(l.length<t.length){const t=["row","col","depth","depth2","depth3"];return`\n      ${Kye(ove(e,l))}\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        return ${r}(${ave(t,u)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${s}, ${a}, ${o}, ${i})) +\n          depth3;\n        ${nve(e)}\n      }\n    `;const c=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,d=h[0],p=h[1];if(p===s&&null==c)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${a}, ${o}, ${i}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${p}.0, ${d}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(p===i&&null==c)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]},\n               ${t[2]*t[3]}, ${t[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${p}.0, ${d}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;const f=tve(n);return`\n    float ${r}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${s} + col * ${a} + depth * ${o} +\n          depth2 * ${i} + depth3 + ${f};\n      vec2 uv = uvFromFlat(${d}, ${p}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}(e);case 6:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:o}=DZ(t);if(i.length<t.length){const t=["row","col","depth","depth2","depth3","depth4"];return`\n      ${Kye(ove(e,i))}\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${r}(${ave(t,o)});\n      }\n    `}const a=t[5],s=t[4]*a,l=t[3]*s,u=t[2]*l,c=t[1]*u;if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${c}, ${u}, ${l}, ${s})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${a}, 1)));\n        ${nve(e)}\n      }\n    `;const h=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],f=d[1];if(f===c&&null==h)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${u}, ${l}, ${s}, ${a})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${f}.0, ${p}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(f===a&&null==h)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]*t[4]},\n               ${t[2]*t[3]*t[4]},\n               ${t[3]*t[4]},\n               ${t[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${f}.0, ${p}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;const m=tve(n);return`\n    float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${c} + col * ${u} + depth * ${l} +\n          depth2 * ${s} + depth3 * ${a} + depth4 + ${m};\n      vec2 uv = uvFromFlat(${p}, ${f}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}(e);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function Xye(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=zye();return`\n    vec4 ${n}() {\n      return ${r.texture2D}(${t}, halfCR);\n    }\n  `}(e);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e.shapeInfo.texShape,o=zye();if(t)return`\n    vec4 ${r}(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ${o.texture2D}(${n}, uv);\n    }\n  `;const a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`\n    vec4 ${r}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${a[0]}, ${a[1]}, index);\n      return ${o.texture2D}(${n}, uv);\n    }\n  `}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,a=o[0],s=o[1],l=zye();if(null!=o&&CZ(n,o))return t?`\n      vec4 ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n\n        return ${l.texture2D}(${r}, uv);\n      }\n    `:`\n      vec4 ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}.0, ${a}.0);\n\n        return ${l.texture2D}(${r}, uv);\n      }\n    `;if(t)return`\n    vec4 ${i}(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ${l.texture2D}(${r}, uv);\n    }\n  `;const u=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=Math.ceil(n[1]/2);return`\n    vec4 ${i}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);\n      return ${l.texture2D}(${r}, uv);\n    }\n  `}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,a=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===n[0]){const r=[1,2],o=["b","row","col"];return`\n        ${Xye(ove(e,n.slice(1)),t)}\n        vec4 ${i}(int b, int row, int col) {\n          return ${i}(${ave(o,r)});\n        }\n      `}const s=zye();if(t)return`\n    vec4 ${i}(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ${s.texture2D}(${r}, uv);\n    }\n  `;const l=a[0],u=a[1],c=Math.ceil(n[2]/2),h=c*Math.ceil(n[1]/2);return`\n    vec4 ${i}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${l}, ${u}, ${h}, ${c}, b, row, col);\n      return ${s.texture2D}(${r}, uv);\n    }\n  `}(e,t);default:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=zye();if(t)return`\n    vec4 ${r}(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ${n}Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${n}, uv);\n    }\n  `;const o=e.shapeInfo.logicalShape,a=o.length,s=e.shapeInfo.texShape,l=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],u=l[0],c=l[1],h=Math.ceil(o[a-1]/2);let d=h*Math.ceil(o[a-2]/2),p="int b, int row, int col",f=`b * ${d} + (row / 2) * ${h} + (col / 2)`;for(let m=2;m<a-1;m++)p=`int b${m}, `+p,d*=o[a-m-1],f=`b${m} * ${d} + `+f;return`\n    vec4 ${r}(${p}) {\n      int index = ${f};\n      int texR = index / ${c};\n      int texC = index - texR * ${c};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});\n      return ${i.texture2D}(${n}, uv);\n    }\n  `}(e,t)}}const Yye="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Qye="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Jye="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Zye="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function eve(){return"\n    int getOutputCoords() {\n      return 0;\n    }\n  "}function tve(e){return`offset${e}`}function nve(e){const t=e.name,n=TZ(e.shapeInfo.logicalShape);return n<2?`return ${t};`:`\n    for (int i = 0; i < ${n}; i++) {\n      if (i == index) {\n        return ${t}[i];\n      }\n    }\n  `}function rve(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function ive(e,t,n){const{newShape:r,keptDims:i}=DZ(t),o=t.length,a=e&&3===o&&1===t[0],s=a?t.slice(1):r,l=!e&&o>1&&!CZ(t,n)&&r.length<o||a;return{useSqueezeShape:l,uniformShape:l?s:t,keptDims:i}}function ove(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function ave(e,t){return t.map((t=>e[t])).join(", ")}function sve(e,t,n,r){const i=n.map(((e,n)=>{const r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),o=i.map((e=>e.shapeInfo)),a={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=qye(i,a,t),l=function(e,t){const n=Iye(e,(()=>e.createShader(e.FRAGMENT_SHADER)),"Unable to create fragment WebGLShader.");if(fye(e,(()=>e.shaderSource(n,t))),fye(e,(()=>e.compileShader(n))),r0().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw vye(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,s),u=e.createProgram(l);return r0().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:l,source:s,webGLProgram:u,inShapeInfos:o,outShapeInfo:a,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(u),Object.assign({program:t,fragmentShader:l,source:s,webGLProgram:u,inShapeInfos:o,outShapeInfo:a},lve(e,t,u)))}function lve(e,t,n){const r=[],i=[];let o,a,s,l=null,u=null;u=e.getUniformLocation(n,"NAN",!1),1===r0().getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(n,"INFINITY",!1));const c=!1;for(const h of t.variableNames){const i={name:h,uniform:e.getUniformLocation(n,h,c),offset:e.getUniformLocation(n,`offset${h}`,c)};t.enableShapeUniforms&&(i.shape=e.getUniformLocation(n,`${h}Shape`,c),i.texShape=e.getUniformLocation(n,`${h}TexShape`,c)),r.push(i)}if(t.enableShapeUniforms&&(o=e.getUniformLocation(n,"outShape",c),s=e.getUniformLocation(n,"outShapeStrides",c),a=e.getUniformLocation(n,"outTexShape",c)),t.customUniforms)for(const h of t.customUniforms)i.push(e.getUniformLocation(n,h.name,c));return{variablesLocations:r,customUniformLocations:i,infLoc:l,nanLoc:u,outShapeLocation:o,outShapeStridesLocation:s,outTexShapeLocation:a}}function uve(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach(((e,n)=>{const r=e.logicalShape,i=t[n],o=i.shape;if(!CZ(r,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${r} and ${o} must match`);if(e.isUniform&&i.isUniform)return;const a=e.texShape,s=i.isUniform?null:i.texData.texShape;if(!CZ(a,s))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${s} must match`)}))}function cve(e){return r0().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}class hve{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=sye.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=zye();this.outputShape=e,this.enableShapeUniforms=cve(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?Uye(["r","c","d"],e):Bye(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${t.output} = result;\n      }\n    `}}class dve{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=sye.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=zye();this.outputShape=e,this.enableShapeUniforms=cve(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?Uye(["r","c","d"],e):Bye(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${t.output} = result;\n      }\n    `}}class pve{constructor(e){this.variableNames=["A"],this.outTexUsage=lye.DOWNLOAD;const t=zye();this.outputShape=e,this.userCode=`\n      ${Gye}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${t.output} = encode_float(x);\n      }\n    `}}class fve{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=lye.DOWNLOAD;const t=zye();this.outputShape=e,this.userCode=`\n      ${Gye}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${t.output} = encode_float(x);\n      }\n    `}}const mve={R:0,G:1,B:2,A:3};class gve{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RGBA";this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=zye();this.outputShape=e,this.enableShapeUniforms=cve(this.outputShape.length);let i="result";t&&(i="floor(result * 255. + 0.5)");let o="";for(let a=0;a<n.length;a++){const e=n[a];o+=`\n          if(offset == ${a}) {\n            result = values[${mve[e]}];\n          }`}this.userCode=`\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":Vye(e)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ${n.length});\n\n        flatIndex = idiv(flatIndex, ${n.length}, 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ${r.texture2D}(A, uv);\n          ${o}\n        }\n        ${r.output} = vec4(${i}, 0., 0., 0.);\n      }\n    `}}class yve{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=zye();this.outputShape=e,this.enableShapeUniforms=cve(this.outputShape.length);let r="",i="result";t&&(i="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let t=0;t<=1;t++){const i=2*o+t;r+=`\n          localCoords = coords;\n          if(localCoords[2] + ${t} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {\n          localCoords[2] += ${t};\n          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {\n            localCoords[1] += ${o};\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ${n.texture2D}(A, uv);\n\n            if (offset == 0) {\n              result[${i}] = values[0];\n            } else if (offset == 1) {\n              result[${i}] = values[1];\n            } else if (offset == 2) {\n              result[${i}] = values[2];\n            } else {\n              result[${i}] = values[3];\n            }\n          }\n        }\n        `}this.userCode=`\n        ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":Vye(e)}\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ${r}\n\n          ${n.output} = ${i};\n        }\n    `}}function vve(e){const t=zye();return function(e,t){const n=Iye(e,(()=>e.createShader(e.VERTEX_SHADER)),"Unable to create vertex WebGLShader.");if(fye(e,(()=>e.shaderSource(n,t))),fye(e,(()=>e.compileShader(n))),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,`${t.version}\n    precision highp float;\n    ${t.attribute} vec3 clipSpacePos;\n    ${t.attribute} vec2 uv;\n    ${t.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`)}function bve(e){return function(e,t){const n=Iye(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return fye(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),fye(e,(()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function xve(e){return function(e,t){const n=Iye(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return fye(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n))),fye(e,(()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Uint16Array([0,1,2,2,1,3]))}function wve(e,t,n,r,i,o){!function(e,t){const n=r0().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0)throw new Error(`Requested texture size [${e}x${t}] is invalid.`);if(e>n||t>n)throw new Error(`Requested texture size [${e}x${t}] greater than WebGL maximum on this browser / GPU [${n}x${n}].`)}(t,n);const a=function(e){return Iye(e,(()=>e.createTexture()),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return fye(e,(()=>e.bindTexture(s,a))),fye(e,(()=>e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE))),fye(e,(()=>e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE))),fye(e,(()=>e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST))),fye(e,(()=>e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST))),1===r0().getNumber("WEBGL_VERSION")?fye(e,(()=>e.texImage2D(s,0,r,t,n,0,i,o,null))):fye(e,(()=>e.texStorage2D(s,1,r,t,n))),fye(e,(()=>e.bindTexture(e.TEXTURE_2D,null))),{texture:a,texShape:[n,t]}}function kve(e){return e.internalFormatFloat}function Sve(e){return e.internalFormatHalfFloat}function Eve(e){return e.downloadTextureFormat}function Ive(e){return e.internalFormatPackedFloat}function Tve(e){return e.internalFormatPackedHalfFloat}function Cve(e,t,n,r,i,o,a,s){const l=e,u=new Float32Array(function(e,t){const[n,r]=dye(e,t);return n*r*4}(o,a));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}class Ave{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const t=r0().getNumber("WEBGL_VERSION");if(null!=e?(this.gl=e,function(e,t){iye[e]=t}(t,e)):this.gl=aye(t),e=this.gl,2===r0().getNumber("WEBGL_VERSION")){const t=e;this.createVertexArray=()=>fye(t,(()=>t.createVertexArray())),this.bindVertexArray=e=>fye(t,(()=>t.bindVertexArray(e))),this.deleteVertexArray=e=>fye(t,(()=>t.deleteVertexArray(e))),this.getVertexArray=()=>fye(t,(()=>t.getParameter(t.VERTEX_ARRAY_BINDING)))}else if(null!=e){const t=e.getExtension("OES_vertex_array_object");if(null==t)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>fye(e,(()=>t.createVertexArrayOES())),this.bindVertexArray=n=>fye(e,(()=>t.bindVertexArrayOES(n))),this.deleteVertexArray=n=>fye(e,(()=>t.deleteVertexArrayOES(n))),this.getVertexArray=()=>fye(e,(()=>e.getParameter(t.VERTEX_ARRAY_BINDING_OES)))}let n="WEBGL_color_buffer_float";const r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===r0().getNumber("WEBGL_VERSION")){const e="OES_texture_float",t="OES_texture_half_float";if(this.textureFloatExtension=gye(this.gl,e),Dye(this.gl,t))this.textureHalfFloatExtension=gye(this.gl,t);else if(r0().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),Dye(this.gl,r))this.colorBufferHalfFloatExtension=gye(this.gl,r);else if(r0().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",Dye(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!Dye(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=bve(this.gl),this.indexBuffer=xve(this.gl),this.framebuffer=function(e){return Iye(e,(()=>e.createFramebuffer()),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=pye(this.gl,this.textureHalfFloatExtension)}get debug(){return r0().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;fye(e,(()=>e.finish())),fye(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,null))),fye(e,(()=>e.deleteFramebuffer(this.framebuffer))),fye(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,null))),fye(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null))),fye(e,(()=>e.deleteBuffer(this.indexBuffer))),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[i,o]=cye(t,n);return wve(e,i,o,kve(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[i,o]=cye(t,n);return wve(e,i,o,Sve(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[i,o]=cye(t,n);return wve(e,i,o,Eve(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),function(e,t,n){fye(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),n.data instanceof Uint8Array?2===r0().getNumber("WEBGL_VERSION")?fye(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data))):fye(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data))):2===r0().getNumber("WEBGL_VERSION")?fye(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n))):fye(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n))),fye(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,i,o){let a,s,l;fye(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),i instanceof Uint8Array?(a=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,l=e.RGBA):(a=new Float32Array(n*r*4),s=e.FLOAT,l=o.internalFormatPackedFloat),a.set(i),2===r0().getNumber("WEBGL_VERSION")?fye(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,a))):fye(e,(()=>e.texImage2D(e.TEXTURE_2D,0,l,n,r,0,e.RGBA,s,a))),fye(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[i,o]=dye(t,n);return wve(e,i,o,Tve(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[i,o]=dye(t,n);return wve(e,i,o,Ive(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(Sye(this.gl,this.framebuffer),this.outputTexture=null),fye(this.gl,(()=>this.gl.deleteTexture(e)))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n,r){const[i,o]=cye(t,n),a=new Uint8Array(t*n*4);return fye(e,(()=>e.readPixels(0,0,i,o,r.downloadTextureFormat,e.UNSIGNED_BYTE,a))),new Float32Array(a.buffer)}(this.gl,t,n,this.textureConfig)))}downloadPackedMatrixFromBuffer(e,t,n,r,i,o){return Cve(this.gl,e,0,0,0,i,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return function(e,t,n){const r=e,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);const r=function(e,t,n){const r=e.createBuffer();fye(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,r)));const i=16*t*n;return fye(e,(()=>e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ))),fye(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0))),fye(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null))),r}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if(r0().getBool("WEBGL_FENCE_API_ENABLED")){const r=e,i=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{const e=r.clientWaitSync(i,0,0);return e===r.ALREADY_SIGNALED||e===r.CONDITION_SATISFIED},t=i}else r0().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,r0().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n){const r=new Float32Array(t*n*4);return fye(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r))),r}(this.gl,t,n)))}createProgram(e){this.throwIfDisposed();const t=this.gl;null==this.vertexShader&&(this.vertexShader=vve(t));const n=function(e){return Iye(e,(()=>e.createProgram()),"Unable to create WebGLProgram.")}(t);fye(t,(()=>t.attachShader(n,this.vertexShader))),fye(t,(()=>t.attachShader(n,e))),function(e,t){if(fye(e,(()=>e.linkProgram(t))),!r0().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,n);const r=Object.assign(n,{vao:this.createVertexArray()});return this.debug&&bye(t,r),r}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const t=this.gl;fye(t,(()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer))),function(e,t,n){fye(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),xye(e,t,"clipSpacePos",n,3,20,0)&&xye(e,t,"uv",n,2,20,12)}(t,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&(fye(this.gl,(()=>this.gl.deleteProgram(e))),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&bye(this.gl,this.program),fye(this.gl,(()=>this.gl.useProgram(e)))}getUniformLocation(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?function(e,t,n){return Iye(e,(()=>e.getUniformLocation(t,n)),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),fye(this.gl,(()=>this.gl.getAttribLocation(e,t)))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),wye(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();const[r,i]=dye(t,n);this.setOutputMatrixTextureDriver(e,r,i)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&bye(this.gl,this.program),Eye(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}fye(e,(()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),fye(this.gl,(()=>this.gl.finish()))}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=gye(this.gl,2===r0().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===r0().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===r0().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await OZ((()=>this.disposed||this.isQueryAvailable(e,r0().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")))),this.getQueryTime(e,r0().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{const t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise((t=>{this.addItemToPoll((()=>e.isFencePassed()),(()=>t()))}))}pollItems(){const e=function(e){let t=0;for(;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((e=>e.isDoneFn)));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let n;"setTimeoutCustom"in r0().platform&&(n=r0().platform.setTimeoutCustom.bind(r0().platform)),OZ((()=>(this.pollItems(),0===this.itemsToPoll.length)),(()=>0),null,n)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),kye(this.gl,e,this.framebuffer),this.debug&&Eye(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(kye(this.gl,this.outputTexture,this.framebuffer),this.debug&&Eye(this.gl)):Sye(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();const r=this.gl;kye(r,e,this.framebuffer),this.debug&&Eye(r),this.outputTexture=e,fye(r,(()=>r.viewport(0,0,t,n))),fye(r,(()=>r.scissor(0,0,t,n)))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),fye(this.gl,(()=>this.gl.scissor(e,t,n,r)))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}const{mx:_ve,XI:Nve,Nk:Ove,f6:Rve,ct:$ve,YG:Dve,hH:Pve,z3:Mve,sG:Fve,uM:Lve,vS:jve,qB:zve,GG:Bve,rq:Uve,lg:Wve,WR:Vve,cu:Gve,GE:Hve,px:qve,jC:Kve,He:Xve,hE:Yve,BF:Qve,Dk:Jve,cl:Zve,_B:ebe,ub:tbe,_f:nbe,Ku:rbe,qy:ibe,Zy:obe,bu:abe,zv:sbe,dH:lbe,HS:ube,yH:cbe,l3:hbe,z9:dbe,x6:pbe,_m:fbe,eW:mbe,GK:gbe,SP:ybe,yr:vbe,dl:bbe,Dw:xbe,xT:wbe,_X:kbe,wz:Sbe}=o;function Ebe(e,t){return["x","y","z","w","u","v"].slice(0,t).map((t=>`${e}.${t}`))}function Ibe(e,t){return 1===t?[e]:Ebe(e,t)}class Tbe{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=cve(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const e=Ibe("rc",this.rank),t=rve(this.rank),n=this.getOutOfBoundsCondition(e),r=this.getSetup(e),i=this.getOutput(e);this.userCode=`\n        void main() {\n          ${t} rc = getOutputCoords();\n\n          if(${n}) {\n            setOutput(vec4(0));\n          } else {\n            ${r}\n\n            setOutput(vec4(${i}));\n          }\n        }\n      `}}getSourceCoordsArr(e){const t=[];for(let n=0;n<=1;n++)for(let r=0;r<=1;r++){let i=`${0===n?"r":"rp1"}, ${0===r?"c":"cp1"}`;for(let t=2;t<this.rank;t++)i=`${e[e.length-1-t]},`+i;t.push(i)}return t}getOutOfBoundsCondition(e){if(1===this.rank)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let t="";for(let n=this.rank-2;n<this.rank;n++)t+=`${e[n]} >= ${this.enableShapeUniforms?`outShape[${n}]`:this.outputShape[n]}`,n<this.rank-1&&(t+="||");return t}getSetup(e){if(1===this.rank)return"";const t=e.slice(-2),n=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],r=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`\n      int r = ${t[0]};\n      int c = ${t[1]};\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ${n};\n      bool rEdge = rp1 >= ${r};\n    `}getOutput(e){const t=this.getSourceCoordsArr(e);if(1===this.rank){return`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`}return`getA(${t[0]}),\n            cEdge ? 0. : getA(${t[1]}),\n            rEdge ? 0. : getA(${t[2]}),\n            rEdge || cEdge ? 0. : getA(${t[3]})`}}class Cbe{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=cve(this.outputShape.length);let n="";for(let r=0;r<4;r++){let e="thisRC = rc;";r%2===1&&(e+="thisRC.z += 1;"),r>1&&(e+="thisRC.y += 1;"),n+=`\n        ${e}\n        ${r>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${r}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${r>0?"}":""}\n      `}this.userCode=`\n      ${function(e,t){const n=t?Wye(["r","c","d"],"inputShape"):Bye(["r","c","d"],e);return`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${n}\n      return ivec3(r, c, d);\n    }\n  `}(t,this.enableShapeUniforms)}\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":Vye(e)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};\n        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};\n\n        ${n}\n\n        setOutput(result);\n      }\n    `}}class Abe{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,t,n){const r=Nbe(t,n),i=Obe(e,r,n);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const o=_be(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const e=this.freeTextures[i].pop();return this.usedTextures[i].push(e),e}let a;return r===uye.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===uye.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===uye.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===uye.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===uye.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(a),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),a}releaseTexture(e,t,n,r){if(null==this.freeTextures)return;const i=Nbe(n,r),o=Obe(t,i,r);o in this.freeTextures||(this.freeTextures[o]=[]);const a=_be(t,i,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=r0().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const l=this.usedTextures[o],u=l&&l.indexOf(e);if(null==u||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l[u]=l[l.length-1],l.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));for(const e in this.usedTextures)this.usedTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function _be(e,t,n,r,i){const o=function(e,t){switch(e){case uye.PACKED_2X2_FLOAT32:return Ive(t);case uye.PACKED_2X2_FLOAT16:return Tve(t);case uye.UNPACKED_FLOAT32:return kve(t);case uye.UNPACKED_FLOAT16:return Sve(t);case uye.PACKED_4X1_UNSIGNED_BYTE:return Eve(t);default:throw new Error(`Unknown physical texture type ${e}`)}}(t,r);let a;if(i){const[t,n]=dye(e[0],e[1]);a=t*n}else{const[t,n]=cye(e[0],e[1]);a=t*n}const s=function(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error(`Unknown internal format ${t}`)}(n,o);return a*s}function Nbe(e,t){if(e===lye.UPLOAD)return uye.PACKED_2X2_FLOAT32;if(e===lye.RENDER||null==e)return function(e){return r0().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?uye.PACKED_2X2_FLOAT32:uye.UNPACKED_FLOAT32:e?uye.PACKED_2X2_FLOAT16:uye.UNPACKED_FLOAT16}(t);if(e===lye.DOWNLOAD||e===lye.PIXELS)return uye.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function Obe(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}class Rbe{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=cve(this.outputShape.length),this.userCode=`\n      float unaryOperation(float x) {\n        ${t}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}const $be="if (isnan(x)) return x;",Dbe="return abs(x);";const Pbe=$be+"\n  return (x < 0.0) ? 0.0 : x;\n",Mbe=$be+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",Fbe="return x;";class Lbe{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=cve(this.outputShape.length),this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${t}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}class jbe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=cve(this.outputShape.length);const t=e.length,n=Ibe("rc",t),r=rve(t),i=function(e,t){if(1===e)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),o=n.slice(-2),a=t<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`\n      void main() {\n        ${r} rc = getOutputCoords();\n        vec4 packedInput = getA(${i});\n\n        setOutput(getChannel(packedInput, ${a}));\n      }\n    `}}const zbe=lte,Bbe={};const Ube=r0().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");class Wbe extends yZ{nextDataId(){return Wbe.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!r0().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(null!=e){if(e instanceof Ave)t=e;else{const n=aye(r0().getNumber("WEBGL_VERSION"),e);t=new Ave(n)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const e=aye(r0().getNumber("WEBGL_VERSION"));t=new Ave(e),this.binaryCache=((n=r0().getNumber("WEBGL_VERSION"))in Bbe||(Bbe[n]={}),Bbe[n]),this.gpgpuCreatedLocally=!0}var n;this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new Abe(this.gpgpu),this.numMBBeforeWarning=null==r0().global.screen?1024:r0().global.screen.height*r0().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new gZ(this,H4())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,t,n,r,i,o){const a=this.makeTensorInfo(t,n),s=this.texData.get(a.dataId);s.isPacked=!1,s.texture={texture:e,texShape:[r,i]},s.texShape=[r,i];const l=_ye(t),u=new gve(l,!1,o),c=this.runWebGLProgram(u,[a],n,[[r,i]]);return c.shape=t,s.texture=null,this.disposeIntermediateTensorInfo(a),c.dataId}write(e,t,n){if((r0().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||r0().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:lye.UPLOAD,refCount:1}),r}refCount(e){if(this.texData.has(e)){return this.texData.get(e).refCount}return 0}incRef(e){this.texData.get(e).refCount++}decRef(e){if(this.texData.has(e)){this.texData.get(e).refCount--}}move(e,t,n,r,i){if(r0().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:lye.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:n,dtype:r,complexTensorInfos:i,slice:o,shape:a,isPacked:s}=t;if(null!=o){let t;t=s?new Lbe(a,Fbe):new Rbe(a,Fbe);const n=this.runWebGLProgram(t,[{dataId:e,shape:a,dtype:r}],r),i=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),i}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;const l=null!=this.activeTimers;let u,c;if(l&&(u=H3()),"complex64"===r){c=Tee(this.readSync(i.real.dataId),this.readSync(i.imag.dataId))}else c=this.getValuesFromTexture(e);return l&&(this.downloadWaitMs+=H3()-u),this.convertAndCacheOnCPU(e,c)}async read(e){if(this.pendingRead.has(e)){const t=this.pendingRead.get(e);return new Promise((e=>t.push(e)))}const t=this.texData.get(e),{values:n,shape:r,slice:i,dtype:o,complexTensorInfos:a,isPacked:s}=t;if(null!=i){let t;t=s?new Lbe(r,Fbe):new Rbe(r,Fbe);const n=this.runWebGLProgram(t,[{dataId:e,shape:r,dtype:o}],o),i=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),i}if(null!=n)return this.convertAndCacheOnCPU(e);if(r0().getBool("DEBUG")&&!r0().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===r0().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l,u,c=null;if("complex64"!==o&&r0().get("WEBGL_BUFFER_SUPPORTED")){l=this.decode(e);const t=this.texData.get(l.dataId);c=this.gpgpu.createBufferFromTexture(t.texture.texture,...hye(r))}if(this.pendingRead.set(e,[]),"complex64"!==o&&await this.gpgpu.createAndWaitForFence(),"complex64"===o){const e=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]);u=Tee(e[0],e[1])}else if(null==c)u=this.getValuesFromTexture(e);else{const e=TZ(r);u=this.gpgpu.downloadFloat32MatrixFromBuffer(c,e)}if(null!=l&&this.disposeIntermediateTensorInfo(l),null!=c){const e=this.gpgpu.gl;fye(e,(()=>e.deleteBuffer(c)))}const h=this.convertAndCacheOnCPU(e,u),d=this.pendingRead.get(e);return this.pendingRead.delete(e),d.forEach((e=>e(h))),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&H4().removeDataId(e,this),this.pendingDeletes--),h}readToGPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.texData.get(e),{values:r,shape:i,slice:o,dtype:a,isPacked:s,texture:l}=n;if("complex64"===a)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=o){let n;n=s?new Lbe(i,Fbe):new Rbe(i,Fbe);const r=this.runWebGLProgram(n,[{dataId:e,shape:i,dtype:a}],a),o=this.readToGPU(r,t);return this.disposeIntermediateTensorInfo(r),o}if(null==l)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,t.customTexShape),c=H4().makeTensorFromTensorInfo(u),h=this.texData.get(u.dataId);return Object.assign({tensorRef:c},h.texture)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map((e=>K3(e)));return P5(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return P5(e.shape,e.dtype,t)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){const n=e[t];if(!mye(n)){if(r0().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error(`The value ${n} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`);throw Error(`The value ${n} cannot be represented on this device.`)}}}getValuesFromTexture(e){const{shape:t,dtype:n,isPacked:r}=this.texData.get(e),i=TZ(t);if(r0().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(e),r=this.texData.get(n.dataId),o=this.gpgpu.downloadMatrixFromPackedTexture(r.texture.texture,...hye(t)).subarray(0,i);return this.disposeIntermediateTensorInfo(n),o}const o=r0().getBool("WEBGL_PACK")&&!0===r,a=o?_ye(t):t,s=o?new fve(a):new pve(a),l=this.runWebGLProgram(s,[{shape:a,dtype:n,dataId:e}],"float32"),u=this.texData.get(l.dataId),c=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(l),c}timerAvailable(){return r0().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const t=this.activeTimers,n=[];let r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e();const i=Y3(this.activeTimers.map((e=>e.query))).filter((e=>null!=e)),o=Y3(this.activeTimers.map((e=>e.name))).filter((e=>null!=e));this.activeTimers=t,r&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(r0().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const e=await Promise.all(i);a.kernelMs=function(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}(e),a.getExtraProfileInfo=()=>e.map(((e,t)=>({name:o[t],ms:e}))).map((e=>`${e.name}: ${e.ms}`)).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return r0().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:H3(),endMs:null}}endTimer(e){return r0().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=H3(),e)}async getQueryTime(e){if(r0().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:n,texShape:r,usage:i,isPacked:o,slice:a}=this.texData.get(e),s=a&&a.origDataId||e,l=this.dataRefCount.get(s);l>1?this.dataRefCount.set(s,l-1):(this.dataRefCount.delete(s),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,i,o)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ube;return r0().getBool("WEBGL_CPU_FORWARD")&&e.every((e=>null==this.texData.get(e.dataId).texture&&TZ(e.shape)<t))}getGPGPUContext(){return this.gpgpu}where(e){b3("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return zbe(e.shape,t)}packedUnaryOp(e,t,n){const r=new Lbe(e.shape,t),i=this.compileAndRun(r,[e],n);return H4().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const t=lbe(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(r0().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Dbe,e.dtype);const t=new Rbe(e.shape,Dbe),n=this.compileAndRun(t,[e]);return H4().makeTensorFromTensorInfo(n)}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&jZ(n[0])){const i=n.map((e=>q3(e)));r=this.write(i,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(e,t,n){return H4().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}unpackTensor(e){const t=new jbe(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new Tbe(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const n=[Cye(e.shape),...Aye(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},i=[Cye(t),...Aye(t)],o=new Cbe(i,n),a=[n],s=this.runWebGLProgram(o,[r],e.dtype,a,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}decode(e,t){const n=this.texData.get(e),{isPacked:r,shape:i,dtype:o}=n;if(null!=t){SZ(TZ(i)<=t[0]*t[1]*4,(()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."))}const a=_ye(i);let s;s=r?new dve(a):new hve(a);const l=[null!=t?t:hye(a)];return{dtype:o,shape:i,dataId:this.runWebGLProgram(s,[{shape:a,dtype:o,dataId:e}],o,l,!0,t).dataId}}runWebGLProgram(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0;const a=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(a.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===sye.DENSE){const t=null!=o?o:hye(e.outputShape);s.texShape=t.map((e=>2*e))}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===TZ(a.shape))return s.values=PZ(a.dtype,0),a;const l=[],u=t.map((t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&TZ(t.shape)<=r0().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(this.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),l.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!Oye(n.shape,t.shape)){const e=t,r=t.shape;t.shape=n.shape,t=this.packedReshape(t,r),l.push(t),n=this.texData.get(t.dataId),e.shape=r}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(a.dataId);const c={shape:a.shape,texData:s,isUniform:!1},h=function(e,t,n){let r="";t.concat(n).forEach((t=>{const i=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){const o=t.texData.texShape,{useSqueezeShape:a,uniformShape:s,keptDims:l}=ive(e.packedInputs,t.shape,o);let u="",c="",h="";if(1===s.length&&e.packedInputs){const e=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];u=`${e[0]>1}_${e[1]>1}`}else if(2!==s.length||e.packedInputs){if(s.length>2&&!e.packedInputs){const e=VZ(s);h=`${e[0]===o[1]}_${e[e.length-1]===o[1]}`}}else c=`${s[0]>1}_${s[1]>1}`;const d=t.shape.length,p=2===s.length&&CZ(t.shape,o),f=1===TZ(t.shape),m=s6(t.shape,n.shape),g=!e.packedInputs&&d===n.shape.length&&CZ(o,n.texData.texShape),y=e.packedInputs||s.length>2?"":`${o[0]>1}_${o[1]>1}`;r+=`${d}_${g}_${a?l:""}_${s.length}_${f}_${m}_${p}_${u}_${c}_${h}_${y}_${i}`}else{const e=t.isUniform?"uniform":t.texData.texShape;r+=`${t.shape}_${e}_${i}`}}));const i=e.userCode;let o=e.constructor.name;return o+="_"+r+"_"+i+`${r0().getNumber("WEBGL_VERSION")}`,o}(e,u,c),d=this.getAndSaveBinary(h,(()=>sve(this.gpgpu,e,u,c))),p=null!=this.activeTimers;let f;p&&(f=this.startTimer()),r0().get("ENGINE_COMPILE_ONLY")||function(e,t,n,r,i){t.program.enableShapeUniforms||(uve(t.inShapeInfos,n),uve([t.outShapeInfo],[r]));const o=r.texData.texture,a=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(o.texture,a[0],a[1]):e.setOutputMatrixTexture(o.texture,a[0],a[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),1===r0().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN);for(let l=0;l<n.length;++l){const r=n[l],{uniform:i,offset:o,shape:a,texShape:s}=t.variablesLocations[l];if(a){const{uniformShape:n}=ive(t.program.packedInputs,r.shape,r.texData.texShape);switch(n.length){case 1:e.gl.uniform1iv(a,new Int32Array(n));break;case 2:e.gl.uniform2iv(a,new Int32Array(n));break;case 3:e.gl.uniform3iv(a,new Int32Array(n));break;case 4:e.gl.uniform4iv(a,new Int32Array(n))}}if(s&&e.gl.uniform2i(s,r.texData.texShape[0],r.texData.texShape[1]),null!=i)if(r.isUniform)if(TZ(r.shape)<2)e.gl.uniform1f(i,r.uniformValues[0]);else{let t=r.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(i,t)}else null!=r.texData.slice&&null!=o&&e.gl.uniform1i(o,r.texData.slice.flatOffset),e.setInputMatrixTexture(r.texData.texture.texture,i,l)}const s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){const n=VZ(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(n));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(n));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(n))}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&i)for(let l=0;l<t.program.customUniforms.length;++l){const n=t.program.customUniforms[l],r=t.customUniformLocations[l],o=i[l];if("float"===n.type)e.gl.uniform1fv(r,o);else if("vec2"===n.type)e.gl.uniform2fv(r,o);else if("vec3"===n.type)e.gl.uniform3fv(r,o);else if("vec4"===n.type)e.gl.uniform4fv(r,o);else if("int"===n.type)e.gl.uniform1iv(r,o);else if("ivec2"===n.type)e.gl.uniform2iv(r,o);else if("ivec3"===n.type)e.gl.uniform3iv(r,o);else{if("ivec4"!==n.type)throw Error(`uniform type ${n.type} is not supported yet.`);e.gl.uniform4iv(r,o)}}e.executeProgram()}(this.gpgpu,d,u,c,r),l.forEach((e=>this.disposeIntermediateTensorInfo(e))),p&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)}));const m=r0().getNumber("WEBGL_FLUSH_THRESHOLD");if(m>0){const e=H3();e-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!r0().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===i){const e=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),e}return a}compileAndRun(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;return this.runWebGLProgram(e,t,n,r,i)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!r0().getBool("IS_TEST")){Object.keys(this.binaryCache).forEach((e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}))}this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=K4((()=>{if(!r0().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=r0().getBool("DEBUG");r0().set("DEBUG",!1);const t=this.abs(q5(1e-8)).dataSync()[0];if(r0().set("DEBUG",e),t>0)return 32}return 16}))),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){const t=this.texData.get(e),{shape:n,dtype:r,values:i,texture:o,usage:a,isPacked:s}=t;if(null!=o)return;const l=null!=this.activeTimers;let u;l&&(u=H3());let c=t.texShape;if(null==c&&(c=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=r0().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=r0().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(r===1/0&&r0().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n*=2,r*=2,1===(e=e.map(((t,n)=>n>=e.length-2?wZ(e[n]):e[n]))).length&&(e=[2,e[0]])),2!==e.length){const t=DZ(e);e=t.newShape}let i=TZ(e),o=null;e.length<=1&&i<=n?o=[1,i]:2===e.length&&e[0]<=n&&e[1]<=n?o=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?o=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?o=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?o=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(o=[e[0],e[1]*e[2]*e[3]]);const a=null!=o&&Math.max(...o)>r&&Math.min(...o)<=(t?2:1)&&Math.min(...o)>0;if(null==o||a)if(t){const t=Cye(e);let n=2,r=2;e.length&&([n,r]=Aye(e)),i=t*(n/2)*(r/2),o=_Z(i).map((e=>2*e))}else o=_Z(i);return o}(n,s),t.texShape=c),null!=i){const e=_ye(n);let o,a=c[1],h=c[0];const d=i instanceof Uint8Array||i instanceof Uint8ClampedArray;!s&&d||([a,h]=dye(c[0],c[1])),o=s?new yve(e,d):new gve(e,d);const p=d?[h,a]:c,f=this.makeTensorInfo(p,r),m=this.texData.get(f.dataId);m.usage=d?lye.PIXELS:lye.UPLOAD,m.texShape=p,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(f.dataId),a,h,i);const g=[[h,a]],y=!0,v=this.runWebGLProgram(o,[f],r,g,y),b=this.texData.get(v.dataId);t.texShape=b.texShape,t.isPacked=b.isPacked,t.usage=b.usage,r0().get("ENGINE_COMPILE_ONLY")?this.disposeData(v.dataId):(t.texture=b.texture,t.values=null,this.texData.delete(v.dataId)),this.disposeIntermediateTensorInfo(f),l&&(this.uploadWaitMs+=H3()-u)}else{const e=this.acquireTexture(c,a,r,s);t.texture=e}}convertAndCacheOnCPU(e,t){const n=this.texData.get(e),{dtype:r}=n;return null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error(`Unknown dtype ${t}`)}(t,r)),n.values}acquireTexture(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${e} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,t,r)}computeBytes(e,t){return e[0]*e[1]*LZ(t)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}for(const[,t]of Object.entries(this.binaryCache)){const n=new Promise((e=>{try{this.checkCompletion_(t),e(!0)}catch(n){throw n}}));e.push(n)}return Promise.all(e)}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await J8(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw vye(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:t,customUniformLocations:n,infLoc:r,nanLoc:i,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:s}=lve(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=t,e.customUniformLocations=n,e.infLoc=r,e.nanLoc=i,e.outShapeLocation=o,e.outShapeStridesLocation=a,e.outTexShapeLocation=s}}createTensorFromGPUData(e,t,n){e.channels=e.channels||"RGBA";const{texture:r,height:i,width:o,channels:a}=e,s=H4().backend;if(!s.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const l=s.writeTexture(r,t,n,i,o,a);return H4().makeTensorFromDataId(l,t,n,s)}}Wbe.nextDataId=0;D4()&&Q4("webgl",(()=>new Wbe),2);const Vbe="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";class Gbe{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=u6(t,n),this.enableShapeUniforms=cve(this.outputShape.length),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${e}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}}const Hbe="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n";class qbe{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=u6(t,n);const i=this.outputShape.length;this.enableShapeUniforms=cve(i);let o="";if(r)if(0===i||1===TZ(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{if(o=`\n          ${rve(i)} coords = getOutputCoords();\n        `,1===i)this.enableShapeUniforms?o+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":o+=`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{const e=Ibe("coords",i);this.enableShapeUniforms?o+=`\n            bool nextRowOutOfBounds =\n              (${e[i-2]} + 1) >= outShape[${i} - 2];\n            bool nextColOutOfBounds =\n              (${e[i-1]} + 1) >= outShape[${i} - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `:o+=`\n            bool nextRowOutOfBounds =\n              (${e[i-2]} + 1) >= ${this.outputShape[i-2]};\n            bool nextColOutOfBounds =\n              (${e[i-1]} + 1) >= ${this.outputShape[i-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${e}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${o}\n\n        setOutput(result);\n      }\n    `}}function Kbe(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const Xbe={kernelName:S1,backendName:"webgl",kernelFunc:Kbe};function Ybe(e){const{inputs:t,backend:n}=e,{real:r,imag:i}=t,o=n.makeTensorInfo(r.shape,"complex64"),a=n.texData.get(o.dataId),s=Kbe({inputs:{x:r},backend:n}),l=Kbe({inputs:{x:i},backend:n});return a.complexTensorInfos={real:s,imag:l},o}const Qbe={kernelName:D0,backendName:"webgl",kernelFunc:Ybe},Jbe="return (a < 0.) ? b * a : a;",Zbe="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const exe={kernelName:_1,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{alpha:o}=r,a=n.makeTensorInfo([],"float32",V3(o,"float32")),s=r0().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new qbe(Zbe,i.shape,a.shape):new Gbe(Jbe,i.shape,a.shape),l=n.runWebGLProgram(s,[i,a],"float32");return n.disposeIntermediateTensorInfo(a),l}},txe="return (a < 0.) ? b * a : a;",nxe="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const rxe={kernelName:c2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r,alpha:i}=t,o=r0().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new qbe(nxe,r.shape,i.shape):new Gbe(txe,r.shape,i.shape);return n.runWebGLProgram(o,[r,i],"float32")}},ixe="if (isnan(x)) return x;";function oxe(e){let{opSnippet:t,packedOpSnippet:n,cpuKernelImpl:r,dtype:i}=e;return e=>{let{inputs:o,backend:a}=e;const{x:s}=o,l=a,u=i||s.dtype;if(l.shouldExecuteOnCPU([s])&&null!=r){const e=l.texData.get(s.dataId),t=r(e.values,u);return l.makeTensorInfo(s.shape,u,t)}let c;return c=r0().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new Lbe(s.shape,n):new Rbe(s.shape,t),l.runWebGLProgram(c,[s],u)}}function axe(e){let{opSnippet:t,packedOpSnippet:n,checkOutOfBounds:r=!1,supportsComplex:i=!1,cpuKernelImpl:o,dtype:a}=e;return e=>{let{inputs:s,backend:l}=e;const{a:u,b:c}=s,h=l;if(i&&"complex64"===u.dtype){const e=h.texData.get(u.dataId),n=h.texData.get(c.dataId),[r,i]=[[e.complexTensorInfos.real,n.complexTensorInfos.real],[e.complexTensorInfos.imag,n.complexTensorInfos.imag]].map((e=>{const[n,r]=e,i={dataId:n.dataId,dtype:n.dtype,shape:u.shape},o={dataId:r.dataId,dtype:r.dtype,shape:c.shape},a=new Gbe(t,u.shape,c.shape);return h.runWebGLProgram(a,[i,o],v4(n.dtype,r.dtype))})),o=Ybe({inputs:{real:r,imag:i},backend:h});return h.disposeIntermediateTensorInfo(r),h.disposeIntermediateTensorInfo(i),o}const d=a||v4(u.dtype,c.dtype);if(("string"===u.dtype||"string"===c.dtype||h.shouldExecuteOnCPU([u,c]))&&null!=o){const e=h.texData.get(u.dataId).values,t=h.texData.get(c.dataId).values,n="string"===u.dtype?ate(e):e,r="string"===u.dtype?ate(t):t,[i,a]=o(u.shape,c.shape,n,r,d),s=h.makeTensorInfo(a,d);return h.texData.get(s.dataId).values=i,s}let p;return p=r0().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new qbe(n,u.shape,c.shape,r):new Gbe(t,u.shape,c.shape),h.runWebGLProgram(p,[u,c],d)}}function sxe(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return"return x;";if("relu"===e)return t?"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":Pbe;if("elu"===e)return t?"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n":"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===e)return t?"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":Mbe;if("prelu"===e)return t?nxe:txe;if("leakyrelu"===e)return t?Zbe:Jbe;if("sigmoid"===e)return"return 1.0 / (1.0 + exp(-1.0 * x));";throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}class lxe{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=cve(this.outputShape.length);const u=r?e[1]:e[2],c=Math.ceil(u/2),h=r?"i * 2, rc.y":"rc.y, i * 2",d=i?"rc.z, i * 2":"i * 2, rc.z",p=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",g="";a&&(m=s?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${a}\n        }`:l?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${a}\n        }`:`vec4 activation(vec4 x) {\n          ${a}\n        }`,g="result = activation(result);");const y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let v="rc.x",b="rc.x";e[0]<t[0]?v=`imod(rc.x, ${e[0]})`:t[0]<e[0]&&(b=`imod(rc.x, ${t[0]})`),this.userCode=`\n      ${m}\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ${c}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ${v};\n        int batchB = ${b};\n        for (int i = 0; i < ${c}; i++) {\n          vec4 a = getMatrixA(batchA, ${h});\n          vec4 b = getMatrixB(batchB, ${d});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${p[0]} * ${f[0]});\n          result += (${p[1]} * ${f[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${y}\n\n        ${g}\n\n        setOutput(result);\n      }\n    `}}const uxe="return areal * breal - aimag * bimag;",cxe="return areal * bimag + aimag * breal;";class hxe{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=u6(t,n),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${e}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}}const dxe="return a * b;";function pxe(e){const{inputs:t,backend:n}=e,{a:r,b:i}=t,o=v4(r.dtype,i.dtype);if("complex64"===r.dtype){const e=n.texData.get(r.dataId),t=n.texData.get(i.dataId),o=new hxe(uxe,r.shape,i.shape),a=new hxe(cxe,r.shape,i.shape),s=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:r.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:i.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:i.shape}],l=n.runWebGLProgram(o,s,"float32"),u=n.runWebGLProgram(a,s,"float32"),c=Ybe({inputs:{real:l,imag:u},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),c}if(n.shouldExecuteOnCPU([r,i])){const e=n.texData.get(r.dataId),t=n.texData.get(i.dataId),[a,s]=Qve(r.shape,i.shape,e.values,t.values,o),l=n.makeTensorInfo(s,o);return n.texData.get(l.dataId).values=a,l}let a;return a=r0().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new qbe(dxe,r.shape,i.shape):new Gbe(dxe,r.shape,i.shape),n.runWebGLProgram(a,[r,i],o)}const fxe={kernelName:Z1,backendName:"webgl",kernelFunc:pxe};function mxe(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{shape:o}=r,a=n,s=TZ(i.shape),l=RZ(o,s),u=TZ(l);SZ(s===u,(()=>`The new shape (${l}) has ${u} elements and the old shape (${i.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`));const c=a.texData.get(i.dataId);return!c.isPacked||Oye(i.shape,l)||null!==c.texture&&Oye(c.shape,l)?(a.incRef(i.dataId),{dataId:i.dataId,shape:l,dtype:i.dtype}):function(e,t,n){const r=[Cye(e.shape),...Aye(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},o=[Cye(t),...Aye(t)],a=new Cbe(o,r),s=[r],l=n.runWebGLProgram(a,[i],e.dtype,s,!0);return{dataId:l.dataId,shape:t,dtype:l.dtype}}(i,l,a)}const gxe={kernelName:b2,backendName:"webgl",kernelFunc:mxe};class yxe{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:i,outSize:o}=e;this.outputShape=[r,o];const a=4*Math.floor(n/4),s=n%4;let l="sumValue += dot(values, ones);";if(null!=t){const e=1/t;l=`sumValue += dot(values * ${AZ(e)?e.toPrecision(2):e}, ones);`}let u="";i%n>0&&(u=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return 0.0;\n        }\n      `),this.userCode=`\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${u}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${a}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${l}\n        }\n\n        int inIdx = inOffset + ${a};\n        if (${1===s}) {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ${l}\n        } else if (${2===s}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ${l}\n        } else if (${3===s}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ${l}\n        }\n        setOutput(sumValue);\n      }\n    `}}class vxe{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:i,outSize:o}=e;this.outputShape=[r,o];let a="0.0",s="";"prod"===t?a="1.0":"min"===t?(a="1.0 / 1e-20",s="min"):"max"===t&&(a="-1.0 / 1e-20",s="max");let l=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"sum"===t?l="sumValue":"prod"===t?l="prodValue":"all"===t?l="allValue":"any"===t&&(l="anyValue");const u=4*Math.floor(n/4),c=n%4;let h=`\n      if (${"sum"===t}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===t}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${s}(values, minMaxValue);\n        if (${"min"===t} || ${"max"===t}) {\n          minMaxValue = ${s}(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    `,d="vec4";"all"===t?(a="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===t&&(a="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");let p="";i%n>0&&(p=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${a};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${p}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        vec4 minMaxValue = vec4(${a});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${u}; i += 4) {\n          int inIdx = inOffset + i;\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${h}\n        }\n\n        int inIdx = inOffset + ${u};\n        if (${1===c}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${h}\n        } else if (${2===c}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${h}\n        } else if (${3===c}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${h}\n        }\n        setOutput(${l});\n      }\n    `}}function bxe(e,t,n,r){const i=function(e){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){const n=t.length?t[t.length-1].outSize:e[1],r=see(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape);let o=e;for(let a=0;a<i.length;a++){const{inSize:s,windowSize:l,outSize:u}=i[a];let c,h;c="mean"===n?0===a?new yxe({windowSize:l,inSize:s,batchSize:e.shape[0],outSize:u},s):new yxe({windowSize:l,inSize:s,batchSize:e.shape[0],outSize:u}):new vxe({windowSize:l,inSize:s,batchSize:e.shape[0],outSize:u},n),h=o,o=r.runWebGLProgram(c,[o],t),h.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(h)}return o}class xxe{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let o=0;o<n.length;o++)n[o]=e[t[o]];this.outputShape=n,this.rank=n.length;const r=rve(this.rank),i=function(e){const t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let i=0;i<e.length;i++)r[e[i]]=n[i];return r.join()}(t);this.userCode=`\n    void main() {\n      ${r} resRC = getOutputCoords();\n      setOutput(getA(${i}));\n    }\n    `}}class wxe{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(e.length);for(let u=0;u<n.length;u++)n[u]=e[t[u]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const r=rve(this.rank),i=Ebe("rc",this.rank),o=new Array(this.rank);for(let u=0;u<t.length;u++)o[t[u]]=i[u];const a=`vec2(${o.slice(-2).join()})`,s=`++${i[this.rank-1]} < ${n[this.rank-1]}`,l=`getChannel(getA(${o.join()}), ${a})`;this.userCode=`\n    void main() {\n      ${r} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${l};\n      if(${s}) {\n        result[1] = ${l};\n      }\n      --${i[this.rank-1]};\n      if(++${i[this.rank-2]} < ${n[this.rank-2]}) {\n        result[2] = ${l};\n        if(${s}) {\n          result[3] = ${l};\n        }\n      }\n      setOutput(result);\n    }\n    `}}function kxe(e,t,n){const r=r0().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new wxe(e.shape,t):new xxe(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function Sxe(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r;return function(e,t,n,r){const i=t,o=e.shape.length,a=$Z(i,e.shape);let s=a;const l=J9(s,o),u=null!=l;let c=e;u&&(c=kxe(e,l,r),s=e7(s.length,o)),Q9("sum",s,o);const[h,d]=X9(c.shape,s);let p=h;n&&(p=Y9(h,a));const f=TZ(d),m=mxe({inputs:{x:c},attrs:{shape:[TZ(e.shape)/f,f]},backend:r}),g=bxe(m,b4(e.dtype),"sum",r),y=mxe({inputs:{x:g},attrs:{shape:p},backend:r});return r.disposeIntermediateTensorInfo(m),r.disposeIntermediateTensorInfo(g),u&&r.disposeIntermediateTensorInfo(c),y}(i,o,a,n)}const Exe={kernelName:z2,backendName:"webgl",kernelFunc:Sxe};function Ixe(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{perm:o}=r,a=n,s=i.shape.length,l=new Array(s);for(let c=0;c<l.length;c++)l[c]=i.shape[o[c]];let u;if(a.shouldExecuteOnCPU([i])){const e=a.texData.get(i.dataId).values,t=kbe(e,i.shape,i.dtype,o,l);u=a.makeTensorInfo(l,i.dtype);a.texData.get(u.dataId).values=t}else u=kxe(i,o,a);return u}const Txe={kernelName:l3,backendName:"webgl",kernelFunc:Ixe};function Cxe(e){let{a:t,b:n,transposeA:r,transposeB:i,backend:o,bias:a=null,preluActivationWeights:s=null,leakyreluAlpha:l=0,activation:u=null}=e;const c=t.shape.length,h=n.shape.length,d=r?t.shape[c-2]:t.shape[c-1],p=i?n.shape[h-1]:n.shape[h-2],f=r?t.shape[c-1]:t.shape[c-2],m=i?n.shape[h-2]:n.shape[h-1],g=t.shape.slice(0,-2),y=n.shape.slice(0,-2),v=TZ(g),b=TZ(y),x=u6(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([f,m]);SZ(d===p,(()=>`Error in matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${t.shape} and ${n.shape} and transposeA=${r} and transposeB=${i} must match.`));const w=r?[v,d,f]:[v,f,d],k=i?[b,m,p]:[b,p,m],S=mxe({inputs:{x:t},backend:o,attrs:{shape:w}}),E=mxe({inputs:{x:n},backend:o,attrs:{shape:k}}),I=[S,E],T=Math.max(v,b),C=r?S.shape[1]:S.shape[2],A=null!=a,_=null!=s,N="leakyrelu"===u,O=null!=u?sxe(u,!0):null;let R;if((1===f||1===m)&&C>1e3&&!1===(A||_||N||null!=O)){let e=S,t=E;r&&(e=Ixe({inputs:{x:S},backend:o,attrs:{perm:[0,2,1]}}),I.push(e)),i&&(t=Ixe({inputs:{x:E},backend:o,attrs:{perm:[0,2,1]}}),I.push(t));const n=1===m;let a=e;1!==m&&(a=mxe({inputs:{x:e},backend:o,attrs:{shape:[T,C,1]}}),I.push(a));const s=1===m?2:1;let l=t;n&&(l=mxe({inputs:{x:t},backend:o,attrs:{shape:[T,1,C]}}),I.push(l));const u=pxe({inputs:{a:a,b:l},backend:o});R=Sxe({inputs:{x:u},backend:o,attrs:{axis:s,keepDims:!0}}),I.push(u)}else{const e=v4(t.dtype,n.dtype),u=new lxe(w,k,[T,f,m],r,i,A,O,_,N),c=[S,E];if(null!=a&&c.push(a),_&&c.push(s),N){const e=o.makeTensorInfo([],"float32",V3(l,"float32"));c.push(e),I.push(e)}R=o.runWebGLProgram(u,c,e)}const $=mxe({inputs:{x:R},backend:o,attrs:{shape:x}});I.push(R);for(const D of I)o.disposeIntermediateTensorInfo(D);return $}const Axe={kernelName:g3,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:o,bias:a,preluActivationWeights:s}=t,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:h}=r;return Cxe({a:i,b:o,transposeA:l,transposeB:u,backend:n,bias:a,preluActivationWeights:s,leakyreluAlpha:h,activation:c})}},_xe="return abs(x);";const Nxe={kernelName:l0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])&&"complex64"!==r.dtype){const e=n.texData.get(r.dataId),t=lbe(e.values);return n.makeTensorInfo(r.shape,r.dtype,t)}let i;return i=r0().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new Lbe(r.shape,_xe):new Rbe(r.shape,_xe),n.runWebGLProgram(i,[r],r.dtype)}},Oxe=oxe({opSnippet:$be+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),Rxe={kernelName:u0,backendName:"webgl",kernelFunc:Oxe},$xe=oxe({opSnippet:$be+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),Dxe={kernelName:c0,backendName:"webgl",kernelFunc:$xe},Pxe="return a + b;",Mxe=axe({opSnippet:Pxe,packedOpSnippet:Pxe,supportsComplex:!0,cpuKernelImpl:_ve}),Fxe={kernelName:h0,backendName:"webgl",kernelFunc:Mxe};class Lxe{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(((e,t)=>`T${t}`));const n=[];this.variableNames.forEach((e=>{n.push(`float v${e} = get${e}AtOutCoords();`)}));const r=this.variableNames.map((e=>`v${e}`)).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        float result = ${r};\n        setOutput(result);\n      }\n    `}}class jxe{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(((e,t)=>`T${t}`));const n=[];this.variableNames.forEach((e=>{n.push(`vec4 v${e} = get${e}AtOutCoords();`)}));const r=this.variableNames.map((e=>`v${e}`)).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        vec4 result = ${r};\n        setOutput(result);\n      }\n    `}}const zxe={kernelName:d0,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,i=n;if(1===i.length)return Kbe({inputs:{x:i[0]},backend:r});if(i.length>r0().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const t=Math.floor(i.length/2),n=e({inputs:i.slice(0,t),backend:r}),o=e({inputs:i.slice(t),backend:r});return e({inputs:[n,o],backend:r})}const o=i.map((e=>e.dtype)).reduce(((e,t)=>v4(e,t))),a=i.map((e=>e.shape)),s=r0().getBool("WEBGL_PACK")?new jxe(i[0].shape,a):new Lxe(i[0].shape,a);return r.runWebGLProgram(s,i,o)}};const Bxe={kernelName:p0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r,s=i.shape.length,l=$Z(o,i.shape);let u=l;const c=J9(u,s);let h=i;null!=c&&(h=Ixe({inputs:{x:i},backend:n,attrs:{perm:c}}),u=e7(u.length,s)),Q9("all",u,s);const[d,p]=X9(h.shape,u),f=mxe({inputs:{x:h},backend:n,attrs:{shape:[-1,TZ(p)]}}),m=bxe(f,f.dtype,"all",n);let g;if(a){g=mxe({inputs:{x:m},backend:n,attrs:{shape:Y9(d,l)}})}else g=mxe({inputs:{x:m},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=c&&n.disposeIntermediateTensorInfo(h),g}};const Uxe={kernelName:f0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r,s=i.shape.length,l=$Z(o,i.shape);let u=l;const c=J9(u,s);let h=i;null!=c&&(h=Ixe({inputs:{x:i},backend:n,attrs:{perm:c}}),u=e7(u.length,s)),Q9("any",u,s);const[d,p]=X9(h.shape,u),f=mxe({inputs:{x:h},backend:n,attrs:{shape:[-1,TZ(p)]}}),m=bxe(f,f.dtype,"any",n);let g;if(a){g=mxe({inputs:{x:m},backend:n,attrs:{shape:Y9(d,l)}})}else g=mxe({inputs:{x:m},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=c&&n.disposeIntermediateTensorInfo(h),g}};class Wxe{constructor(e,t,n){this.variableNames=["A"];const{windowSize:r,batchSize:i,outSize:o}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];const a="max"===t?">":"<",s=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${r};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${r}; i++) {\n          int inIdx = ${s};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${a} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}}class Vxe{constructor(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,SZ(e.length>2,(()=>`Packed arg${n.charAt(0).toUpperCase()+n.slice(1)} supports only inputs with rank above 2.`));const i=e[e.length-1],o=Math.ceil(i/t);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");const a=this.outputShape,s=a.length,l=rve(s),u=Ibe("coords",s);let c,h;if(1===o){h=s+1;const e=rve(h);c=`\n        ${e} sourceLocR = ${e}(${u.join()}, 0);\n        ++${u[s-1]};\n        ${e} sourceLocG = ${e}(${u.join()}, 0);\n        ++${u[s-2]};\n        ${e} sourceLocA = ${e}(${u.join()}, 0);\n        --${u[s-1]};\n        ${e} sourceLocB = ${e}(${u.join()}, 0);\n        --${u[s-2]};`}else h=s,c=`\n        ${l} sourceLocR = coords;\n        ++${u[s-1]};\n        ${l} sourceLocG = coords;\n        ++${u[s-2]};\n        ${l} sourceLocA = coords;\n        --${u[s-1]};\n        ${l} sourceLocB = coords;\n        --${u[s-2]};`;const d=["x","y","z","w","u","v"].slice(0,h),p="."+d[h-1],f=d.map((e=>"int "+e)),m=Ibe("sourceLocR",h-1).concat("inIdx.r"),g=Ibe("sourceLocG",h-1).concat("inIdx.g"),y=Ibe("sourceLocB",h-1).concat("inIdx.b"),v=Ibe("sourceLocA",h-1).concat("inIdx.a"),b="max"===n?"greaterThan":"lessThan",x=r?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${m.join()}),\n                             getBestIndicesAChannel(${g.join()}),\n                             getBestIndicesAChannel(${y.join()}),\n                             getBestIndicesAChannel(${v.join()})));`,w=`vec4(\n            getAChannel(${m.join()}),\n            hasNextCol ? getAChannel(${g.join()}) : 0.,\n            hasNextRow ? getAChannel(${y.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${v.join()}) : 0.)`,k=r?"":`\n      float getBestIndicesAChannel(${f.join()}) {\n        return getChannel(getBestIndicesA(${d.join()}),\n                                          vec2(${d.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${f.join()}) {\n        return getChannel(getA(${d.join()}),\n                               vec2(${d.slice(-2).join()}));\n      }\n      ${k}\n      void main() {\n        ${l} coords = getOutputCoords();\n        bool hasNextCol = ${u[s-1]} < ${a[s-1]-1};\n        bool hasNextRow = ${u[s-2]} < ${a[s-2]-1};\n        ${c}\n        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},\n          sourceLocB${p}, sourceLocA${p}) * ${t};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${w};\n\n        for (int i = 0; i < ${t}; i++) {\n          inIdx = srcIdx;\n          ${x}\n          vec4 candidate = ${w};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${b}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}}function Gxe(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=t.shape[0],o=t.shape[1];null!=r&&(i=r.shape[0],o=r.shape[1]);const a=see(o),s={windowSize:a,inSize:o,batchSize:i,outSize:Math.ceil(o/a)},l=new Wxe(s,n,null==r),u=[t];null!=r&&u.push(r);const c=e.runWebGLProgram(l,u,"int32");if(1===c.shape[1])return c;const h=Gxe(e,t,n,c);return e.disposeIntermediateTensorInfo(c),h}function Hxe(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const i=null!=r?r.shape:t.shape,o=see(i[i.length-1]),a=new Vxe(i,o,n,null==r),s=null==r?[t]:[t,r],l=e.runWebGLProgram(a,s,"int32");if(l.shape.length===t.shape.length){const r=Hxe(e,t,n,l);return e.disposeIntermediateTensorInfo(l),r}return l}function qxe(e,t,n,r){const i=[n];if(Q9("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,t.shape.length),!r0().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const n=[],o=e.texData.get(t.dataId);let a=t;null!==o&&o.isPacked&&(a=e.unpackTensor(t),n.push(a));const[s,l]=X9(a.shape,i),u=TZ(l),c=mxe({inputs:{x:a},backend:e,attrs:{shape:[-1,u]}});n.push(c);const h=Gxe(e,c,r);n.push(h);const d=mxe({inputs:{x:h},backend:e,attrs:{shape:s}});return n.forEach((t=>e.disposeIntermediateTensorInfo(t))),d}return Hxe(e,t,r)}const Kxe={kernelName:m0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o}=r;let a=$Z(o,i.shape);const s=J9(a,i.shape.length);let l=i;const u=[];null!=s&&(l=Ixe({inputs:{x:i},backend:n,attrs:{perm:s}}),u.push(l),a=e7(a.length,l.shape.length)),Q9("argMax",[a[0]],l.shape.length);const c=qxe(n,l,a[0],"max");return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),c}};const Xxe={kernelName:g0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o}=r;let a=$Z(o,i.shape);const s=J9(a,i.shape.length);let l=i;const u=[];null!=s&&(l=Ixe({inputs:{x:i},backend:n,attrs:{perm:s}}),u.push(l),a=e7(a.length,l.shape.length)),Q9("argMin",[a[0]],l.shape.length);const c=qxe(n,l,a[0],"min");return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),c}},Yxe=oxe({opSnippet:$be+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),Qxe={kernelName:y0,backendName:"webgl",kernelFunc:Yxe},Jxe=oxe({opSnippet:$be+"return log(x + sqrt(x * x + 1.0));"}),Zxe={kernelName:v0,backendName:"webgl",kernelFunc:Jxe},ewe=oxe({opSnippet:$be+"\n  return atan(x);\n"}),twe={kernelName:b0,backendName:"webgl",kernelFunc:ewe},nwe=axe({opSnippet:Vbe+"\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+Hbe+"\n  return result;\n"}),rwe={kernelName:w0,backendName:"webgl",kernelFunc:nwe},iwe=oxe({opSnippet:$be+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),owe={kernelName:x0,backendName:"webgl",kernelFunc:iwe};class awe{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideHeight,s=e.strideWidth,l=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const f="avg"===t,m=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,g=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let y="0.0";if(f||(y="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode=`\n        const ivec2 strides = ivec2(${a}, ${s});\n        const ivec2 pads = ivec2(${d}, ${p});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${c};\n              wR += ${l}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${h};\n                wC += ${u}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ${t} currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${r?i?m:g:`wR * ${h} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}let v=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(v="avgValue / max(count, 1.0)");const b=4*Math.floor(o/4),x=o%4,w=`\n      if (${f}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${a}, ${s});\n      const ivec2 pads = ivec2(${d}, ${p});\n      const float initializationValue = ${y};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${y});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${c};\n            wR += ${l}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${b}; wC += 4) {\n            int xC = xCCorner + wC * ${u};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              getValue(batch, xR, xC + 3 * ${u}, d)\n            );\n\n            ${w}\n          }\n\n          int xC = xCCorner + ${b};\n          if (${1===x}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${w}\n          } else if (${2===x}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${w}\n          } else if (${3===x}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              initializationValue\n            );\n\n            ${w}\n          }\n        }\n        setOutput(${v});\n      }\n    `}}class swe{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideDepth,s=e.strideHeight,l=e.strideWidth,u=e.dilationDepth,c=e.dilationHeight,h=e.dilationWidth,d=e.effectiveFilterDepth,p=e.effectiveFilterHeight,f=e.effectiveFilterWidth,m=e.padInfo.front,g=e.padInfo.top,y=e.padInfo.left;this.outputShape=e.outShape;const v="avg"===t;let b="0.0";if(v||(b="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode=`\n        const ivec3 strides =\n            ivec3(${a}, ${s}, ${l});\n        const ivec3 pads = ivec3(${m}, ${g}, ${y});\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ${d};\n              wD += ${u}) {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int wR = 0; wR < ${p};\n                wR += ${c}) {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int wC = 0; wC < ${f};\n                  wC += ${h}) {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ${t} currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ${r?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${f} +\n                      wR * ${f} + wC`};\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}let x=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(x="avgValue / max(count, 1.0)");const w=4*Math.floor(o/4),k=o%4,S=`\n      if (${v}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec3 strides =\n        ivec3(${a}, ${s}, ${l});\n      const ivec3 pads = ivec3(${m}, ${g}, ${y});\n      const float initializationValue = ${b};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${b});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ${d};\n            wD += ${u}) {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${p};\n            wR += ${c}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${w}; wC += 4) {\n              int xC = xCCorner + wC * ${h};\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${h}, ch),\n                getValue(batch, xD, xR, xC + 3 * ${h}, ch)\n              );\n\n              ${S}\n            }\n\n            int xC = xCCorner + ${w};\n            if (${1===k}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ${S}\n            } else if (${2===k}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ${S}\n            } else if (${3===k}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${h}, ch),\n                initializationValue\n              );\n\n              ${S}\n            }\n          }\n        }\n        setOutput(${x});\n      }\n    `}}const lwe={kernelName:k0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;Lye(i,"avgPool");const{filterSize:o,strides:a,pad:s,dimRoundingMode:l}=r;SZ(r9(a,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '1'`));const u=q6(i.shape,o,a,1,s,l);if(1===u.filterWidth&&1===u.filterHeight&&CZ(u.inShape,u.outShape))return Kbe({inputs:{x:i},backend:n});const c=new awe(u,"avg",!1);return n.runWebGLProgram(c,[i],"float32")}};const uwe={kernelName:E0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:o,strides:a,pad:s,dimRoundingMode:l,dataFormat:u}=r,c=K6(i.shape,o,a,[1,1,1],s,l,u),h=new swe(c,"avg",!1);return n.runWebGLProgram(h,[i],"float32")}};class cwe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,a=e.dilationWidth,s=e.effectiveFilterHeight,l=e.effectiveFilterWidth,u=s-1-e.padInfo.top,c=l-1-e.padInfo.left,h=1/(t*n);this.userCode=`\n      const ivec2 pads = ivec2(${u}, ${c});\n      const float avgMultiplier = float(${h});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${s};\n            wR += ${o}) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${l};\n            wC+= ${a}) {\n            float dyC = float(dyCCorner + wC) / ${i}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class hwe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,h=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=c-1-e.padInfo.front,f=h-1-e.padInfo.top,m=d-1-e.padInfo.left,g=1/(t*n*r);this.userCode=`\n      const ivec3 pads = ivec3(${p}, ${f}, ${m});\n      const float avgMultiplier = float(${g});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${c};\n            wD += ${s}) {\n          float dyD = float(dyDCorner + wD) / ${i}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${h};\n              wR += ${l}) {\n            float dyR = float(dyRCorner + wR) / ${o}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${d};\n                wC += ${u}) {\n              float dyC = float(dyCCorner + wC) / ${a}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const dwe={kernelName:I0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,a=o,{filterSize:s,strides:l,pad:u,dimRoundingMode:c}=r,h=K6(a.shape,s,l,[1,1,1],u,c),d=new hwe(h);return n.runWebGLProgram(d,[i],a.dtype)}};const pwe={kernelName:S0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,a=o;Lye([i,o],"avgPoolGrad");const{filterSize:s,strides:l,pad:u}=r,c=q6(a.shape,s,l,1,u),h=new cwe(c);return n.runWebGLProgram(h,[i],a.dtype)}};const fwe={kernelName:T0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:o}=t,{transposeA:a,transposeB:s}=r;return Cxe({a:i,b:o,transposeA:a,transposeB:s,backend:n})}};class mwe{constructor(e,t,n,r,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],u6(e,t),u6(e,n);let a="0.0";null!=r&&(u6(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let s="1.0";null!=i&&(u6(e,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${a};\n        float scale = ${s};\n        float inv = scale * inversesqrt(variance + float(${o}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `}}class gwe{constructor(e,t,n,r,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],u6(e,t),u6(e,n);let a="vec4(0.0)";null!=r&&(u6(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let s="vec4(1.0)";null!=i&&(u6(e,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        vec4 offset = ${a};\n        vec4 scale = ${s};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${o}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}const ywe={kernelName:v1,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:i,mean:o,variance:a,offset:s,scale:l}=t;SZ(o.shape.length===a.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),SZ(null==s||o.shape.length===s.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),SZ(null==l||o.shape.length===l.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));let{varianceEpsilon:u}=r;null==u&&(u=.001);const c=[i,o,a];let h=null;null!=s&&(h=s.shape,c.push(s));let d=null;null!=l&&(d=l.shape,c.push(l));const p=r0().getBool("WEBGL_PACK_NORMALIZATION")?new gwe(i.shape,o.shape,a.shape,h,d,u):new mwe(i.shape,o.shape,a.shape,h,d,u);return n.runWebGLProgram(p,c,c[0].dtype)}};class vwe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=rve(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=function(e){if(1===e)return"sourceLoc";if(e<=6)return bwe.slice(0,e).map((e=>"sourceLoc."+e)).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}(this.rank);let r;r=`\n        ${t} sourceLoc;\n        ${t} coords = getOutputCoords();\n        ${e.map(((e,t)=>`sourceLoc.${bwe[t]} = start[${t}] + coords.${bwe[t]};`)).join("\n")}\n      `,this.userCode=`\n      void main() {\n        ${r}\n        setOutput(getSource(${n}));\n      }\n    `}}const bwe=["x","y","z","w","u","v"];class xwe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=rve(this.rank),n=Ibe("coords",this.rank),r=Ibe("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":`vec2(${r.slice(-2).join()})`,o=`getChannel(getSource(${r.join()}), ${i})`,a=`\n      result.x = ${o};\n      if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n        ++${r[this.rank-1]};\n        result.y = ${o};\n        --${r[this.rank-1]};\n      }\n    `,s=1===this.rank?"":`\n      --${n[this.rank-1]};\n      if (++${n[this.rank-2]} < ${e[this.rank-2]}) {\n        ++${r[this.rank-2]};\n        result.z = ${o};\n        if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n          ++${r[this.rank-1]};\n          result.w = ${o};\n        }\n      }\n    `,l=this.rank<=4?`sourceLoc = coords +\n            ${t}(${e.map(((e,t)=>`start[${t}]`)).join()});`:e.map(((e,t)=>`${r[t]} = ${n[t]} + start[${t}];`)).join("\n");this.userCode=`\n      void main() {\n        ${t} coords = getOutputCoords();\n        ${t} sourceLoc;\n        ${l}\n        vec4 result = vec4(0.);\n        ${a}\n        ${s}\n        setOutput(result);\n      }\n    `}}function wwe(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:o,size:a}=r,[s,l]=z6(i,o,a);if(T6(i,s,l),0===TZ(l))return n.makeTensorInfo(l,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||"string"===i.dtype){const e=n.texData.get(i.dataId),t=ube(e.values,s,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,t)}const{isPacked:u}=n.texData.get(i.dataId),c=L6(i.shape,s,l);if(u||!c){const e=r0().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new xwe(l):new vwe(l),t=[s];return n.runWebGLProgram(e,[i],i.dtype,t)}return n.uploadToGPU(i.dataId),function(e,t,n,r){const i=r.texData.get(e.dataId),o=r.makeTensorInfo(n,e.dtype),a=r.texData.get(o.dataId);Object.assign(a,i),a.refCount=1,a.shape=n,a.dtype=e.dtype;let s=j6(t,VZ(e.shape));i.slice&&(s+=i.slice.flatOffset),a.slice={flatOffset:s,origDataId:i.slice&&i.slice.origDataId||e.dataId};const l=r.dataRefCount.get(a.slice.origDataId)||1;return r.dataRefCount.set(a.slice.origDataId,l+1),o}(i,s,l,n)}const kwe={kernelName:$2,backendName:"webgl",kernelFunc:wwe},Swe={kernelName:C0,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:o,crops:a}=r;SZ(i.shape.length<=4,(()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"));const s=o.reduce(((e,t)=>e*t)),l=uee(i.shape,o,s),u=cee(l.length,o.length),c=hee(i.shape,o,s),h=dee(a,o.length),d=pee(c,a,o.length),p=[],f=mxe({inputs:{x:i},backend:n,attrs:{shape:l}}),m=Ixe({inputs:{x:f},backend:n,attrs:{perm:u}}),g=mxe({inputs:{x:m},backend:n,attrs:{shape:c}}),y=wwe({inputs:{x:g},backend:n,attrs:{begin:h,size:d}});return p.push(f),p.push(m),p.push(g),p.forEach((e=>n.disposeIntermediateTensorInfo(e))),y}};const Ewe={kernelName:A0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:o}=t,{size:a}=r,s=n.readSync(i.dataId),l=n.readSync(o.dataId),u=Nve(s,l,o.dtype,o.shape,a);return n.makeTensorInfo([a],o.dtype,u)}};const Iwe={kernelName:_0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{a:r,b:i}=t,o=r0().getBool("WEBGL_PACK_BINARY_OPERATIONS"),a=r0().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,i])||1===a){const e=n.texData.get(r.dataId).values,t=n.texData.get(i.dataId).values,[o,a]=Rve(r.shape,i.shape,e,t,r.dtype),s=n.makeTensorInfo(a,r.dtype);return n.texData.get(s.dataId).values=o,s}let s;return s=o?new qbe("\n  int r = int(a.r) & int(b.r);\n  int g = int(a.g) & int(b.g);\n  int rb = int(a.b) & int(b.b);\n  int ra = int(a.a) & int(b.a);\n  return vec4(r, g, rb, ra);\n",r.shape,i.shape,!1):new Gbe("\n  return float(int(a.r) & int(b.r));\n",r.shape,i.shape),n.runWebGLProgram(s,[r,i],r.dtype)}};const Twe={kernelName:N0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:r,s1:i}=t,o=n.readSync(r.dataId),a=n.readSync(i.dataId),s=u6(Array.from(o),Array.from(a));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},Cwe=axe({opSnippet:"return float(a != b);",cpuKernelImpl:Zve,dtype:"bool"}),Awe={kernelName:t2,backendName:"webgl",kernelFunc:Cwe};function _we(e){const{inputs:t,backend:n}=e,{input:r}=t;return Kbe({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}const Nwe={kernelName:g2,backendName:"webgl",kernelFunc:_we};const Owe={kernelName:O0,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r,attrs:i}=t,{x:o}=n,{dtype:a}=i;if("complex64"===a){if("complex64"===o.dtype)return Kbe({inputs:{x:o},backend:r});const t=p7(o.shape),n=e({inputs:{x:o},backend:r,attrs:{dtype:"float32"}}),i=Ybe({inputs:{real:n,imag:t},backend:r});return t.dispose(),r.disposeIntermediateTensorInfo(n),i}if("complex64"===o.dtype){const t=_we({inputs:{input:o},backend:r}),n=e({inputs:{x:t},backend:r,attrs:{dtype:a}});return r.disposeIntermediateTensorInfo(t),n}if(!FZ(o.dtype,a)){const e=Kbe({inputs:{x:o},backend:r});return{dataId:e.dataId,shape:e.shape,dtype:a}}if(r.shouldExecuteOnCPU([o])){const e=r.texData.get(o.dataId).values,[t,n,i]=$ve(e,o.shape,o.dtype,a);return r.makeTensorInfo(t,n,i)}if("int32"===a)return function(e,t){const n=new Rbe(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(o,r);if("bool"===a){const e=r.makeTensorInfo([],"bool",PZ("bool",1)),t=Cwe({inputs:{a:o,b:e},backend:r});return r.disposeIntermediateTensorInfo(e),t}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${a}`)}},Rwe="return ceil(x);",$we=oxe({opSnippet:Rwe,packedOpSnippet:Rwe,cpuKernelImpl:Dve}),Dwe={kernelName:R0,backendName:"webgl",kernelFunc:$we};class Pwe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}class Mwe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}const Fwe={kernelName:$0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{clipValueMin:o,clipValueMax:a}=r;let s;s=r0().getBool("WEBGL_PACK_CLIP")?new Mwe(i.shape):new Pwe(i.shape);const l=[[o],[a]];return n.runWebGLProgram(s,[i],i.dtype,l)}};class Lwe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}function jwe(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}const zwe={kernelName:P0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,i=n.texData.get(r.dataId),o=new Lwe(r.shape),a=[jwe(r,i.complexTensorInfos.real),jwe(r,i.complexTensorInfos.imag)];return n.runWebGLProgram(o,a,a[0].dtype)}};class Bwe{constructor(e){this.outputShape=[],this.outputShape=eee(e,1),this.variableNames=e.map(((e,t)=>`T${t}`));const t=new Array(e.length-1);t[0]=e[0][1];for(let o=1;o<t.length;o++)t[o]=t[o-1]+e[o][1];const n=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<t.length;o++){const e=t[o-1];n.push(`else if (yC < ${t[o]}) setOutput(getT${o}(yR, yC-${e}));`)}const r=t.length,i=t[t.length-1];n.push(`else setOutput(getT${r}(yR, yC-${i}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${n.join("\n        ")}\n      }\n    `}}class Uwe{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=eee(e,t);const n=this.outputShape,r=n.length,i=rve(r),o=Ibe("coords",r),a=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map(((e,t)=>`T${t}`));const s=new Array(e.length-1);s[0]=e[0][t];for(let f=1;f<s.length;f++)s[f]=s[f-1]+e[f][t];const l=a[t],u=a.slice(-2),c=a.join();let h=`if (${l} < ${s[0]}) {\n        return getChannel(\n            getT0(${c}), vec2(${u.join()}));\n        }`;for(let f=1;f<s.length;f++){const e=s[f-1];h+=`\n        if (${l} < ${s[f]}  && ${l} >= ${s[f-1]}) {\n          return getChannel(\n            getT${f}(${Wwe(a,l,e)}),\n            vec2(${Wwe(u,l,e)}));\n        }`}const d=s.length,p=s[s.length-1];h+=`\n        return getChannel(\n          getT${d}(${Wwe(a,l,p)}),\n          vec2(${Wwe(u,l,p)}));`,this.userCode=`\n      float getValue(${a.map((e=>"int "+e))}) {\n        ${h}\n      }\n\n      void main() {\n        ${i} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${o}), 0., 0., 0.);\n\n        ${o[r-1]} = ${o[r-1]} + 1;\n        if (${o[r-1]} < ${n[r-1]}) {\n          result.g = getValue(${o});\n        }\n\n        ${o[r-2]} = ${o[r-2]} + 1;\n        if (${o[r-2]} < ${n[r-2]}) {\n          result.a = getValue(${o});\n        }\n\n        ${o[r-1]} = ${o[r-1]} - 1;\n        if (${o[r-2]} < ${n[r-2]} &&\n            ${o[r-1]} < ${n[r-1]}) {\n          result.b = getValue(${o});\n        }\n        setOutput(result);\n      }\n    `}}function Wwe(e,t,n){const r=e.indexOf(t),i=e.map(((e,t)=>t===r?`${e} - ${n}`:e));return i.join()}function Vwe(e){const{inputs:t,backend:n}=e,{input:r}=t;return Kbe({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}const Gwe={kernelName:I1,backendName:"webgl",kernelFunc:Vwe};function Hwe(e,t,n){const r=e[0].dtype;if("complex64"===r){const r=e.map((e=>_we({inputs:{input:e},backend:n}))),i=e.map((e=>Vwe({inputs:{input:e},backend:n}))),o=Hwe(r,t,n),a=Hwe(i,t,n),s=Ybe({inputs:{real:o,imag:a},backend:n});return r.forEach((e=>n.disposeIntermediateTensorInfo(e))),i.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),s}let i=n.shouldExecuteOnCPU(e);if("string"===r&&(i=!0),i){const i=e.map((e=>{const r=TZ(e.shape.slice(t));return mxe({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),o=i.map((e=>({vals:n.readSync(e.dataId),shape:e.shape}))),a=eee(i.map((e=>e.shape)),1),s=1===i[0].shape[0],l=Pve(o,a,r,s),u=eee(e.map((e=>e.shape)),t),c=n.makeTensorInfo(u,r,l);return i.forEach((e=>n.disposeIntermediateTensorInfo(e))),c}const o=e.filter((e=>TZ(e.shape)>0)),a=r0().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&o[0].shape.length>1;if(1===o.length){const t=a?new Rbe(e[0].shape,Fbe):new Lbe(e[0].shape,Fbe);return n.runWebGLProgram(t,e,r)}const s=r0().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(o.length>s){const e=[];for(let i=0;i<o.length;i+=s){const r=o.slice(i,i+s);e.push(Hwe(r,t,n))}const r=Hwe(e,t,n);for(const t of e)n.disposeIntermediateTensorInfo(t);return r}if(a){const e=new Uwe(o.map((e=>e.shape)),t);return n.runWebGLProgram(e,o,r)}const{tensors2D:l,outShape:u}=function(e,t,n){const r=eee(e.map((e=>e.shape)),t),i=e.map((e=>mxe({inputs:{x:e},attrs:{shape:[-1,TZ(e.shape.slice(t))]},backend:n})));return{tensors2D:i,outShape:r}}(o,t,n),c=new Bwe(l.map((e=>e.shape))),h=n.runWebGLProgram(c,l,r);l.forEach((e=>n.disposeIntermediateTensorInfo(e)));const d=mxe({inputs:{x:h},attrs:{shape:u},backend:n});return n.disposeIntermediateTensorInfo(h),d}function qwe(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r,o=$Z(i,t[0].shape)[0];Z8(t.map((e=>e.shape)),o);const a=eee(t.map((e=>e.shape)),o);if(0===TZ(a))return n.makeTensorInfo(a,t[0].dtype,[]);const s=t.filter((e=>TZ(e.shape)>0));return 1===s.length?Kbe({inputs:{x:s[0]},backend:n}):Hwe(s,o,n)}const Kwe={kernelName:M0,backendName:"webgl",kernelFunc:qwe};class Xwe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,a=e.padInfo.left,s=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,h=e.filterHeight,d=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4,m="channelsLast"===e.dataFormat,g=m?1:2,y=m?2:3,v=m?3:1;let b="",x="";n&&(b=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:i?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,x="result = activation(result);");const w=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${b}\n\n      const ivec2 strides = ivec2(${s}, ${l});\n      const ivec2 pads = ivec2(${o}, ${a});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[${v}];\n\n        ivec2 xRCCorner =\n            ivec2(coords[${g}], coords[${y}]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${h}; wR++) {\n          int xR = xRCorner + wR * ${u};\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${d}; wC++) {\n            int xC = xCCorner + wC * ${c};\n\n            if (xC < 0 || xC >= ${e.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${p}; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (${m}) {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (${1===f}) {\n\n              if (${m}) {\n                dotProd +=\n                    getX(batch, xR, xC, ${p}) *\n                    getW(wR, wC, ${p}, d2);\n              } else {\n                dotProd +=\n                    getX(batch, ${p}, xR, xC) *\n                    getW(wR, wC, ${p}, d2);\n              }\n\n            } else if (${2===f}) {\n              vec2 wValues = vec2(\n                getW(wR, wC, ${p}, d2),\n                getW(wR, wC, ${p} + 1, d2)\n              );\n\n              if (${m}) {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ${p}),\n                  getX(batch, xR, xC, ${p} + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ${p}, xR, xC),\n                  getX(batch, ${p} + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (${3===f}) {\n              vec3 wValues = vec3(\n                getW(wR, wC, ${p}, d2),\n                getW(wR, wC, ${p} + 1, d2),\n                getW(wR, wC, ${p} + 2, d2)\n              );\n\n              if (${m}) {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ${p}),\n                  getX(batch, xR, xC, ${p} + 1),\n                  getX(batch, xR, xC, ${p} + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ${p}, xR, xC),\n                  getX(batch, ${p} + 1, xR, xC),\n                  getX(batch, ${p} + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ${w}\n        ${x}\n        setOutput(result);\n      }\n    `}}class Ywe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.filterDepth,h=e.filterHeight,d=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode=`\n      const ivec3 strides = ivec3(${i}, ${o}, ${a});\n      const ivec3 pads = ivec3(${t}, ${n}, ${r});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${c}; wF++) {\n          int xF = xFCorner + wF * ${s};\n\n          if (xF < 0 || xF >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${h}; wR++) {\n            int xR = xRCorner + wR * ${l};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${d}; wC++) {\n              int xC = xCCorner + wC * ${u};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ${p}; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (${1===f}) {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ${p}) *\n                  getW(wF, wR, wC, ${p}, d2);\n              } else if (${2===f}) {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ${p}),\n                  getX(batch, xF, xR, xC, ${p} + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ${p}, d2),\n                  getW(wF, wR, wC, ${p} + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (${3===f}) {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ${p}),\n                  getX(batch, xF, xR, xC, ${p} + 1),\n                  getX(batch, xF, xR, xC, ${p} + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ${p}, d2),\n                  getW(wF, wR, wC, ${p} + 1, d2),\n                  getW(wF, wR, wC, ${p} + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class Qwe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=cve(this.outputShape.length);const o=e.padInfo.left,a=e.strideWidth,s=e.dilationWidth,l=e.filterHeight,u=e.filterWidth,c=u;let h="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;";for(let m=0;m<u;m++)h+=`\n           vec4 xTexelC${2*m};\n           int xTexelC${2*m}Ready;\n           vec4 xTexelC${2*m+1};\n           int xTexelC${2*m+1}Ready;\n           vec4 xC${m};`;h+=`\n     for (int r = 0; r < ${l}; r++) {\n      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {\n       `;for(let m=0;m<u;m++)h+=`\n           xTexelC${2*m} = vec4(0.0);\n           xTexelC${2*m}Ready = 0;\n           xTexelC${2*m+1} = vec4(0.0);\n           xTexelC${2*m+1}Ready = 0;\n           xC${m} = vec4(0.0);`;h+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(let m=0;m<(c+1)/2;m++){const t=2*m;if(h+=`\n           xC = xCCorner + ${t*s};\n           `,1===a){if(t<u&&(o%2===1?(h+=`\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\n                   xTexelC${t} = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${t}.zw = vec2(0.0);\n                   }\n                   xTexelC${t}Ready = 1;\n                 }\n               `,h+=1===s&&t>0?`\n                 xC${t} = vec4(xTexelC${t-2}.zw, xTexelC${t}.xy);\n                 `:`\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC${t} = vec4(previous.zw, xTexelC${t}.xy);\n                   } else {\n                     xC${t} = vec4(0.0, 0.0, xTexelC${t}.xy);\n                   }\n                   `):h+=`\n                 if (xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {\n                   xTexelC${t} = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC${t}.zw = vec2(0.0);\n                   }\n                   xTexelC${t}Ready = 1;\n                 }\n\n                 xC${t} = xTexelC${t};\n                 `,t+1<u)){const e=o%2===0?wZ(s):s;s%2===0&&o%2===1||s%2!==0&&o%2!==1?(h+=`\n                   xCOffset = xC + imod(pads[1], 2) + ${e};\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                     xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC${t+1}.zw = vec2(0.0);\n                     }\n                     xTexelC${t+1}Ready = 1;\n                   }\n                   `,h+=s>1?`\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC${t+1} = vec4(previous.zw, xTexelC${t+1}.xy);\n                     } else {\n                      xC${t+1} = vec4(0.0, 0.0, xTexelC${t+1}.xy);\n                     }\n                     `:`\n                     xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.xy);\n                     `):h+=1===e?`\n                     xC${t+1} = xTexelC${t};\n                     `:`\n                     xCOffset = xC + ${e};\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                       xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC${t+1}.zw = vec2(0.0);\n                       }\n                       xTexelC${t+1}Ready = 1;\n                     }\n\n                     xC${t+1} = xTexelC${t+1};\n                     `}}else t<u&&(o%2===1?(h+=`\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\n                   xTexelC${t} = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${t}.zw = vec2(0.0);\n                   }\n                   xTexelC${t}Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${t+1}Ready == 0) {\n                   xTexelC${t+1} = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC${t+1}.zw = vec2(0.0);\n                   }\n                   xTexelC${t+1}Ready = 1;\n                 }\n\n                 xC${t} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);\n               `,t+1<u&&(h+=`\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC${t+1} = vec4(xTexelC${t+1}.xy, final.xy);\n                 `)):(h+=`\n                 if(xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {\n                   xTexelC${t} = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC${t}.zw = vec2(0.0);\n                   }\n                   xTexelC${t}Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                   xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${t+1}.zw = vec2(0.);\n                   }\n                   xTexelC${t+1}Ready = 1;\n                 }\n\n                 xC${t} = vec4(\n                   xTexelC${t}.xy, xTexelC${t+1}.xy);\n               `,t+1<u&&(h+=`\n                   xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);\n                 `)));t<u&&(h+=`\n             wTexel = getW(r, ${t}, d1, d2);\n             dotProd += xC${t}.xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ${e.inChannels}) {\n               dotProd += xC${t}.yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           `,t+1<u&&(h+=`\n               wTexel = getW(r, ${t+1}, d1, d2);\n               dotProd += xC${t+1}.xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ${e.inChannels}) {\n                 dotProd += xC${t+1}.yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             `))}h+="\n     }\n   ",h+="\n     }\n   ",h+="\n     }\n   ";let d="",p="";n&&(d=r?`vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ${n}\n         }`:i?`vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ${n}\n         }`:`vec4 activation(vec4 x) {\n           ${n}\n         }`,p="result = activation(result);");const f=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n       ${d}\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ${h}\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ${f}\n         ${p}\n         setOutput(result);\n       }\n     `}}class Jwe{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=cve(this.outputShape.length);const{dataFormat:n}=t,r=zye(),i="channelsLast"===n,o=i?1:2,a=i?2:3,s=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let l="";for(let u=0;u<=1;u++)for(let e=0;e<=1;e++)l+=`\n          blockIndex = rc.z + ${e};\n          pos = rc.y + ${u};\n\n          ${s}\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[${o}] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[${a}] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (${i}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*u+e}] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*u+e}] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${l}\n\n        ${r.output} = result;\n      }\n    `}}function Zwe(e,t){const n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&1===n&&e[0]>1?[e[0],1]:null}function eke(e){let{x:t,filter:n,convInfo:r,backend:i,bias:o=null,preluActivationWeights:a=null,leakyreluAlpha:s=0,activation:l=null}=e;const u=t.shape,c=i.texData.get(t.dataId),h=r.inChannels,d=u[0]*u[1]*u[2],p=r.outChannels,f="channelsLast"===r.dataFormat,m=!1;let g;const y=[];if(null!=a){const e=Zwe(a.shape,f);null!=e&&(a=mxe({inputs:{x:a},backend:i,attrs:{shape:e}}),y.push(a))}if(null!=o){const e=Zwe(o.shape,f);null!=e&&(o=mxe({inputs:{x:o},backend:i,attrs:{shape:e}}),y.push(o))}if(!((1===d||1===p)&&h>1e3)&&c.isPacked&&f&&null!=c.texture&&u[2]%2!==0&&CZ(c.shape.slice(-3),u.slice(-3))){const e=u[0]*u[1]*(u[2]+1),h={dataId:t.dataId,shape:[1,e,r.inChannels],dtype:t.dtype},d=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,SZ(Oye(c.shape,h.shape),(()=>`packed reshape ${c.shape} to ${h.shape} isn't free`));const p=mxe({inputs:{x:n},backend:i,attrs:{shape:[1,r.inChannels,r.outChannels]}});y.push(p);const f=Cxe({a:h,b:p,backend:i,transposeA:false,transposeB:m,bias:o,activation:l,preluActivationWeights:a,leakyreluAlpha:s}),v=i.texData.get(f.dataId);SZ(v.isPacked,(()=>"batchMatMul result is expected to be packed")),c.shape=d,v.shape=r.outShape,g=Kbe({inputs:{x:f},backend:i}),g.shape=r.outShape,y.push(f)}else{const e=r.outHeight*r.outWidth,u=mxe({inputs:{x:t},backend:i,attrs:{shape:f?[r.batchSize,e,r.inChannels]:[r.batchSize,r.inChannels,e]}}),c=mxe({inputs:{x:n},backend:i,attrs:{shape:[1,r.inChannels,r.outChannels]}}),h=Cxe({a:f?u:c,b:f?c:u,transposeA:!f,transposeB:m,backend:i,bias:o,activation:l,preluActivationWeights:a,leakyreluAlpha:s});g=mxe({inputs:{x:h},backend:i,attrs:{shape:r.outShape}}),y.push(u),y.push(c),y.push(h)}for(const v of y)i.disposeIntermediateTensorInfo(v);return g}function tke(e){let{x:t,filter:n,convInfo:r,backend:i,bias:o=null,preluActivationWeights:a=null,leakyreluAlpha:s=0,activation:l=null}=e;const{filterWidth:u,filterHeight:c,inChannels:h,outWidth:d,outHeight:p,dataFormat:f}=r,m="channelsLast"===f,g=u*c*h,y=p*d,v=[r.batchSize,g,y],b=[];if(null!=a){const e=Zwe(a.shape,m);null!=e&&(a=mxe({inputs:{x:a},backend:i,attrs:{shape:e}}),b.push(a))}if(null!=o){const e=Zwe(o.shape,m);null!=e&&(o=mxe({inputs:{x:o},backend:i,attrs:{shape:e}}),b.push(o))}const x=mxe({inputs:{x:n},backend:i,attrs:{shape:[1,g,TZ(n.shape)/g]}});b.push(x);const w=new Jwe(v,r),k=[t.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],S=i.runWebGLProgram(w,[t],"float32",k),E=mxe({inputs:{x:S},backend:i,attrs:{shape:v}});b.push(S),b.push(E);const I=null!=o,T=null!=a,C="leakyrelu"===l,A=l?sxe(l,!0):null,_=new lxe(m?E.shape:x.shape,m?x.shape:E.shape,m?[r.batchSize,y,r.outChannels]:[r.batchSize,r.outChannels,y],!0,!1,I,A,T,C),N=m?[E,x]:[x,E];if(o&&N.push(o),T&&N.push(a),C){const e=i.makeTensorInfo([],"float32",V3(s,"float32"));N.push(e),b.push(e)}const O=i.runWebGLProgram(_,N,"float32"),R=mxe({inputs:{x:O},backend:i,attrs:{shape:r.outShape}});b.push(O);for(const $ of b)i.disposeIntermediateTensorInfo($);return R}const nke={kernelName:F0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:a,pad:s,dataFormat:l,dilations:u,dimRoundingMode:c}=r,h=o9(l),d=X6(i.shape,o.shape,a,u,s,c,!1,h);let p;if(1!==d.filterHeight||1!==d.filterWidth||1!==d.dilationHeight||1!==d.dilationWidth||1!==d.strideHeight||1!==d.strideWidth||"SAME"!==d.padInfo.type&&"VALID"!==d.padInfo.type)if(d.strideWidth<=2&&"channelsLast"===h&&r0().getBool("WEBGL_EXP_CONV")){const e=new Qwe(d),t=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];p=n.runWebGLProgram(e,[i,o],"float32",t)}else if(r0().getBool("WEBGL_CONV_IM2COL"))p=tke({x:i,filter:o,convInfo:d,backend:n});else{const e=new Xwe(d);p=n.runWebGLProgram(e,[i,o],"float32")}else p=eke({x:i,filter:o,convInfo:d,backend:n});const f=mxe({inputs:{x:p},backend:n,attrs:{shape:d.outShape}});return n.disposeIntermediateTensorInfo(p),f}};class rke{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,o="channelsLast"===e.dataFormat;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${r};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${i};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              ${o?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);"}\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class ike{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,o="channelsLast"===e.dataFormat,a=t-1-e.padInfo.top,s=n-1-e.padInfo.left,l=o?1:2,u=o?2:3,c=o?3:1;this.userCode=`\n      const ivec2 pads = ivec2(${a}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[${c}];\n\n        ivec2 dyCorner = ivec2(coords[${l}], coords[${u}]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${i}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n\n              if (${o}) {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class oke{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,i=e.padInfo.front,o=e.padInfo.top,a=e.padInfo.left;this.userCode=`\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yF = 0; yF < ${e.outDepth}; yF++) {\n            int xF = wF + yF * ${t} - ${i};\n\n            if (xF < 0 || xF >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int yR = 0; yR < ${e.outHeight}; yR++) {\n              int xR = wR + yR * ${n} - ${o};\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int yC = 0; yC < ${e.outWidth}; yC++) {\n                int xC = wC + yC * ${r} - ${a};\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class ake{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,s=t-1-e.padInfo.front,l=n-1-e.padInfo.top,u=r-1-e.padInfo.left;this.userCode=`\n      const ivec3 pads = ivec3(${s}, ${l}, ${u});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${t}; wF++) {\n          float dyF = float(dyFCorner + wF) / ${i}.0;\n\n          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ${t} - 1 - wF;\n\n          for (int wR = 0; wR < ${n}; wR++) {\n            float dyR = float(dyRCorner + wR) / ${o}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ${n} - 1 - wR;\n\n            for (int wC = 0; wC < ${r}; wC++) {\n              float dyC = float(dyCCorner + wC) / ${a}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ${r} - 1 - wC;\n\n              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const ske={kernelName:L0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:a,pad:s,dataFormat:l,dimRoundingMode:u,filterShape:c}=r,h=o9(l),d=X6(i.shape,c,a,1,s,u,!1,h),p=new rke(d);return n.runWebGLProgram(p,[i,o],"float32")}};class lke{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=cve(this.outputShape.length);const t=e.filterHeight,n=e.filterWidth,r=t-1-e.padInfo.top,i=n-1-e.padInfo.left;this.userCode=`\n      const ivec2 pads = ivec2(${r}, ${i});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            int wCPerm = ${n} - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    `}}const uke={kernelName:j0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{inputShape:a,strides:s,pad:l,dataFormat:u,dimRoundingMode:c}=r,h=o9(u),d=X6(a,o.shape,s,1,l,c,!1,h);if(r0().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&"channelsLast"===h){const e=[[d.strideHeight,d.strideWidth]],t=new lke(d);return n.runWebGLProgram(t,[i,o],"float32",e)}{const e=new ike(d);return n.runWebGLProgram(e,[i,o],"float32")}}};const cke={kernelName:z0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:a,pad:s,dilations:l}=r,u=Y6(i.shape,o.shape,a,l,s),c=new Ywe(u);return n.runWebGLProgram(c,[i,o],"float32")}};const hke={kernelName:B0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:a,pad:s,filterShape:l}=r,u=Y6(i.shape,l,a,1,s),c=new oke(u);return n.runWebGLProgram(c,[i,o],"float32")}};const dke={kernelName:U0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{pad:a,strides:s,inputShape:l}=r,u=Y6(l,o.shape,s,1,a),c=new ake(u);return n.runWebGLProgram(c,[i,o],"float32")}},pke=oxe({opSnippet:ixe+"\n  return cos(x);\n",packedOpSnippet:`\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ${Hbe}\n  return result;\n`}),fke={kernelName:W0,backendName:"webgl",kernelFunc:pke},mke=oxe({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),gke={kernelName:V0,backendName:"webgl",kernelFunc:mke};class yke{constructor(e,t,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,a,s,l]=e,[u]=t,[c,h]=n;this.outputShape=[u,c,h,l];const d="bilinear"===r?1:0,[p,f]=[a-1+".0",s-1+".0"],[m,g,y]=c>1?[""+(a-1)/(c-1),"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[v,b,x]=h>1?[""+(s-1)/(h-1),"(x2-x1) * width_ratio",`x1*${f} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${f}`];this.userCode=`\n      const float height_ratio = float(${m});\n      const float width_ratio = float(${v});\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ${o}) {\n          return;\n        }\n\n        float height_scale = ${g};\n        float width_scale = ${b};\n\n        float in_y = ${y};\n        if( in_y < 0.0 || in_y > ${p} ) {\n          setOutput(float(${i}));\n          return;\n        }\n        float in_x = ${x};\n        if( in_x < 0.0 || in_x > ${f} ) {\n          setOutput(float(${i}));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(${d} == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    `}}const vke={kernelName:q0,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{image:i,boxes:o,boxInd:a}=t,{cropSize:s,method:l,extrapolationValue:u}=r,c=new yke(i.shape,o.shape,s,l,u);return n.runWebGLProgram(c,[i,o,a],"float32")}};var bke;!function(e){e.Prod="*",e.Sum="+"}(bke||(bke={}));class xke{constructor(e,t,n,r){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,o=this.op===bke.Prod?"1.0":"0.0",a=n?o:`getX(${wke(i,"coords",this.op)})`,s=this.outputShape[this.outputShape.length-1];let l="",u="";n?(l=r?"end != "+(s-1):"end != 0",u=r?"end + 1":"end - 1"):(l=r?`end + pow2 < ${s}`:"end >= pow2",u=r?"end + pow2":"end - pow2"),this.userCode=`\n      void main() {\n        ${rve(i)} coords = getOutputCoords();\n        int end = ${kke(i,"coords",this.op)};\n        float val = ${a};\n        int pow2 = int(pow(2.0, index));\n        if (${l}) {\n          int idx = ${u};\n          ${kke(i,"coords",this.op)} = idx;\n          val ${this.op}= getX(${wke(i,"coords",this.op)});\n        }\n        setOutput(val);\n      }\n    `}}function wke(e,t,n){if(1===e)return`${t}`;if(2===e)return`${t}.x, ${t}.y`;if(3===e)return`${t}.x, ${t}.y, ${t}.z`;if(4===e)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}function kke(e,t,n){if(1===e)return`${t}`;if(2===e)return`${t}.y`;if(3===e)return`${t}.z`;if(4===e)return`${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}function Ske(e,t,n,r,i,o){const a=t.shape.length,s=J9([r],a);let l=t;null!=s&&(l=Ixe({inputs:{x:t},backend:n,attrs:{perm:s}}));const u=e7(1,a)[0];if(u!==a-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${t.shape.length-1} but got axis=${r}`);const c=l.shape[u];let h=Kbe({inputs:{x:l},backend:n});for(let d=0;d<=Math.ceil(Math.log2(c))-1;d++){const t=new xke(e,l.shape,!1,o),r=[[d]],i=h;h=n.runWebGLProgram(t,[h],h.dtype,r),n.disposeIntermediateTensorInfo(i)}if(i){const t=new xke(e,l.shape,i,o),r=h;h=n.runWebGLProgram(t,[h],h.dtype),n.disposeIntermediateTensorInfo(r)}if(null!=s){const e=Ixe({inputs:{x:h},backend:n,attrs:{perm:Z9(s)}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(l),e}return h}const Eke={kernelName:G0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,exclusive:a,reverse:s}=r;return Ske(bke.Prod,i,n,o,a,s)}};const Ike={kernelName:H0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,exclusive:a,reverse:s}=r;return Ske(bke.Sum,i,n,o,a,s)}};const Tke={kernelName:K0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,weights:o}=t,{size:a,binaryOutput:s}=r;if(1===i.shape.length){const e=n.readSync(i.dataId),t=n.readSync(o.dataId),r=Nve(e,t,o.dtype,o.shape,a);return n.makeTensorInfo([a],o.dtype,r)}if(2===i.shape.length){const e=n.bufferSync(i),t=n.bufferSync(o),r=Ove(e,t,a,s);return n.makeTensorInfo(r.shape,o.dtype,r.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}};class Cke{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode=`\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ${this.getHeightCoordString()};\n      int w = ${this.getWidthCoordString()};\n      int d = ${this.getDepthCoordString()};\n\n      int in_h = h / ${t};\n      int offset_h = imod(h, ${t});\n      int in_w = w / ${t};\n      int offset_w = imod(w, ${t});\n      int offset_d = (offset_h * ${t} + offset_w) *\n        ${this.getOutputDepthSize()};\n      int in_d = d + offset_d;\n\n      float result = ${this.getInputSamplingString()};\n      setOutput(result);\n    }\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}const Ake={kernelName:X0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockSize:o,dataFormat:a}=r,s=i.shape[0],l=("NHWC"===a?i.shape[1]:i.shape[2])*o,u=("NHWC"===a?i.shape[2]:i.shape[3])*o,c=("NHWC"===a?i.shape[3]:i.shape[1])/(o*o),h=new Cke("NHWC"===a?[s,l,u,c]:[s,c,l,u],o,a);return n.runWebGLProgram(h,[i],i.dtype)}};class _ke{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=cve(this.outputShape.length);const o=e.filterHeight,a=e.filterWidth,s=e.outChannels/e.inChannels;let l="",u="";n&&(l=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:i?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,u="result = activation(result);");const c=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${l}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${s};\n        int q = d2 - d1 * ${s};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${o}; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${a}; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${c}\n        ${u}\n        setOutput(result);\n      }\n    `}}class Nke{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=cve(this.outputShape.length);const o=e.outChannels/e.inChannels,a=e.padInfo.left,s=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,c=e.filterWidth,h=c;let d="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let g=0;g<c;g++)d+=`\n          vec4 xTexelC${2*g};\n          int xTexelC${2*g}Ready;\n          vec4 xTexelC${2*g+1};\n          int xTexelC${2*g+1}Ready;\n          vec4 xC${g};`;d+=`\n    for (int r = 0; r < ${u}; r++) {\n      `;for(let g=0;g<c;g++)d+=`\n          xTexelC${2*g} = vec4(0.0);\n          xTexelC${2*g}Ready = 0;\n          xTexelC${2*g+1} = vec4(0.0);\n          xTexelC${2*g+1}Ready = 0;\n          xC${g} = vec4(0.0);`;d+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let g=0;g<(h+1)/2;g++){const e=2*g;if(d+=`\n          xC = xCCorner + ${e*l};\n          `,1===s){if(e<c&&(a%2===1?(d+=`\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e}Ready == 0) {\n                  xTexelC${e} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${e}.zw = vec2(0.0);\n                  }\n                  xTexelC${e}Ready = 1;\n                }\n              `,d+=1===l&&e>0?`\n                xC${e} = vec4(xTexelC${e-2}.zw, xTexelC${e}.xy);\n                `:`\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC${e} = vec4(previous.zw, xTexelC${e}.xy);\n                  } else {\n                    xC${e} = vec4(0.0, 0.0, xTexelC${e}.xy);\n                  }\n                  `):d+=`\n                if (xC >= 0 && xC < inDims[1] && xTexelC${e}Ready == 0) {\n                  xTexelC${e} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${e}.zw = vec2(0.0);\n                  }\n                  xTexelC${e}Ready = 1;\n                }\n\n                xC${e} = xTexelC${e};\n                `,e+1<c)){const t=a%2===0?wZ(l):l;l%2===0&&a%2===1||l%2!==0&&a%2!==1?(d+=`\n                  xCOffset = xC + imod(pads[1], 2) + ${t};\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e+1}Ready == 0) {\n                    xTexelC${e+1} = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC${e+1}.zw = vec2(0.0);\n                    }\n                    xTexelC${e+1}Ready = 1;\n                  }\n                  `,d+=l>1?`\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC${e+1} = vec4(previous.zw, xTexelC${e+1}.xy);\n                    } else {\n                     xC${e+1} = vec4(0.0, 0.0, xTexelC${e+1}.xy);\n                    }\n                    `:`\n                    xC${e+1} = vec4(xTexelC${e}.zw, xTexelC${e+1}.xy);\n                    `):d+=1===t?`\n                    xC${e+1} = xTexelC${e};\n                    `:`\n                    xCOffset = xC + ${t};\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e+1}Ready == 0) {\n                      xTexelC${e+1} = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC${e+1}.zw = vec2(0.0);\n                      }\n                      xTexelC${e+1}Ready = 1;\n                    }\n\n                    xC${e+1} = xTexelC${e+1};\n                    `}}else e<c&&(a%2===1?(d+=`\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e}Ready == 0) {\n                  xTexelC${e} = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${e}.zw = vec2(0.0);\n                  }\n                  xTexelC${e}Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${e+1}Ready == 0) {\n                  xTexelC${e+1} = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC${e+1}.zw = vec2(0.0);\n                  }\n                  xTexelC${e+1}Ready = 1;\n                }\n\n                xC${e} = vec4(xTexelC${e}.zw, xTexelC${e+1}.zw);\n              `,e+1<c&&(d+=`\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC${e+1} = vec4(xTexelC${e+1}.xy, final.xy);\n                `)):(d+=`\n                if(xC >= 0 && xC < inDims[1] && xTexelC${e}Ready == 0) {\n                  xTexelC${e} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${e}.zw = vec2(0.0);\n                  }\n                  xTexelC${e}Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${e+1}Ready == 0) {\n                  xTexelC${e+1} = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${e+1}.zw = vec2(0.);\n                  }\n                  xTexelC${e+1}Ready = 1;\n                }\n\n                xC${e} = vec4(\n                  xTexelC${e}.xy, xTexelC${e+1}.xy);\n              `,e+1<c&&(d+=`\n                  xC${e+1} = vec4(xTexelC${e}.zw, xTexelC${e+1}.zw);\n                `)));e<c&&(d+=`\n            wTexel = getW(r, ${e}, d1, q);\n            dotProd += xC${e} * vec4(wTexel.xz, wTexel.xz);\n          `,e+1<c&&(d+=`\n              wTexel = getW(r, ${e+1}, d1, q);\n              dotProd += xC${e+1} * vec4(wTexel.xz, wTexel.xz);\n            `))}d+="\n    }\n  ",d+="\n      }\n    ";let p="",f="";n&&(p=r?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:i?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`vec4 activation(vec4 x) {\n          ${n}\n        }`,f="result = activation(result);");const m=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${p}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${o};\n        int q = d2 - d1 * ${o};\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ${d}\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ${m}\n        ${f}\n        setOutput(result);\n      }\n    `}}const Oke={kernelName:Y0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:a,pad:s,dilations:l,dimRoundingMode:u}=r;let c=l;null==c&&(c=[1,1]),SZ(r9(a,c),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`));const h=X6(i.shape,o.shape,a,c,s,u,!0);let d;d=r0().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels===1?new Nke(h):new _ke(h);const p=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];return n.runWebGLProgram(d,[i,o],"float32",p)}};class Rke{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ${o} + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${r};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${i};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class $ke{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,o=t-1-e.padInfo.top,a=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode=`\n      const ivec2 pads = ivec2(${o}, ${a});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${i}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ${s}; dm++) {\n              int d2 = d1 * ${s} + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const Dke={kernelName:Q0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:a,dilations:s,pad:l,dimRoundingMode:u,filterShape:c}=r,h=X6(i.shape,c,a,s,l,u,!0),d=new Rke(h);return n.runWebGLProgram(d,[i,o],"float32")}};const Pke={kernelName:J0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{strides:a,dilations:s,pad:l,dimRoundingMode:u,inputShape:c}=r,h=X6(c,o.shape,a,s,l,u,!0),d=new $ke(h);return n.runWebGLProgram(d,[i,o],"float32")}};class Mke{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}const Fke={kernelName:Z0,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t,i=[...r.shape,...r.shape],o=TZ(r.shape),a=mxe({inputs:{x:r},backend:n,attrs:{shape:[o]}}),s=new Mke(o),l=n.runWebGLProgram(s,[a],a.dtype),u=mxe({inputs:{x:l},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}};class Lke{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:n,padInfo:r,strideHeight:i,strideWidth:o,filterHeight:a,filterWidth:s,dilationHeight:l,dilationWidth:u}=e,{top:c,left:h}=r;this.userCode=`\n      const ivec2 strides = ivec2(${i}, ${o});\n      const ivec2 pads = ivec2(${c}, ${h});\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ${a}; h++) {\n          int hIn = hBeg + h * ${l};\n\n          if (hIn >= 0 && hIn < ${t}) {\n            for (int w = 0; w < ${s}; w++) {\n              int wIn = wBeg + w * ${u};\n\n              if (wIn >= 0 && wIn < ${n}) {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    `}}const jke={kernelName:e1,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:a,pad:s,dilations:l}=r,u=H6(i.shape,o.shape,a,s,"NHWC",l);let c;const h=new Lke(u);c=n.runWebGLProgram(h,[i,o],"float32");const d=mxe({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),d}};const zke={kernelName:o1,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:i}=r,o=t,{allDims:a,summedDims:s,idDims:l}=Lee(i,o.length);zee(a.length,l,o);const{path:u,steps:c}=Bee(s,l),h=c.length;let d=null,p=a.length;const f=[];for(let m=0;m<h;++m){for(const e of c[m]){const{permutationIndices:t,expandDims:r}=jee(p,l[e]);let i;Uee(t)?i=o[e]:(i=Ixe({inputs:{x:o[e]},backend:n,attrs:{perm:t}}),f.push(i));const a=i.shape.slice();for(let e=0;e<r.length;++e)a.splice(r[e],0,1);CZ(i.shape,a)||(i=mxe({inputs:{x:i},backend:n,attrs:{shape:a}}),f.push(i)),null===d?d=i:(d=pxe({inputs:{a:i,b:d},backend:n}),f.push(d))}m<h-1&&(u[m]>=0&&(d=Sxe({inputs:{x:d},backend:n,attrs:{axis:u[m]-(a.length-p),keepDims:!1}}),f.push(d)),p--)}for(const m of f)m!==d&&n.disposeIntermediateTensorInfo(m);return d}},Bke=oxe({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),Uke={kernelName:a1,backendName:"webgl",kernelFunc:Bke},Wke={kernelName:s1,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n}=e,{dy:r,y:i}=t,o=r0().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new qbe("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,i.shape):new Gbe("return (b >= 0.0) ? a : a * (b + 1.0);",r.shape,i.shape);return n.runWebGLProgram(o,[r,i],r.dtype)}},Vke=axe({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:Mve}),Gke={kernelName:u1,backendName:"webgl",kernelFunc:Vke},Hke=oxe({opSnippet:`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = ${xee};\n  float a1 = ${wee};\n  float a2 = ${kee};\n  float a3 = ${See};\n  float a4 = ${Eee};\n  float a5 = ${Iee};\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n`}),qke={kernelName:l1,backendName:"webgl",kernelFunc:Hke},Kke=oxe({opSnippet:ixe+"\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:Fve,dtype:"float32"}),Xke={kernelName:c1,backendName:"webgl",kernelFunc:Kke};function Yke(e){const{inputs:t,attrs:n,backend:r}=e,{dim:i}=n,{input:o}=t,a=o.shape.length,s=o.shape.slice();let l=i;return i<0&&(SZ(-(a+1)<=i,(()=>`Axis must be in the interval [${-(a+1)}, ${a}]`)),l=a+i+1),s.splice(l,0,1),mxe({inputs:{x:o},backend:r,attrs:{shape:s}})}const Qke={kernelName:h1,backendName:"webgl",kernelFunc:Yke},Jke="return exp(x) - 1.0;",Zke=oxe({opSnippet:Jke,packedOpSnippet:Jke,cpuKernelImpl:Lve}),eSe={kernelName:d1,backendName:"webgl",kernelFunc:Zke};class tSe{constructor(e,t,n){this.variableNames=["real","imag"];const r=t[1];this.outputShape=t;const i=n?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=n?`${r}.0`:"1.0";let a;if("real"===e)a="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);a="return real * expI + imag * expR;"}this.userCode=`\n      const float exponentMultiplier = ${i};\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ${a}\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(${r});\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ${r}; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ${o};\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    `}}function nSe(e,t,n){const r=n.texData.get(e.dataId),i=TZ(e.shape),o=e.shape[e.shape.length-1],a=mxe({inputs:{x:e},backend:n,attrs:{shape:[i/o,o]}}),s=a.shape,l=new tSe("real",s,t),u=new tSe("imag",s,t),c=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],h=n.runWebGLProgram(l,c,"float32"),d=n.runWebGLProgram(u,c,"float32"),p=Ybe({inputs:{real:h,imag:d},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d);const f=mxe({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(p),f}const rSe={kernelName:p1,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return nSe(r,!1,n)}};class iSe{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}function oSe(e){const{backend:t,attrs:n}=e,{shape:r,value:i}=n;let{dtype:o}=n;if(o=o||BZ(i),"string"===o){const e=MZ(o,TZ(r));return e.fill(i),t.makeTensorInfo(r,o,e)}{const e=new iSe(r,i),n=[[i]];return t.runWebGLProgram(e,[],o,n)}}const aSe={kernelName:f1,backendName:"webgl",kernelFunc:oSe};class sSe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ${t} - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ${t}) {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}const lSe={kernelName:m1,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n}=e;const{image:r}=t,i=n,o=new sSe(r.shape);return i.runWebGLProgram(o,[r],r.dtype)}},uSe="return floor(x);",cSe=oxe({opSnippet:uSe,packedOpSnippet:uSe,cpuKernelImpl:jve}),hSe={kernelName:g1,backendName:"webgl",kernelFunc:cSe},dSe=axe({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),pSe={kernelName:y1,backendName:"webgl",kernelFunc:dSe};class fSe{constructor(e){this.variableNames=["A"];const t=zye(),[n,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${n}.0);\n\n        vec4 values = ${t.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}class mSe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=zye(),[n,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${r}.0, ${n}.0);\n            vec4 values = ${t.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${t.output} = result;\n      }\n    `}}const gSe={kernelName:f3,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e;let{pixels:i}=t;const{numChannels:o}=r,a="undefined"!==typeof HTMLVideoElement&&i instanceof HTMLVideoElement,s="undefined"!==typeof HTMLImageElement&&i instanceof HTMLImageElement,[l,u]=a?[i.videoWidth,i.videoHeight]:[i.width,i.height],c=[u,l],h=[u,l,o];if(s||a){const e=r0().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=ySe&&e===vSe||(vSe=e,ySe=document.createElement("canvas").getContext("2d",{willReadFrequently:vSe})),ySe.canvas.width=l,ySe.canvas.height=u,ySe.drawImage(i,0,0,l,u),i=ySe.canvas}const d=n.makeTensorInfo(c,"int32");n.texData.get(d.dataId).usage=lye.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),i);const p=r0().getBool("WEBGL_PACK")?new mSe(h):new fSe(h),f=n.runWebGLProgram(p,[d],"int32");return n.disposeData(d.dataId),f}};let ySe,vSe=r0().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");const bSe={kernelName:y3,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o,bias:a,preluActivationWeights:s}=t,{strides:l,pad:u,dataFormat:c,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r,m=o9(c),g=X6(i.shape,o.shape,l,h,u,d,!1,m);let y;const v=[],b=null!=a,x=null!=s,w="leakyrelu"===p,k=()=>{const e=[i,o],t=(e,t)=>{if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){const t=mxe({inputs:{x:e},backend:n,attrs:{shape:[e.shape[0],1,1]}});return v.push(t),t}return e};if(b&&e.push(t(a,c)),x&&e.push(t(s,c)),w){const t=n.makeTensorInfo([],"float32",V3(f,"float32"));e.push(t),v.push(t)}return e};if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(g.strideWidth<=2&&"channelsLast"===m&&r0().getBool("WEBGL_EXP_CONV")){const e=p?sxe(p,!0):null,t=new Qwe(g,b,e,x,w),r=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],i=k();y=n.runWebGLProgram(t,i,"float32",r)}else if(r0().getBool("WEBGL_CONV_IM2COL"))y=tke({x:i,filter:o,convInfo:g,backend:n,bias:a,activation:p,preluActivationWeights:s,leakyreluAlpha:f});else{const e=p?sxe(p,!1):null,t=new Xwe(g,b,e,x,w),r=k();y=n.runWebGLProgram(t,r,"float32")}else y=eke({x:i,filter:o,convInfo:g,backend:n,bias:a,activation:p,preluActivationWeights:s,leakyreluAlpha:f});const S=mxe({inputs:{x:y},backend:n,attrs:{shape:g.outShape}});return v.push(y),v.forEach((e=>n.disposeIntermediateTensorInfo(e))),S}};const xSe={kernelName:v3,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o,bias:a,preluActivationWeights:s}=t,{strides:l,pad:u,dilations:c,dimRoundingMode:h,activation:d,leakyreluAlpha:p}=r,f=[];let m=c;null==m&&(m=[1,1]),SZ(r9(l,m),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`));const g=X6(i.shape,o.shape,l,m,u,h,!0),y=r0().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,v=d?sxe(d,y):null,b=[i,o],x=null!=a,w=null!=s,k="leakyrelu"===d;if(x&&b.push(a),w&&b.push(s),k){const e=n.makeTensorInfo([],"float32",V3(p,"float32"));b.push(e),f.push(e)}let S;S=y?new Nke(g,x,v,w,k):new _ke(g,x,v,w,k);const E=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],I=n.runWebGLProgram(S,b,"float32",E);return f.forEach((e=>n.disposeIntermediateTensorInfo(e))),I}};class wSe{constructor(e,t,n,r){this.sliceDim=e,this.strides=t,this.paramsShape=r,this.variableNames=["x","indices"],this.outputShape=n;const i=rve(n.length);let o="\n    int index;";for(let a=0;a<this.sliceDim;a++)o+=`\n          index = round(getIndices(coords[0], ${a}));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};\n          flattenIndex += index * ${this.strides[a]};`;this.userCode=`\n         void main() {\n          ${i} coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ${o}\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      `}}const kSe={kernelName:x1,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:i}=t,o=i.shape,a=o[o.length-1],s=TZ(r.shape),[l,u,c,h]=fee(r,i),d=mxe({inputs:{x:i},backend:n,attrs:{shape:[u,a]}}),p=mxe({inputs:{x:r},backend:n,attrs:{shape:[TZ(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,i])||"string"===r.dtype){const e=n.readSync(i.dataId),t=n.bufferSync(r),o=zve(e,t,r.dtype,u,a,c,h,r.shape,s);return n.makeTensorInfo(l,r.dtype,o.values)}const f=new wSe(a,h,[u,c],r.shape),m=n.runWebGLProgram(f,[p,d],p.dtype),g=mxe({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}};class SSe{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const n=rve(this.rank),r=function(e){const t=["resRC.x","resRC.y","resRC.z","resRC.w"],n=[];for(let r=0;r<e.length;r++)2===r?n.push("index"):n.push(`${t[r]}`);return n.join()}(e);this.userCode=`\n      void main() {\n        ${n} resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;\n        setOutput(inBounds * getA(${r}));\n      }\n    `}}function ESe(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,indices:o}=t,{axis:a,batchDims:s}=r,l=$Z(a,i.shape)[0];if(r0().get("DEBUG")){const e=n.readSync(o.dataId),t=i.shape[l];for(let n=0;n<e.length;++n){const r=e[n];SZ(r<=t-1&&r>=0,(()=>`GatherV2: the index value ${r} is not in [0, ${t-1}]`))}}const u=ote(i,o,l,s),c=TZ(o.shape),h=[],d=mxe({inputs:{x:i},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),p=mxe({inputs:{x:o},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});h.push(d),h.push(p);const f=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([i,o])||"string"===i.dtype){const e=n.bufferSync(p),t=n.bufferSync(d),r=Bve(t,e,f);return h.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(u.outputShape,r.dtype,r.values)}const m=new SSe(d.shape,f),g=n.runWebGLProgram(m,[d,p],d.dtype);h.push(g);const y=mxe({inputs:{x:g},backend:n,attrs:{shape:u.outputShape}});return h.forEach((e=>n.disposeIntermediateTensorInfo(e))),y}const ISe={kernelName:b1,backendName:"webgl",kernelFunc:ESe},TSe=axe({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:Uve,dtype:"bool"}),CSe={kernelName:w1,backendName:"webgl",kernelFunc:TSe},ASe=axe({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:Wve}),_Se={kernelName:k1,backendName:"webgl",kernelFunc:ASe};const NSe={kernelName:E1,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:r}=t;return nSe(r,!0,n)}},OSe=oxe({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),RSe={kernelName:T1,backendName:"webgl",kernelFunc:OSe},$Se=oxe({opSnippet:"return float(isinf(x));",dtype:"bool"}),DSe={kernelName:C1,backendName:"webgl",kernelFunc:$Se},PSe=oxe({opSnippet:"return float(isnan(x));",dtype:"bool"}),MSe={kernelName:A1,backendName:"webgl",kernelFunc:PSe},FSe=axe({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:Vve,dtype:"bool"}),LSe={kernelName:N1,backendName:"webgl",kernelFunc:FSe},jSe=axe({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:Gve,dtype:"bool"}),zSe={kernelName:O1,backendName:"webgl",kernelFunc:jSe};const BSe={kernelName:R1,backendName:"webgl",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:r,stop:i,num:o}=n,a=Hve(r,i,o);return t.makeTensorInfo([a.length],"float32",a)}},USe=oxe({opSnippet:ixe+"\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:qve}),WSe={kernelName:$1,backendName:"webgl",kernelFunc:USe},VSe=oxe({opSnippet:ixe+"\n  return log(1.0 + x);\n"}),GSe={kernelName:D1,backendName:"webgl",kernelFunc:VSe},HSe=axe({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),qSe={kernelName:P1,backendName:"webgl",kernelFunc:HSe},KSe=oxe({opSnippet:"return float(!(x >= 1.0));"}),XSe={kernelName:M1,backendName:"webgl",kernelFunc:KSe},YSe=axe({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),QSe={kernelName:F1,backendName:"webgl",kernelFunc:YSe};class JSe{constructor(e,t,n,r,i){this.variableNames=["x"],this.outputShape=[];const o=t,a=e[3]-1;let s;this.outputShape=e;const l=`float(${n}) + float(${r}) * sum`;s=.5===i?`inversesqrt(${l})`:1===i?`1.0/(${l})`:`exp(log(${l}) * float(-${i}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -${o}; j <= ${o}; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ${a}) {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ${s};\n        setOutput(val);\n      }\n    `}}class ZSe{constructor(e,t,n,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=t,a=e[3]-1;let s;this.outputShape=e;const l=`float(${n}) + float(${r}) * sum`;s=.5===i?`inversesqrt(${l})`:1===i?`1.0/(${l})`:`exp(log(${l}) * float(-${i}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ${this.outputShape[3]};\n        bool hasNextRow = c < ${this.outputShape[2]};\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ${o};\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ${o}; j <= ${o}; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ${s};\n        setOutput(result);\n      }\n    `}}const eEe={kernelName:L1,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{depthRadius:o,bias:a,alpha:s,beta:l}=r,u=r0().getBool("WEBGL_PACK_NORMALIZATION")?new ZSe(i.shape,o,a,s,l):new JSe(i.shape,o,a,s,l);return n.runWebGLProgram(u,[i],i.dtype)}};class tEe{constructor(e,t,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=i,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ${this.depth}; ++d) {\n          int depthBegin = int(max(0.0, float(d - ${t})));\n          int depthEnd = int(min(float(${this.depth}),\n              float(d + ${t} + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ${this.depth};\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(${r}) * norm + float(${n});\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(${r})\n                * float(${i})\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ${i});\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    `}}const nEe={kernelName:j1,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i,y:o,dy:a}=t,{depthRadius:s,bias:l,alpha:u,beta:c}=r,h=new tEe(i.shape,s,l,u,c);return n.runWebGLProgram(h,[i,o,a],i.dtype)}};function rEe(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reductionIndices:o,keepDims:a}=r,s=i.shape.length,l=$Z(o,i.shape);let u=l;const c=J9(u,s),h=null!=c,d=n.shouldExecuteOnCPU([i]);let p=i;if(h){if(d){const e=n.texData.get(p.dataId).values,t=new Array(s);for(let n=0;n<t.length;n++)t[n]=i.shape[c[n]];const r=kbe(e,i.shape,i.dtype,c,t);p=n.makeTensorInfo(t,i.dtype);n.texData.get(p.dataId).values=r}else p=kxe(i,c,n);u=e7(u.length,s)}Q9("max",u,s);const[f,m]=X9(p.shape,u);let g,y=f;if(a&&(y=Y9(f,l)),d){const e=n.texData.get(p.dataId).values,t=Kve(e,TZ(m),y,i.dtype);g=n.makeTensorInfo(y,i.dtype);n.texData.get(g.dataId).values=t}else g=function(e,t,n,r){const i=TZ(t),o=mxe({inputs:{x:e},attrs:{shape:[TZ(e.shape)/i,i]},backend:r}),a=bxe(o,e.dtype,"max",r),s=mxe({inputs:{x:a},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(a),s}(p,m,y,n);return h&&n.disposeIntermediateTensorInfo(p),g}const iEe={kernelName:z1,backendName:"webgl",kernelFunc:rEe},oEe=axe({opSnippet:Vbe+"\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+Hbe+"\n  return result;\n",cpuKernelImpl:Xve}),aEe={kernelName:B1,backendName:"webgl",kernelFunc:oEe};const sEe={kernelName:U1,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;Lye(i,"maxPool");const{filterSize:o,strides:a,pad:s,dimRoundingMode:l}=r;SZ(r9(a,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '1'`));const u=q6(i.shape,o,a,1,s,l);if(1===u.filterWidth&&1===u.filterHeight&&CZ(u.inShape,u.outShape))return Kbe({inputs:{x:i},backend:n});const c=new awe(u,"max",!1);return n.runWebGLProgram(c,[i],i.dtype)}};const lEe={kernelName:V1,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:o,strides:a,pad:s,dataFormat:l,dimRoundingMode:u}=r,c=K6(i.shape,o,a,[1,1,1],s,u,l),h=new swe(c,"max",!1);return n.runWebGLProgram(h,[i],i.dtype)}};class uEe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,i=e.effectiveFilterHeight,o=e.effectiveFilterWidth,a=i-1-e.padInfo.top,s=o-1-e.padInfo.left,l=i*o-1;this.userCode=`\n      const ivec2 pads = ivec2(${a}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${i};\n          wR += ${r}) {\n          float dyR = float(dyRCorner + wR) / ${t}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${o}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${n}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ${l} - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ${o} + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class cEe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,i=e.dilationDepth,o=e.dilationHeight,a=e.dilationWidth,s=e.effectiveFilterDepth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=s-1-e.padInfo.front,h=l-1-e.padInfo.top,d=u-1-e.padInfo.left,p=s*l*u-1;this.userCode=`\n      const ivec3 pads = ivec3(${c}, ${h}, ${d});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${s};\n           wD += ${i}) {\n          float dyD = float(dyDCorner + wD) / ${t}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${l};\n              wR += ${o}) {\n            float dyR = float(dyRCorner + wR) / ${n}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${u};\n                wC += ${a}) {\n              float dyC = float(dyCCorner + wC) / ${r}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ${p} -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ${l} * ${u} +\n                  wR * ${u} + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const hEe={kernelName:G1,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,a=o,{filterSize:s,strides:l,pad:u,dimRoundingMode:c}=r,h=K6(a.shape,s,l,[1,1,1],u,c),d=new swe(h,"max",!0),p=n.runWebGLProgram(d,[a],a.dtype),f=new cEe(h),m=n.runWebGLProgram(f,[i,p],a.dtype);return n.disposeIntermediateTensorInfo(p),m}};const dEe={kernelName:W1,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o,output:a}=t,s=o;Lye([o,a],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:h}=r,d=q6(s.shape,l,u,1,c,h),p=new awe(d,"max",!0),f=n.runWebGLProgram(p,[s],s.dtype),m=new uEe(d),g=n.runWebGLProgram(m,[i,f],s.dtype);return n.disposeIntermediateTensorInfo(f),g}};const pEe={kernelName:H1,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:i}=t,{filterSize:o,strides:a,pad:s,includeBatchInIndex:l}=n,u=r;SZ(4===i.shape.length,(()=>`Error in maxPool: input must be rank 4 but got rank ${i.shape.length}.`));const c=[1,1];SZ(r9(a,c),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`));const h=q6(i.shape,o,a,c,s),[d,p]=function(e,t,n,r){let i=new awe(n,"max",!1);const o=r.runWebGLProgram(i,[e],"float32");return i=new awe(n,"max",!0,!0,t),[o,r.runWebGLProgram(i,[e],"float32")]}(i,l,h,u);return[d,p]}};const fEe={kernelName:q1,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{x:i}=t,{keepDims:o,axis:a}=n,s=r,l=i.shape.length,u=$Z(a,i.shape);let c=u;const h=J9(c,l),d=null!=h,p=s.shouldExecuteOnCPU([i]),f=[];let m=i;if(d){if(p){const e=s.texData.get(m.dataId).values,t=new Array(l);for(let r=0;r<t.length;r++)t[r]=i.shape[h[r]];const n=kbe(e,i.shape,i.dtype,h,t);m=s.makeTensorInfo(t,i.dtype);s.texData.get(m.dataId).values=n}else m=kxe(i,h,s);f.push(m),c=e7(c.length,l)}Q9("sum",c,l);const[g,y]=X9(m.shape,c);let v=g;o&&(v=Y9(g,u));const b=function(e,t,n,r){const i=TZ(t),o=mxe({inputs:{x:e},attrs:{shape:[TZ(e.shape)/i,i]},backend:r}),a=bxe(o,"float32","mean",r),s=mxe({inputs:{x:a},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(a),s}(m,y,v,s);for(const x of f)s.disposeIntermediateTensorInfo(x);return b}};const mEe={kernelName:K1,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r,s=i.shape.length,l=$Z(o,i.shape);let u=l;const c=J9(u,s);let h=i;null!=c&&(h=Ixe({inputs:{x:i},backend:n,attrs:{perm:c}}),u=e7(u.length,i.shape.length)),Q9("min",u,s);const[d,p]=X9(h.shape,u),f=mxe({inputs:{x:h},backend:n,attrs:{shape:[-1,TZ(p)]}}),m=bxe(f,f.dtype,"min",n);let g;if(a){g=mxe({inputs:{x:m},backend:n,attrs:{shape:Y9(d,l)}})}else g=mxe({inputs:{x:m},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=c&&n.disposeIntermediateTensorInfo(h),g}},gEe=axe({opSnippet:Vbe+"\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+Hbe+"\n  return result;\n",cpuKernelImpl:Yve}),yEe={kernelName:X1,backendName:"webgl",kernelFunc:gEe};class vEe{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,i=rve(r),o=t.map((e=>e[0])).join(","),a=t.map(((t,n)=>t[0]+e[n])).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),l="reflect"===n?0:1;this.userCode=1!==r?`\n      ${i} start = ${i}(${o});\n      ${i} end = ${i}(${a});\n\n      void main() {\n        ${i} outC = getOutputCoords();\n        for (int i = 0; i < ${r}; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ${l};\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ${l};\n          }\n        }\n        ${i} coords = outC - start;\n        setOutput(getX(${s}));\n      }\n    `:`\n        int start = ${o};\n        int end = ${a};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ${l};\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ${l};\n          }\n          setOutput(getX(outC - start));\n        }\n      `}}class bEe{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,i=rve(r),o=t.map((e=>e[0])).join(","),a=t.map(((t,n)=>t[0]+e[n])).join(","),s=Ibe("rc",r),l=Ibe("source",r),u=`${s[r-1]} < ${this.outputShape[r-1]}`,c=1===r?"source":`vec2(${l.slice(-2).join()})`,h="reflect"===n?0:1;let d="";if(1===r){const e=`\n        ${i} source = rc;\n        if (source < start) {\n          source = start * 2 - source - ${h};\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ${h};\n        }\n        source -= start;\n      `;d=`\n        ${i} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${l.join()}), ${c});\n        ${s[r-1]} += 1;\n        if(${u}) {\n          ${e}\n          result[1] = getChannel(getX(${l.join()}), ${c});\n        }\n      `}else{const e=`\n        ${i} source = rc;\n        ${i} lt = ${i}(lessThan(source, start));\n        ${i} gte = ${i}(greaterThanEqual(source, end));\n        ${i} orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ${h}) +\n                gte * ((end - 1) * 2 - source + ${h});\n        source -= start;\n      `;d=`\n        ${i} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${l.join()}), ${c});\n        ${s[r-1]} += 1;\n        if(${u}) {\n          ${e}\n          result[1] = getChannel(getX(${l.join()}), ${c});\n        }\n        rc = outputLoc;\n        ${s[r-2]} += 1;\n        if(${s[r-2]} < ${this.outputShape[r-2]}) {\n          ${e}\n          result[2] = getChannel(getX(${l.join()}), ${c});\n          ${s[r-1]} += 1;\n          if(${u}) {\n            ${e}\n            result[3] = getChannel(getX(${l.join()}), ${c});\n          }\n        }\n      `}this.userCode=`\n      const ${i} start = ${i}(${o});\n      const ${i} end = ${i}(${a});\n\n      void main() {\n        ${i} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${d}\n        setOutput(result);\n      }\n    `}}const xEe={kernelName:Y1,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e;const{x:i}=t,{paddings:o,mode:a}=r,s=r0().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new bEe(i.shape,o,a):new vEe(i.shape,o,a);return n.runWebGLProgram(s,[i],i.dtype)}},wEe=axe({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+Hbe+"\n  return result;\n"}),kEe={kernelName:Q1,backendName:"webgl",kernelFunc:wEe};class SEe{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${t-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${t-1}));\n      }\n    `}}const EEe=axe({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),IEe={kernelName:i1,backendName:"webgl",kernelFunc:EEe},TEe="return a - b;",CEe=axe({opSnippet:TEe,packedOpSnippet:TEe,supportsComplex:!0,cpuKernelImpl:bbe}),AEe={kernelName:n3,backendName:"webgl",kernelFunc:CEe};function _Ee(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{dim:o}=r,a=$Z([o],i.shape),s=rEe({inputs:{x:i},backend:n,attrs:{reductionIndices:a,keepDims:!1}}),l=Y9(s.shape,a),u=mxe({inputs:{x:s},backend:n,attrs:{shape:l}}),c=CEe({inputs:{a:i,b:u},backend:n}),h=Kke({inputs:{x:c},backend:n}),d=Sxe({inputs:{x:h},backend:n,attrs:{axis:a,keepDims:!1}}),p=mxe({inputs:{x:d},backend:n,attrs:{shape:l}}),f=EEe({inputs:{a:h,b:p},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),f}const NEe={kernelName:W2,backendName:"webgl",kernelFunc:_Ee};const OEe={kernelName:J1,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{numSamples:o,seed:a,normalized:s}=r,l=s?i:_Ee({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),u=l.shape[0],c=l.shape[1],h=new SEe(u,c,o),d=[[a]],p=n.runWebGLProgram(h,[l],"int32",d);return s||n.disposeIntermediateTensorInfo(l),p}},REe=$be+"\n  return -x;\n";const $Ee={kernelName:e2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){const e=n.texData.get(r.dataId),[t,i]=Jve(e.values,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,t)}let i;return i=r0().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new Lbe(r.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new Rbe(r.shape,REe),n.runWebGLProgram(i,[r],r.dtype)}},DEe=x8;const PEe={kernelName:n2,backendName:"webgl",kernelFunc:function(e){b3("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:o}=t,{maxOutputSize:a,iouThreshold:s,scoreThreshold:l}=r,u=n.readSync(i.dataId),c=n.readSync(o.dataId),{selectedIndices:h}=DEe(u,c,a,s,l);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}},MEe=w8;const FEe={kernelName:r2,backendName:"webgl",kernelFunc:function(e){b3("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:o}=t,{maxOutputSize:a,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:u}=r,c=n.readSync(i.dataId),h=n.readSync(o.dataId),{selectedIndices:d,validOutputs:p}=MEe(c,h,a,s,l,u);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},LEe=k8;const jEe={kernelName:i2,backendName:"webgl",kernelFunc:function(e){b3("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:o}=t,{maxOutputSize:a,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}=r,c=n.readSync(i.dataId),h=n.readSync(o.dataId),d=a,p=s,f=l,m=u,{selectedIndices:g,selectedScores:y}=LEe(c,h,d,p,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}};class zEe{constructor(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${r}), float(${n}),\n                      float(index == coords.y)));\n      }\n    `}}const BEe={kernelName:a2,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{indices:i}=t,{dtype:o,depth:a,onValue:s,offValue:l}=r,u=TZ(i.shape),c=new zEe(u,a,s,l),h=mxe({inputs:{x:i},backend:n,attrs:{shape:[u]}}),d=n.runWebGLProgram(c,[h],o);n.disposeIntermediateTensorInfo(h);const p=mxe({inputs:{x:d},backend:n,attrs:{shape:[...i.shape,a]}});return n.disposeIntermediateTensorInfo(d),p}};function UEe(e){const{inputs:t,backend:n}=e,{x:r}=t;if("complex64"===r.dtype){const e=_we({inputs:{input:r},backend:n}),t=UEe({inputs:{x:e},backend:n}),i=Vwe({inputs:{input:r},backend:n}),o=UEe({inputs:{x:i},backend:n}),a=Ybe({inputs:{real:t,imag:o},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),a}return oSe({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}const WEe={kernelName:d3,backendName:"webgl",kernelFunc:UEe};const VEe={kernelName:o2,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,{x:i}=n;if("string"===i.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===i.dtype){const t=_we({inputs:{input:i},backend:r}),n=e({inputs:{x:t},backend:r}),o=Vwe({inputs:{input:i},backend:r}),a=UEe({inputs:{x:o},backend:r}),s=Ybe({inputs:{real:n,imag:a},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(a),s}return oSe({attrs:{shape:i.shape,dtype:i.dtype,value:1},backend:r})}};const GEe={kernelName:s2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r;if(1===t.length)return Yke({inputs:{input:t[0]},backend:n,attrs:{dim:i}});const o=t[0].shape,a=t[0].dtype;t.forEach((e=>{EZ(o,e.shape,"All tensors passed to stack must have matching shapes"),SZ(a===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const s=[],l=qwe({inputs:t.map((e=>{const t=Yke({inputs:{input:e},backend:n,attrs:{dim:i}});return s.push(t),t})),backend:n,attrs:{axis:i}});return s.forEach((e=>n.disposeIntermediateTensorInfo(e))),l}};class HEe{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,i=rve(r),o=t.map((e=>e[0])).join(","),a=t.map(((t,n)=>t[0]+e[n])).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?`\n      ${i} start = ${i}(${o});\n      ${i} end = ${i}(${a});\n\n      void main() {\n        ${i} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ${i} coords = outC - start;\n          setOutput(getX(${s}));\n        }\n      }\n    `:`\n        int start = ${o};\n        int end = ${a};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}}class qEe{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const r=e.length,i=rve(r),o=t.map((e=>e[0])).join(","),a=t.map(((t,n)=>t[0]+e[n])).join(","),s=Ibe("rc",r),l=Ibe("source",r),u=`${s[r-1]} < ${this.outputShape[r-1]}`,c=1===r?"source":`vec2(${l.slice(-2).join()})`,h=[`${i} rc = outputLoc;`,`${s[r-1]} += 1;\n       if(${u}) {\n      `,1===r?"":`}\n       rc = outputLoc;\n       ${s[r-2]} += 1;\n       if(${s[r-2]} < ${this.outputShape[r-2]}) {`,1===r?"":`  ${s[r-1]} += 1;\n         if(${u}) {`],d=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let f=0,m=1===r?2:4;f<m;f++)p+=`\n        ${h[f]}\n        if (${d}) {\n          result[${f}] = float(value);\n        } else {\n          ${i} source = rc - start;\n          result[${f}] = getChannel(getX(${l.join()}), ${c});\n        }\n      `;p+=1===r?"} ":"}}",this.userCode=`\n      const ${i} start = ${i}(${o});\n      const ${i} end = ${i}(${a});\n\n      void main() {\n        ${i} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${p}\n        setOutput(result);\n      }\n    `}}const KEe=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:o,constantValue:a}=r;if(0===TZ(i.shape)){const e=o.map(((e,t)=>e[0]+i.shape[t]+e[1]));return oSe({backend:n,attrs:{shape:e,value:a,dtype:i.dtype}})}const s=r0().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new qEe(i.shape,o,a):new HEe(i.shape,o,a),l=[[a]];return n.runWebGLProgram(s,[i],i.dtype,l)},XEe={kernelName:l2,backendName:"webgl",kernelFunc:KEe},YEe=axe({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+Hbe+"\n  return result;\n"}),QEe={kernelName:u2,backendName:"webgl",kernelFunc:YEe};const JEe={kernelName:h2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r,s=i.shape.length,l=[],u=$Z(o,i.shape);let c=u;const h=J9(c,s);let d,p=i;if(null!=h&&(p=Ixe({inputs:{x:i},backend:n,attrs:{perm:h}}),c=e7(c.length,s),l.push(p)),Q9("prod",c,s),n.shouldExecuteOnCPU([p])){const e=n.texData.get(p.dataId).values,{outVals:t,outShape:r,outDtype:i}=ebe(p.shape,p.dtype,e,c);d=n.makeTensorInfo(r,i,t)}else{const[e,t]=X9(p.shape,c),r=TZ(t),o=mxe({inputs:{x:p},backend:n,attrs:{shape:[-1,r]}}),a=bxe(o,b4(i.dtype),"prod",n);d=mxe({inputs:{x:a},backend:n,attrs:{shape:e}}),l.push(o),l.push(a)}if(a){l.push(d);const e=Y9(d.shape,u);d=mxe({inputs:{x:d},backend:n,attrs:{shape:e}})}return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),d}};const ZEe={kernelName:d2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:i,paramsDenseValues:o,indices:a}=t,{outputRaggedRank:s}=r,l=i.map((e=>n.readSync(e.dataId))),u=i.map((e=>e.shape)),c=n.readSync(o.dataId),h=n.readSync(a.dataId),[d,p,f]=tbe(l,u,c,o.shape,o.dtype,h,a.shape,s),m=d.map((e=>n.makeTensorInfo([e.length],"int32",e))),g=n.makeTensorInfo(f,o.dtype,p);return m.concat([g])}};const eIe={kernelName:p2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{starts:r,limits:i,deltas:o}=t,a=n.readSync(r.dataId),s=n.readSync(i.dataId),l=n.readSync(o.dataId),[u,c]=nbe(a,r.shape,r.dtype,s,i.shape,l,o.shape);return[n.makeTensorInfo([u.length],"int32",u),n.makeTensorInfo([c.length],r.dtype,c)]}};const tIe={kernelName:f2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{shape:i,values:o,defaultValue:a,rowPartitionTensors:s}=t,{rowPartitionTypes:l}=r,u=n.readSync(i.dataId),c=n.readSync(o.dataId),h=n.readSync(a.dataId),d=s.map((e=>n.readSync(e.dataId))),p=s.map((e=>e.shape)),[f,m]=rbe(u,i.shape,c,o.shape,o.dtype,h,a.shape,d,p,l);return n.makeTensorInfo(f,o.dtype,m)}},nIe=e=>{const{backend:t,attrs:n}=e,{start:r,stop:i,step:o,dtype:a}=n,s=ibe(r,i,o,a);return t.makeTensorInfo([s.length],a,s)},rIe={kernelName:m2,backendName:"webgl",kernelFunc:nIe},iIe=oxe({opSnippet:"return 1.0 / x;"}),oIe={kernelName:y2,backendName:"webgl",kernelFunc:iIe},aIe=oxe({opSnippet:$be+"\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),sIe={kernelName:v2,backendName:"webgl",kernelFunc:aIe},lIe=oxe({opSnippet:$be+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),uIe={kernelName:E2,backendName:"webgl",kernelFunc:lIe};class cIe{constructor(e,t,n,r,i){this.variableNames=["A"],this.outputShape=[];const[o,a,s,l]=e;this.outputShape=[o,t,n,l];const u=[r&&t>1?a-1:a,r&&n>1?s-1:s],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];let h;h=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]});\n      const vec2 inputShapeRC = vec2(${a}.0, ${s}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${h};\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}class hIe{constructor(e,t,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,s,l]=e;this.outputShape=[o,t,n,l];const u=[r&&t>1?a-1:a,r&&n>1?s-1:s],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];let h;h=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]},\n          ${u[1]/c[1]});\n      const vec3 inputShapeRC = vec3(${a}.0, ${s}.0,\n                                     ${s}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${h};\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${l-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    `}}const dIe={kernelName:k2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:o,halfPixelCenters:a,size:s}=r,[l,u]=s,c=r0().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new hIe(i.shape,l,u,o,a):new cIe(i.shape,l,u,o,a);return n.runWebGLProgram(c,[i],"float32")}};class pIe{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,i]=t,[,o,a]=e,s=[n&&o>1?r-1:r,n&&a>1?i-1:i],l=[n&&o>1?o-1:o,n&&a>1?a-1:a],u=s[0]/l[0],c=s[1]/l[1],h=1/u,d=1/c,p=2*Math.ceil(h)+2,f=2*Math.ceil(d)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${c});\n\n        const float invHeightScale = float(${h});\n        const float invWidthScale = float(${d});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${o}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${a}) {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}const fIe={kernelName:S2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:o}=t,{alignCorners:a}=r,s=new pIe(o.shape,i.shape,a);return n.runWebGLProgram(s,[o],o.dtype)}};class mIe{constructor(e,t,n,r,i){this.variableNames=["A"],this.outputShape=[];const[o,a,s,l]=e;this.outputShape=[o,t,n,l];const u=[r&&t>1?a-1:a,r&&n>1?s-1:s],c=[r&&t>1?t-1:t,r&&n>1?n-1:n],h=r?"0.5":"0.0";let d;d=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]});\n      const vec2 inputShapeRC = vec2(${a}.0, ${s}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${d};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    `}}class gIe{constructor(e,t,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,s,l]=e;this.outputShape=[o,t,n,l];const u=[r&&t>1?a-1:a,r&&n>1?s-1:s],c=[r&&t>1?t-1:t,r&&n>1?n-1:n],h=r?"0.5":"0.0";let d;d=i?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]},\n          ${u[1]/c[1]});\n      const vec3 inputShapeRC = vec3(${a}.0, ${s}.0,\n                                     ${s}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${d};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${l-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    `}}const yIe={kernelName:x2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:o,halfPixelCenters:a,size:s}=r,[l,u]=s,c=r0().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new gIe(i.shape,l,u,o,a):new mIe(i.shape,l,u,o,a);return n.runWebGLProgram(c,[i],i.dtype)}};class vIe{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,r,i]=t,[,o,a]=e,s=[n&&o>1?r-1:r,n&&a>1?i-1:i],l=[n&&o>1?o-1:o,n&&a>1?a-1:a],u=s[0]/l[0],c=s[1]/l[1],h=1/u,d=1/c,p=2*Math.ceil(h)+2,f=2*Math.ceil(d)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${c});\n\n        const float invHeightScale = float(${h});\n        const float invWidthScale = float(${d});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${o}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${a}) {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(${s[0]}) *\n                (float(dyR) / float(${l[0]}));\n\n            float sourceFracCol =\n                float(${s[1]}) *\n                  (float(dyC) / float(${l[1]}));\n\n            int sourceNearestRow = int(min(\n                float(int(${r}) - 1),\n                ${n} ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(${i}) - 1),\n                ${n} ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}const bIe={kernelName:w2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{images:i,dy:o}=t,{alignCorners:a}=r,s=new vIe(o.shape,i.shape,a);return n.runWebGLProgram(s,[o],o.dtype)}};class xIe{constructor(e,t){this.variableNames=["x"];const n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);if(this.outputShape=e,1===n)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${e[0]} - coord - 1));\n        }\n      `);const r=e.map(((n,r)=>(n=>-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - coords[${n}] - 1`:`coords[${n}]`)(r))).join(","),i=rve(n);this.userCode=`\n      void main() {\n        ${i} coords = getOutputCoords();\n        setOutput(getX(${r}));\n      }\n    `}}class wIe{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);this.outputShape=e;const r=Ibe("rc",n),i=`${r[n-1]} + 1 < ${this.outputShape[n-1]}`,o=`${r[n-2]} + 1 < ${this.outputShape[n-2]}`,a=rve(n);function s(n){const r=e.map(((r,i)=>function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - ${r[n]} - 1`:`${r[n]}`}(i,n)));return`getChannel(getX(${r.join(",")}), vec2(${r.slice(-2).join(",")}))`}this.userCode=1===n?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${e[0]} - rc - 1),\n            ${e[0]} - rc - 1);\n          if(${i}){\n              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),\n                ${e[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${a} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${function(e){return s(e)}(r.slice())};\n          if(${i}){\n            result.g = ${function(e){return e[n-1]="("+e[n-1]+" + 1)",s(e)}(r.slice())};\n          }\n          if(${o}) {\n            result.b = ${function(e){return e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())};\n            if(${i}) {\n              result.a = ${function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}const kIe={kernelName:I2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dims:o}=r,a=i.shape.length,s=$Z(o,i.shape);if(0===a)return Kbe({inputs:{x:i},backend:n});const l=r0().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new wIe(i.shape,s):new xIe(i.shape,s);return n.runWebGLProgram(l,[i],i.dtype)}};class SIe{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const n=e[1],r=e[2];this.outputShape=e;let i="";i="number"===typeof t?`float outputValue = ${t.toFixed(2)};`:`\n        vec3 fill = vec3(${t.join(",")});\n        float outputValue = fill[coords[3]];`,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ${i}\n          if(coordX >= 0 && coordX < ${r} && coordY >= 0 && coordY < ${n}) {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}const EIe={kernelName:m3,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e;const{image:i}=t,{radians:o,fillValue:a,center:s}=n,l=r,u=new SIe(i.shape,a),[c,h]=lee(s,i.shape[1],i.shape[2]),d=[[c,h,Math.sin(o),Math.cos(o)]];return l.runWebGLProgram(u,[i],i.dtype,d)}},IIe=oxe({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),TIe={kernelName:T2,backendName:"webgl",kernelFunc:IIe},CIe=oxe({opSnippet:"return inversesqrt(x);",cpuKernelImpl:obe}),AIe={kernelName:C2,backendName:"webgl",kernelFunc:CIe};class _Ie{constructor(e,t,n,r,i,o){let a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const s=rve(i.length),l=rve(o.length);let u="";1===n?u="i":2===n&&(u="i, j");const c=`getIndices(${u})`;let h="";1===r?h="i":2===r&&(h="i, coords[1]");const d=`getUpdates(${h})`;let p="";a&&(p="coords[0], coords[1]");const f=`getDefaultValue(${p})`,m=t>1?"strides[j]":"strides";this.userCode=`\n        ${s} strides = ${s}(${i});\n\n        void main() {\n          ${l} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${e}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${t}; j++) {\n              int index = round(${c});\n              flattenedIndex += index * ${m};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ${d};\n              found = true;\n            }\n          }\n          setOutput(mix(${f}, sum, float(found)));\n        }\n      `}}class NIe{constructor(e,t,n,r,i,o){let a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const s=rve(i.length),l=rve(o.length);let u="";1===n?u="i":2===n&&(u="i, j");const c=`getIndices(${u})`;let h="";1===r?h="i":2===r&&(h="i, coords[1]");const d=`getUpdates(${h})`;let p="";a&&(p="coords[0], coords[1]");const f=`getDefaultValue(${p})`,m=t>1?"strides[j]":"strides",g=t>1?"strides[j + 1]":"strides";this.userCode=`\n        ${s} strides = ${s}(${i});\n\n        void main() {\n          ${l} coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ${e}; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ${t}; j+=2) {\n              ivec4 index = round(${c});\n              flattenedIndex += index.xz * ${m};\n              if (j + 1 < ${t}) {\n                flattenedIndex += index.yw * ${g};\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = ${d};\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(${f}, sum, found));\n        }\n      `}}const OIe={kernelName:A2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{indices:i,updates:o}=t,{shape:a}=r,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:h}=yee(0,i,a),d=[h/u,u];if(0===h)return n.makeTensorInfo(a,i.dtype);const p=mxe({inputs:{x:i},backend:n,attrs:{shape:[l,s]}}),f=mxe({inputs:{x:o},backend:n,attrs:{shape:[l,u]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));let g;g=r0().getBool("WEBGL_PACK")?new NIe(l,s,p.shape.length,f.shape.length,c,d):new _Ie(l,s,p.shape.length,f.shape.length,c,d);const y=n.runWebGLProgram(g,[f,p,m],f.dtype),v=mxe({inputs:{x:y},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(m),v}};class RIe{constructor(e,t,n,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,n];const i=`for (int i = 0; i < ${Math.ceil(Math.log2(t+1))}; ++i) { if (left >= right) break;`,o=2===r0().getNumber("WEBGL_VERSION")?"while (left < right) {":i,a="left"===r?"<":"<=";this.userCode=`\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ${o}\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ${a} value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     `}}const $Ie={kernelName:N2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:i,values:o}=t,{side:a}=r,s=new RIe(i.shape[0],i.shape[1],o.shape[1],a),l=[[i.shape[1]]];return n.runWebGLProgram(s,[i,o],"int32",l)}};class DIe{constructor(e,t,n){let r,i;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error(`Where for rank ${n} is not yet supported`);if(1===n)i="resRC",r="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],a=[];for(let r=0;r<t.length;r++)a.push(`${n[r]}`),r<e&&o.push(`${n[r]}`);r=o.join(),i=a.join()}const o=rve(n);this.userCode=`\n      void main() {\n        ${o} resRC = getOutputCoords();\n        float cVal = getC(${r});\n        if (cVal >= 1.0) {\n          setOutput(getA(${i}));\n        } else {\n          setOutput(getB(${i}));\n        }\n      }\n    `}}const PIe={kernelName:O2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:i,e:o}=t,a=new DIe(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(a,[r,i,o],v4(i.dtype,o.dtype))}},MIe=oxe({opSnippet:`\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ${vee};\n  float scale = ${bee};\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n`}),FIe={kernelName:R2,backendName:"webgl",kernelFunc:MIe},LIe=oxe({opSnippet:ixe+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:sbe}),jIe={kernelName:F2,backendName:"webgl",kernelFunc:LIe},zIe=oxe({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),BIe={kernelName:M2,backendName:"webgl",kernelFunc:zIe},UIe=oxe({opSnippet:ixe+"\n  return sin(x);\n",packedOpSnippet:`\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ${Hbe}\n  return result;\n`}),WIe={kernelName:D2,backendName:"webgl",kernelFunc:UIe},VIe=oxe({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),GIe={kernelName:P2,backendName:"webgl",kernelFunc:VIe},HIe=oxe({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),qIe={kernelName:L2,backendName:"webgl",kernelFunc:HIe},KIe={kernelName:B2,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:o,paddings:a}=r;SZ(i.shape.length<=4,(()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"));const s=o.reduce(((e,t)=>e*t)),l=[[0,0]];l.push(...a);for(let y=1+o.length;y<i.shape.length;++y)l.push([0,0]);const u=[],c=KEe({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),h=uee(c.shape,o,s,!1),d=cee(h.length,o.length,!1),p=hee(c.shape,o,s,!1),f=mxe({inputs:{x:c},backend:n,attrs:{shape:h}}),m=Ixe({inputs:{x:f},backend:n,attrs:{perm:d}}),g=mxe({inputs:{x:m},backend:n,attrs:{shape:p}});return u.push(c),u.push(f),u.push(m),u.forEach((e=>n.disposeIntermediateTensorInfo(e))),g}};const XIe={kernelName:V2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:r,values:i,denseShape:o,defaultValue:a}=t;if(1!==o.shape.length)throw new Error(`Dense shape must be a vector, saw:\n         ${o.shape}`);if(2!==r.shape.length)throw new Error(`Indices must be a matrix, saw:\n         ${r.shape}`);if(1!==i.shape.length)throw new Error(`Values must be a vector, saw:\n         ${i.shape}`);if(0!==a.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${a.shape}`);const s=n.readSync(r.dataId),l=n.readSync(i.dataId),u=n.readSync(o.dataId),c=n.readSync(a.dataId)[0],[h,d,p,f,m]=cbe(s,r.shape,r.dtype,l,i.dtype,u,c);return[n.makeTensorInfo(d,r.dtype,h),n.makeTensorInfo([d[0]],i.dtype,p),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map((e=>Number(e))))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};const YIe={kernelName:G2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:i,newShape:o}=t;if(2!==r.shape.length)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(1!==i.shape.length)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(1!==o.shape.length)throw new Error(`Target shape should be a vector but received shape ${o.shape}`);const a=Array.from(n.readSync(i.dataId)),s=n.readSync(r.dataId),l=Array.from(n.readSync(o.dataId)),[u,c,h]=hbe(s,r.shape,r.dtype,a,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([h.length],o.dtype,new Int32Array(h))]}};const QIe={kernelName:H2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:o}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error(`Indices should be a vector but received shape\n              ${i.shape}`);if(1!==o.shape.length)throw new Error(`Segment ids should be a vector but received shape\n              ${o.shape}`);const a=n.readSync(r.dataId),s=n.readSync(i.dataId),l=n.readSync(o.dataId),[u,c]=dbe(a,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(c,r.dtype,u)}};const JIe={kernelName:q2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:o}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error(`Indices should be a vector but received shape\n             ${i.shape}`);if(1!==o.shape.length)throw new Error(`Segment ids should be a vector but received shape\n             ${o.shape}`);const a=n.readSync(r.dataId),s=n.readSync(i.dataId),l=n.readSync(o.dataId),[u,c]=dbe(a,r.shape,r.dtype,s,l);return n.makeTensorInfo(c,r.dtype,u)}};const ZIe={kernelName:K2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:i,sparseValues:o,defaultValue:a}=t,{outputShape:s}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:h,outputSize:d}=yee(0,i,s),p=!1;if("string"===o.dtype){const e=n.bufferSync(i),t=n.bufferSync(o),r=K3(n.readSync(a.dataId)[0]),f=abe(e,t,s,d,c,u,l,h,r,p);return n.makeTensorInfo(s,f.dtype,f.values)}const f=new _Ie(u,l,i.shape.length,o.shape.length,h,[d,1],p),m=n.runWebGLProgram(f,[o,i,a],o.dtype),g=mxe({inputs:{x:m},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(m),g}};const eTe={kernelName:U2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{numOrSizeSplits:o,axis:a}=r,s=$Z(a,i.shape)[0],l=Vee(i,o,s),u=i.shape.length,c=new Array(u).fill(0),h=i.shape.slice();return l.map((e=>{const t=[...h];t[s]=e;const r=wwe({inputs:{x:i},backend:n,attrs:{begin:c,size:t}});return c[s]+=e,r}))}},tTe="return sqrt(x);",nTe=oxe({opSnippet:tTe,packedOpSnippet:tTe,cpuKernelImpl:pbe}),rTe={kernelName:j2,backendName:"webgl",kernelFunc:nTe},iTe={kernelName:Y2,backendName:"webgl",kernelFunc:oxe({opSnippet:"return x * x;"})},oTe="return (a - b) * (a - b);",aTe=axe({opSnippet:oTe,packedOpSnippet:oTe}),sTe={kernelName:X2,backendName:"webgl",kernelFunc:aTe};const lTe={kernelName:Q2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t;if("string"!==i.dtype)throw new Error("Input must be of datatype string");const o=ate(n.readSync(i.dataId)),a=fbe(o,"string",r);return n.makeTensorInfo(i.shape,"string",a)}};const uTe={kernelName:p3,backendName:"webgl",kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e;const{x:i}=t,o=$be+`\n    return x > 0.0 ? 1.0 : float(${n.alpha});\n  `,a=new Rbe(i.shape,o);return r.runWebGLProgram(a,[i],i.dtype)}};class cTe{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;const r=n.length,i=rve(n.length),o=rve(n.length);let a="";if(1===r)a="coords * strides + begin";else{let e=0;a=n.map(((t,r)=>(e++,1===n.length?`coords * strides[${r}] + begin[${r}]`:`coords[${e-1}] * strides[${r}] + begin[${r}]`))).join(",")}this.userCode=`\n      ${i} begin = ${i}(${e});\n      ${i} strides = ${i}(${t});\n\n      void main() {\n        ${o} coords = getOutputCoords();\n        setOutput(getX(${a}));\n      }\n    `}}const hTe={kernelName:J2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:o,end:a,strides:s,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:h,shrinkAxisMask:d}=r,{finalShapeSparse:p,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:v,end:b,strides:x}=B6(i.shape,o,a,s,l,u,c,h,d);let w;if(m)w=mxe({inputs:{x:i},backend:n,attrs:{shape:f}});else if(g||y){SZ(i.shape.length>=1,(()=>`Input must have rank at least 1, got: ${i.shape.length}`));const e=A6(v,b,x),t=wwe({inputs:{x:i},backend:n,attrs:{begin:v,size:e}});w=mxe({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{if(n.shouldExecuteOnCPU([i])){const e=n.readSync(i.dataId),t=P5(i.shape,i.dtype,e),r=mbe(p,t,x,v);w=n.makeTensorInfo(f,i.dtype,r.values)}else{const e=new cTe(v,x,p);w=n.runWebGLProgram(e,[i],i.dtype)}}const k=mxe({inputs:{x:w},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(w),k}};const dTe={kernelName:Z2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{separator:i,nGramWidths:o,leftPad:a,rightPad:s,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:h}=t,d=n.readSync(c.dataId),p=n.readSync(h.dataId),[f,m]=gbe(d,p,i,o,a,s,l,u);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(h.shape,"int32",m)]}};const pTe={kernelName:e3,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:i}=r,{input:o,delimiter:a}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(1!==o.shape.length)throw new Error(`Input must be a vector, got shape: ${o.shape}`);if(0!==a.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const s=n.readSync(o.dataId),l=n.readSync(a.dataId)[0],[u,c,h]=ybe(s,l,i),d=c.length;return[n.makeTensorInfo([d,2],"int32",u),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(h))]}};const fTe={kernelName:t3,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:i}=r,{input:o}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const a=n.readSync(o.dataId),s=vbe(a,i);return n.makeTensorInfo(o.shape,"int32",s)}},mTe=oxe({opSnippet:"return tan(x);"}),gTe={kernelName:r3,backendName:"webgl",kernelFunc:mTe},yTe=oxe({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),vTe={kernelName:i3,backendName:"webgl",kernelFunc:yTe};const bTe={kernelName:_2,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{tensor:i,indices:o,updates:a}=t,{}=r,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:h}=yee(0,o,i.shape),d=[h/u,u];if(0===h)return n.makeTensorInfo(i.shape,o.dtype);const p=mxe({inputs:{x:o},backend:n,attrs:{shape:[l,s]}}),f=mxe({inputs:{x:a},backend:n,attrs:{shape:[l,u]}}),m=mxe({inputs:{x:i},backend:n,attrs:{shape:d}}),g=new _Ie(l,s,p.shape.length,f.shape.length,c,d,!1,!0),y=n.runWebGLProgram(g,[f,p,m],m.dtype),v=mxe({inputs:{x:y},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),v}};class xTe{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let o=0;o<n.length;o++)n[o]=e[o]*t[o];this.outputShape=n,this.rank=n.length;const r=rve(this.rank),i=function(e){const t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(1===t)return`imod(resRC, ${e[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<e.length;i++)r.push(`imod(${n[i]}, ${e[i]})`);return r.join()}(e);this.userCode=`\n      void main() {\n        ${r} resRC = getOutputCoords();\n        setOutput(getA(${i}));\n      }\n    `}}function wTe(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reps:o}=r;if("string"===i.dtype||i.shape.length>5){const e=n.readSync(i.dataId),t="string"===i.dtype?e.map((e=>K3(e))):e,r=P5(i.shape,i.dtype,t),a=xbe(r,o);return n.makeTensorInfo(a.shape,a.dtype,a.values)}const a=new xTe(i.shape,o);return n.runWebGLProgram(a,[i],i.dtype)}const kTe={kernelName:o3,backendName:"webgl",kernelFunc:wTe};class STe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}class ETe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}}function ITe(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function TTe(e){let t=1;for(;t<e;)t*=2;return t}const CTe={kernelName:a3,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{k:o,sorted:a}=r,s=r0().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=r0().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=i.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([i])||c<s||o>l){const e=n.readSync(i.dataId),[t,r]=wbe(e,u,i.dtype,o,a);return[n.makeTensorInfo(t.shape,t.dtype,t.values),n.makeTensorInfo(r.shape,r.dtype,r.values)]}if(0===o)return u[u.length-1]=0,[n.makeTensorInfo(u,i.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(1===c)return[i,oSe({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const h=n.texData.get(i.dataId),d=null!==h&&h.isPacked,p=d?n.unpackTensor(i):i,f=TZ(u)/c,m=mxe({inputs:{x:p},attrs:{shape:[f,c]},backend:n});d&&ITe(n,p);const g=TTe(o),y=TTe(c);let v=null;const b=()=>null===v?[m,m]:[m,v],x=(e,t,r)=>{const i=b(),o=new STe(r),a=[[c],[null===v?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=v;v=n.runWebGLProgram(o,i,"int32",a),ITe(n,s)};for(let I=1;I<g;I*=2){const e=2*I;for(let t=I;t>=1;t/=2)x(e,t,[f,y])}for(let I=y;I>g;I/=2){const e=b(),t=new ETe([f,I/2]),r=[[c],[null===v?1:0],[g]],i=v;v=n.runWebGLProgram(t,e,"int32",r),ITe(n,i);const o=g/2,a=2*o;for(let n=o;n>=1;n/=2)x(a,n,v.shape)}let w=v;v=wwe({inputs:{x:v},backend:n,attrs:{begin:0,size:[f,o]}}),ITe(n,w);let k=ESe({inputs:{x:m,indices:v},backend:n,attrs:{axis:1,batchDims:1}});ITe(n,m);const S=u.slice(0,-1);S.push(o),w=v,v=mxe({inputs:{x:v},attrs:{shape:S},backend:n}),ITe(n,w);const E=k;return k=mxe({inputs:{x:k},attrs:{shape:S},backend:n}),ITe(n,E),[k,v]}};class ATe{constructor(e,t,n,r,i,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const a="nearest"===n?1:2;let s;switch(r){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode=`\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(${s} == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${s} == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${s} == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${t}) {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(${i});\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(${i});\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(${t}));\n                float mapY = mapCoord(inY, float(${e}));\n\n                if (${a} == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        `}}const _Te={kernelName:s3,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{image:i,transforms:o}=t,{interpolation:a,fillMode:s,fillValue:l,outputShape:u}=r,[c,h,d,p]=i.shape,[f,m]=null!=u?u:[h,d],g=new ATe(h,d,a,s,l,[c,f,m,p]);return n.runWebGLProgram(g,[i,o],"float32")}};const NTe={kernelName:u3,backendName:"webgl",kernelFunc:function(e){const{inputs:t,attrs:n,backend:r}=e,{axis:i}=n,{x:o}=t;Lye(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const a=r.readSync(o.dataId),{outputValues:s,outputShape:l,indices:u}=Sbe(a,i,o.shape,o.dtype);return[r.makeTensorInfo(l,o.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}};const OTe={kernelName:c3,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{value:i}=t;let{axis:o}=r;o<0&&(o+=i.shape.length);const a=i,s=a.shape.length,l=i.shape[o],u=new Array(s-1);let c=0;for(let m=0;m<s;m++)m!==o&&(u[c++]=a.shape[m]);const h=[],d=new Array(s).fill(0),p=a.shape.slice();p[o]=1;const f=new Array(l);for(let m=0;m<f.length;m++){d[o]=m;const e=wwe({inputs:{x:a},backend:n,attrs:{begin:d,size:p}}),t=mxe({inputs:{x:e},backend:n,attrs:{shape:u}});f[m]=t,h.push(e)}return h.forEach((e=>n.disposeIntermediateTensorInfo(e))),f}};class RTe{constructor(e,t){this.variableNames=["x","segmentIds"];const n=e.windowSize,r=e.batchSize,i=e.inSize,o=e.numSegments,a=o*Math.ceil(i/n);this.outputShape=[r,a];const s=4*Math.floor(n/4),l=n%4,u="\n        sumValue += dot(values, segFilter);\n    ";let c="";i%n>0&&(c=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return initializationValue;\n        }\n      `);let h="";i%n>0&&(h=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return -1.0;\n        }\n      `),this.userCode=`\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        ${c}\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ${h}\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ${o})) * float(${n}));\n        int currentSeg = int(mod(float(outIdx), float(${o})));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${s}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ${u}\n        }\n\n        int inIdx = inOffset + ${s};\n        if (${1===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ${u}\n        } else if (${2===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ${u}\n        } else if (${3===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ${u}\n        }\n        setOutput(sumValue);\n      }\n    `}}const $Te={kernelName:h3,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,segmentIds:o}=t,{numSegments:a}=r,s=i.shape.length,l=[];let u=0;const c=J9([u],s);let h=i;null!=c&&(h=Ixe({inputs:{x:i},backend:n,attrs:{perm:c}}),l.push(h),u=e7(1,s)[0]);const d=ite(h.shape,u,a),p=TZ([h.shape[u]]),f=mxe({inputs:{x:h},backend:n,attrs:{shape:[-1,p]}});l.push(f);const m=b4(i.dtype),g=(e,t,r,i,o)=>{const a=e.shape[0],s=e.shape[1],u=rte(s,o),c=new RTe({windowSize:u,inSize:s,batchSize:a,numSegments:o},t),h=n.compileAndRun(c,[e,r],i);if(l.push(h),h.shape[1]===o)return h;const d=nIe({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),p=wTe({inputs:{x:d},backend:n,attrs:{reps:[s/u]}});l.push(d),l.push(p);return g(h,t,p,i,o)},y=mxe({inputs:{x:g(f,"unsortedSegmentSum",o,m,a)},backend:n,attrs:{shape:d}});let v=y;if(null!=c){l.push(y);const e=Z9(c);v=Ixe({inputs:{x:v},backend:n,attrs:{perm:e}})}return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),v}},DTe=[Axe,Nxe,Rxe,Dxe,Fxe,zxe,Bxe,Uxe,Kxe,Xxe,Qxe,Zxe,twe,rwe,owe,lwe,uwe,dwe,pwe,fwe,ywe,Swe,Ewe,Iwe,Twe,Owe,Dwe,Fwe,Qbe,zwe,Kwe,nke,ske,uke,cke,hke,dke,fke,gke,vke,Eke,Ike,Tke,Ake,Oke,Dke,Pke,Fke,jke,zke,Uke,Wke,Gke,qke,Xke,Qke,eSe,rSe,aSe,lSe,hSe,pSe,gSe,bSe,xSe,kSe,ISe,CSe,_Se,Xbe,NSe,Gwe,RSe,DSe,MSe,exe,LSe,zSe,BSe,WSe,GSe,qSe,XSe,QSe,eEe,nEe,iEe,aEe,sEe,lEe,hEe,dEe,pEe,fEe,mEe,yEe,xEe,kEe,OEe,fxe,$Ee,PEe,FEe,jEe,Awe,BEe,VEe,GEe,XEe,QEe,rxe,JEe,ZEe,eIe,tIe,rIe,Nwe,IEe,oIe,sIe,uIe,gxe,dIe,fIe,yIe,bIe,kIe,EIe,TIe,AIe,OIe,$Ie,PIe,FIe,jIe,BIe,WIe,GIe,kwe,NEe,qIe,KIe,XIe,YIe,QIe,JIe,ZIe,eTe,rTe,iTe,sTe,lTe,uTe,hTe,dTe,pTe,fTe,AEe,Exe,gTe,vTe,bTe,kTe,CTe,_Te,Txe,NTe,OTe,$Te,WEe];for(const n of DTe)T3(n);const PTe=()=>{var e;const t=hg(),{items:n}=Zm((e=>e.expenses)),{aiReportData:r,hasRisk:i}=Zm((e=>e.aiReport)),[o,a]=(0,l.useState)(""),[s,u]=(0,l.useState)(!1),c=()=>{const e=function(e){return new Ise(e)}();return e.add(Gue({inputShape:[2],units:16,activation:"relu"})),e.add(Gue({units:8,activation:"relu"})),e.add(Gue({units:1,activation:"sigmoid"})),e.compile({optimizer:"adam",loss:"binaryCrossentropy",metrics:["accuracy"]}),e},h=async e=>{const n=(e=>{const t=e.reduce(((e,t)=>e+(t.incomeAmount||0)),0),n=e.reduce(((e,t)=>e+(t.expenseAmount||0)),0);return{incomeTotal:t,expenseTotal:n,netSavings:t-n,expenseCategories:e.reduce(((e,t)=>(t.expenseType&&(e[t.expenseType]=(e[t.expenseType]||0)+(t.expenseAmount||0)),e)),{})}})(e),r=c();await(async(e,t)=>{const{incomeTotal:n,expenseTotal:r}=t,i=B7([[n,r]]),o=B7([[.5]]);return await e.fit(i,o,{epochs:100,batchSize:1}),e})(r,n);const i=r.predict(B7([[n.incomeTotal,n.expenseTotal]])).arraySync();return t(pZ(n.netSavings<0)),`Net Savings Prediction: ${n.netSavings>0?"Positive":"Negative"} \n\n      Your estimated savings trend is: ${i[0][0]>.5?"Favorable":"Needs Improvement"}.\n\n      Consider reviewing your expenses in categories such as ${Object.keys(n.expenseCategories).join(", ")}.`};return(0,Lr.jsxs)(Al,{style:{padding:"20px",marginTop:"20px"},children:[(0,Lr.jsx)($o,{variant:"h2",textAlign:"center",borderRadius:"20px",sx:{boxShadow:"0px 4px 10px rgba(0, 0, 0, 0.2)"},children:"AI-Powered Financial Report"}),(0,Lr.jsx)(fc,{variant:"contained",color:"primary",onClick:async()=>{u(!0);try{const e=await h(n);a(e);const r=n.reduce(((e,t)=>e+(t.incomeAmount||0)),0),i=n.reduce(((e,t)=>e+(t.expenseAmount||0)),0),o=r-i,s=n.reduce(((e,t)=>(t.expenseType&&(e[t.expenseType]=(e[t.expenseType]||0)+(t.expenseAmount||0)),e)),{}),l=[{label:"Expense ",value:""},{label:"Total Income",value:`\u20b9${r.toFixed(2)}`},{label:"Total Expenses",value:`\u20b9${i.toFixed(2)}`},{label:"Net Savings",value:`\u20b9${o<0?0:o.toFixed(2)}`},{label:"Net Loss",value:`\u20b9${o>0?0:o.toFixed(2)}`},{label:"Expenses by Category",value:""},...Object.entries(s).map((e=>{let[t,n]=e;return{label:t,value:`\u20b9${n.toFixed(2)}`}}))];t(cZ({report:e,content:l})),t(hZ(r)),t(dZ(i))}catch(e){console.error("Error generating report:",e),a("Failed to generate report. Please try again later.")}finally{u(!1)}},style:{marginTop:"10px"},children:"Generate AI Report"}),s&&(0,Lr.jsx)(co,{position:"fixed",top:"0",left:"0",width:"100%",bgcolor:"rgba(255, 255, 255, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",children:(0,Lr.jsx)(Ic,{style:{marginLeft:"10px"}})}),o&&(0,Lr.jsx)(co,{variant:"h6",bgcolor:null===i?"white":i?"#f5252f":"#28de4f",position:"relative",sx:{borderRadius:1,px:4,py:8,overflow:"hidden",whiteSpace:"pre-line",mt:2},children:o}),(null===(e=r.report)||void 0===e?void 0:e.length)>0&&(0,Lr.jsxs)($o,{variant:"body2",style:{marginTop:"20px"},children:["Last Generated Report:",(0,Lr.jsxs)(co,{sx:{borderRadius:1,p:2,bgcolor:null===i?"white":i?"#f5252f":"#28de4f"},children:[null!==i&&(0,Lr.jsx)($o,{variant:"h4",textAlign:"center",children:i?"Need Attension":"Good"}),r.content.map(((e,t)=>(0,Lr.jsxs)($o,{variant:"body1",style:{marginBottom:"10px",fontWeight:""===e.value?"bold":"normal"},children:[e.label,e.value&&`: ${e.value}`]},t))),!o&&(0,Lr.jsxs)(co,{variant:"h6",bgcolor:"#58b9ed",position:"relative",sx:{borderRadius:1,px:2,py:8,overflow:"hidden",whiteSpace:"pre-line"},children:[(0,Lr.jsx)(co,{position:"absolute",variant:"h6",bgcolor:"violet",sx:{left:"-5px",top:"20px",borderRadius:2,px:2,width:"120px",py:"4px"},children:"Model Suggestion"}),null===r||void 0===r?void 0:r.report]})]})]})]})};function MTe(e){return Ae("MuiAppBar",e)}ao("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const FTe=(e,t)=>e?`${e?.replace(")","")}, ${t})`:t,LTe=to(Al,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${Ur(n.position)}`],t[`color${Ur(n.color)}`]]}})(ko((e=>{let{theme:t}=e;return{display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":t.vars?t.vars.palette.AppBar.defaultBg:t.palette.grey[100],"--AppBar-color":t.vars?t.vars.palette.text.primary:t.palette.getContrastText(t.palette.grey[100]),...t.applyStyles("dark",{"--AppBar-background":t.vars?t.vars.palette.AppBar.defaultBg:t.palette.grey[900],"--AppBar-color":t.vars?t.vars.palette.text.primary:t.palette.getContrastText(t.palette.grey[900])})}},...Object.entries(t.palette).filter(To(["contrastText"])).map((e=>{let[n]=e;return{props:{color:n},style:{"--AppBar-background":(t.vars??t).palette[n].main,"--AppBar-color":(t.vars??t).palette[n].contrastText}}})),{props:e=>!0===e.enableColorOnDark&&!["inherit","transparent"].includes(e.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:e=>!1===e.enableColorOnDark&&!["inherit","transparent"].includes(e.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...t.applyStyles("dark",{backgroundColor:t.vars?FTe(t.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:t.vars?FTe(t.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...t.applyStyles("dark",{backgroundImage:"none"})}}]}}))),jTe=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiAppBar"}),{className:r,color:i="primary",enableColorOnDark:o=!1,position:a="fixed",...s}=n,l={...n,color:i,position:a,enableColorOnDark:o},u=(e=>{const{color:t,position:n,classes:r}=e;return _e({root:["root",`color${Ur(t)}`,`position${Ur(n)}`]},MTe,r)})(l);return(0,Lr.jsx)(LTe,{square:!0,component:"header",ownerState:l,elevation:4,className:Se(u.root,r,"fixed"===a&&"mui-fixed"),ref:t,...s})})),zTe=jTe;function BTe(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}const UTe={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};const WTe=fu((0,Lr.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),VTe=fu((0,Lr.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function GTe(e){return Ae("MuiTabScrollButton",e)}const HTe=ao("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),qTe=to(Zu,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.orientation&&t[n.orientation]]}})({width:40,flexShrink:0,opacity:.8,[`&.${HTe.disabled}`]:{opacity:0},variants:[{props:{orientation:"vertical"},style:{width:"100%",height:40,"& svg":{transform:"var(--TabScrollButton-svgRotate)"}}}]}),KTe=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiTabScrollButton"}),{className:r,slots:i={},slotProps:o={},direction:a,orientation:s,disabled:l,...u}=n,c=ns(),h={isRtl:c,...n},d=(e=>{const{classes:t,orientation:n,disabled:r}=e;return _e({root:["root",n,r&&"disabled"]},GTe,t)})(h),p=i.StartScrollButtonIcon??WTe,f=i.EndScrollButtonIcon??VTe,m=us({elementType:p,externalSlotProps:o.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:h}),g=us({elementType:f,externalSlotProps:o.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:h});return(0,Lr.jsx)(qTe,{component:"div",className:Se(d.root,r),ref:t,role:null,ownerState:h,tabIndex:null,...u,style:{...u.style,..."vertical"===s&&{"--TabScrollButton-svgRotate":`rotate(${c?-90:90}deg)`}},children:"left"===a?(0,Lr.jsx)(p,{...m}):(0,Lr.jsx)(f,{...g})})}));function XTe(e){return Ae("MuiTabs",e)}const YTe=ao("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),QTe=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,JTe=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,ZTe=(e,t,n)=>{let r=!1,i=n(e,t);for(;i;){if(i===e.firstChild){if(r)return;r=!0}const t=i.disabled||"true"===i.getAttribute("aria-disabled");if(i.hasAttribute("tabindex")&&!t)return void i.focus();i=n(e,i)}},eCe=to("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${YTe.scrollButtons}`]:t.scrollButtons},{[`& .${YTe.scrollButtons}`]:n.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,n.vertical&&t.vertical]}})(ko((e=>{let{theme:t}=e;return{overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex",variants:[{props:e=>{let{ownerState:t}=e;return t.vertical},style:{flexDirection:"column"}},{props:e=>{let{ownerState:t}=e;return t.scrollButtonsHideMobile},style:{[`& .${YTe.scrollButtons}`]:{[t.breakpoints.down("sm")]:{display:"none"}}}}]}}))),tCe=to("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.scroller,n.fixed&&t.fixed,n.hideScrollbar&&t.hideScrollbar,n.scrollableX&&t.scrollableX,n.scrollableY&&t.scrollableY]}})({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap",variants:[{props:e=>{let{ownerState:t}=e;return t.fixed},style:{overflowX:"hidden",width:"100%"}},{props:e=>{let{ownerState:t}=e;return t.hideScrollbar},style:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}},{props:e=>{let{ownerState:t}=e;return t.scrollableX},style:{overflowX:"auto",overflowY:"hidden"}},{props:e=>{let{ownerState:t}=e;return t.scrollableY},style:{overflowY:"auto",overflowX:"hidden"}}]}),nCe=to("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.flexContainer,n.vertical&&t.flexContainerVertical,n.centered&&t.centered]}})({display:"flex",variants:[{props:e=>{let{ownerState:t}=e;return t.vertical},style:{flexDirection:"column"}},{props:e=>{let{ownerState:t}=e;return t.centered},style:{justifyContent:"center"}}]}),rCe=to("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(e,t)=>t.indicator})(ko((e=>{let{theme:t}=e;return{position:"absolute",height:2,bottom:0,width:"100%",transition:t.transitions.create(),variants:[{props:{indicatorColor:"primary"},style:{backgroundColor:(t.vars||t).palette.primary.main}},{props:{indicatorColor:"secondary"},style:{backgroundColor:(t.vars||t).palette.secondary.main}},{props:e=>{let{ownerState:t}=e;return t.vertical},style:{height:"100%",width:2,right:0}}]}}))),iCe=to((function(e){const{onChange:t,...n}=e,r=l.useRef(),i=l.useRef(null),o=()=>{r.current=i.current.offsetHeight-i.current.clientHeight};return Jo((()=>{const e=Es((()=>{const e=r.current;o(),e!==r.current&&t(r.current)})),n=ys(i.current);return n.addEventListener("resize",e),()=>{e.clear(),n.removeEventListener("resize",e)}}),[t]),l.useEffect((()=>{o(),t(r.current)}),[t]),(0,Lr.jsx)("div",{style:UTe,ref:i,...n})}))({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),oCe={};const aCe=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiTabs"}),r=Gs(),i=ns(),{"aria-label":o,"aria-labelledby":a,action:s,centered:u=!1,children:c,className:h,component:d="div",allowScrollButtonsMobile:p=!1,indicatorColor:f="primary",onChange:m,orientation:g="horizontal",ScrollButtonComponent:y=KTe,scrollButtons:v="auto",selectionFollowsFocus:b,slots:x={},slotProps:w={},TabIndicatorProps:k={},TabScrollButtonProps:S={},textColor:E="primary",value:I,variant:T="standard",visibleScrollbar:C=!1,...A}=n,_="scrollable"===T,N="vertical"===g,O=N?"scrollTop":"scrollLeft",R=N?"top":"left",$=N?"bottom":"right",D=N?"clientHeight":"clientWidth",P=N?"height":"width",M={...n,component:d,allowScrollButtonsMobile:p,indicatorColor:f,orientation:g,vertical:N,scrollButtons:v,textColor:E,variant:T,visibleScrollbar:C,fixed:!_,hideScrollbar:_&&!C,scrollableX:_&&!N,scrollableY:_&&N,centered:u&&!_,scrollButtonsHideMobile:!p},F=(e=>{const{vertical:t,fixed:n,hideScrollbar:r,scrollableX:i,scrollableY:o,centered:a,scrollButtonsHideMobile:s,classes:l}=e;return _e({root:["root",t&&"vertical"],scroller:["scroller",n&&"fixed",r&&"hideScrollbar",i&&"scrollableX",o&&"scrollableY"],flexContainer:["flexContainer",t&&"flexContainerVertical",a&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",s&&"scrollButtonsHideMobile"],scrollableX:[i&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]},XTe,l)})(M),L=us({elementType:x.StartScrollButtonIcon,externalSlotProps:w.startScrollButtonIcon,ownerState:M}),j=us({elementType:x.EndScrollButtonIcon,externalSlotProps:w.endScrollButtonIcon,ownerState:M});const[z,B]=l.useState(!1),[U,W]=l.useState(oCe),[V,G]=l.useState(!1),[H,q]=l.useState(!1),[K,X]=l.useState(!1),[Y,Q]=l.useState({overflow:"hidden",scrollbarWidth:0}),J=new Map,Z=l.useRef(null),ee=l.useRef(null),te=()=>{const e=Z.current;let t,n;if(e){const n=e.getBoundingClientRect();t={clientWidth:e.clientWidth,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop,scrollWidth:e.scrollWidth,top:n.top,bottom:n.bottom,left:n.left,right:n.right}}if(e&&!1!==I){const e=ee.current.children;if(e.length>0){const t=e[J.get(I)];0,n=t?t.getBoundingClientRect():null}}return{tabsMeta:t,tabMeta:n}},ne=Du((()=>{const{tabsMeta:e,tabMeta:t}=te();let n,r=0;N?(n="top",t&&e&&(r=t.top-e.top+e.scrollTop)):(n=i?"right":"left",t&&e&&(r=(i?-1:1)*(t[n]-e[n]+e.scrollLeft)));const o={[n]:r,[P]:t?t[P]:0};if("number"!==typeof U[n]||"number"!==typeof U[P])W(o);else{const e=Math.abs(U[n]-o[n]),t=Math.abs(U[P]-o[P]);(e>=1||t>=1)&&W(o)}})),re=function(e){let{animation:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t?function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>{};const{ease:o=BTe,duration:a=300}=r;let s=null;const l=t[e];let u=!1;const c=()=>{u=!0},h=r=>{if(u)return void i(new Error("Animation cancelled"));null===s&&(s=r);const c=Math.min(1,(r-s)/a);t[e]=o(c)*(n-l)+l,c>=1?requestAnimationFrame((()=>{i(null)})):requestAnimationFrame(h)};l===n?i(new Error("Element already at target position")):requestAnimationFrame(h)}(O,Z.current,e,{duration:r.transitions.duration.standard}):Z.current[O]=e},ie=e=>{let t=Z.current[O];t+=N?e:e*(i?-1:1),re(t)},oe=()=>{const e=Z.current[D];let t=0;const n=Array.from(ee.current.children);for(let r=0;r<n.length;r+=1){const i=n[r];if(t+i[D]>e){0===r&&(t=e);break}t+=i[D]}return t},ae=()=>{ie(-1*oe())},se=()=>{ie(oe())},le=l.useCallback((e=>{Q({overflow:null,scrollbarWidth:e})}),[]),ue=Du((e=>{const{tabsMeta:t,tabMeta:n}=te();if(n&&t)if(n[R]<t[R]){const r=t[O]+(n[R]-t[R]);re(r,{animation:e})}else if(n[$]>t[$]){const r=t[O]+(n[$]-t[$]);re(r,{animation:e})}})),ce=Du((()=>{_&&!1!==v&&X(!K)}));l.useEffect((()=>{const e=Es((()=>{Z.current&&ne()}));let t;const n=n=>{n.forEach((e=>{e.removedNodes.forEach((e=>{t?.unobserve(e)})),e.addedNodes.forEach((e=>{t?.observe(e)}))})),e(),ce()},r=ys(Z.current);let i;return r.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(t=new ResizeObserver(e),Array.from(ee.current.children).forEach((e=>{t.observe(e)}))),"undefined"!==typeof MutationObserver&&(i=new MutationObserver(n),i.observe(ee.current,{childList:!0})),()=>{e.clear(),r.removeEventListener("resize",e),i?.disconnect(),t?.disconnect()}}),[ne,ce]),l.useEffect((()=>{const e=Array.from(ee.current.children),t=e.length;if("undefined"!==typeof IntersectionObserver&&t>0&&_&&!1!==v){const n=e[0],r=e[t-1],i={root:Z.current,threshold:.99},o=new IntersectionObserver((e=>{G(!e[0].isIntersecting)}),i);o.observe(n);const a=new IntersectionObserver((e=>{q(!e[0].isIntersecting)}),i);return a.observe(r),()=>{o.disconnect(),a.disconnect()}}}),[_,v,K,c?.length]),l.useEffect((()=>{B(!0)}),[]),l.useEffect((()=>{ne()})),l.useEffect((()=>{ue(oCe!==U)}),[ue,U]),l.useImperativeHandle(s,(()=>({updateIndicator:ne,updateScrollButtons:ce})),[ne,ce]);const he=(0,Lr.jsx)(rCe,{...k,className:Se(F.indicator,k.className),ownerState:M,style:{...U,...k.style}});let de=0;const pe=l.Children.map(c,(e=>{if(!l.isValidElement(e))return null;const t=void 0===e.props.value?de:e.props.value;J.set(t,de);const n=t===I;return de+=1,l.cloneElement(e,{fullWidth:"fullWidth"===T,indicator:n&&!z&&he,selected:n,selectionFollowsFocus:b,onChange:m,textColor:E,value:t,...1!==de||!1!==I||e.props.tabIndex?{}:{tabIndex:0}})})),fe=(()=>{const e={};e.scrollbarSizeListener=_?(0,Lr.jsx)(iCe,{onChange:le,className:Se(F.scrollableX,F.hideScrollbar)}):null;const t=_&&("auto"===v&&(V||H)||!0===v);return e.scrollButtonStart=t?(0,Lr.jsx)(y,{slots:{StartScrollButtonIcon:x.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:L},orientation:g,direction:i?"right":"left",onClick:ae,disabled:!V,...S,className:Se(F.scrollButtons,S.className)}):null,e.scrollButtonEnd=t?(0,Lr.jsx)(y,{slots:{EndScrollButtonIcon:x.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:j},orientation:g,direction:i?"left":"right",onClick:se,disabled:!H,...S,className:Se(F.scrollButtons,S.className)}):null,e})();return(0,Lr.jsxs)(eCe,{className:Se(F.root,h),ownerState:M,ref:t,as:d,...A,children:[fe.scrollButtonStart,fe.scrollbarSizeListener,(0,Lr.jsxs)(tCe,{className:F.scroller,ownerState:M,style:{overflow:Y.overflow,[N?"margin"+(i?"Left":"Right"):"marginBottom"]:C?void 0:-Y.scrollbarWidth},ref:Z,children:[(0,Lr.jsx)(nCe,{"aria-label":o,"aria-labelledby":a,"aria-orientation":"vertical"===g?"vertical":null,className:F.flexContainer,ownerState:M,onKeyDown:e=>{const t=ee.current,n=es(t).activeElement;if("tab"!==n.getAttribute("role"))return;let r="horizontal"===g?"ArrowLeft":"ArrowUp",o="horizontal"===g?"ArrowRight":"ArrowDown";switch("horizontal"===g&&i&&(r="ArrowRight",o="ArrowLeft"),e.key){case r:e.preventDefault(),ZTe(t,n,JTe);break;case o:e.preventDefault(),ZTe(t,n,QTe);break;case"Home":e.preventDefault(),ZTe(t,null,QTe);break;case"End":e.preventDefault(),ZTe(t,null,JTe)}},ref:ee,role:"tablist",children:pe}),z&&he]}),fe.scrollButtonEnd]})})),sCe=aCe;function lCe(e){return Ae("MuiTab",e)}const uCe=ao("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper","icon"]),cCe=to(Zu,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.label&&n.icon&&t.labelIcon,t[`textColor${Ur(n.textColor)}`],n.fullWidth&&t.fullWidth,n.wrapped&&t.wrapped,{[`& .${uCe.iconWrapper}`]:t.iconWrapper},{[`& .${uCe.icon}`]:t.icon}]}})(ko((e=>{let{theme:t}=e;return{...t.typography.button,maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center",lineHeight:1.25,variants:[{props:e=>{let{ownerState:t}=e;return t.label&&("top"===t.iconPosition||"bottom"===t.iconPosition)},style:{flexDirection:"column"}},{props:e=>{let{ownerState:t}=e;return t.label&&"top"!==t.iconPosition&&"bottom"!==t.iconPosition},style:{flexDirection:"row"}},{props:e=>{let{ownerState:t}=e;return t.icon&&t.label},style:{minHeight:72,paddingTop:9,paddingBottom:9}},{props:e=>{let{ownerState:t,iconPosition:n}=e;return t.icon&&t.label&&"top"===n},style:{[`& > .${uCe.icon}`]:{marginBottom:6}}},{props:e=>{let{ownerState:t,iconPosition:n}=e;return t.icon&&t.label&&"bottom"===n},style:{[`& > .${uCe.icon}`]:{marginTop:6}}},{props:e=>{let{ownerState:t,iconPosition:n}=e;return t.icon&&t.label&&"start"===n},style:{[`& > .${uCe.icon}`]:{marginRight:t.spacing(1)}}},{props:e=>{let{ownerState:t,iconPosition:n}=e;return t.icon&&t.label&&"end"===n},style:{[`& > .${uCe.icon}`]:{marginLeft:t.spacing(1)}}},{props:{textColor:"inherit"},style:{color:"inherit",opacity:.6,[`&.${uCe.selected}`]:{opacity:1},[`&.${uCe.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}}},{props:{textColor:"primary"},style:{color:(t.vars||t).palette.text.secondary,[`&.${uCe.selected}`]:{color:(t.vars||t).palette.primary.main},[`&.${uCe.disabled}`]:{color:(t.vars||t).palette.text.disabled}}},{props:{textColor:"secondary"},style:{color:(t.vars||t).palette.text.secondary,[`&.${uCe.selected}`]:{color:(t.vars||t).palette.secondary.main},[`&.${uCe.disabled}`]:{color:(t.vars||t).palette.text.disabled}}},{props:e=>{let{ownerState:t}=e;return t.fullWidth},style:{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"}},{props:e=>{let{ownerState:t}=e;return t.wrapped},style:{fontSize:t.typography.pxToRem(12)}}]}}))),hCe=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiTab"}),{className:r,disabled:i=!1,disableFocusRipple:o=!1,fullWidth:a,icon:s,iconPosition:u="top",indicator:c,label:h,onChange:d,onClick:p,onFocus:f,selected:m,selectionFollowsFocus:g,textColor:y="inherit",value:v,wrapped:b=!1,...x}=n,w={...n,disabled:i,disableFocusRipple:o,selected:m,icon:!!s,iconPosition:u,label:!!h,fullWidth:a,textColor:y,wrapped:b},k=(e=>{const{classes:t,textColor:n,fullWidth:r,wrapped:i,icon:o,label:a,selected:s,disabled:l}=e;return _e({root:["root",o&&a&&"labelIcon",`textColor${Ur(n)}`,r&&"fullWidth",i&&"wrapped",s&&"selected",l&&"disabled"],icon:["iconWrapper","icon"]},lCe,t)})(w),S=s&&h&&l.isValidElement(s)?l.cloneElement(s,{className:Se(k.icon,s.props.className)}):s;return(0,Lr.jsxs)(cCe,{focusRipple:!o,className:Se(k.root,r),ref:t,role:"tab","aria-selected":m,disabled:i,onClick:e=>{!m&&d&&d(e,v),p&&p(e)},onFocus:e=>{g&&!m&&d&&d(e,v),f&&f(e)},ownerState:w,tabIndex:m?0:-1,...x,children:["top"===u||"start"===u?(0,Lr.jsxs)(l.Fragment,{children:[S,h]}):(0,Lr.jsxs)(l.Fragment,{children:[h,S]}),c]})})),dCe=hCe;function pCe(e){const{children:t,value:n,index:r,...i}=e;return(0,Lr.jsx)("div",{role:"tabpanel",hidden:n!==r,id:`full-width-tabpanel-${r}`,"aria-labelledby":`full-width-tab-${r}`,...i,children:n===r&&(0,Lr.jsx)(co,{children:(0,Lr.jsx)($o,{children:t})})})}function fCe(e){return{id:`full-width-tab-${e}`,"aria-controls":`full-width-tabpanel-${e}`}}function mCe(e){let{Report:t,AiReport:n,OpenAiReport:r}=e;const i=Gs(),[o,a]=l.useState(0);return(0,Lr.jsxs)(co,{sx:{bgcolor:"background.paper",width:"100%"},children:[(0,Lr.jsx)(zTe,{position:"static",children:(0,Lr.jsxs)(sCe,{value:o,onChange:(e,t)=>{a(t)},indicatorColor:"secondary",textColor:"inherit",variant:"fullWidth","aria-label":"full width tabs example",children:[(0,Lr.jsx)(dCe,{label:"Financial Report",...fCe(0)}),(0,Lr.jsx)(dCe,{label:"AI Report (custom model)",...fCe(1)}),(0,Lr.jsx)(dCe,{label:"openAI Report",...fCe(2)})]})}),(0,Lr.jsx)(pCe,{value:o,index:0,dir:i.direction,children:(0,Lr.jsx)(t,{})}),(0,Lr.jsx)(pCe,{value:o,index:1,dir:i.direction,children:(0,Lr.jsx)(n,{})}),(0,Lr.jsx)(pCe,{value:o,index:2,dir:i.direction,children:(0,Lr.jsx)(r,{})})]})}function gCe(e){return Ae("MuiToolbar",e)}ao("MuiToolbar",["root","gutters","regular","dense"]);const yCe=to("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})(ko((e=>{let{theme:t}=e;return{position:"relative",display:"flex",alignItems:"center",variants:[{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:t.mixins.toolbar}]}}))),vCe=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiToolbar"}),{className:r,component:i="div",disableGutters:o=!1,variant:a="regular",...s}=n,l={...n,component:i,disableGutters:o,variant:a},u=(e=>{const{classes:t,disableGutters:n,variant:r}=e;return _e({root:["root",!n&&"gutters",r]},gCe,t)})(l);return(0,Lr.jsx)(yCe,{as:i,className:Se(u.root,r),ref:t,ownerState:l,...s})})),bCe=vCe,xCe=()=>(0,Lr.jsx)(zTe,{position:"static",children:(0,Lr.jsx)(bCe,{children:(0,Lr.jsx)($o,{variant:"h6",style:{flexGrow:1},children:"Developed by Ajayraj"})})});function wCe(e,t){return function(){return e.apply(t,arguments)}}const{toString:kCe}=Object.prototype,{getPrototypeOf:SCe}=Object,ECe=(ICe=Object.create(null),e=>{const t=kCe.call(e);return ICe[t]||(ICe[t]=t.slice(8,-1).toLowerCase())});var ICe;const TCe=e=>(e=e.toLowerCase(),t=>ECe(t)===e),CCe=e=>t=>typeof t===e,{isArray:ACe}=Array,_Ce=CCe("undefined");const NCe=TCe("ArrayBuffer");const OCe=CCe("string"),RCe=CCe("function"),$Ce=CCe("number"),DCe=e=>null!==e&&"object"===typeof e,PCe=e=>{if("object"!==ECe(e))return!1;const t=SCe(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},MCe=TCe("Date"),FCe=TCe("File"),LCe=TCe("Blob"),jCe=TCe("FileList"),zCe=TCe("URLSearchParams"),[BCe,UCe,WCe,VCe]=["ReadableStream","Request","Response","Headers"].map(TCe);function GCe(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),ACe(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let a;for(n=0;n<o;n++)a=r[n],t.call(null,e[a],a,e)}}function HCe(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const qCe="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,KCe=e=>!_Ce(e)&&e!==qCe;const XCe=(YCe="undefined"!==typeof Uint8Array&&SCe(Uint8Array),e=>YCe&&e instanceof YCe);var YCe;const QCe=TCe("HTMLFormElement"),JCe=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),ZCe=TCe("RegExp"),eAe=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};GCe(n,((n,i)=>{let o;!1!==(o=t(n,i,e))&&(r[i]=o||n)})),Object.defineProperties(e,r)},tAe="abcdefghijklmnopqrstuvwxyz",nAe="0123456789",rAe={DIGIT:nAe,ALPHA:tAe,ALPHA_DIGIT:tAe+tAe.toUpperCase()+nAe};const iAe=TCe("AsyncFunction"),oAe=(aAe="function"===typeof setImmediate,sAe=RCe(qCe.postMessage),aAe?setImmediate:sAe?((e,t)=>(qCe.addEventListener("message",(n=>{let{source:r,data:i}=n;r===qCe&&i===e&&t.length&&t.shift()()}),!1),n=>{t.push(n),qCe.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e));var aAe,sAe;const lAe="undefined"!==typeof queueMicrotask?queueMicrotask.bind(qCe):"undefined"!==typeof process&&process.nextTick||oAe,uAe={isArray:ACe,isArrayBuffer:NCe,isBuffer:function(e){return null!==e&&!_Ce(e)&&null!==e.constructor&&!_Ce(e.constructor)&&RCe(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||RCe(e.append)&&("formdata"===(t=ECe(e))||"object"===t&&RCe(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&NCe(e.buffer),t},isString:OCe,isNumber:$Ce,isBoolean:e=>!0===e||!1===e,isObject:DCe,isPlainObject:PCe,isReadableStream:BCe,isRequest:UCe,isResponse:WCe,isHeaders:VCe,isUndefined:_Ce,isDate:MCe,isFile:FCe,isBlob:LCe,isRegExp:ZCe,isFunction:RCe,isStream:e=>DCe(e)&&RCe(e.pipe),isURLSearchParams:zCe,isTypedArray:XCe,isFileList:jCe,forEach:GCe,merge:function e(){const{caseless:t}=KCe(this)&&this||{},n={},r=(r,i)=>{const o=t&&HCe(n,i)||i;PCe(n[o])&&PCe(r)?n[o]=e(n[o],r):PCe(r)?n[o]=e({},r):ACe(r)?n[o]=r.slice():n[o]=r};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&GCe(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return GCe(t,((t,r)=>{n&&RCe(t)?e[r]=wCe(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,o,a;const s={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)a=i[o],r&&!r(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==n&&SCe(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:ECe,kindOfTest:TCe,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(ACe(e))return e;let t=e.length;if(!$Ce(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:QCe,hasOwnProperty:JCe,hasOwnProp:JCe,reduceDescriptors:eAe,freezeMethods:e=>{eAe(e,((t,n)=>{if(RCe(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];RCe(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return ACe(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:HCe,global:qCe,isContextDefined:KCe,ALPHABET:rAe,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rAe.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&RCe(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(DCe(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=ACe(e)?[]:{};return GCe(e,((e,t)=>{const o=n(e,r+1);!_Ce(o)&&(i[t]=o)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:iAe,isThenable:e=>e&&(DCe(e)||RCe(e))&&RCe(e.then)&&RCe(e.catch),setImmediate:oAe,asap:lAe};function cAe(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}uAe.inherits(cAe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:uAe.toJSONObject(this.config),code:this.code,status:this.status}}});const hAe=cAe.prototype,dAe={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{dAe[e]={value:e}})),Object.defineProperties(cAe,dAe),Object.defineProperty(hAe,"isAxiosError",{value:!0}),cAe.from=(e,t,n,r,i,o)=>{const a=Object.create(hAe);return uAe.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),cAe.call(a,e.message,t,n,r,i),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};const pAe=cAe;function fAe(e){return uAe.isPlainObject(e)||uAe.isArray(e)}function mAe(e){return uAe.endsWith(e,"[]")?e.slice(0,-2):e}function gAe(e,t,n){return e?e.concat(t).map((function(e,t){return e=mAe(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const yAe=uAe.toFlatObject(uAe,{},null,(function(e){return/^is[A-Z]/.test(e)}));const vAe=function(e,t,n){if(!uAe.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=uAe.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!uAe.isUndefined(t[e])}))).metaTokens,i=n.visitor||u,o=n.dots,a=n.indexes,s=(n.Blob||"undefined"!==typeof Blob&&Blob)&&uAe.isSpecCompliantForm(t);if(!uAe.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(uAe.isDate(e))return e.toISOString();if(!s&&uAe.isBlob(e))throw new pAe("Blob is not supported. Use a Buffer instead.");return uAe.isArrayBuffer(e)||uAe.isTypedArray(e)?s&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,n,i){let s=e;if(e&&!i&&"object"===typeof e)if(uAe.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(uAe.isArray(e)&&function(e){return uAe.isArray(e)&&!e.some(fAe)}(e)||(uAe.isFileList(e)||uAe.endsWith(n,"[]"))&&(s=uAe.toArray(e)))return n=mAe(n),s.forEach((function(e,r){!uAe.isUndefined(e)&&null!==e&&t.append(!0===a?gAe([n],r,o):null===a?n:n+"[]",l(e))})),!1;return!!fAe(e)||(t.append(gAe(i,n,o),l(e)),!1)}const c=[],h=Object.assign(yAe,{defaultVisitor:u,convertValue:l,isVisitable:fAe});if(!uAe.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!uAe.isUndefined(n)){if(-1!==c.indexOf(n))throw Error("Circular reference detected in "+r.join("."));c.push(n),uAe.forEach(n,(function(n,o){!0===(!(uAe.isUndefined(n)||null===n)&&i.call(t,n,uAe.isString(o)?o.trim():o,r,h))&&e(n,r?r.concat(o):[o])})),c.pop()}}(e),t};function bAe(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function xAe(e,t){this._pairs=[],e&&vAe(e,this,t)}const wAe=xAe.prototype;wAe.append=function(e,t){this._pairs.push([e,t])},wAe.toString=function(e){const t=e?function(t){return e.call(this,t,bAe)}:bAe;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const kAe=xAe;function SAe(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function EAe(e,t,n){if(!t)return e;const r=n&&n.encode||SAe,i=n&&n.serialize;let o;if(o=i?i(t,n):uAe.isURLSearchParams(t)?t.toString():new kAe(t,n).toString(r),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}const IAe=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){uAe.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},TAe={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},CAe={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:kAe,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},AAe="undefined"!==typeof window&&"undefined"!==typeof document,_Ae="object"===typeof navigator&&navigator||void 0,NAe=AAe&&(!_Ae||["ReactNative","NativeScript","NS"].indexOf(_Ae.product)<0),OAe="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,RAe=AAe&&window.location.href||"http://localhost",$Ae={...a,...CAe};const DAe=function(e){function t(e,n,r,i){let o=e[i++];if("__proto__"===o)return!0;const a=Number.isFinite(+o),s=i>=e.length;if(o=!o&&uAe.isArray(r)?r.length:o,s)return uAe.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!a;r[o]&&uAe.isObject(r[o])||(r[o]=[]);return t(e,n,r[o],i)&&uAe.isArray(r[o])&&(r[o]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}(r[o])),!a}if(uAe.isFormData(e)&&uAe.isFunction(e.entries)){const n={};return uAe.forEachEntry(e,((e,r)=>{t(function(e){return uAe.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const PAe={transitional:TAe,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=uAe.isObject(e);i&&uAe.isHTMLForm(e)&&(e=new FormData(e));if(uAe.isFormData(e))return r?JSON.stringify(DAe(e)):e;if(uAe.isArrayBuffer(e)||uAe.isBuffer(e)||uAe.isStream(e)||uAe.isFile(e)||uAe.isBlob(e)||uAe.isReadableStream(e))return e;if(uAe.isArrayBufferView(e))return e.buffer;if(uAe.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return vAe(e,new $Ae.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return $Ae.isNode&&uAe.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=uAe.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return vAe(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(uAe.isString(e))try{return(t||JSON.parse)(e),uAe.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||PAe.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(uAe.isResponse(e)||uAe.isReadableStream(e))return e;if(e&&uAe.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(i){if(n){if("SyntaxError"===i.name)throw pAe.from(i,pAe.ERR_BAD_RESPONSE,this,null,this.response);throw i}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$Ae.classes.FormData,Blob:$Ae.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};uAe.forEach(["delete","get","head","post","put","patch"],(e=>{PAe.headers[e]={}}));const MAe=PAe,FAe=uAe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),LAe=Symbol("internals");function jAe(e){return e&&String(e).trim().toLowerCase()}function zAe(e){return!1===e||null==e?e:uAe.isArray(e)?e.map(zAe):String(e)}function BAe(e,t,n,r,i){return uAe.isFunction(r)?r.call(this,t,n):(i&&(t=n),uAe.isString(t)?uAe.isString(r)?-1!==t.indexOf(r):uAe.isRegExp(r)?r.test(t):void 0:void 0)}class UAe{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=jAe(t);if(!i)throw new Error("header name must be a non-empty string");const o=uAe.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=zAe(e))}const o=(e,t)=>uAe.forEach(e,((e,n)=>i(e,n,t)));if(uAe.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(uAe.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))o((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&FAe[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(uAe.isHeaders(e))for(const[a,s]of e.entries())i(s,a,n);else null!=e&&i(t,e,n);return this}get(e,t){if(e=jAe(e)){const n=uAe.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(uAe.isFunction(t))return t.call(this,e,n);if(uAe.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=jAe(e)){const n=uAe.findKey(this,e);return!(!n||void 0===this[n]||t&&!BAe(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=jAe(e)){const i=uAe.findKey(n,e);!i||t&&!BAe(0,n[i],i,t)||(delete n[i],r=!0)}}return uAe.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!BAe(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return uAe.forEach(this,((r,i)=>{const o=uAe.findKey(n,i);if(o)return t[o]=zAe(r),void delete t[i];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();a!==i&&delete t[i],t[a]=zAe(r),n[a]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return uAe.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&uAe.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[LAe]=this[LAe]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=jAe(e);t[r]||(!function(e,t){const n=uAe.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return uAe.isArray(e)?e.forEach(r):r(e),this}}UAe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),uAe.reduceDescriptors(UAe.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),uAe.freezeMethods(UAe);const WAe=UAe;function VAe(e,t){const n=this||MAe,r=t||n,i=WAe.from(r.headers);let o=r.data;return uAe.forEach(e,(function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)})),i.normalize(),o}function GAe(e){return!(!e||!e.__CANCEL__)}function HAe(e,t,n){pAe.call(this,null==e?"canceled":e,pAe.ERR_CANCELED,t,n),this.name="CanceledError"}uAe.inherits(HAe,pAe,{__CANCEL__:!0});const qAe=HAe;function KAe(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new pAe("Request failed with status code "+n.status,[pAe.ERR_BAD_REQUEST,pAe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const XAe=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,o=0,a=0;return t=void 0!==t?t:1e3,function(s){const l=Date.now(),u=r[a];i||(i=l),n[o]=s,r[o]=l;let c=a,h=0;for(;c!==o;)h+=n[c++],c%=e;if(o=(o+1)%e,o===a&&(a=(a+1)%e),l-i<t)return;const d=u&&l-u;return d?Math.round(1e3*h/d):void 0}};const YAe=function(e,t){let n,r,i=0,o=1e3/t;const a=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=o,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-i;for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];t>=o?a(l,e):(n=l,r||(r=setTimeout((()=>{r=null,a(n)}),o-t)))},()=>n&&a(n)]},QAe=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const i=XAe(50,250);return YAe((n=>{const o=n.loaded,a=n.lengthComputable?n.total:void 0,s=o-r,l=i(s);r=o;e({loaded:o,total:a,progress:a?o/a:void 0,bytes:s,rate:l||void 0,estimated:l&&a&&o<=a?(a-o)/l:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0})}),n)},JAe=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},ZAe=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return uAe.asap((()=>e(...n)))},e_e=$Ae.hasStandardBrowserEnv?function(){const e=$Ae.navigator&&/(msie|trident)/i.test($Ae.navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=uAe.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0},t_e=$Ae.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const a=[e+"="+encodeURIComponent(t)];uAe.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),uAe.isString(r)&&a.push("path="+r),uAe.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function n_e(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const r_e=e=>e instanceof WAe?{...e}:e;function i_e(e,t){t=t||{};const n={};function r(e,t,n){return uAe.isPlainObject(e)&&uAe.isPlainObject(t)?uAe.merge.call({caseless:n},e,t):uAe.isPlainObject(t)?uAe.merge({},t):uAe.isArray(t)?t.slice():t}function i(e,t,n){return uAe.isUndefined(t)?uAe.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function o(e,t){if(!uAe.isUndefined(t))return r(void 0,t)}function a(e,t){return uAe.isUndefined(t)?uAe.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}const l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(e,t)=>i(r_e(e),r_e(t),!0)};return uAe.forEach(Object.keys(Object.assign({},e,t)),(function(r){const o=l[r]||i,a=o(e[r],t[r],r);uAe.isUndefined(a)&&o!==s||(n[r]=a)})),n}const o_e=e=>{const t=i_e({},e);let n,{data:r,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:a,headers:s,auth:l}=t;if(t.headers=s=WAe.from(s),t.url=EAe(n_e(t.baseURL,t.url),e.params,e.paramsSerializer),l&&s.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),uAe.isFormData(r))if($Ae.hasStandardBrowserEnv||$Ae.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(!1!==(n=s.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}if($Ae.hasStandardBrowserEnv&&(i&&uAe.isFunction(i)&&(i=i(t)),i||!1!==i&&e_e(t.url))){const e=o&&a&&t_e.read(a);e&&s.set(o,e)}return t},a_e="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=o_e(e);let i=r.data;const o=WAe.from(r.headers).normalize();let a,s,l,u,c,{responseType:h,onUploadProgress:d,onDownloadProgress:p}=r;function f(){u&&u(),c&&c(),r.cancelToken&&r.cancelToken.unsubscribe(a),r.signal&&r.signal.removeEventListener("abort",a)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=WAe.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());KAe((function(e){t(e),f()}),(function(e){n(e),f()}),{data:h&&"text"!==h&&"json"!==h?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new pAe("Request aborted",pAe.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new pAe("Network Error",pAe.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||TAe;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new pAe(t,i.clarifyTimeoutError?pAe.ETIMEDOUT:pAe.ECONNABORTED,e,m)),m=null},void 0===i&&o.setContentType(null),"setRequestHeader"in m&&uAe.forEach(o.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),uAe.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),h&&"json"!==h&&(m.responseType=r.responseType),p&&([l,c]=QAe(p,!0),m.addEventListener("progress",l)),d&&m.upload&&([s,u]=QAe(d),m.upload.addEventListener("progress",s),m.upload.addEventListener("loadend",u)),(r.cancelToken||r.signal)&&(a=t=>{m&&(n(!t||t.type?new qAe(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(a),r.signal&&(r.signal.aborted?a():r.signal.addEventListener("abort",a)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);y&&-1===$Ae.protocols.indexOf(y)?n(new pAe("Unsupported protocol "+y+":",pAe.ERR_BAD_REQUEST,e)):m.send(i||null)}))},s_e=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const i=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;r.abort(t instanceof pAe?t:new qAe(t instanceof Error?t.message:t))}};let o=t&&setTimeout((()=>{o=null,i(new pAe(`timeout ${t} of ms exceeded`,pAe.ETIMEDOUT))}),t);const a=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)})),e=null)};e.forEach((e=>e.addEventListener("abort",i)));const{signal:s}=r;return s.unsubscribe=()=>uAe.asap(a),s}},l_e=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},u_e=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},c_e=(e,t,n,r)=>{const i=async function*(e,t){for await(const n of u_e(e))yield*l_e(n,t)}(e,t);let o,a=0,s=e=>{o||(o=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await i.next();if(t)return s(),void e.close();let o=r.byteLength;if(n){let e=a+=o;n(e)}e.enqueue(new Uint8Array(r))}catch(hNe){throw s(hNe),hNe}},cancel:e=>(s(e),i.return())},{highWaterMark:2})},h_e="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,d_e=h_e&&"function"===typeof ReadableStream,p_e=h_e&&("function"===typeof TextEncoder?(f_e=new TextEncoder,e=>f_e.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var f_e;const m_e=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(i){return!1}},g_e=d_e&&m_e((()=>{let e=!1;const t=new Request($Ae.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),y_e=d_e&&m_e((()=>uAe.isReadableStream(new Response("").body))),v_e={stream:y_e&&(e=>e.body)};var b_e;h_e&&(b_e=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!v_e[e]&&(v_e[e]=uAe.isFunction(b_e[e])?t=>t[e]():(t,n)=>{throw new pAe(`Response type '${e}' is not supported`,pAe.ERR_NOT_SUPPORT,n)})})));const x_e=async(e,t)=>{const n=uAe.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(uAe.isBlob(e))return e.size;if(uAe.isSpecCompliantForm(e)){const t=new Request($Ae.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return uAe.isArrayBufferView(e)||uAe.isArrayBuffer(e)?e.byteLength:(uAe.isURLSearchParams(e)&&(e+=""),uAe.isString(e)?(await p_e(e)).byteLength:void 0)})(t):n},w_e=h_e&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:o,timeout:a,onDownloadProgress:s,onUploadProgress:l,responseType:u,headers:c,withCredentials:h="same-origin",fetchOptions:d}=o_e(e);u=u?(u+"").toLowerCase():"text";let p,f=s_e([i,o&&o.toAbortSignal()],a);const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(l&&g_e&&"get"!==n&&"head"!==n&&0!==(g=await x_e(c,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(uAe.isFormData(r)&&(e=n.headers.get("content-type"))&&c.setContentType(e),n.body){const[e,t]=JAe(g,QAe(ZAe(l)));r=c_e(n.body,65536,e,t)}}uAe.isString(h)||(h=h?"include":"omit");const i="credentials"in Request.prototype;p=new Request(t,{...d,signal:f,method:n.toUpperCase(),headers:c.normalize().toJSON(),body:r,duplex:"half",credentials:i?h:void 0});let o=await fetch(p);const a=y_e&&("stream"===u||"response"===u);if(y_e&&(s||a&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=o[t]}));const t=uAe.toFiniteNumber(o.headers.get("content-length")),[n,r]=s&&JAe(t,QAe(ZAe(s),!0))||[];o=new Response(c_e(o.body,65536,n,(()=>{r&&r(),m&&m()})),e)}u=u||"text";let y=await v_e[uAe.findKey(v_e,u)||"text"](o,e);return!a&&m&&m(),await new Promise(((t,n)=>{KAe(t,n,{data:y,headers:WAe.from(o.headers),status:o.status,statusText:o.statusText,config:e,request:p})}))}catch(hNe){if(m&&m(),hNe&&"TypeError"===hNe.name&&/fetch/i.test(hNe.message))throw Object.assign(new pAe("Network Error",pAe.ERR_NETWORK,e,p),{cause:hNe.cause||hNe});throw pAe.from(hNe,hNe&&hNe.code,e,p)}}),k_e={http:null,xhr:a_e,fetch:w_e};uAe.forEach(k_e,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));const S_e=e=>`- ${e}`,E_e=e=>uAe.isFunction(e)||null===e||!1===e,I_e=e=>{e=uAe.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){let t;if(n=e[o],r=n,!E_e(n)&&(r=k_e[(t=String(n)).toLowerCase()],void 0===r))throw new pAe(`Unknown adapter '${t}'`);if(r)break;i[t||"#"+o]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return`adapter ${t} `+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(S_e).join("\n"):" "+S_e(e[0]):"as no adapter specified";throw new pAe("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function T_e(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new qAe(null,e)}function C_e(e){T_e(e),e.headers=WAe.from(e.headers),e.data=VAe.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return I_e(e.adapter||MAe.adapter)(e).then((function(t){return T_e(e),t.data=VAe.call(e,e.transformResponse,t),t.headers=WAe.from(t.headers),t}),(function(t){return GAe(t)||(T_e(e),t&&t.response&&(t.response.data=VAe.call(e,e.transformResponse,t.response),t.response.headers=WAe.from(t.response.headers))),Promise.reject(t)}))}const A_e="1.7.7",__e={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{__e[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const N_e={};__e.transitional=function(e,t,n){function r(e,t){return"[Axios v1.7.7] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,o)=>{if(!1===e)throw new pAe(r(i," has been removed"+(t?" in "+t:"")),pAe.ERR_DEPRECATED);return t&&!N_e[i]&&(N_e[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}};const O_e={assertOptions:function(e,t,n){if("object"!==typeof e)throw new pAe("options must be an object",pAe.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],a=t[o];if(a){const t=e[o],n=void 0===t||a(t,o,e);if(!0!==n)throw new pAe("option "+o+" must be "+n,pAe.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new pAe("Unknown option "+o,pAe.ERR_BAD_OPTION)}},validators:__e},R_e=O_e.validators;class $_e{constructor(e){this.defaults=e,this.interceptors={request:new IAe,response:new IAe}}async request(e,t){try{return await this._request(e,t)}catch(hNe){if(hNe instanceof Error){let t;Error.captureStackTrace?Error.captureStackTrace(t={}):t=new Error;const r=t.stack?t.stack.replace(/^.+\n/,""):"";try{hNe.stack?r&&!String(hNe.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(hNe.stack+="\n"+r):hNe.stack=r}catch(n){}}throw hNe}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=i_e(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&O_e.assertOptions(n,{silentJSONParsing:R_e.transitional(R_e.boolean),forcedJSONParsing:R_e.transitional(R_e.boolean),clarifyTimeoutError:R_e.transitional(R_e.boolean)},!1),null!=r&&(uAe.isFunction(r)?t.paramsSerializer={serialize:r}:O_e.assertOptions(r,{encode:R_e.function,serialize:R_e.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&uAe.merge(i.common,i[t.method]);i&&uAe.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=WAe.concat(o,i);const a=[];let s=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const l=[];let u;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let c,h=0;if(!s){const e=[C_e.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,l),c=e.length,u=Promise.resolve(t);h<c;)u=u.then(e[h++],e[h++]);return u}c=a.length;let d=t;for(h=0;h<c;){const e=a[h++],t=a[h++];try{d=e(d)}catch(p){t.call(this,p);break}}try{u=C_e.call(this,d)}catch(p){return Promise.reject(p)}for(h=0,c=l.length;h<c;)u=u.then(l[h++],l[h++]);return u}getUri(e){return EAe(n_e((e=i_e(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}uAe.forEach(["delete","get","head","options"],(function(e){$_e.prototype[e]=function(t,n){return this.request(i_e(n||{},{method:e,url:t,data:(n||{}).data}))}})),uAe.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(i_e(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}$_e.prototype[e]=t(),$_e.prototype[e+"Form"]=t(!0)}));const D_e=$_e;class P_e{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new qAe(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new P_e((function(t){e=t}));return{token:t,cancel:e}}}const M_e=P_e;const F_e={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(F_e).forEach((e=>{let[t,n]=e;F_e[n]=t}));const L_e=F_e;const j_e=function e(t){const n=new D_e(t),r=wCe(D_e.prototype.request,n);return uAe.extend(r,D_e.prototype,n,{allOwnKeys:!0}),uAe.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(i_e(t,n))},r}(MAe);j_e.Axios=D_e,j_e.CanceledError=qAe,j_e.CancelToken=M_e,j_e.isCancel=GAe,j_e.VERSION=A_e,j_e.toFormData=vAe,j_e.AxiosError=pAe,j_e.Cancel=j_e.CanceledError,j_e.all=function(e){return Promise.all(e)},j_e.spread=function(e){return function(t){return e.apply(null,t)}},j_e.isAxiosError=function(e){return uAe.isObject(e)&&!0===e.isAxiosError},j_e.mergeConfig=i_e,j_e.AxiosHeaders=WAe,j_e.formToJSON=e=>DAe(uAe.isHTMLForm(e)?new FormData(e):e),j_e.getAdapter=I_e,j_e.HttpStatusCode=L_e,j_e.default=j_e;const z_e=j_e,B_e=()=>{const[e,t]=(0,l.useState)("Your report content"),{items:n}=Zm((e=>e.expenses)),[r,i]=(0,l.useState)(""),[o,a]=(0,l.useState)(!1),[s,u]=(0,l.useState)(null);return(0,Lr.jsxs)(Al,{style:{padding:"20px",marginTop:"20px"},children:[(0,Lr.jsx)($o,{variant:"h2",textAlign:"center",borderRadius:"20px",sx:{boxShadow:"0px 4px 10px rgba(0, 0, 0, 0.2)"},children:"openAI-Powered Financial Report"}),"      ",(0,Lr.jsx)(fc,{variant:"contained",color:"primary",onClick:async()=>{a(!0),u(null);try{const e=await(async e=>{try{const t=await z_e.post("https://api-inference.huggingface.co/models/meta-llama/Meta-Llama-3-8B-Instruct",{inputs:e},{headers:{Authorization:"Bearer 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","Content-Type":"application/json"}});return t.data.length>0?t.data[0].generated_text:"No response from AI"}catch(s){throw console.error("Error fetching AI response:",s),new Error("Failed to fetch AI response")}})((()=>{const e=n.reduce(((e,t)=>e+(t.incomeAmount||0)),0),t=n.reduce(((e,t)=>e+(t.expenseAmount||0)),0),r=e-t,i=n.reduce(((e,t)=>(t.expenseType&&(e[t.expenseType]=(e[t.expenseType]||0)+(t.expenseAmount||0)),e)),{});return`\n                I need a financial report based on the following data with your suggessions to improve saving habbit please give full details:\n\n                1. **Total Income:** \u20b9${e.toFixed(2)}\n                2. **Total Expenses:** \u20b9${t.toFixed(2)}\n                3. **Net Savings:** \u20b9${r<0?0:r.toFixed(2)}\n                4. **Net Loss:** \u20b9${r>0?0:r.toFixed(2)}\n                5. **Expenses by Category:**\n                ${Object.entries(i).map((e=>{let[t,n]=e;return`   - ${t}: \u20b9${n.toFixed(2)}`})).join("\n")}\n                6. **Recommendations:**\n                ${r<0?'   - Consider reducing discretionary spending to improve net savings.\n   - Review recurring expenses and identify potential savings."cut"':'   - Maintain current spending habits to sustain savings.\n   - Consider investing surplus income for better financial growth."cut" '}\n                `})()),t=e.split('"cut"')[1].trim();i(t)}catch(hNe){u(hNe.message)}finally{a(!1)}},disabled:o,style:{marginTop:"10px"},children:"Generate AI Report"}),o&&(0,Lr.jsx)(co,{position:"fixed",top:"0",left:"0",width:"100%",bgcolor:"rgba(255, 255, 255, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",children:(0,Lr.jsx)(Ic,{style:{marginLeft:"10px"}})}),r&&(0,Lr.jsxs)(co,{sx:{marginTop:"20px",padding:"10px",backgroundColor:"#f0f0f0",borderRadius:"4px"},children:[(0,Lr.jsx)($o,{variant:"h6",children:"AI Suggestions:"}),(0,Lr.jsx)($o,{whiteSpace:"pre-line",children:r})]}),s&&(0,Lr.jsxs)($o,{variant:"body1",color:"error",style:{marginTop:"10px"},children:["Error: ",s]})]})},U_e=()=>{const e=hg(),{user:t}=Zm((e=>e.auth)),{items:n,status:r}=Zm((e=>e.expenses)),[i,o]=(0,l.useState)(!1),[a,s]=(0,l.useState)("all");(0,l.useEffect)((()=>{t&&e(_$(t.uid))}),[e,t]);return(0,Lr.jsxs)(Lr.Fragment,{children:[(0,Lr.jsxs)(io,{maxWidth:"lg",style:{marginTop:"20px",marginBottom:"20px",minHeight:"90vh"},children:[(0,Lr.jsxs)(wR,{container:!0,spacing:3,style:{paddingTop:"14%"},children:[(0,Lr.jsxs)(wR,{item:!0,xs:12,children:[(0,Lr.jsx)(fc,{variant:"contained",color:"primary",onClick:()=>{o(!0)},children:"Add Income/Expense"}),(0,Lr.jsxs)(qa,{size:"small",style:{marginLeft:"20px",minWidth:120},children:[(0,Lr.jsx)(Ua,{id:"filter-label",children:"Filter"}),(0,Lr.jsxs)(wu,{labelId:"filter-label",value:a,label:"Filter",onChange:e=>{s(e.target.value)},children:[(0,Lr.jsx)(_R,{value:"all",children:"All"}),(0,Lr.jsx)(_R,{value:"day",children:"Day(Today)"}),(0,Lr.jsx)(_R,{value:"week",children:"Week(This Week)"}),(0,Lr.jsx)(_R,{value:"month",children:"Month(This Month)"})]})]})]}),(0,Lr.jsx)(wR,{item:!0,xs:12,children:(0,Lr.jsx)(u$,{filter:a})}),n.length>0&&(0,Lr.jsx)(wR,{item:!0,xs:12,children:(0,Lr.jsx)(mCe,{Report:lZ,AiReport:PTe,OpenAiReport:B_e})})]}),(0,Lr.jsx)(D$,{open:i,handleClose:()=>o(!1)})]}),(0,Lr.jsx)(xCe,{})]})},W_e=fu((0,Lr.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function V_e(e){return Ae("MuiAvatar",e)}ao("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const G_e=to("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})(ko((e=>{let{theme:t}=e;return{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(t.vars||t).palette.background.default,...t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:{backgroundColor:t.palette.grey[400],...t.applyStyles("dark",{backgroundColor:t.palette.grey[600]})}}}]}}))),H_e=to("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),q_e=to(W_e,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});const K_e=l.forwardRef((function(e,t){const n=Io({props:e,name:"MuiAvatar"}),{alt:r,children:i,className:o,component:a="div",slots:s={},slotProps:u={},imgProps:c,sizes:h,src:d,srcSet:p,variant:f="circular",...m}=n;let g=null;const y=function(e){let{crossOrigin:t,referrerPolicy:n,src:r,srcSet:i}=e;const[o,a]=l.useState(!1);return l.useEffect((()=>{if(!r&&!i)return;a(!1);let e=!0;const o=new Image;return o.onload=()=>{e&&a("loaded")},o.onerror=()=>{e&&a("error")},o.crossOrigin=t,o.referrerPolicy=n,o.src=r,i&&(o.srcset=i),()=>{e=!1}}),[t,n,r,i]),o}({...c,src:d,srcSet:p}),v=d||p,b=v&&"error"!==y,x={...n,colorDefault:!b,component:a,variant:f};delete x.ownerState;const w=(e=>{const{classes:t,variant:n,colorDefault:r}=e;return _e({root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]},V_e,t)})(x),[k,S]=il("img",{className:w.img,elementType:H_e,externalForwardedProps:{slots:s,slotProps:{img:{...c,...u.img}}},additionalProps:{alt:r,src:d,srcSet:p,sizes:h},ownerState:x});return g=b?(0,Lr.jsx)(k,{...S}):i||0===i?i:v&&r?r[0]:(0,Lr.jsx)(q_e,{ownerState:x,className:w.fallback}),(0,Lr.jsx)(G_e,{as:a,className:Se(w.root,o),ref:t,...m,ownerState:x,children:g})})),X_e=K_e,Y_e=()=>{const e=hg(),t=ie(),{user:n}=Zm((e=>e.auth)),[r,i]=(0,l.useState)(null),o=Boolean(r),[a,s]=(0,l.useState)(!1),u=e=>{i(e.currentTarget)},c=()=>{i(null)},h=async()=>{await function(e){return Yc(e).signOut()}(yT),e(Uy()),e(aZ()),e(fZ()),t("/login"),c()},d=()=>{s(window.innerWidth<=600)};return(0,l.useEffect)((()=>(d(),window.addEventListener("resize",d),()=>{window.removeEventListener("resize",d)})),[]),(0,Lr.jsx)(zTe,{position:"static",children:(0,Lr.jsxs)(bCe,{children:[(0,Lr.jsx)($o,{variant:"h6",style:{flexGrow:1},children:"Daily Expense Tracker"}),a?(0,Lr.jsx)(ic,{color:"inherit",onClick:u,children:(0,Lr.jsx)(X_e,{})}):(0,Lr.jsxs)($o,{variant:"h6",style:{flexGrow:1},children:["Welcome ",null===n||void 0===n?void 0:n.fullName]}),(0,Lr.jsx)(fc,{color:"inherit",onClick:()=>t("/dashboard"),children:"Dashboard"}),!a&&(0,Lr.jsx)(ic,{color:"inherit",onClick:u,children:(0,Lr.jsx)(X_e,{})}),(0,Lr.jsx)(Vl,{anchorEl:r,open:o,onClose:c,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:a?(0,Lr.jsx)(_R,{onClick:h,children:"Logout"}):(0,Lr.jsxs)(Lr.Fragment,{children:[(0,Lr.jsx)(_R,{disabled:!0,children:`Welcome ${null===n||void 0===n?void 0:n.fullName}`}),(0,Lr.jsx)(_R,{onClick:h,children:"Logout"})]})})]})})},Q_e=e=>{let{children:t}=e;const{isAuthenticated:n}=Zm((e=>e.auth));return n?t:(0,Lr.jsx)(ye,{to:"/login"})};const J_e=function(){const e=hg(),{isAuthenticated:t}=Zm((e=>e.auth));(0,l.useEffect)((()=>{const t=function(e,t,n,r){return Yc(e).onAuthStateChanged(t,n,r)}(yT,(t=>{if(t){const{displayName:n,email:r,uid:i}=t;e(By({uid:i,fullName:n,email:r,profession:"Unknown"}))}else e(Uy())}));return()=>t()}),[e]);const n=[{path:"/daily-expense-tracker-ai",element:t?(0,Lr.jsx)(ye,{to:"/dashboard"}):(0,Lr.jsx)(ye,{to:"/login"}),protected:!1},{path:"daily-expense-tracker-ai/login",element:t?(0,Lr.jsx)(ye,{to:"/dashboard"}):(0,Lr.jsx)(lR,{}),protected:!1},{path:"daily-expense-tracker-ai/signup",element:t?(0,Lr.jsx)(ye,{to:"/dashboard"}):(0,Lr.jsx)(hR,{}),protected:!1},{path:"daily-expense-tracker-ai/dashboard",element:(0,Lr.jsx)(Q_e,{children:(0,Lr.jsx)(U_e,{})}),protected:!0}];return(0,Lr.jsxs)("div",{style:{position:"relative"},children:[t&&(0,Lr.jsx)("div",{style:{position:"fixed",width:"100%",zIndex:"1000"},children:(0,Lr.jsx)(Y_e,{})}),(0,Lr.jsx)(xe,{children:n.map(((e,t)=>(0,Lr.jsx)(ve,{path:e.path,element:e.element},t)))})]})},Z_e=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,6453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:o,getTTFB:a}=t;n(e),r(e),i(e),o(e),a(e)}))},eNe=My({name:"openAi",initialState:{aiResponse:"",loading:!1,error:null},reducers:{setAiResponse:(e,t)=>{e.aiResponse=t.payload},setLoading:(e,t)=>{e.loading=t.payload},setError:(e,t)=>{e.error=t.payload},clearOpenAiData:e=>{e.aiResponse="",e.loading=!1,e.error=null}}}),{setAiResponse:tNe,setLoading:nNe,setError:rNe,clearOpenAiData:iNe}=eNe.actions,oNe=function(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=e??{};let o=new my;return t&&(function(e){return"boolean"===typeof e}(t)?o.push(wg):o.push(kg(t.extraArgument))),o},{reducer:n,middleware:r,devTools:i=!0,preloadedState:o,enhancers:a}=e||{};let s,l;if("function"===typeof n)s=n;else{if(!gg(n))throw new Error(jy(1));s=vg(n)}l="function"===typeof r?r(t):t();let u=bg;i&&(u=dy({trace:!1,..."object"===typeof i&&i}));const c=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>(n,r)=>{const i=e(n,r);let o=()=>{throw new Error(dg(15))};const a={getState:i.getState,dispatch:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return o(e,...n)}},s=t.map((e=>e(a)));return o=bg(...s)(i.dispatch),{...i,dispatch:o}}}(...l),h=wy(c);return yg(s,o,u(..."function"===typeof a?a(h):h()))}({reducer:{auth:Wy,expenses:O$,report:sZ,aiReport:mZ,openAi:eNe.reducer}}),aNe=oNe;new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(dNe){}new Map;const sNe=u.startTransition;Ds.flushSync,u.useId;function lNe(e){let{basename:t,children:n,future:r,window:i}=e,o=l.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:i,v5Compat:!0})&&(a={}),b((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return g("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:y(t)}),null,a)));let s=o.current,[u,c]=l.useState({action:s.action,location:s.location}),{v7_startTransition:h}=r||{},d=l.useCallback((e=>{h&&sNe?sNe((()=>c(e))):c(e)}),[c,h]);return l.useLayoutEffect((()=>s.listen(d)),[s,d]),l.createElement(be,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:s,future:r})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var uNe,cNe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(uNe||(uNe={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(cNe||(cNe={}));c.createRoot(document.getElementById("root")).render((0,Lr.jsx)(l.StrictMode,{children:(0,Lr.jsx)(ag,{store:aNe,children:(0,Lr.jsx)(lNe,{children:(0,Lr.jsx)(J_e,{})})})})),Z_e()})()})();
//# sourceMappingURL=main.657ccad0.js.map